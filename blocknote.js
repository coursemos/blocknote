/*! For license information please see main.30308063.js.LICENSE.txt */ function blocknote(){"use strict";var e={2730(e,t,n){var r=n(5043),o=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,s={};function a(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)l.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,o,i,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var o,i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?(o=t,(!!u.call(f,o)||!u.call(p,o)&&(h.test(o)?f[o]=!0:(p[o]=!0,!1)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($,_);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,I=Object.assign;function H(e){if(void 0===D)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);D=n&&n[1]||""}return"\n"+D+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(r){var o=r}Reflect.construct(e,[],t)}else{try{t.call()}catch(i){o=i}e.call(t.prototype)}}else{try{throw Error()}catch(l){o=l}e()}}catch(s){if(s&&o&&"string"==typeof s.stack){for(var a=s.stack.split("\n"),c=o.stack.split("\n"),d=a.length-1,u=c.length-1;1<=d&&0<=u&&a[d]!==c[u];)u--;for(;1<=d&&0<=u;d--,u--)if(a[d]!==c[u]){if(1!==d||1!==u)do if(d--,0>--u||a[d]!==c[u]){var h="\n"+a[d].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=d&&0<=u);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function V(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function j(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case N:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case E:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case M:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case P:n=t._payload,t=t._init;try{return e(t(n))}catch(r){}}return null}(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function F(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=U(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=F(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Z(e,t);var n=F(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Y(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y(e,t.type,F(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Y(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ee=Array.isArray;function et(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+F(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function en(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function er(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(ee(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:F(n)}}function eo(e,t){var n=F(t.value),r=F(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ei(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function el(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function es(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?el(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ea,ec,ed=(ec=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ea=ea||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ea.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ec(e,t)})}:ec);function eu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ep=["Webkit","ms","Moz","O"];function ef(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||eh.hasOwnProperty(e)&&eh[e]?(""+t).trim():t+"px"}function em(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ef(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(eh).forEach(function(e){ep.forEach(function(t){eh[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=eh[e]})});var eg=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e$(e,t){if(t){if(eg[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function e_(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eb=null;function ey(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ev=null,ew=null,ek=null;function e0(e){if(e=r5(e)){if("function"!=typeof ev)throw Error(i(280));var t=e.stateNode;t&&(t=rL(t),ev(e.stateNode,e.type,t))}}function ex(e){ew?ek?ek.push(e):ek=[e]:ew=e}function eC(){if(ew){var e=ew,t=ek;if(ek=ew=null,e0(e),t)for(e=0;e<t.length;e++)e0(t[e])}}function eS(e,t){return e(t)}function e1(){}var e2=!1;function e3(e,t,n){if(e2)return e(t,n);e2=!0;try{return eS(e,t,n)}finally{e2=!1,(null!==ew||null!==ek)&&(e1(),eC())}}function eE(e,t){var n=e.stateNode;if(null===n)return null;var r=rL(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var e4=!1;if(d)try{var eM={};Object.defineProperty(eM,"passive",{get:function(){e4=!0}}),window.addEventListener("test",eM,eM),window.removeEventListener("test",eM,eM)}catch(eT){e4=!1}function e8(e,t,n,r,o,i,l,s,a){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var e6=!1,eN=null,e5=!1,e7=null,eL={onError:function(e){e6=!0,eN=e}};function eP(e,t,n,r,o,i,l,s,a){e6=!1,eN=null,e8.apply(eL,arguments)}function eA(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function eR(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function eO(e){if(eA(e)!==e)throw Error(i(188))}function eD(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=eA(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var l=o.alternate;if(null===l){if(null!==(r=o.return)){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return eO(o),e;if(l===r)return eO(o),t;l=l.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=l;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=l;break}if(a===r){s=!0,r=o,n=l;break}a=a.sibling}if(!s){for(a=l.child;a;){if(a===n){s=!0,n=l,r=o;break}if(a===r){s=!0,r=l,n=o;break}a=a.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?eI(e):null}function eI(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=eI(e);if(null!==t)return t;e=e.sibling}return null}var eH=o.unstable_scheduleCallback,ez=o.unstable_cancelCallback,e9=o.unstable_shouldYield,eB=o.unstable_requestPaint,eV=o.unstable_now,ej=o.unstable_getCurrentPriorityLevel,eF=o.unstable_ImmediatePriority,eU=o.unstable_UserBlockingPriority,eW=o.unstable_NormalPriority,eG=o.unstable_LowPriority,eq=o.unstable_IdlePriority,eK=null,eJ=null,eZ=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(eX(e)/eQ|0)|0},eX=Math.log,eQ=Math.LN2,eY=64,te=4194304;function tt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,l=268435455&n;if(0!==l){var s=l&~o;0!==s?r=tt(s):0!=(i&=l)&&(r=tt(i))}else 0!=(l=n&~o)?r=tt(l):0!==i&&(r=tt(i));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!=(4194240&i)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-eZ(t)),r|=e[n],t&=~o;return r}function tr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}function to(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ti(){var e=eY;return 0==(4194240&(eY<<=1))&&(eY=64),e}function tl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ts(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-eZ(t)]=n}function ta(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-eZ(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var tc=0;function td(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var tu,th,tp,tf,tm,tg=!1,t$=[],t_=null,tb=null,ty=null,tv=new Map,tw=new Map,tk=[],t0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tx(e,t){switch(e){case"focusin":case"focusout":t_=null;break;case"dragenter":case"dragleave":tb=null;break;case"mouseover":case"mouseout":ty=null;break;case"pointerover":case"pointerout":tv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tw.delete(t.pointerId)}}function tC(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&null!==(t=r5(t))&&th(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function tS(e){var t=rN(e.target);if(null!==t){var n=eA(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=eR(n)))return e.blockedOn=t,void tm(e.priority,function(){tp(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}}e.blockedOn=null}function t1(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=t7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=r5(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);eb=r,n.target.dispatchEvent(r),eb=null,t.shift()}return!0}function t2(e,t,n){t1(e)&&n.delete(t)}function t3(){tg=!1,null!==t_&&t1(t_)&&(t_=null),null!==tb&&t1(tb)&&(tb=null),null!==ty&&t1(ty)&&(ty=null),tv.forEach(t2),tw.forEach(t2)}function tE(e,t){e.blockedOn===t&&(e.blockedOn=null,tg||(tg=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,t3)))}function t4(e){function t(t){return tE(t,e)}if(0<t$.length){tE(t$[0],e);for(var n=1;n<t$.length;n++){var r=t$[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==t_&&tE(t_,e),null!==tb&&tE(tb,e),null!==ty&&tE(ty,e),tv.forEach(t),tw.forEach(t),n=0;n<tk.length;n++)(r=tk[n]).blockedOn===e&&(r.blockedOn=null);for(;0<tk.length&&null===(n=tk[0]).blockedOn;)tS(n),null===n.blockedOn&&tk.shift()}var tM=y.ReactCurrentBatchConfig,tT=!0;function t8(e,t,n,r){var o=tc,i=tM.transition;tM.transition=null;try{tc=1,tN(e,t,n,r)}finally{tc=o,tM.transition=i}}function t6(e,t,n,r){var o=tc,i=tM.transition;tM.transition=null;try{tc=4,tN(e,t,n,r)}finally{tc=o,tM.transition=i}}function tN(e,t,n,r){if(tT){var o=t7(e,t,n,r);if(null===o)rc(e,t,r,t5,n),tx(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return t_=tC(t_,e,t,n,r,o),!0;case"dragenter":return tb=tC(tb,e,t,n,r,o),!0;case"mouseover":return ty=tC(ty,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return tv.set(i,tC(tv.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,tw.set(i,tC(tw.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(tx(e,r),4&t&&-1<t0.indexOf(e)){for(;null!==o;){var i=r5(o);if(null!==i&&tu(i),null===(i=t7(e,t,n,r))&&rc(e,t,r,t5,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else rc(e,t,r,null,n)}}var t5=null;function t7(e,t,n,r){if(t5=null,null!==(e=rN(e=ey(r)))){if(null===(t=eA(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=eR(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return t5=e,null}function tL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ej()){case eF:return 1;case eU:return 4;case eW:case eG:return 16;case eq:return 536870912;default:return 16}default:return 16}}var tP=null,tA=null,tR=null;function tO(){if(tR)return tR;var e,t,n=tA,r=n.length,o="value"in tP?tP.value:tP.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var l=r-e;for(t=1;t<=l&&n[r-t]===o[i-t];t++);return tR=o.slice(e,1<t?1-t:void 0)}function tD(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tI(){return!0}function tH(){return!1}function tz(e){function t(t,n,r,o,i){for(var l in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?tI:tH,this.isPropagationStopped=tH,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tI)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tI)},persist:function(){},isPersistent:tI}),t}var t9,tB,tV,tj={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tF=tz(tj),tU=I({},tj,{view:0,detail:0}),tW=tz(tU),tG=I({},tU,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tV&&(tV&&"mousemove"===e.type?(t9=e.screenX-tV.screenX,tB=e.screenY-tV.screenY):tB=t9=0,tV=e),t9)},movementY:function(e){return"movementY"in e?e.movementY:tB}}),tq=tz(tG),tK=tz(I({},tG,{dataTransfer:0})),tJ=tz(I({},tU,{relatedTarget:0})),tZ=tz(I({},tj,{animationName:0,elapsedTime:0,pseudoElement:0})),tX=I({},tj,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tQ=tz(tX),tY=tz(I({},tj,{data:0})),ne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=nn[e])&&!!t[e]}function no(){return nr}var ni=I({},tU,{key:function(e){if(e.key){var t=ne[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tD(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?nt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(e){return"keypress"===e.type?tD(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tD(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),nl=tz(ni),ns=tz(I({},tG,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),na=tz(I({},tU,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no})),nc=tz(I({},tj,{propertyName:0,elapsedTime:0,pseudoElement:0})),nd=I({},tG,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nu=tz(nd),nh=[9,13,27,32],np=d&&"CompositionEvent"in window,nf=null;d&&"documentMode"in document&&(nf=document.documentMode);var nm=d&&"TextEvent"in window&&!nf,ng=d&&(!np||nf&&8<nf&&11>=nf),n$=!1;function n_(e,t){switch(e){case"keyup":return -1!==nh.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ny=!1,nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nv[e.type]:"textarea"===t}function nk(e,t,n,r){ex(r),0<(t=ru(t,"onChange")).length&&(n=new tF("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var n0=null,nx=null;function nC(e){rr(e,0)}function nS(e){if(G(r7(e)))return e}function n1(e,t){if("change"===e)return t}var n2=!1;if(d){if(d){var n3="oninput"in document;if(!n3){var nE=document.createElement("div");nE.setAttribute("oninput","return;"),n3="function"==typeof nE.oninput}lw=n3}else lw=!1;n2=lw&&(!document.documentMode||9<document.documentMode)}function n4(){n0&&(n0.detachEvent("onpropertychange",nM),nx=n0=null)}function nM(e){if("value"===e.propertyName&&nS(nx)){var t=[];nk(t,nx,e,ey(e)),e3(nC,t)}}function nT(e,t,n){"focusin"===e?(n4(),nx=n,(n0=t).attachEvent("onpropertychange",nM)):"focusout"===e&&n4()}function n8(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nS(nx)}function n6(e,t){if("click"===e)return nS(t)}function nN(e,t){if("input"===e||"change"===e)return nS(t)}var n5="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function n7(e,t){if(n5(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!u.call(t,o)||!n5(e[o],t[o]))return!1}return!0}function nL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nP(e,t){var n,r=nL(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nL(r)}}function nA(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function nR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nO=d&&"documentMode"in document&&11>=document.documentMode,nD=null,nI=null,nH=null,nz=!1;function n9(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;nz||null==nD||nD!==q(r)||(r="selectionStart"in(r=nD)&&nR(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nH&&n7(nH,r)||(nH=r,0<(r=ru(nI,"onSelect")).length&&(t=new tF("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nD)))}function nB(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nV={animationend:nB("Animation","AnimationEnd"),animationiteration:nB("Animation","AnimationIteration"),animationstart:nB("Animation","AnimationStart"),transitionend:nB("Transition","TransitionEnd")},nj={},nF={};function nU(e){if(nj[e])return nj[e];if(!nV[e])return e;var t,n=nV[e];for(t in n)if(n.hasOwnProperty(t)&&t in nF)return nj[e]=n[t];return e}d&&(nF=document.createElement("div").style,"AnimationEvent"in window||(delete nV.animationend.animation,delete nV.animationiteration.animation,delete nV.animationstart.animation),"TransitionEvent"in window||delete nV.transitionend.transition);var nW=nU("animationend"),nG=nU("animationiteration"),nq=nU("animationstart"),nK=nU("transitionend"),nJ=new Map,nZ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nX(e,t){nJ.set(e,t),a(t,[e])}for(var nQ=0;nQ<nZ.length;nQ++){var nY=nZ[nQ];nX(nY.toLowerCase(),"on"+(nY[0].toUpperCase()+nY.slice(1)))}nX(nW,"onAnimationEnd"),nX(nG,"onAnimationIteration"),nX(nq,"onAnimationStart"),nX("dblclick","onDoubleClick"),nX("focusin","onFocus"),nX("focusout","onBlur"),nX(nK,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var re="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rt=new Set("cancel close invalid load scroll toggle".split(" ").concat(re));function rn(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,l,s,a,c){if(eP.apply(this,arguments),e6){if(!e6)throw Error(i(198));var d=eN;e6=!1,eN=null,e5||(e5=!0,e7=d)}}(r,t,void 0,e),e.currentTarget=null}function rr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var s=r[l],a=s.instance,c=s.currentTarget;if(s=s.listener,a!==i&&o.isPropagationStopped())break e;rn(o,s,c),i=a}else for(l=0;l<r.length;l++){if(a=(s=r[l]).instance,c=s.currentTarget,s=s.listener,a!==i&&o.isPropagationStopped())break e;rn(o,s,c),i=a}}}if(e5)throw e=e7,e5=!1,e7=null,e}function ro(e,t){var n=t[rT];void 0===n&&(n=t[rT]=new Set);var r=e+"__bubble";n.has(r)||(ra(t,e,2,!1),n.add(r))}function ri(e,t,n){var r=0;t&&(r|=4),ra(n,e,r,t)}var rl="_reactListening"+Math.random().toString(36).slice(2);function rs(e){if(!e[rl]){e[rl]=!0,l.forEach(function(t){"selectionchange"!==t&&(rt.has(t)||ri(t,!1,e),ri(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[rl]||(t[rl]=!0,ri("selectionchange",!1,t))}}function ra(e,t,n,r){switch(tL(t)){case 1:var o=t8;break;case 4:o=t6;break;default:o=tN}n=o.bind(null,t,n,e),o=void 0,e4&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function rc(e,t,n,r,o){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var l=r.tag;if(3===l||4===l){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===l)for(l=r.return;null!==l;){var a=l.tag;if((3===a||4===a)&&((a=l.stateNode.containerInfo)===o||8===a.nodeType&&a.parentNode===o))return;l=l.return}for(;null!==s;){if(null===(l=rN(s)))return;if(5===(a=l.tag)||6===a){r=i=l;continue e}s=s.parentNode}}r=r.return}e3(function(){var r=i,o=ey(n),l=[];e:{var s=nJ.get(e);if(void 0!==s){var a=tF,c=e;switch(e){case"keypress":if(0===tD(n))break e;case"keydown":case"keyup":a=nl;break;case"focusin":c="focus",a=tJ;break;case"focusout":c="blur",a=tJ;break;case"beforeblur":case"afterblur":a=tJ;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=tq;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=tK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=na;break;case nW:case nG:case nq:a=tZ;break;case nK:a=nc;break;case"scroll":a=tW;break;case"wheel":a=nu;break;case"copy":case"cut":case"paste":a=tQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=ns}var d=0!=(4&t),u=!d&&"scroll"===e,h=d?null!==s?s+"Capture":null:s;d=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&null!=(m=eE(f,h))&&d.push(rd(f,m,p))),u)break;f=f.return}0<d.length&&(s=new a(s,c,null,n,o),l.push({event:s,listeners:d}))}}if(0==(7&t)){if(a="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===eb||!(c=n.relatedTarget||n.fromElement)||!rN(c)&&!c[rM])&&(a||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,a?(a=r,null!==(c=(c=n.relatedTarget||n.toElement)?rN(c):null)&&(c!==(u=eA(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(a=null,c=r),a!==c)){if(d=tq,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=ns,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==a?s:r7(a),p=null==c?s:r7(c),(s=new d(m,f+"leave",a,n,o)).target=u,s.relatedTarget=p,m=null,rN(o)===r&&((d=new d(h,f+"enter",c,n,o)).target=p,d.relatedTarget=u,m=d),u=m,a&&c)e:{for(h=c,f=0,p=d=a;p;p=rh(p))f++;for(p=0,m=h;m;m=rh(m))p++;for(;0<f-p;)d=rh(d),f--;for(;0<p-f;)h=rh(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=rh(d),h=rh(h)}d=null}else d=null;null!==a&&rp(l,s,a,d,!1),null!==c&&null!==u&&rp(l,u,c,d,!0)}if("select"===(a=(s=r?r7(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===a&&"file"===s.type)var g,$=n1;else if(nw(s)){if(n2)$=nN;else{$=n8;var _=nT}}else(a=s.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&($=n6);switch($&&($=$(e,r))?nk(l,$,n,o):(_&&_(e,s,r),"focusout"===e&&(_=s._wrapperState)&&_.controlled&&"number"===s.type&&Y(s,"number",s.value)),_=r?r7(r):window,e){case"focusin":(nw(_)||"true"===_.contentEditable)&&(nD=_,nI=r,nH=null);break;case"focusout":nH=nI=nD=null;break;case"mousedown":nz=!0;break;case"contextmenu":case"mouseup":case"dragend":nz=!1,n9(l,n,o);break;case"selectionchange":if(nO)break;case"keydown":case"keyup":n9(l,n,o)}if(np)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ny?n_(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(ng&&"ko"!==n.locale&&(ny||"onCompositionStart"!==b?"onCompositionEnd"===b&&ny&&(g=tO()):(tA="value"in(tP=o)?tP.value:tP.textContent,ny=!0)),0<(_=ru(r,b)).length&&(b=new tY(b,e,null,n,o),l.push({event:b,listeners:_}),g?b.data=g:null!==(g=nb(n))&&(b.data=g))),(g=nm?function(e,t){switch(e){case"compositionend":return nb(t);case"keypress":return 32!==t.which?null:(n$=!0," ");case"textInput":return" "===(e=t.data)&&n$?null:e;default:return null}}(e,n):function(e,t){if(ny)return"compositionend"===e||!np&&n_(e,t)?(e=tO(),tR=tA=tP=null,ny=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ng&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=ru(r,"onBeforeInput")).length&&(o=new tY("onBeforeInput","beforeinput",null,n,o),l.push({event:o,listeners:r}),o.data=g)}rr(l,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ru(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=eE(e,n))&&r.unshift(rd(e,i,o)),null!=(i=eE(e,t))&&r.push(rd(e,i,o))),e=e.return}return r}function rh(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag);return e||null}function rp(e,t,n,r,o){for(var i=t._reactName,l=[];null!==n&&n!==r;){var s=n,a=s.alternate,c=s.stateNode;if(null!==a&&a===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(a=eE(n,i))&&l.unshift(rd(n,a,s)):o||null!=(a=eE(n,i))&&l.push(rd(n,a,s))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}var rf=/\r\n?/g,rm=/\u0000|\uFFFD/g;function rg(e){return("string"==typeof e?e:""+e).replace(rf,"\n").replace(rm,"")}function r$(e,t,n){if(t=rg(t),rg(e)!==t&&n)throw Error(i(425))}function r_(){}var rb=null,ry=null;function rv(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rw="function"==typeof setTimeout?setTimeout:void 0,rk="function"==typeof clearTimeout?clearTimeout:void 0,r0="function"==typeof Promise?Promise:void 0,rx="function"==typeof queueMicrotask?queueMicrotask:void 0!==r0?function(e){return r0.resolve(null).then(e).catch(rC)}:rw;function rC(e){setTimeout(function(){throw e})}function rS(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType){if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void t4(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=o}while(n);t4(t)}function r1(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function r2(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var r3=Math.random().toString(36).slice(2),rE="__reactFiber$"+r3,r4="__reactProps$"+r3,rM="__reactContainer$"+r3,rT="__reactEvents$"+r3,r8="__reactListeners$"+r3,r6="__reactHandles$"+r3;function rN(e){var t=e[rE];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rM]||n[rE]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=r2(e);null!==e;){if(n=e[rE])return n;e=r2(e)}return t}n=(e=n).parentNode}return null}function r5(e){return(e=e[rE]||e[rM])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function r7(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function rL(e){return e[r4]||null}var rP=[],rA=-1;function rR(e){return{current:e}}function rO(e){0>rA||(e.current=rP[rA],rP[rA]=null,rA--)}function rD(e,t){rP[++rA]=e.current,e.current=t}var rI={},rH=rR(rI),rz=rR(!1),r9=rI;function rB(e,t){var n=e.type.contextTypes;if(!n)return rI;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function rV(e){return null!==(e=e.childContextTypes)&&void 0!==e}function rj(){rO(rz),rO(rH)}function rF(e,t,n){if(rH.current!==rI)throw Error(i(168));rD(rH,t),rD(rz,n)}function rU(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,j(e)||"Unknown",o));return I({},n,r)}function rW(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rI,r9=rH.current,rD(rH,e),rD(rz,rz.current),!0}function rG(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=rU(e,t,r9),r.__reactInternalMemoizedMergedChildContext=e,rO(rz),rO(rH),rD(rH,e)):rO(rz),rD(rz,n)}var rq=null,rK=!1,rJ=!1;function rZ(e){null===rq?rq=[e]:rq.push(e)}function rX(){if(!rJ&&null!==rq){rJ=!0;var e=0,t=tc;try{var n=rq;for(tc=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}rq=null,rK=!1}catch(o){throw null!==rq&&(rq=rq.slice(e+1)),eH(eF,rX),o}finally{tc=t,rJ=!1}}return null}var rQ=[],rY=0,oe=null,ot=0,on=[],or=0,oo=null,oi=1,ol="";function oa(e,t){rQ[rY++]=ot,rQ[rY++]=oe,oe=e,ot=t}function oc(e,t,n){on[or++]=oi,on[or++]=ol,on[or++]=oo,oo=e;var r=oi;e=ol;var o=32-eZ(r)-1;r&=~(1<<o),n+=1;var i=32-eZ(t)+o;if(30<i){var l=o-o%5;i=(r&(1<<l)-1).toString(32),r>>=l,o-=l,oi=1<<32-eZ(t)+o|n<<o|r,ol=i+e}else oi=1<<i|n<<o|r,ol=e}function od(e){null!==e.return&&(oa(e,1),oc(e,1,0))}function ou(e){for(;e===oe;)oe=rQ[--rY],rQ[rY]=null,ot=rQ[--rY],rQ[rY]=null;for(;e===oo;)oo=on[--or],on[or]=null,ol=on[--or],on[or]=null,oi=on[--or],on[or]=null}var oh=null,op=null,of=!1,om=null;function og(e,t){var n=sY(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function o$(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oh=e,op=r1(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oh=e,op=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==oo?{id:oi,overflow:ol}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=sY(18,null,null,0)).stateNode=t,n.return=e,e.child=n,oh=e,op=null,!0);default:return!1}}function o_(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ob(e){if(of){var t=op;if(t){var n=t;if(!o$(e,t)){if(o_(e))throw Error(i(418));t=r1(n.nextSibling);var r=oh;t&&o$(e,t)?og(r,n):(e.flags=-4097&e.flags|2,of=!1,oh=e)}}else{if(o_(e))throw Error(i(418));e.flags=-4097&e.flags|2,of=!1,oh=e}}}function oy(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oh=e}function ov(e){if(e!==oh)return!1;if(!of)return oy(e),of=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rv(e.type,e.memoizedProps)),t&&(t=op)){if(o_(e))throw ow(),Error(i(418));for(;t;)og(e,t),t=r1(t.nextSibling)}if(oy(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var t,n=e.data;if("/$"===n){if(0===t){op=r1(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}op=null}}else op=oh?r1(e.stateNode.nextSibling):null;return!0}function ow(){for(var e=op;e;)e=r1(e.nextSibling)}function ok(){op=oh=null,of=!1}function o0(e){null===om?om=[e]:om.push(e)}var ox=y.ReactCurrentBatchConfig;function oC(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,l=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===l?t.ref:((t=function(e){var t=o.refs;null===e?delete t[l]:t[l]=e})._stringRef=l,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function oS(e,t){throw Error(i(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o1(e){return(0,e._init)(e._payload)}function o2(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=at(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=ai(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===P&&o1(i)===t.type)?((r=o(t,n.props)).ref=oC(e,t,n),r.return=e,r):((r=an(n.type,n.key,n.props,null,e.mode,r)).ref=oC(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=al(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=ar(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=ai(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case v:return(n=an(t.type,t.key,t.props,null,e.mode,n)).ref=oC(e,null,t),n.return=e,n;case w:return(t=al(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(ee(t)||O(t))return(t=ar(t,e.mode,n,null)).return=e,t;oS(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===o?c(e,t,n,r):null;case w:return n.key===o?d(e,t,n,r):null;case P:return p(e,t,(o=n._init)(n._payload),r)}if(ee(n)||O(n))return null!==o?null:u(e,t,n,r,null);oS(e,n)}return null}function f(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case v:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case w:return d(t,e=e.get(null===r.key?n:r.key)||null,r,o);case P:return f(e,t,n,(0,r._init)(r._payload),o)}if(ee(r)||O(r))return u(t,e=e.get(n)||null,r,o,null);oS(t,r)}return null}return function a(c,d,u,m){if("object"==typeof u&&null!==u&&u.type===k&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case v:e:{for(var g=u.key,$=d;null!==$;){if($.key===g){if((g=u.type)===k){if(7===$.tag){n(c,$.sibling),(d=o($,u.props.children)).return=c,c=d;break e}}else if($.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===P&&o1(g)===$.type){n(c,$.sibling),(d=o($,u.props)).ref=oC(c,$,u),d.return=c,c=d;break e}n(c,$);break}t(c,$),$=$.sibling}u.type===k?((d=ar(u.props.children,c.mode,m,u.key)).return=c,c=d):((m=an(u.type,u.key,u.props,null,c.mode,m)).ref=oC(c,d,u),m.return=c,c=m)}return s(c);case w:e:{for($=u.key;null!==d;){if(d.key===$){if(4===d.tag&&d.stateNode.containerInfo===u.containerInfo&&d.stateNode.implementation===u.implementation){n(c,d.sibling),(d=o(d,u.children||[])).return=c,c=d;break e}n(c,d);break}t(c,d),d=d.sibling}(d=al(u,c.mode,m)).return=c,c=d}return s(c);case P:return a(c,d,($=u._init)(u._payload),m)}if(ee(u))return function o(i,s,a,c){for(var d=null,u=null,m=s,g=s=0,$=null;null!==m&&g<a.length;g++){m.index>g?($=m,m=null):$=m.sibling;var _=p(i,m,a[g],c);if(null===_){null===m&&(m=$);break}e&&m&&null===_.alternate&&t(i,m),s=l(_,s,g),null===u?d=_:u.sibling=_,u=_,m=$}if(g===a.length)return n(i,m),of&&oa(i,g),d;if(null===m){for(;g<a.length;g++)null!==(m=h(i,a[g],c))&&(s=l(m,s,g),null===u?d=m:u.sibling=m,u=m);return of&&oa(i,g),d}for(m=r(i,m);g<a.length;g++)null!==($=f(m,i,g,a[g],c))&&(e&&null!==$.alternate&&m.delete(null===$.key?g:$.key),s=l($,s,g),null===u?d=$:u.sibling=$,u=$);return e&&m.forEach(function(e){return t(i,e)}),of&&oa(i,g),d}(c,d,u,m);if(O(u))return function o(s,a,c,d){var u=O(c);if("function"!=typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var m=u=null,g=a,$=a=0,_=null,b=c.next();null!==g&&!b.done;$++,b=c.next()){g.index>$?(_=g,g=null):_=g.sibling;var y=p(s,g,b.value,d);if(null===y){null===g&&(g=_);break}e&&g&&null===y.alternate&&t(s,g),a=l(y,a,$),null===m?u=y:m.sibling=y,m=y,g=_}if(b.done)return n(s,g),of&&oa(s,$),u;if(null===g){for(;!b.done;$++,b=c.next())null!==(b=h(s,b.value,d))&&(a=l(b,a,$),null===m?u=b:m.sibling=b,m=b);return of&&oa(s,$),u}for(g=r(s,g);!b.done;$++,b=c.next())null!==(b=f(g,s,$,b.value,d))&&(e&&null!==b.alternate&&g.delete(null===b.key?$:b.key),a=l(b,a,$),null===m?u=b:m.sibling=b,m=b);return e&&g.forEach(function(e){return t(s,e)}),of&&oa(s,$),u}(c,d,u,m);oS(c,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==d&&6===d.tag?(n(c,d.sibling),(d=o(d,u)).return=c,c=d):(n(c,d),(d=ai(u,c.mode,m)).return=c,c=d),s(c)):n(c,d)}}var o3=o2(!0),oE=o2(!1),o4=rR(null),oM=null,oT=null,o8=null;function o6(){o8=oT=oM=null}function oN(e){var t=o4.current;rO(o4),e._currentValue=t}function o5(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function o7(e,t){oM=e,o8=oT=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ld=!0),e.firstContext=null)}function oL(e){var t=e._currentValue;if(o8!==e){if(e={context:e,memoizedValue:t,next:null},null===oT){if(null===oM)throw Error(i(308));oT=e,oM.dependencies={lanes:0,firstContext:e}}else oT=oT.next=e}return t}var oP=null;function oA(e){null===oP?oP=[e]:oP.push(e)}function oR(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,oA(t)):(n.next=o.next,o.next=n),t.interleaved=n,oO(e,r)}function oO(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var oD=!1;function oI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oH(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oz(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function o9(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&sl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,oO(e,n)}return null===(o=r.interleaved)?(t.next=t,oA(r)):(t.next=o.next,o.next=t),r.interleaved=t,oO(e,n)}function oB(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ta(e,n)}}function oV(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=l:i=i.next=l,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function oj(e,t,n,r){var o=e.updateQueue;oD=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var a=s,c=a.next;a.next=null,null===l?i=c:l.next=c,l=a;var d=e.alternate;null!==d&&(s=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=a)}if(null!==i){var u=o.baseState;for(l=0,d=c=a=null,s=i;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"==typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=I({},u,h);break e;case 2:oD=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=p,a=u):d=d.next=p,l|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===d&&(a=u),o.baseState=a,o.firstBaseUpdate=c,o.lastBaseUpdate=d,null!==(t=o.shared.interleaved)){o=t;do l|=o.lane,o=o.next;while(o!==t)}else null===i&&(o.shared.lanes=0);sf|=l,e.lanes=l,e.memoizedState=u}}function oF(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(i(191,o));o.call(r)}}}var oU={},oW=rR(oU),oG=rR(oU),oq=rR(oU);function oK(e){if(e===oU)throw Error(i(174));return e}function oJ(e,t){switch(rD(oq,t),rD(oG,e),rD(oW,oU),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:es(null,"");break;default:t=es(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}rO(oW),rD(oW,t)}function oZ(){rO(oW),rO(oG),rO(oq)}function oX(e){oK(oq.current);var t=oK(oW.current),n=es(t,e.type);t!==n&&(rD(oG,e),rD(oW,n))}function oQ(e){oG.current===e&&(rO(oW),rO(oG))}var oY=rR(0);function ie(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var it=[];function ir(){for(var e=0;e<it.length;e++)it[e]._workInProgressVersionPrimary=null;it.length=0}var io=y.ReactCurrentDispatcher,ii=y.ReactCurrentBatchConfig,il=0,is=null,ia=null,ic=null,id=!1,iu=!1,ih=0,ip=0;function im(){throw Error(i(321))}function ig(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!n5(e[n],t[n]))return!1;return!0}function i$(e,t,n,r,o,l){if(il=l,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?iU:iW,e=n(r,o),iu){l=0;do{if(iu=!1,ih=0,25<=l)throw Error(i(301));l+=1,ic=ia=null,t.updateQueue=null,io.current=iG,e=n(r,o)}while(iu)}if(io.current=iF,t=null!==ia&&null!==ia.next,il=0,ic=ia=is=null,id=!1,t)throw Error(i(300));return e}function i_(){var e=0!==ih;return ih=0,e}function ib(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ic?is.memoizedState=ic=e:ic=ic.next=e,ic}function iy(){if(null===ia){var e=is.alternate;e=null!==e?e.memoizedState:null}else e=ia.next;var t=null===ic?is.memoizedState:ic.next;if(null!==t)ic=t,ia=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ia=e).memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},null===ic?is.memoizedState=ic=e:ic=ic.next=e}return ic}function iv(e,t){return"function"==typeof t?t(e):t}function iw(e){var t=iy(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ia,o=r.baseQueue,l=n.pending;if(null!==l){if(null!==o){var s=o.next;o.next=l.next,l.next=s}r.baseQueue=o=l,n.pending=null}if(null!==o){l=o.next,r=r.baseState;var a=s=null,c=null,d=l;do{var u=d.lane;if((il&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(a=c=h,s=r):c=c.next=h,is.lanes|=u,sf|=u}d=d.next}while(null!==d&&d!==l);null===c?s=r:c.next=a,n5(r,t.memoizedState)||(ld=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do l=o.lane,is.lanes|=l,sf|=l,o=o.next;while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ik(e){var t=iy(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do l=e(l,s.action),s=s.next;while(s!==o);n5(l,t.memoizedState)||(ld=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function i0(){}function ix(e,t){var n=is,r=iy(),o=t(),l=!n5(r.memoizedState,o);if(l&&(r.memoizedState=o,ld=!0),r=r.queue,iN(i1.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||null!==ic&&1&ic.memoizedState.tag){if(n.flags|=2048,i4(9,iS.bind(null,n,r,o,t),void 0,null),null===ss)throw Error(i(349));0!=(30&il)||iC(n,t,o)}return o}function iC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function iS(e,t,n,r){t.value=n,t.getSnapshot=r,i2(t)&&i3(e)}function i1(e,t,n){return n(function(){i2(t)&&i3(e)})}function i2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!n5(e,n)}catch(r){return!0}}function i3(e){var t=oO(e,1);null!==t&&sT(t,e,1,-1)}function iE(e){var t=ib();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iv,lastRenderedState:e},t.queue=e,e=e.dispatch=i9.bind(null,is,e),[t.memoizedState,e]}function i4(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=is.updateQueue)?(t={lastEffect:null,stores:null},is.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function iM(){return iy().memoizedState}function iT(e,t,n,r){var o=ib();is.flags|=e,o.memoizedState=i4(1|t,n,void 0,void 0===r?null:r)}function i8(e,t,n,r){var o=iy();r=void 0===r?null:r;var i=void 0;if(null!==ia){var l=ia.memoizedState;if(i=l.destroy,null!==r&&ig(r,l.deps))return void(o.memoizedState=i4(t,n,i,r))}is.flags|=e,o.memoizedState=i4(1|t,n,i,r)}function i6(e,t){return iT(8390656,8,e,t)}function iN(e,t){return i8(2048,8,e,t)}function i5(e,t){return i8(4,2,e,t)}function i7(e,t){return i8(4,4,e,t)}function iL(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function iP(e,t,n){return n=null!=n?n.concat([e]):null,i8(4,4,iL.bind(null,t,e),n)}function iA(){}function iR(e,t){var n=iy();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ig(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iO(e,t){var n=iy();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ig(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function iD(e,t,n){return 0==(21&il)?(e.baseState&&(e.baseState=!1,ld=!0),e.memoizedState=n):(n5(n,t)||(n=ti(),is.lanes|=n,sf|=n,e.baseState=!0),t)}function iI(e,t){var n=tc;tc=0!==n&&4>n?n:4,e(!0);var r=ii.transition;ii.transition={};try{e(!1),t()}finally{tc=n,ii.transition=r}}function iH(){return iy().memoizedState}function iz(e,t,n){var r=sM(e);(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iB(e))?iV(t,n):null!==(n=oR(e,t,n,r))&&(sT(n,e,r,s4()),ij(n,t,r))}function i9(e,t,n){var r=sM(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iB(e))iV(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,s=i(l,n);if(o.hasEagerState=!0,o.eagerState=s,n5(s,l)){var a=t.interleaved;return null===a?(o.next=o,oA(t)):(o.next=a.next,a.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=oR(e,t,o,r))&&(sT(n,e,r,o=s4()),ij(n,t,r))}}function iB(e){var t=e.alternate;return e===is||null!==t&&t===is}function iV(e,t){iu=id=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ij(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ta(e,n)}}var iF={readContext:oL,useCallback:im,useContext:im,useEffect:im,useImperativeHandle:im,useInsertionEffect:im,useLayoutEffect:im,useMemo:im,useReducer:im,useRef:im,useState:im,useDebugValue:im,useDeferredValue:im,useTransition:im,useMutableSource:im,useSyncExternalStore:im,useId:im,unstable_isNewReconciler:!1},iU={readContext:oL,useCallback:function(e,t){return ib().memoizedState=[e,void 0===t?null:t],e},useContext:oL,useEffect:i6,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,iT(4194308,4,iL.bind(null,t,e),n)},useLayoutEffect:function(e,t){return iT(4194308,4,e,t)},useInsertionEffect:function(e,t){return iT(4,2,e,t)},useMemo:function(e,t){var n=ib();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ib();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=iz.bind(null,is,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ib().memoizedState=e},useState:iE,useDebugValue:iA,useDeferredValue:function(e){return ib().memoizedState=e},useTransition:function(){var e=iE(!1),t=e[0];return e=iI.bind(null,e[1]),ib().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=is,o=ib();if(of){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===ss)throw Error(i(349));0!=(30&il)||iC(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,i6(i1.bind(null,r,l,e),[e]),r.flags|=2048,i4(9,iS.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=ib(),t=ss.identifierPrefix;if(of){var n=ol;t=":"+t+"R"+(n=(oi&~(1<<32-eZ(oi)-1)).toString(32)+n),0<(n=ih++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ip++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iW={readContext:oL,useCallback:iR,useContext:oL,useEffect:iN,useImperativeHandle:iP,useInsertionEffect:i5,useLayoutEffect:i7,useMemo:iO,useReducer:iw,useRef:iM,useState:function(){return iw(iv)},useDebugValue:iA,useDeferredValue:function(e){return iD(iy(),ia.memoizedState,e)},useTransition:function(){return[iw(iv)[0],iy().memoizedState]},useMutableSource:i0,useSyncExternalStore:ix,useId:iH,unstable_isNewReconciler:!1},iG={readContext:oL,useCallback:iR,useContext:oL,useEffect:iN,useImperativeHandle:iP,useInsertionEffect:i5,useLayoutEffect:i7,useMemo:iO,useReducer:ik,useRef:iM,useState:function(){return ik(iv)},useDebugValue:iA,useDeferredValue:function(e){var t=iy();return null===ia?t.memoizedState=e:iD(t,ia.memoizedState,e)},useTransition:function(){return[ik(iv)[0],iy().memoizedState]},useMutableSource:i0,useSyncExternalStore:ix,useId:iH,unstable_isNewReconciler:!1};function iq(e,t){if(e&&e.defaultProps)for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function iK(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var iJ={isMounted:function(e){return!!(e=e._reactInternals)&&eA(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=s4(),o=sM(e),i=oz(r,o);i.payload=t,null!=n&&(i.callback=n),null!==(t=o9(e,i,o))&&(sT(t,e,o,r),oB(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=s4(),o=sM(e),i=oz(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=o9(e,i,o))&&(sT(t,e,o,r),oB(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=s4(),r=sM(e),o=oz(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=o9(e,o,r))&&(sT(t,e,r,n),oB(t,e,r))}};function iZ(e,t,n,r,o,i,l){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,l):!t.prototype||!t.prototype.isPureReactComponent||!n7(n,r)||!n7(o,i)}function iX(e,t,n){var r=!1,o=rI,i=t.contextType;return"object"==typeof i&&null!==i?i=oL(i):(o=rV(t)?r9:rH.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?rB(e,o):rI),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=iJ,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function iQ(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&iJ.enqueueReplaceState(t,t.state,null)}function iY(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},oI(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=oL(i):(i=rV(t)?r9:rH.current,o.context=rB(e,i)),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(iK(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&iJ.enqueueReplaceState(o,o.state,null),oj(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function le(e,t){try{var n="",r=t;do n+=V(r),r=r.return;while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function lt(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ln(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lr="function"==typeof WeakMap?WeakMap:Map;function lo(e,t,n){(n=oz(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sw||(sw=!0,sk=r),ln(0,t)},n}function li(e,t,n){(n=oz(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ln(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){ln(0,t),"function"!=typeof r&&(null===s0?s0=new Set([this]):s0.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ll(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new lr;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=sq.bind(null,e,t,n),t.then(e,e))}function ls(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function la(e,t,n,r,o){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=oz(-1,1)).tag=2,o9(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var lc=y.ReactCurrentOwner,ld=!1;function lu(e,t,n,r){t.child=null===e?oE(t,null,n,r):o3(t,e.child,n,r)}function lh(e,t,n,r,o){n=n.render;var i=t.ref;return o7(t,o),r=i$(e,t,n,r,i,o),n=i_(),null===e||ld?(of&&n&&od(t),t.flags|=1,lu(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,l6(e,t,o))}function lp(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||ae(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=an(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,lf(e,t,i,r,o))}if(i=e.child,0==(e.lanes&o)){var l=i.memoizedProps;if((n=null!==(n=n.compare)?n:n7)(l,r)&&e.ref===t.ref)return l6(e,t,o)}return t.flags|=1,(e=at(i,r)).ref=t.ref,e.return=t,t.child=e}function lf(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(n7(i,r)&&e.ref===t.ref){if(ld=!1,t.pendingProps=r=i,0==(e.lanes&o))return t.lanes=e.lanes,l6(e,t,o);0!=(131072&e.flags)&&(ld=!0)}}return l$(e,t,n,r,o)}function lm(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rD(su,sd),sd|=n;else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rD(su,sd),sd|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,rD(su,sd),sd|=r}}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,rD(su,sd),sd|=r;return lu(e,t,o,n),t.child}function lg(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function l$(e,t,n,r,o){var i=rV(n)?r9:rH.current;return i=rB(t,i),o7(t,o),n=i$(e,t,n,r,i,o),r=i_(),null===e||ld?(of&&r&&od(t),t.flags|=1,lu(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,l6(e,t,o))}function l_(e,t,n,r,o){if(rV(n)){var i=!0;rW(t)}else i=!1;if(o7(t,o),null===t.stateNode)l8(e,t),iX(t,n,r),iY(t,n,r,o),r=!0;else if(null===e){var l=t.stateNode,s=t.memoizedProps;l.props=s;var a=l.context,c=n.contextType;c="object"==typeof c&&null!==c?oL(c):rB(t,c=rV(n)?r9:rH.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof l.getSnapshotBeforeUpdate;u||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(s!==r||a!==c)&&iQ(t,l,r,c),oD=!1;var h=t.memoizedState;l.state=h,oj(t,r,l,o),a=t.memoizedState,s!==r||h!==a||rz.current||oD?("function"==typeof d&&(iK(t,n,d,r),a=t.memoizedState),(s=oD||iZ(t,n,s,r,h,a,c))?(u||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||("function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"==typeof l.componentDidMount&&(t.flags|=4194308)):("function"==typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),l.props=r,l.state=a,l.context=c,r=s):("function"==typeof l.componentDidMount&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,oH(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:iq(t.type,s),l.props=c,u=t.pendingProps,h=l.context,a="object"==typeof(a=n.contextType)&&null!==a?oL(a):rB(t,a=rV(n)?r9:rH.current);var p=n.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof l.getSnapshotBeforeUpdate)||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(s!==u||h!==a)&&iQ(t,l,r,a),oD=!1,h=t.memoizedState,l.state=h,oj(t,r,l,o);var f=t.memoizedState;s!==u||h!==f||rz.current||oD?("function"==typeof p&&(iK(t,n,p,r),f=t.memoizedState),(c=oD||iZ(t,n,c,r,h,f,a)||!1)?(d||"function"!=typeof l.UNSAFE_componentWillUpdate&&"function"!=typeof l.componentWillUpdate||("function"==typeof l.componentWillUpdate&&l.componentWillUpdate(r,f,a),"function"==typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(r,f,a)),"function"==typeof l.componentDidUpdate&&(t.flags|=4),"function"==typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof l.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),l.props=r,l.state=f,l.context=a,r=c):("function"!=typeof l.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return lb(e,t,n,r,i,o)}function lb(e,t,n,r,o,i){lg(e,t);var l=0!=(128&t.flags);if(!r&&!l)return o&&rG(t,n,!1),l6(e,t,i);r=t.stateNode,lc.current=t;var s=l&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&l?(t.child=o3(t,e.child,null,i),t.child=o3(t,null,s,i)):lu(e,t,s,i),t.memoizedState=r.state,o&&rG(t,n,!0),t.child}function ly(e){var t=e.stateNode;t.pendingContext?rF(0,t.pendingContext,t.pendingContext!==t.context):t.context&&rF(0,t.context,!1),oJ(e,t.containerInfo)}function lv(e,t,n,r,o){return ok(),o0(o),t.flags|=256,lu(e,t,n,r),t.child}var lw,lk,l0,lx,lC,lS={dehydrated:null,treeContext:null,retryLane:0};function l1(e){return{baseLanes:e,cachePool:null,transitions:null}}function l2(e,t,n){var r,o=t.pendingProps,l=oY.current,s=!1,a=0!=(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!=(2&l)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),rD(oY,1&l),null===e)return ob(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(a=o.children,e=o.fallback,s?(o=t.mode,s=t.child,a={mode:"hidden",children:a},0==(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=ao(a,o,0,null),e=ar(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=l1(n),t.memoizedState=lS,e):l3(t,a));if(null!==(l=e.memoizedState)&&null!==(r=l.dehydrated))return function(e,t,n,r,o,l,s){if(n)return 256&t.flags?(t.flags&=-257,lE(e,t,s,r=lt(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=ao({mode:"visible",children:r.children},o,0,null),(l=ar(l,o,s,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,0!=(1&t.mode)&&o3(t,e.child,null,s),t.child.memoizedState=l1(s),t.memoizedState=lS,l);if(0==(1&t.mode))return lE(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var a=r.dgst;return r=a,lE(e,t,s,r=lt(l=Error(i(419)),r,void 0))}if(a=0!=(s&e.childLanes),ld||a){if(null!==(r=ss)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!=(o&(r.suspendedLanes|s))?0:o)&&o!==l.retryLane&&(l.retryLane=o,oO(e,o),sT(r,e,o,-1))}return sH(),lE(e,t,s,r=lt(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=sJ.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,op=r1(o.nextSibling),oh=t,of=!0,om=null,null!==e&&(on[or++]=oi,on[or++]=ol,on[or++]=oo,oi=e.id,ol=e.overflow,oo=t),t=l3(t,r.children),t.flags|=4096,t)}(e,t,a,o,r,l,n);if(s){s=o.fallback,a=t.mode,r=(l=e.child).sibling;var c={mode:"hidden",children:o.children};return 0==(1&a)&&t.child!==l?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=at(l,c)).subtreeFlags=14680064&l.subtreeFlags,null!==r?s=at(r,s):(s=ar(s,a,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,a=null===(a=e.child.memoizedState)?l1(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=lS,o}return e=(s=e.child).sibling,o=at(s,{mode:"visible",children:o.children}),0==(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function l3(e,t){return(t=ao({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function lE(e,t,n,r){return null!==r&&o0(r),o3(t,e.child,null,n),(e=l3(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function l4(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),o5(e.return,t,n)}function lM(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function lT(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(lu(e,t,r.children,n),0!=(2&(r=oY.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&l4(e,n,t);else if(19===e.tag)l4(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rD(oY,r),0==(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ie(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),lM(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ie(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}lM(t,!0,n,null,i);break;case"together":lM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function l8(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function l6(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),sf|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=at(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=at(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function lN(e,t){if(!of)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function l5(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function l7(e,t,n){var r=t.pendingProps;switch(ou(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return l5(t),null;case 1:case 17:return rV(t.type)&&rj(),l5(t),null;case 3:return r=t.stateNode,oZ(),rO(rz),rO(rH),ir(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ov(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==om&&(s5(om),om=null))),l0(e,t),l5(t),null;case 5:oQ(t);var o=oK(oq.current);if(n=t.type,null!==e&&null!=t.stateNode)lx(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return l5(t),null}if(e=oK(oW.current),ov(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[rE]=t,r[r4]=l,e=0!=(1&t.mode),n){case"dialog":ro("cancel",r),ro("close",r);break;case"iframe":case"object":case"embed":ro("load",r);break;case"video":case"audio":for(o=0;o<re.length;o++)ro(re[o],r);break;case"source":ro("error",r);break;case"img":case"image":case"link":ro("error",r),ro("load",r);break;case"details":ro("toggle",r);break;case"input":J(r,l),ro("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},ro("invalid",r);break;case"textarea":er(r,l),ro("invalid",r)}for(var a in e$(n,l),o=null,l)if(l.hasOwnProperty(a)){var c=l[a];"children"===a?"string"==typeof c?r.textContent!==c&&(!0!==l.suppressHydrationWarning&&r$(r.textContent,c,e),o=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==l.suppressHydrationWarning&&r$(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(a)&&null!=c&&"onScroll"===a&&ro("scroll",r)}switch(n){case"input":W(r),Q(r,l,!0);break;case"textarea":W(r),ei(r);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(r.onclick=r_)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=el(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script></script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[rE]=t,e[r4]=r,lk(e,t,!1,!1),t.stateNode=e;e:{switch(a=e_(n,r),n){case"dialog":ro("cancel",e),ro("close",e),o=r;break;case"iframe":case"object":case"embed":ro("load",e),o=r;break;case"video":case"audio":for(o=0;o<re.length;o++)ro(re[o],e);o=r;break;case"source":ro("error",e),o=r;break;case"img":case"image":case"link":ro("error",e),ro("load",e),o=r;break;case"details":ro("toggle",e),o=r;break;case"input":J(e,r),o=K(e,r),ro("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=I({},r,{value:void 0}),ro("invalid",e);break;case"textarea":er(e,r),o=en(e,r),ro("invalid",e)}for(l in e$(n,o),c=o)if(c.hasOwnProperty(l)){var d=c[l];"style"===l?em(e,d):"dangerouslySetInnerHTML"===l?null!=(d=d?d.__html:void 0)&&ed(e,d):"children"===l?"string"==typeof d?("textarea"!==n||""!==d)&&eu(e,d):"number"==typeof d&&eu(e,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?null!=d&&"onScroll"===l&&ro("scroll",e):null!=d&&b(e,l,d,a))}switch(n){case"input":W(e),Q(e,r,!1);break;case"textarea":W(e),ei(e);break;case"option":null!=r.value&&e.setAttribute("value",""+F(r.value));break;case"select":e.multiple=!!r.multiple,null!=(l=r.value)?et(e,!!r.multiple,l,!1):null!=r.defaultValue&&et(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=r_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return l5(t),null;case 6:if(e&&null!=t.stateNode)lC(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(n=oK(oq.current),oK(oW.current),ov(t)){if(r=t.stateNode,n=t.memoizedProps,r[rE]=t,(l=r.nodeValue!==n)&&null!==(e=oh))switch(e.tag){case 3:r$(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&r$(r.nodeValue,n,0!=(1&e.mode))}l&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[rE]=t,t.stateNode=r}return l5(t),null;case 13:if(rO(oY),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(of&&null!==op&&0!=(1&t.mode)&&0==(128&t.flags))ow(),ok(),t.flags|=98560,l=!1;else if(l=ov(t),null!==r&&null!==r.dehydrated){if(null===e){if(!l)throw Error(i(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(i(317));l[rE]=t}else ok(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;l5(t),l=!1}else null!==om&&(s5(om),om=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&oY.current)?0===sh&&(sh=3):sH())),null!==t.updateQueue&&(t.flags|=4),l5(t),null);case 4:return oZ(),l0(e,t),null===e&&rs(t.stateNode.containerInfo),l5(t),null;case 10:return oN(t.type._context),l5(t),null;case 19:if(rO(oY),null===(l=t.memoizedState))return l5(t),null;if(r=0!=(128&t.flags),null===(a=l.rendering)){if(r)lN(l,!1);else{if(0!==sh||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=ie(e))){for(t.flags|=128,lN(l,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(l=n).flags&=14680066,null===(a=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rD(oY,1&oY.current|2),t.child}e=e.sibling}null!==l.tail&&eV()>sy&&(t.flags|=128,r=!0,lN(l,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=ie(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),lN(l,!0),null===l.tail&&"hidden"===l.tailMode&&!a.alternate&&!of)return l5(t),null}else 2*eV()-l.renderingStartTime>sy&&1073741824!==n&&(t.flags|=128,r=!0,lN(l,!1),t.lanes=4194304)}l.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=l.last)?n.sibling=a:t.child=a,l.last=a)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=eV(),t.sibling=null,n=oY.current,rD(oY,r?1&n|2:1&n),t):(l5(t),null);case 22:case 23:return sR(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&sd)&&(l5(t),6&t.subtreeFlags&&(t.flags|=8192)):l5(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function lL(e,t){switch(ou(t),t.tag){case 1:return rV(t.type)&&rj(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oZ(),rO(rz),rO(rH),ir(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oQ(t),null;case 13:if(rO(oY),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));ok()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return rO(oY),null;case 4:return oZ(),null;case 10:return oN(t.type._context),null;case 22:case 23:return sR(),null;default:return null}}lk=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},l0=function(){},lx=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,oK(oW.current);var i,l=null;switch(n){case"input":o=K(e,o),r=K(e,r),l=[];break;case"select":o=I({},o,{value:void 0}),r=I({},r,{value:void 0}),l=[];break;case"textarea":o=en(e,o),r=en(e,r),l=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=r_)}for(d in e$(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d]){if("style"===d){var a=o[d];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(s.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null))}for(d in r){var c=r[d];if(a=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(null!=c||null!=a)){if("style"===d){if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(d,n)),n=c}else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,a=a?a.__html:void 0,null!=c&&a!==c&&(l=l||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(l=l||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(s.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&ro("scroll",e),l||a===c||(l=[])):(l=l||[]).push(d,c))}}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}},lC=function(e,t,n,r){n!==r&&(t.flags|=4)};var lP=!1,lA=!1,lR="function"==typeof WeakSet?WeakSet:Set,lO=null;function lD(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(r){sG(e,t,r)}else n.current=null}}function lI(e,t,n){try{n()}catch(r){sG(e,t,r)}}var lH=!1;function lz(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&lI(t,n,i)}o=o.next}while(o!==r)}}function l9(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lB(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function lV(e){var t=e.alternate;null!==t&&(e.alternate=null,lV(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[rE],delete t[r4],delete t[rT],delete t[r8],delete t[r6]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lj(e){return 5===e.tag||3===e.tag||4===e.tag}function lF(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var lU=null,lW=!1;function lG(e,t,n){for(n=n.child;null!==n;)lq(e,t,n),n=n.sibling}function lq(e,t,n){if(eJ&&"function"==typeof eJ.onCommitFiberUnmount)try{eJ.onCommitFiberUnmount(eK,n)}catch(r){}switch(n.tag){case 5:lA||lD(n,t);case 6:var o=lU,i=lW;lU=null,lG(e,t,n),lW=i,null!==(lU=o)&&(lW?(e=lU,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lU.removeChild(n.stateNode));break;case 18:null!==lU&&(lW?(e=lU,n=n.stateNode,8===e.nodeType?rS(e.parentNode,n):1===e.nodeType&&rS(e,n),t4(e)):rS(lU,n.stateNode));break;case 4:o=lU,i=lW,lU=n.stateNode.containerInfo,lW=!0,lG(e,t,n),lU=o,lW=i;break;case 0:case 11:case 14:case 15:if(!lA&&null!==(o=n.updateQueue)&&null!==(o=o.lastEffect)){i=o=o.next;do{var l=i,s=l.destroy;l=l.tag,void 0!==s&&(0!=(2&l)||0!=(4&l))&&lI(n,t,s),i=i.next}while(i!==o)}lG(e,t,n);break;case 1:if(!lA&&(lD(n,t),"function"==typeof(o=n.stateNode).componentWillUnmount))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(a){sG(n,t,a)}lG(e,t,n);break;case 21:default:lG(e,t,n);break;case 22:1&n.mode?(lA=(o=lA)||null!==n.memoizedState,lG(e,t,n),lA=o):lG(e,t,n)}}function lK(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new lR),t.forEach(function(t){var r=sZ.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function lJ(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,s=t,a=s;e:for(;null!==a;){switch(a.tag){case 5:lU=a.stateNode,lW=!1;break e;case 3:case 4:lU=a.stateNode.containerInfo,lW=!0;break e}a=a.return}if(null===lU)throw Error(i(160));lq(l,s,o),lU=null,lW=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(d){sG(o,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)lZ(t,e),t=t.sibling}function lZ(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(lJ(t,e),lX(e),4&r){try{lz(3,e,e.return),l9(3,e)}catch(o){sG(e,e.return,o)}try{lz(5,e,e.return)}catch(l){sG(e,e.return,l)}}break;case 1:lJ(t,e),lX(e),512&r&&null!==n&&lD(n,n.return);break;case 5:if(lJ(t,e),lX(e),512&r&&null!==n&&lD(n,n.return),32&e.flags){var s=e.stateNode;try{eu(s,"")}catch(a){sG(e,e.return,a)}}if(4&r&&null!=(s=e.stateNode)){var c=e.memoizedProps,d=null!==n?n.memoizedProps:c,u=e.type,h=e.updateQueue;if(e.updateQueue=null,null!==h)try{"input"===u&&"radio"===c.type&&null!=c.name&&Z(s,c),e_(u,d);var p=e_(u,c);for(d=0;d<h.length;d+=2){var f=h[d],m=h[d+1];"style"===f?em(s,m):"dangerouslySetInnerHTML"===f?ed(s,m):"children"===f?eu(s,m):b(s,f,m,p)}switch(u){case"input":X(s,c);break;case"textarea":eo(s,c);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!c.multiple;var $=c.value;null!=$?et(s,!!c.multiple,$,!1):!!c.multiple!==g&&(null!=c.defaultValue?et(s,!!c.multiple,c.defaultValue,!0):et(s,!!c.multiple,c.multiple?[]:"",!1))}s[r4]=c}catch(_){sG(e,e.return,_)}}break;case 6:if(lJ(t,e),lX(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,c=e.memoizedProps;try{s.nodeValue=c}catch(y){sG(e,e.return,y)}}break;case 3:if(lJ(t,e),lX(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{t4(t.containerInfo)}catch(v){sG(e,e.return,v)}break;case 4:default:lJ(t,e),lX(e);break;case 13:lJ(t,e),lX(e),8192&(s=e.child).flags&&(c=null!==s.memoizedState,s.stateNode.isHidden=c,c&&(null===s.alternate||null===s.alternate.memoizedState)&&(sb=eV())),4&r&&lK(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(lA=(p=lA)||f,lJ(t,e),lA=p):lJ(t,e),lX(e),8192&r){if(p=null!==e.memoizedState,(e.stateNode.isHidden=p)&&!f&&0!=(1&e.mode))for(lO=e,f=e.child;null!==f;){for(m=lO=f;null!==lO;){switch($=(g=lO).child,g.tag){case 0:case 11:case 14:case 15:lz(4,g,g.return);break;case 1:lD(g,g.return);var w=g.stateNode;if("function"==typeof w.componentWillUnmount){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(k){sG(r,n,k)}}break;case 5:lD(g,g.return);break;case 22:if(null!==g.memoizedState){lY(m);continue}}null!==$?($.return=g,lO=$):lY(m)}f=f.sibling}e:for(f=null,m=e;;){if(5===m.tag){if(null===f){f=m;try{s=m.stateNode,p?"function"==typeof(c=s.style).setProperty?c.setProperty("display","none","important"):c.display="none":(u=m.stateNode,d=void 0!==(h=m.memoizedProps.style)&&null!==h&&h.hasOwnProperty("display")?h.display:null,u.style.display=ef("display",d))}catch(x){sG(e,e.return,x)}}}else if(6===m.tag){if(null===f)try{m.stateNode.nodeValue=p?"":m.memoizedProps}catch(C){sG(e,e.return,C)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:lJ(t,e),lX(e),4&r&&lK(e);case 21:}}function lX(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(lj(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(eu(o,""),r.flags&=-33),function e(t,n,r){var o=t.tag;if(5===o||6===o)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,lF(e),o);break;case 3:case 4:var l=r.stateNode.containerInfo;!function e(t,n,r){var o=t.tag;if(5===o||6===o)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=r_));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,lF(e),l);break;default:throw Error(i(161))}}catch(s){sG(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function lQ(e){for(;null!==lO;){var t=lO;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:lA||l9(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!lA){if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:iq(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var l=t.updateQueue;null!==l&&oF(t,l,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oF(t,s,n)}break;case 5:var a=t.stateNode;if(null===n&&4&t.flags){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&t4(h)}}}break;default:throw Error(i(163))}lA||512&t.flags&&lB(t)}catch(p){sG(t,t.return,p)}}if(t===e){lO=null;break}if(null!==(n=t.sibling)){n.return=t.return,lO=n;break}lO=t.return}}function lY(e){for(;null!==lO;){var t=lO;if(t===e){lO=null;break}var n=t.sibling;if(null!==n){n.return=t.return,lO=n;break}lO=t.return}}function se(e){for(;null!==lO;){var t=lO;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{l9(4,t)}catch(r){sG(t,n,r)}break;case 1:var o=t.stateNode;if("function"==typeof o.componentDidMount){var i=t.return;try{o.componentDidMount()}catch(l){sG(t,i,l)}}var s=t.return;try{lB(t)}catch(a){sG(t,s,a)}break;case 5:var c=t.return;try{lB(t)}catch(d){sG(t,c,d)}}}catch(u){sG(t,t.return,u)}if(t===e){lO=null;break}var h=t.sibling;if(null!==h){h.return=t.return,lO=h;break}lO=t.return}}var st,sn=Math.ceil,sr=y.ReactCurrentDispatcher,so=y.ReactCurrentOwner,si=y.ReactCurrentBatchConfig,sl=0,ss=null,sa=null,sc=0,sd=0,su=rR(0),sh=0,sp=null,sf=0,sm=0,sg=0,s$=null,s_=null,sb=0,sy=1/0,sv=null,sw=!1,sk=null,s0=null,sx=!1,sC=null,sS=0,s1=0,s2=null,s3=-1,sE=0;function s4(){return 0!=(6&sl)?eV():-1!==s3?s3:s3=eV()}function sM(e){return 0==(1&e.mode)?1:0!=(2&sl)&&0!==sc?sc&-sc:null!==ox.transition?(0===sE&&(sE=ti()),sE):0!==(e=tc)?e:e=void 0===(e=window.event)?16:tL(e.type)}function sT(e,t,n,r){if(50<s1)throw s1=0,s2=null,Error(i(185));ts(e,n,r),0!=(2&sl)&&e===ss||(e===ss&&(0==(2&sl)&&(sm|=n),4===sh&&s7(e,sc)),s8(e,r),1===n&&0===sl&&0==(1&t.mode)&&(sy=eV()+500,rK&&rX()))}function s8(e,t){var n,r,o,i=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-eZ(i),s=1<<l,a=o[l];-1===a?0!=(s&n)&&0==(s&r)||(o[l]=tr(s,t)):a<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var l=tn(e,e===ss?sc:0);if(0===l)null!==i&&ez(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(null!=i&&ez(i),1===t)0===e.tag?(o=sL.bind(null,e),rK=!0,rZ(o)):rZ(sL.bind(null,e)),rx(function(){0==(6&sl)&&rX()}),i=null;else{switch(td(l)){case 1:i=eF;break;case 4:i=eU;break;case 16:default:i=eW;break;case 536870912:i=eq}i=(n=i,r=s6.bind(null,e),eH(n,r))}e.callbackPriority=t,e.callbackNode=i}}function s6(e,t){if(s3=-1,sE=0,0!=(6&sl))throw Error(i(327));var n=e.callbackNode;if(sU()&&e.callbackNode!==n)return null;var r=tn(e,e===ss?sc:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=sz(e,r);else{t=r;var o=sl;sl|=2;var l=sI();for(ss===e&&sc===t||(sv=null,sy=eV()+500,sO(e,t));;)try{sB();break}catch(s){sD(e,s)}o6(),sr.current=l,sl=o,null!==sa?t=0:(ss=null,sc=0,t=sh)}if(0!==t){if(2===t&&0!==(o=to(e))&&(r=o,t=sN(e,o)),1===t)throw n=sp,sO(e,0),s7(e,r),s8(e,eV()),n;if(6===t)s7(e,r);else{if(o=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!n5(i(),o))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=sz(e,r))&&0!==(l=to(e))&&(r=l,t=sN(e,l)),1===t))throw n=sp,sO(e,0),s7(e,r),s8(e,eV()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:sF(e,s_,sv);break;case 3:if(s7(e,r),(130023424&r)===r&&10<(t=sb+500-eV())){if(0!==tn(e,0))break;if(((o=e.suspendedLanes)&r)!==r){s4(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=rw(sF.bind(null,e,s_,sv),t);break}sF(e,s_,sv);break;case 4:if(s7(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-eZ(r);l=1<<a,(a=t[a])>o&&(o=a),r&=~l}if(r=o,10<(r=(120>(r=eV()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sn(r/1960))-r)){e.timeoutHandle=rw(sF.bind(null,e,s_,sv),r);break}sF(e,s_,sv);break;default:throw Error(i(329))}}}return s8(e,eV()),e.callbackNode===n?s6.bind(null,e):null}function sN(e,t){var n=s$;return e.current.memoizedState.isDehydrated&&(sO(e,t).flags|=256),2!==(e=sz(e,t))&&(t=s_,s_=n,null!==t&&s5(t)),e}function s5(e){null===s_?s_=e:s_.push.apply(s_,e)}function s7(e,t){for(t&=~sg,t&=~sm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-eZ(t),r=1<<n;e[n]=-1,t&=~r}}function sL(e){if(0!=(6&sl))throw Error(i(327));sU();var t=tn(e,0);if(0==(1&t))return s8(e,eV()),null;var n=sz(e,t);if(0!==e.tag&&2===n){var r=to(e);0!==r&&(t=r,n=sN(e,r))}if(1===n)throw n=sp,sO(e,0),s7(e,t),s8(e,eV()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sF(e,s_,sv),s8(e,eV()),null}function sP(e,t){var n=sl;sl|=1;try{return e(t)}finally{0===(sl=n)&&(sy=eV()+500,rK&&rX())}}function sA(e){null!==sC&&0===sC.tag&&0==(6&sl)&&sU();var t=sl;sl|=1;var n=si.transition,r=tc;try{if(si.transition=null,tc=1,e)return e()}finally{tc=r,si.transition=n,0==(6&(sl=t))&&rX()}}function sR(){sd=su.current,rO(su)}function sO(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rk(n)),null!==sa)for(n=sa.return;null!==n;){var r=n;switch(ou(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&rj();break;case 3:oZ(),rO(rz),rO(rH),ir();break;case 5:oQ(r);break;case 4:oZ();break;case 13:case 19:rO(oY);break;case 10:oN(r.type._context);break;case 22:case 23:sR()}n=n.return}if(ss=e,sa=e=at(e.current,null),sc=sd=t,sh=0,sp=null,sg=sm=sf=0,s_=s$=null,null!==oP){for(t=0;t<oP.length;t++)if(null!==(r=(n=oP[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var l=i.next;i.next=o,r.next=l}n.pending=r}oP=null}return e}function sD(e,t){for(;;){var n=sa;try{if(o6(),io.current=iF,id){for(var r=is.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}id=!1}if(il=0,ic=ia=is=null,iu=!1,ih=0,so.current=null,null===n||null===n.return){sh=1,sp=t,sa=null;break}e:{var l=e,s=n.return,a=n,c=t;if(t=sc,a.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var d=c,u=a,h=u.tag;if(0==(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ls(s);if(null!==f){f.flags&=-257,la(f,s,a,0,t),1&f.mode&&ll(l,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){ll(l,d,t),sH();break e}c=Error(i(426))}else if(of&&1&a.mode){var $=ls(s);if(null!==$){0==(65536&$.flags)&&($.flags|=256),la($,s,a,0,t),o0(le(c,a));break e}}l=c=le(c,a),4!==sh&&(sh=2),null===s$?s$=[l]:s$.push(l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,oV(l,lo(0,c,t));break e;case 1:a=c;var _=l.type,b=l.stateNode;if(0==(128&l.flags)&&("function"==typeof _.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===s0||!s0.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,oV(l,li(l,a,t));break e}}l=l.return}while(null!==l)}sj(n)}catch(y){t=y,sa===n&&null!==n&&(sa=n=n.return);continue}break}}function sI(){var e=sr.current;return sr.current=iF,null===e?iF:e}function sH(){0!==sh&&3!==sh&&2!==sh||(sh=4),null===ss||0==(268435455&sf)&&0==(268435455&sm)||s7(ss,sc)}function sz(e,t){var n=sl;sl|=2;var r=sI();for(ss===e&&sc===t||(sv=null,sO(e,t));;)try{s9();break}catch(o){sD(e,o)}if(o6(),sl=n,sr.current=r,null!==sa)throw Error(i(261));return ss=null,sc=0,sh}function s9(){for(;null!==sa;)sV(sa)}function sB(){for(;null!==sa&&!e9();)sV(sa)}function sV(e){var t=st(e.alternate,e,sd);e.memoizedProps=e.pendingProps,null===t?sj(e):sa=t,so.current=null}function sj(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=l7(n,t,sd)))return void(sa=n)}else{if(null!==(n=lL(n,t)))return n.flags&=32767,void(sa=n);if(null===e)return sh=6,void(sa=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(sa=t);sa=t=e}while(null!==t);0===sh&&(sh=5)}function sF(e,t,n){var r=tc,o=si.transition;try{si.transition=null,tc=1,function(e,t,n,r){do sU();while(null!==sC);if(0!=(6&sl))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var l,s,a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-eZ(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===ss&&(sa=ss=null,sc=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||sx||(sx=!0,l=eW,s=function(){return sU(),null},eH(l,s)),a=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||a){a=si.transition,si.transition=null;var c=tc;tc=1;var d,u,h,p=sl;sl|=4,so.current=null,function(e,t){if(rb=tT,nR(e=nA())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o,l=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(a){n=null;break e}var c=0,d=-1,u=-1,h=0,p=0,f=e,m=null;t:for(;;){for(;f!==n||0!==l&&3!==f.nodeType||(d=c+l),f!==s||0!==r&&3!==f.nodeType||(u=c+r),3===f.nodeType&&(c+=f.nodeValue.length),null!==(o=f.firstChild);)m=f,f=o;for(;;){if(f===e)break t;if(m===n&&++h===l&&(d=c),m===s&&++p===r&&(u=c),null!==(o=f.nextSibling))break;m=(f=m).parentNode}f=o}n=-1===d||-1===u?null:{start:d,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ry={focusedElem:e,selectionRange:n},tT=!1,lO=t;null!==lO;)if(e=(t=lO).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,lO=e;else for(;null!==lO;){t=lO;try{var g=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var $=g.memoizedProps,_=g.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?$:iq(t.type,$),_);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(i(163))}}catch(w){sG(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,lO=e;break}lO=t.return}g=lH,lH=!1}(e,n),lZ(n,e),function e(t){var n=nA(),r=t.focusedElem,o=t.selectionRange;if(n!==r&&r&&r.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(r.ownerDocument.documentElement,r)){if(null!==o&&nR(r)){if(n=o.start,void 0===(t=o.end)&&(t=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(t,r.value.length);else if((t=(n=r.ownerDocument||document)&&n.defaultView||window).getSelection){t=t.getSelection();var i=r.textContent.length,l=Math.min(o.start,i);o=void 0===o.end?l:Math.min(o.end,i),!t.extend&&l>o&&(i=o,o=l,l=i),i=nP(r,l);var s=nP(r,o);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((n=n.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),l>o?(t.addRange(n),t.extend(s.node,s.offset)):(n.setEnd(s.node,s.offset),t.addRange(n)))}}for(n=[],t=r;t=t.parentNode;)1===t.nodeType&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<n.length;r++)(t=n[r]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}(ry),tT=!!rb,ry=rb=null,e.current=n,d=n,u=e,h=o,lO=d,function e(t,n,r){for(var o=0!=(1&t.mode);null!==lO;){var i=lO,l=i.child;if(22===i.tag&&o){var s=null!==i.memoizedState||lP;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||lA;a=lP;var d=lA;if(lP=s,(lA=c)&&!d)for(lO=i;null!==lO;)c=(s=lO).child,22===s.tag&&null!==s.memoizedState?se(i):null!==c?(c.return=s,lO=c):se(i);for(;null!==l;)lO=l,e(l,n,r),l=l.sibling;lO=i,lP=a,lA=d}lQ(t)}else 0!=(8772&i.subtreeFlags)&&null!==l?(l.return=i,lO=l):lQ(t)}}(d,u,h),eB(),sl=p,tc=c,si.transition=a}else e.current=n;if(sx&&(sx=!1,sC=e,sS=o),a=e.pendingLanes,0===a&&(s0=null),function(e){if(eJ&&"function"==typeof eJ.onCommitFiberRoot)try{eJ.onCommitFiberRoot(eK,e,void 0,128==(128&e.current.flags))}catch(t){}}(n.stateNode),s8(e,eV()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(sw)throw sw=!1,e=sk,sk=null,e;0!=(1&sS)&&0!==e.tag&&sU(),a=e.pendingLanes,0!=(1&a)?e===s2?s1++:(s1=0,s2=e):s1=0,rX()}(e,t,n,r)}finally{si.transition=o,tc=r}return null}function sU(){if(null!==sC){var e=td(sS),t=si.transition,n=tc;try{if(si.transition=null,tc=16>e?16:e,null===sC)var r=!1;else{if(e=sC,sC=null,sS=0,0!=(6&sl))throw Error(i(331));var o=sl;for(sl|=4,lO=e.current;null!==lO;){var l=lO,s=l.child;if(0!=(16&lO.flags)){var a=l.deletions;if(null!==a){for(var c=0;c<a.length;c++){var d=a[c];for(lO=d;null!==lO;){var u=lO;switch(u.tag){case 0:case 11:case 15:lz(8,u,l)}var h=u.child;if(null!==h)h.return=u,lO=h;else for(;null!==lO;){var p=(u=lO).sibling,f=u.return;if(lV(u),u===d){lO=null;break}if(null!==p){p.return=f,lO=p;break}lO=f}}}var m=l.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var $=g.sibling;g.sibling=null,g=$}while(null!==g)}}lO=l}}if(0!=(2064&l.subtreeFlags)&&null!==s)s.return=l,lO=s;else e:for(;null!==lO;){if(0!=(2048&(l=lO).flags))switch(l.tag){case 0:case 11:case 15:lz(9,l,l.return)}var _=l.sibling;if(null!==_){_.return=l.return,lO=_;break e}lO=l.return}}var b=e.current;for(lO=b;null!==lO;){var y=(s=lO).child;if(0!=(2064&s.subtreeFlags)&&null!==y)y.return=s,lO=y;else e:for(s=b;null!==lO;){if(0!=(2048&(a=lO).flags))try{switch(a.tag){case 0:case 11:case 15:l9(9,a)}}catch(v){sG(a,a.return,v)}if(a===s){lO=null;break e}var w=a.sibling;if(null!==w){w.return=a.return,lO=w;break e}lO=a.return}}if(sl=o,rX(),eJ&&"function"==typeof eJ.onPostCommitFiberRoot)try{eJ.onPostCommitFiberRoot(eK,e)}catch(k){}r=!0}return r}finally{tc=n,si.transition=t}}return!1}function sW(e,t,n){e=o9(e,t=lo(0,t=le(n,t),1),1),t=s4(),null!==e&&(ts(e,1,t),s8(e,t))}function sG(e,t,n){if(3===e.tag)sW(e,e,n);else for(;null!==t;){if(3===t.tag){sW(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===s0||!s0.has(r))){t=o9(t,e=li(t,e=le(n,e),1),1),e=s4(),null!==t&&(ts(t,1,e),s8(t,e));break}}t=t.return}}function sq(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=s4(),e.pingedLanes|=e.suspendedLanes&n,ss===e&&(sc&n)===n&&(4===sh||3===sh&&(130023424&sc)===sc&&500>eV()-sb?sO(e,0):sg|=n),s8(e,t)}function sK(e,t){0===t&&(0==(1&e.mode)?t=1:(t=te,0==(130023424&(te<<=1))&&(te=4194304)));var n=s4();null!==(e=oO(e,t))&&(ts(e,t,n),s8(e,n))}function sJ(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),sK(e,n)}function sZ(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),sK(e,n)}function sX(e,t){return eH(e,t)}function sQ(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sY(e,t,n,r){return new sQ(e,t,n,r)}function ae(e){return!(!(e=e.prototype)||!e.isReactComponent)}function at(e,t){var n=e.alternate;return null===n?((n=sY(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function an(e,t,n,r,o,l){var s=2;if(r=e,"function"==typeof e)ae(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case k:return ar(n.children,o,l,t);case x:s=8,o|=8;break;case C:return(e=sY(12,n,t,2|o)).elementType=C,e.lanes=l,e;case T:return(e=sY(13,n,t,o)).elementType=T,e.lanes=l,e;case N:return(e=sY(19,n,t,o)).elementType=N,e.lanes=l,e;case A:return ao(n,o,l,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case E:s=9;break e;case M:s=11;break e;case L:s=14;break e;case P:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=sY(s,n,t,o)).elementType=e,t.type=r,t.lanes=l,t}function ar(e,t,n,r){return(e=sY(7,e,r,t)).lanes=n,e}function ao(e,t,n,r){return(e=sY(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function ai(e,t,n){return(e=sY(6,e,null,t)).lanes=n,e}function al(e,t,n){return(t=sY(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function as(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tl(0),this.expirationTimes=tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function aa(e,t,n,r,o,i,l,s,a){return e=new as(e,t,n,s,a),1===t?(t=1,!0===i&&(t|=8)):t=0,i=sY(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oI(i),e}function ac(e){if(!e)return rI;e:{if(eA(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rV(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(rV(n))return rU(e,n,t)}return t}function ad(e,t,n,r,o,i,l,s,a){return(e=aa(n,r,!0,e,0,i,0,s,a)).context=ac(null),n=e.current,(i=oz(r=s4(),o=sM(n))).callback=null!=t?t:null,o9(n,i,o),e.current.lanes=o,ts(e,o,r),s8(e,r),e}function au(e,t,n,r){var o=t.current,i=s4(),l=sM(o);return n=ac(n),null===t.context?t.context=n:t.pendingContext=n,(t=oz(i,l)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=o9(o,t,l))&&(sT(e,o,l,i),oB(e,o,l)),l}function ah(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ap(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function af(e,t){ap(e,t),(e=e.alternate)&&ap(e,t)}st=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||rz.current)ld=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return ld=!1,function(e,t,n){switch(t.tag){case 3:ly(t),ok();break;case 5:oX(t);break;case 1:rV(t.type)&&rW(t);break;case 4:oJ(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;rD(o4,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(rD(oY,1&oY.current),t.flags|=128,null):0!=(n&t.child.childLanes)?l2(e,t,n):(rD(oY,1&oY.current),null!==(e=l6(e,t,n))?e.sibling:null);rD(oY,1&oY.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return lT(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),rD(oY,oY.current),r)break;return null;case 22:case 23:return t.lanes=0,lm(e,t,n)}return l6(e,t,n)}(e,t,n);ld=0!=(131072&e.flags)}}else ld=!1,of&&0!=(1048576&t.flags)&&oc(t,ot,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;l8(e,t),e=t.pendingProps;var o=rB(t,rH.current);o7(t,n),o=i$(null,t,r,e,o,n);var l=i_();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rV(r)?(l=!0,rW(t)):l=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,oI(t),o.updater=iJ,t.stateNode=o,o._reactInternals=t,iY(t,r,e,n),t=lb(null,t,r,!0,l,n)):(t.tag=0,of&&l&&od(t),lu(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(l8(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return ae(e)?1:0;if(null!=e){if((e=e.$$typeof)===M)return 11;if(e===L)return 14}return 2}(r),e=iq(r,e),o){case 0:t=l$(null,t,r,e,n);break e;case 1:t=l_(null,t,r,e,n);break e;case 11:t=lh(null,t,r,e,n);break e;case 14:t=lp(null,t,r,iq(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,l$(e,t,r,o=t.elementType===r?o:iq(r,o),n);case 1:return r=t.type,o=t.pendingProps,l_(e,t,r,o=t.elementType===r?o:iq(r,o),n);case 3:e:{if(ly(t),null===e)throw Error(i(387));r=t.pendingProps,o=(l=t.memoizedState).element,oH(e,t),oj(t,r,null,n);var s=t.memoizedState;if(r=s.element,l.isDehydrated){if(l={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=lv(e,t,r,n,o=le(Error(i(423)),t));break e}if(r!==o){t=lv(e,t,r,n,o=le(Error(i(424)),t));break e}for(op=r1(t.stateNode.containerInfo.firstChild),oh=t,of=!0,om=null,n=oE(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ok(),r===o){t=l6(e,t,n);break e}lu(e,t,r,n)}t=t.child}return t;case 5:return oX(t),null===e&&ob(t),r=t.type,o=t.pendingProps,l=null!==e?e.memoizedProps:null,s=o.children,rv(r,o)?s=null:null!==l&&rv(r,l)&&(t.flags|=32),lg(e,t),lu(e,t,s,n),t.child;case 6:return null===e&&ob(t),null;case 13:return l2(e,t,n);case 4:return oJ(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=o3(t,null,r,n):lu(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,lh(e,t,r,o=t.elementType===r?o:iq(r,o),n);case 7:return lu(e,t,t.pendingProps,n),t.child;case 8:case 12:return lu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,s=o.value,rD(o4,r._currentValue),r._currentValue=s,null!==l){if(n5(l.value,s)){if(l.children===o.children&&!rz.current){t=l6(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var a=l.dependencies;if(null!==a){s=l.child;for(var c=a.firstContext;null!==c;){if(c.context===r){if(1===l.tag){(c=oz(-1,n&-n)).tag=2;var d=l.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),o5(l.return,n,t),a.lanes|=n;break}c=c.next}}else if(10===l.tag)s=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(s=l.return))throw Error(i(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),o5(s,n,t),s=l.sibling}else s=l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}lu(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,o7(t,n),r=r(o=oL(o)),t.flags|=1,lu(e,t,r,n),t.child;case 14:return o=iq(r=t.type,t.pendingProps),lp(e,t,r,o=iq(r.type,o),n);case 15:return lf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:iq(r,o),l8(e,t),t.tag=1,rV(r)?(e=!0,rW(t)):e=!1,o7(t,n),iX(t,r,o),iY(t,r,o,n),lb(null,t,r,!0,e,n);case 19:return lT(e,t,n);case 22:return lm(e,t,n)}throw Error(i(156,t.tag))};var am="function"==typeof reportError?reportError:function(e){console.error(e)};function ag(e){this._internalRoot=e}function a$(e){this._internalRoot=e}function a_(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ab(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ay(){}function av(e,t,n,r,o){var i=n._reactRootContainer;if(i){var l=i;if("function"==typeof o){var s=o;o=function(){var e=ah(l);s.call(e)}}au(t,l,e,o)}else l=function(e,t,n,r,o){if(o){if("function"==typeof r){var i=r;r=function(){var e=ah(l);i.call(e)}}var l=ad(t,r,e,0,null,!1,0,"",ay);return e._reactRootContainer=l,e[rM]=l.current,rs(8===e.nodeType?e.parentNode:e),sA(),l}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=ah(a);s.call(e)}}var a=aa(e,0,!1,null,0,!1,0,"",ay);return e._reactRootContainer=a,e[rM]=a.current,rs(8===e.nodeType?e.parentNode:e),sA(function(){au(t,a,n,r)}),a}(n,t,e,o,r);return ah(l)}a$.prototype.render=ag.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));au(e,t,null,null)},a$.prototype.unmount=ag.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sA(function(){au(null,e,null,null)}),t[rM]=null}},a$.prototype.unstable_scheduleHydration=function(e){if(e){var t=tf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tk.length&&0!==t&&t<tk[n].priority;n++);tk.splice(n,0,e),0===n&&tS(e)}},tu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tt(t.pendingLanes);0!==n&&(ta(t,1|n),s8(t,eV()),0==(6&sl)&&(sy=eV()+500,rX()))}break;case 13:sA(function(){var t=oO(e,1);if(null!==t){var n=s4();sT(t,e,1,n)}}),af(e,1)}},th=function(e){if(13===e.tag){var t=oO(e,134217728);null!==t&&sT(t,e,134217728,s4()),af(e,134217728)}},tp=function(e){if(13===e.tag){var t=sM(e),n=oO(e,t);null!==n&&sT(n,e,t,s4()),af(e,t)}},tf=function(){return tc},tm=function(e,t){var n=tc;try{return tc=e,t()}finally{tc=n}},ev=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=rL(r);if(!o)throw Error(i(90));G(r),X(r,o)}}}break;case"textarea":eo(e,n);break;case"select":null!=(t=n.value)&&et(e,!!n.multiple,t,!1)}},eS=sP,e1=sA;var aw={findFiberByHostInstance:rN,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ak={bundleType:aw.bundleType,version:aw.version,rendererPackageName:aw.rendererPackageName,rendererConfig:aw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=eD(e))?null:e.stateNode},findFiberByHostInstance:aw.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var a0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a0.isDisabled&&a0.supportsFiber)try{eK=a0.inject(ak),eJ=a0}catch(ax){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={usingClientEntryPoint:!1,Events:[r5,r7,rL,ex,eC,sP]},t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!a_(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:null}}(e,t,null,n)},t.createRoot=function(e,t){if(!a_(e))throw Error(i(299));var n=!1,r="",o=am;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=aa(e,1,!1,null,0,n,0,r,o),e[rM]=t.current,rs(8===e.nodeType?e.parentNode:e),new ag(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,e=Object.keys(e).join(",")))}return e=null===(e=eD(t))?null:e.stateNode},t.flushSync=function(e){return sA(e)},t.hydrate=function(e,t,n){if(!ab(t))throw Error(i(200));return av(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!a_(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,l="",s=am;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(l=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ad(t,null,e,1,null!=n?n:null,o,0,l,s),e[rM]=t.current,rs(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new a$(t)},t.render=function(e,t,n){if(!ab(t))throw Error(i(200));return av(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ab(e))throw Error(i(40));return!!e._reactRootContainer&&(sA(function(){av(null,null,e,!1,function(){e._reactRootContainer=null,e[rM]=null})}),!0)},t.unstable_batchedUpdates=sP,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ab(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return av(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391(e,t,n){var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950(e,t,n){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153(e,t,n){var r=n(5043),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!a.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:d,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},4202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function $(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}$.prototype.isReactComponent={},$.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},$.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=$.prototype;var y=b.prototype=new _;y.constructor=b,m(y,$.prototype),y.isPureReactComponent=!0;var v=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var o,i={},l=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(l=""+t.key),t)w.call(t,o)&&!x.hasOwnProperty(o)&&(i[o]=t[o]);var a=arguments.length-2;if(1===a)i.children=r;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(o in a=e.defaultProps)void 0===i[o]&&(i[o]=a[o]);return{$$typeof:n,type:e,key:l,ref:s,props:i,_owner:k.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function M(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function T(e,t,o){if(null==e)return e;var i=[],l=0;return function e(t,o,i,l,s){var a,c,d,u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var h=!1;if(null===t)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case n:case r:h=!0}}if(h)return s=s(h=t),t=""===l?"."+M(h,0):l,v(s)?(i="",null!=t&&(i=t.replace(E,"$&/")+"/"),e(s,o,i,"",function(e){return e})):null!=s&&(S(s)&&(s=(a=s,c=i+(!s.key||h&&h.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+t,{$$typeof:n,type:a.type,key:c,ref:a.ref,props:a.props,_owner:a._owner})),o.push(s)),1;if(h=0,l=""===l?".":l+":",v(t))for(var f=0;f<t.length;f++){var m=l+M(u=t[f],f);h+=e(u,o,i,m,s)}else if("function"==typeof(m=null===(d=t)||"object"!=typeof d?null:"function"==typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(t=m.call(t),f=0;!(u=t.next()).done;)h+=e(u=u.value,o,i,m=l+M(u,f++),s);else if("object"===u)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(o=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return h}(e,i,"","",function(e){return t.call(o,e,l++)}),i}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=$,t.Fragment=o,t.Profiler=l,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:k},t.act=A,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),i=e.key,l=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)w.call(t,c)&&!x.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==a?a[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];o.children=a}return{$$typeof:n,type:e.type,key:i,ref:l,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},5043(e,t,n){e.exports=n(4202)},579(e,t,n){e.exports=n(1153)},7234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,l=o>>>1;r<l;){var s=2*(r+1)-1,a=e[s],c=s+1,d=e[c];if(0>i(a,n))c<o&&0>i(d,a)?(e[r]=d,e[c]=n,r=c):(e[r]=a,e[s]=n,r=s);else{if(!(c<o&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,$="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var t=r(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function v(e){if(g=!1,y(e),!m){if(null!==r(c))m=!0,A(w);else{var t=r(d);null!==t&&R(v,t.startTime-e)}}}function w(e,n){m=!1,g&&(g=!1,_(S),S=-1),f=!0;var i=p;try{for(y(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var l=h.callback;if("function"==typeof l){h.callback=null,p=h.priorityLevel;var s=l(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?h.callback=s:h===r(c)&&o(c),y(n)}else o(c);h=r(c)}if(null!==h)var a=!0;else{var u=r(d);null!==u&&R(v,u.startTime-n),a=!1}return a}finally{h=null,p=i,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,x=!1,C=null,S=-1,E=5,M=-1;function T(){return!(t.unstable_now()-M<E)}function N(){if(null!==C){var e=t.unstable_now();M=e;var n=!0;try{n=C(!0,e)}finally{n?k():(x=!1,C=null)}}else x=!1}if("function"==typeof b)k=function(){b(N)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,P=L.port2;L.port1.onmessage=N,k=function(){P.postMessage(null)}}else k=function(){$(N,0)};function A(e){C=e,x||(x=!0,k())}function R(e,n){S=$(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,A(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var l=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?l+i:l,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>l?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(g?(_(S),S=-1):g=!0,R(v,i-l))):(e.sortIndex=s,n(c,e),m||f||(m=!0,A(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853(e,t,n){e.exports=n(7234)},3781(e,t,n){function r(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,o=n.indexOf(t);for(;-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}n.d(t,{D:()=>r})},2259(e,t,n){function r(e){let t=[],n=String(e||""),r=n.indexOf(","),o=0,i=!1;for(;!i;){-1===r&&(r=n.length,i=!0);let l=n.slice(o,r).trim();!l&&i||t.push(l),o=r+1,r=n.indexOf(",",o)}return t}function o(e,t){let n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}n.d(t,{A:()=>o,q:()=>r})},478(e,t,n){n.d(t,{m:()=>o});let r=/[ \t\n\f\r]/g;function o(e){return"object"==typeof e?"text"===e.type&&i(e.value):i(e)}function i(e){return""===e.replace(r,"")}},3573(e,t,n){n.d(t,{qy:()=>_,JW:()=>b});class r{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function o(e,t){let n={},o={},i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(o,e[i].normal);return new r(n,o,t)}r.prototype.property={},r.prototype.normal={},r.prototype.space=null;var i=n(7312),l=n(8306);let s={}.hasOwnProperty;function a(e){let t={},n={},o;for(o in e.properties)if(s.call(e.properties,o)){let a=e.properties[o],c=new l.E(o,e.transform(e.attributes||{},o),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(c.mustUseProperty=!0),t[o]=c,n[(0,i.S)(o)]=o,n[(0,i.S)(c.attribute)]=o}return new r(t,n,e.space)}let c=a({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),d=a({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function u(e,t){return t in e?e[t]:t}function h(e,t){return u(e,t.toLowerCase())}let p=a({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:h,properties:{xmlns:null,xmlnsXLink:null}});var f=n(161);let m=a({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:f.booleanish,ariaAutoComplete:null,ariaBusy:f.booleanish,ariaChecked:f.booleanish,ariaColCount:f.number,ariaColIndex:f.number,ariaColSpan:f.number,ariaControls:f.spaceSeparated,ariaCurrent:null,ariaDescribedBy:f.spaceSeparated,ariaDetails:null,ariaDisabled:f.booleanish,ariaDropEffect:f.spaceSeparated,ariaErrorMessage:null,ariaExpanded:f.booleanish,ariaFlowTo:f.spaceSeparated,ariaGrabbed:f.booleanish,ariaHasPopup:null,ariaHidden:f.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:f.spaceSeparated,ariaLevel:f.number,ariaLive:null,ariaModal:f.booleanish,ariaMultiLine:f.booleanish,ariaMultiSelectable:f.booleanish,ariaOrientation:null,ariaOwns:f.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:f.number,ariaPressed:f.booleanish,ariaReadOnly:f.booleanish,ariaRelevant:null,ariaRequired:f.booleanish,ariaRoleDescription:f.spaceSeparated,ariaRowCount:f.number,ariaRowIndex:f.number,ariaRowSpan:f.number,ariaSelected:f.booleanish,ariaSetSize:f.number,ariaSort:null,ariaValueMax:f.number,ariaValueMin:f.number,ariaValueNow:f.number,ariaValueText:null,role:null}}),g=a({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:h,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:f.commaSeparated,acceptCharset:f.spaceSeparated,accessKey:f.spaceSeparated,action:null,allow:null,allowFullScreen:f.boolean,allowPaymentRequest:f.boolean,allowUserMedia:f.boolean,alt:null,as:null,async:f.boolean,autoCapitalize:null,autoComplete:f.spaceSeparated,autoFocus:f.boolean,autoPlay:f.boolean,blocking:f.spaceSeparated,capture:null,charSet:null,checked:f.boolean,cite:null,className:f.spaceSeparated,cols:f.number,colSpan:null,content:null,contentEditable:f.booleanish,controls:f.boolean,controlsList:f.spaceSeparated,coords:f.number|f.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:f.boolean,defer:f.boolean,dir:null,dirName:null,disabled:f.boolean,download:f.overloadedBoolean,draggable:f.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:f.boolean,formTarget:null,headers:f.spaceSeparated,height:f.number,hidden:f.boolean,high:f.number,href:null,hrefLang:null,htmlFor:f.spaceSeparated,httpEquiv:f.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:f.boolean,inputMode:null,integrity:null,is:null,isMap:f.boolean,itemId:null,itemProp:f.spaceSeparated,itemRef:f.spaceSeparated,itemScope:f.boolean,itemType:f.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:f.boolean,low:f.number,manifest:null,max:null,maxLength:f.number,media:null,method:null,min:null,minLength:f.number,multiple:f.boolean,muted:f.boolean,name:null,nonce:null,noModule:f.boolean,noValidate:f.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:f.boolean,optimum:f.number,pattern:null,ping:f.spaceSeparated,placeholder:null,playsInline:f.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:f.boolean,referrerPolicy:null,rel:f.spaceSeparated,required:f.boolean,reversed:f.boolean,rows:f.number,rowSpan:f.number,sandbox:f.spaceSeparated,scope:null,scoped:f.boolean,seamless:f.boolean,selected:f.boolean,shadowRootClonable:f.boolean,shadowRootDelegatesFocus:f.boolean,shadowRootMode:null,shape:null,size:f.number,sizes:null,slot:null,span:f.number,spellCheck:f.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:f.number,step:null,style:null,tabIndex:f.number,target:null,title:null,translate:null,type:null,typeMustMatch:f.boolean,useMap:null,value:f.booleanish,width:f.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:f.spaceSeparated,axis:null,background:null,bgColor:null,border:f.number,borderColor:null,bottomMargin:f.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:f.boolean,declare:f.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:f.number,leftMargin:f.number,link:null,longDesc:null,lowSrc:null,marginHeight:f.number,marginWidth:f.number,noResize:f.boolean,noHref:f.boolean,noShade:f.boolean,noWrap:f.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:f.number,rules:null,scheme:null,scrolling:f.booleanish,standby:null,summary:null,text:null,topMargin:f.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:f.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:f.boolean,disableRemotePlayback:f.boolean,prefix:null,property:null,results:f.number,security:null,unselectable:null}}),$=a({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:u,properties:{about:f.commaOrSpaceSeparated,accentHeight:f.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:f.number,amplitude:f.number,arabicForm:null,ascent:f.number,attributeName:null,attributeType:null,azimuth:f.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:f.number,by:null,calcMode:null,capHeight:f.number,className:f.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:f.number,diffuseConstant:f.number,direction:null,display:null,dur:null,divisor:f.number,dominantBaseline:null,download:f.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:f.number,enableBackground:null,end:null,event:null,exponent:f.number,externalResourcesRequired:null,fill:null,fillOpacity:f.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:f.commaSeparated,g2:f.commaSeparated,glyphName:f.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:f.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:f.number,horizOriginX:f.number,horizOriginY:f.number,id:null,ideographic:f.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:f.number,k:f.number,k1:f.number,k2:f.number,k3:f.number,k4:f.number,kernelMatrix:f.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:f.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:f.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:f.number,overlineThickness:f.number,paintOrder:null,panose1:null,path:null,pathLength:f.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:f.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:f.number,pointsAtY:f.number,pointsAtZ:f.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:f.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:f.commaOrSpaceSeparated,rev:f.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:f.commaOrSpaceSeparated,requiredFeatures:f.commaOrSpaceSeparated,requiredFonts:f.commaOrSpaceSeparated,requiredFormats:f.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:f.number,specularExponent:f.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:f.number,strikethroughThickness:f.number,string:null,stroke:null,strokeDashArray:f.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:f.number,strokeOpacity:f.number,strokeWidth:null,style:null,surfaceScale:f.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:f.commaOrSpaceSeparated,tabIndex:f.number,tableValues:null,target:null,targetX:f.number,targetY:f.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:f.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:f.number,underlineThickness:f.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:f.number,values:null,vAlphabetic:f.number,vMathematical:f.number,vectorEffect:null,vHanging:f.number,vIdeographic:f.number,version:null,vertAdvY:f.number,vertOriginX:f.number,vertOriginY:f.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:f.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),_=o([d,c,p,m,g],"html"),b=o([d,c,p,m,$],"svg")},3944(e,t,n){n.d(t,{I:()=>c});var r=n(7312),o=n(8306),i=n(5210);let l=/^data[-\w.:]+$/i,s=/-[a-z]/g,a=/[A-Z]/g;function c(e,t){let n=(0,r.S)(t),c=t,h=i.R;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&l.test(t)){if("-"===t.charAt(4)){let p=t.slice(5).replace(s,u);c="data"+p.charAt(0).toUpperCase()+p.slice(1)}else{let f=t.slice(4);if(!s.test(f)){let m=f.replace(a,d);"-"!==m.charAt(0)&&(m="-"+m),t="data"+m}}h=o.E}return new h(c,t)}function d(e){return"-"+e.toLowerCase()}function u(e){return e.charAt(1).toUpperCase()}},7312(e,t,n){function r(e){return e.toLowerCase()}n.d(t,{S:()=>r})},8306(e,t,n){n.d(t,{E:()=>l});var r=n(5210),o=n(161);let i=Object.keys(o);class l extends r.R{constructor(e,t,n,r){let l=-1;if(super(e,t),s(this,"space",r),"number"==typeof n)for(;++l<i.length;){let a=i[l];s(this,i[l],(n&o[a])===o[a])}}}function s(e,t,n){n&&(e[t]=n)}l.prototype.defined=!0},5210(e,t,n){n.d(t,{R:()=>r});class r{constructor(e,t){this.property=e,this.attribute=t}}r.prototype.space=null,r.prototype.boolean=!1,r.prototype.booleanish=!1,r.prototype.overloadedBoolean=!1,r.prototype.number=!1,r.prototype.commaSeparated=!1,r.prototype.spaceSeparated=!1,r.prototype.commaOrSpaceSeparated=!1,r.prototype.mustUseProperty=!1,r.prototype.defined=!1},161(e,t,n){n.r(t),n.d(t,{boolean:()=>o,booleanish:()=>i,commaOrSpaceSeparated:()=>d,commaSeparated:()=>c,number:()=>s,overloadedBoolean:()=>l,spaceSeparated:()=>a});let r=0,o=u(),i=u(),l=u(),s=u(),a=u(),c=u(),d=u();function u(){return 2**++r}},4168(e,t,n){function r(e){let t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function o(e){return e.join(" ").trim()}n.d(t,{A:()=>o,q:()=>r})},9917(e,t,n){n.d(t,{l:()=>_});let r=/["&'<>`]/g,o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,l=/[|\\{}()[\]^$+*?.]/g,s=new WeakMap,a=/[\dA-Fa-f]/,c=/\d/,d=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],u={nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},h=["cent","copy","divide","gt","lt","not","para","times"],p={}.hasOwnProperty,f={},m;for(m in u)p.call(u,m)&&(f[u[m]]=m);let g=/[^\dA-Za-z]/;function $(e,t,n){let r,o=function(e,t,n){let r="&#x"+e.toString(16).toUpperCase();return n&&t&&!a.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);if((n.useNamedReferences||n.useShortestReferences)&&(r=function(e,t,n,r){let o=String.fromCharCode(e);if(p.call(f,o)){let i=f[o],l="&"+i;return n&&d.includes(i)&&!h.includes(i)&&(!r||t&&61!==t&&g.test(String.fromCharCode(t)))?l:l+";"}return""}(e,t,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!r)&&n.useShortestReferences){let i=function(e,t,n){let r="&#"+String(e);return n&&t&&!c.test(String.fromCharCode(t))?r:r+";"}(e,t,n.omitOptionalSemicolons);i.length<o.length&&(o=i)}return r&&(!n.useShortestReferences||r.length<o.length)?r:o}function _(e,t){return function e(t,n){var a;let c;return t=t.replace(n.subset?(a=n.subset,(c=s.get(a))||(c=function(e){let t=[],n=-1;for(;++n<e.length;)t.push(e[n].replace(l,"\\$&"));return RegExp("(?:"+t.join("|")+")","g")}(a),s.set(a,c)),c):r,d),n.subset||n.escapeOnly?t:t.replace(o,function(e,t,r){return n.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,r.charCodeAt(t+2),n)}).replace(i,d);function d(e,t,r){return n.format(e.charCodeAt(0),r.charCodeAt(t+1),n)}}(e,Object.assign({format:$},t))}},3780(e,t,n){n.d(t,{A:()=>o});let r={}.hasOwnProperty;function o(e,t){let n=t||{};function o(t){let n=o.invalid,i=o.handlers;if(t&&r.call(t,e)){let l=String(t[e]);n=r.call(i,l)?i[l]:o.unknown}if(n){for(var s=arguments.length,a=Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return n.call(this,t,...a)}}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,i7=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,t){if(1&t&&(e=this(e)),8&t||"object"==typeof e&&e&&(4&t&&e.__esModule||16&t&&"function"==typeof e.then))return e;var r=Object.create(null);n.r(r);var o={};i5=i5||[null,i7({}),i7([]),i7(i7)];for(var i=2&t&&e;"object"==typeof i&&!~i5.indexOf(i);i=i7(i))Object.getOwnPropertyNames(i).forEach(t=>o[t]=()=>e[t]);return o.default=()=>e,n.d(r,o),r},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+({75:"29a5befe",119:"5692e542",120:"e16e8d15",154:"9ff047d6",187:"bb03c262",215:"87f8e80c",227:"aaf8a0df",232:"35d97702",251:"5c545b37",253:"5949d833",269:"000c3239",271:"eee32b3d",280:"7837417e",289:"81ba9629",332:"f802f505",357:"2db62f21",363:"212983c1",383:"1b19bbc6",410:"2bf9036d",431:"b744e484",456:"d79089dd",469:"534de025",483:"fe7320c1",522:"ea458e28",528:"c956edbb",561:"86f48ce8",567:"ddaaa5aa",585:"590bd824",590:"149b1af1",711:"05920685",762:"632fe1c1",795:"a363c711",800:"03da41ce",829:"c6f5fe3c",845:"e255db68",853:"76591a40",874:"66fffc4a",894:"fc07f382",942:"a0664919",966:"4e90cde4",992:"432902ad",1057:"82ac93c1",1064:"49694e2c",1082:"6bcadc14",1106:"4c4c2238",1174:"332f602b",1189:"8c9efa7a",1196:"67273035",1304:"d84aa3b0",1330:"52c74b36",1366:"bdb98dc7",1394:"982dda92",1474:"72304ff0",1567:"c902832d",1606:"c7f97d6c",1631:"cefa14c1",1639:"a05fdfa9",1650:"4beb0d7e",1667:"0d59cb6f",1668:"6acd3ce1",1752:"c9cabcfb",1763:"6af4a214",1814:"540b3ddb",1918:"ade0c73b",1922:"401e47ee",1926:"5f8fb7b4",2010:"2e93ec5c",2048:"e892f744",2062:"32566941",2069:"1dbf7c66",2078:"7b5b0b93",2080:"965e16f5",2101:"0c23ce1f",2144:"c7e6fc7b",2187:"0809ec1c",2317:"55e0c93d",2327:"923e0e8d",2393:"c0a9e0ca",2406:"075def5c",2454:"ef246b2f",2464:"f2d4d3d8",2477:"de8d64a9",2478:"ea0cdcd9",2482:"17947351",2484:"1c80401a",2509:"f82684cf",2549:"2cb66f58",2551:"bde7eda8",2573:"fcb314df",2609:"95717c1a",2667:"9d4fc6f6",2673:"0031af24",2707:"50e20c4a",2757:"5bb365e2",2768:"936cae71",2779:"04f00a00",2799:"92a43b1d",2835:"a7803ecb",2879:"b28b03f9",2881:"3fb6b32d",2969:"972004da",2998:"86cd070b",3014:"905cea8d",3082:"7b440f24",3083:"a30f0bd6",3117:"1cbe132b",3161:"12a7cb9e",3218:"9f354a36",3224:"58d12555",3232:"c330491d",3234:"6e006157",3253:"c12bbdbf",3254:"c2b258d3",3267:"02fdec2d",3284:"2d690bfc",3353:"3eb938a8",3355:"f10c8c3e",3378:"04ca78de",3383:"662ca259",3387:"729a9cb9",3397:"6651005a",3398:"66250062",3412:"13cee5be",3451:"1cd3c928",3454:"5805eda4",3468:"8d356d09",3510:"5de6721d",3535:"8dfbe8d2",3566:"912b7186",3569:"e7c391f5",3607:"167a3520",3722:"9519269a",3726:"8282eacd",3731:"75c7baa2",3798:"75f98c38",3816:"8d7a6f06",3848:"04d3f36b",3930:"31a93fcc",3934:"5157dcd5",3943:"d3fd84c8",3979:"91e1658e",3998:"55c58ba6",4027:"0bae57de",4054:"110647c4",4099:"da1b9f1d",4112:"d5260567",4213:"084faf73",4217:"069af320",4228:"13064579",4243:"f5bd0bdc",4247:"6dbc17aa",4304:"b90e7cf6",4349:"68401291",4377:"131e5371",4415:"1c0458f7",4421:"6872e403",4433:"f81477c8",4503:"21e69daf",4507:"8fc314a2",4606:"f7730207",4619:"a8f40adc",4645:"54664b55",4723:"265a6482",4730:"7261f820",4774:"4c54fb6a",4853:"c585cfa1",4859:"ff91381d",4891:"4cb81569",4918:"e97421d7",4947:"90bd05b3",4949:"98b1d98c",4951:"40f9591b",4960:"c221c876",4997:"4bf27418",5026:"acf3bad0",5053:"8ebc552e",5088:"12e779f1",5092:"79cadb88",5129:"58ea05f1",5131:"d1d0f430",5138:"93e8768f",5220:"8bc8a033",5318:"25dcb1e2",5331:"6bb643ca",5468:"4ee33f4a",5531:"5eeb9014",5551:"caccff32",5588:"ae309d83",5599:"b8232753",5696:"d51124ae",5710:"63c75879",5735:"cfcd7c4f",5747:"9a385446",5755:"fb9839f5",5768:"06fc3ac5",5769:"12010366",5796:"b58cbd92",5852:"2a796908",5942:"17d18eff",5972:"17008527",5992:"d7ec5274",5995:"8f5a2737",6e3:"4f1a566c",6078:"60331a08",6100:"fa3adbe4",6104:"ddc6f3e8",6114:"dea42627",6117:"a0ea3130",6141:"ccdeba6e",6200:"6308d958",6236:"89d9b822",6251:"856ce0ae",6262:"af29d367",6303:"ed2c6550",6320:"917bbe92",6322:"c76d39ae",6339:"d652d8fb",6345:"df7e6e53",6346:"a26fae53",6400:"4d85ef16",6404:"505ab777",6416:"1ae24ee1",6491:"e0265650",6550:"46955007",6743:"805b6182",6750:"663089d8",6764:"e0b5697d",6782:"fea2e30f",6795:"eceeb62e",6889:"466776b4",6893:"74b63d1d",6959:"11b7d0c2",6972:"33c7dd76",6996:"689b34ae",7013:"9217d15c",7016:"b8c7cb04",7026:"c08a2106",7031:"2f426f77",7041:"6c78a9ef",7051:"eb1e375f",7065:"5ec407b0",7088:"6ba6af2a",7096:"f72da394",7152:"c4cf85d0",7153:"5abd2053",7177:"171f67fb",7196:"59429542",7219:"b187900f",7223:"d62ef2db",7231:"e4522120",7318:"044dd365",7329:"3cb848c6",7352:"46b371c3",7363:"8731f0ef",7413:"994ad81f",7469:"8bfe0c9e",7499:"dc88c2ed",7591:"4adb0142",7647:"feaa643c",7670:"9f9a7596",7672:"435e1925",7673:"106f25c9",7730:"8ce260a4",7734:"1f889ce1",7817:"f0821d7a",7830:"737fd376",7902:"0cbb2711",7945:"9245fc7e",7973:"42726581",8014:"6a157a77",8055:"c2d3d830",8221:"20340bc2",8228:"842c74ba",8231:"e0c4a084",8283:"ea3cf9a6",8287:"351de111",8379:"42aa1cd1",8425:"d3548503",8470:"ffea6ca7",8493:"170a1453",8512:"c5a42821",8513:"3ea2f033",8522:"8633b26b",8552:"e42835db",8567:"c683a9ba",8611:"48e17fcb",8696:"8af8b5e8",8775:"8911e9a4",8806:"af52897e",8834:"83fc0b96",8846:"c9b6a707",8855:"ab5f9291",8860:"e6ca36a6",8897:"f99fb48f",8931:"cd55b4b3",8954:"78e19ebe",8984:"a14e0e5c",9068:"102d913a",9125:"5f1f1eb2",9130:"23dea192",9134:"4c787d67",9173:"299f6059",9184:"0c2a371f",9199:"9d5ebdab",9207:"b904665d",9226:"4d0e880a",9233:"912d0b4c",9274:"ddd00384",9293:"8cba62a5",9306:"67dd3916",9335:"485e1ee5",9367:"3d338674",9371:"ae01f9e8",9386:"5fe52698",9399:"b0a9c457",9425:"c51e1fd9",9464:"36566f97",9476:"0c2b5866",9480:"00d9e750",9483:"abffe617",9567:"b8acbf16",9568:"9380ca21",9579:"ef58870a",9654:"adc9603b",9662:"f2a6e1d1",9724:"be588a19",9730:"d009c276",9736:"399db36a",9764:"1a250d50",9828:"353cc1c3",9852:"dd95537f",9878:"592873d1",9880:"da4691c9",9962:"7b166d43"})[e]+".chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),iL={},iP="block-note:",n.l=(e,t,r,o)=>{if(iL[e])iL[e].push(t);else{if(void 0!==r)for(var i,l,s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==iP+r){i=c;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",iP+r),i.src=e),iL[e]=[t];var d=(t,n)=>{i.onerror=i.onload=null,clearTimeout(u);var r=iL[e];if(delete iL[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach(e=>e(n)),t)return t(n)},u=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),l&&document.head.appendChild(i)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="",iA={8792:0},n.f.j=(e,t)=>{var r=n.o(iA,e)?iA[e]:void 0;if(0!==r){if(r)t.push(r[2]);else{var o=new Promise((t,n)=>r=iA[e]=[t,n]);t.push(r[2]=o);var i=n.p+n.u(e),l=Error();n.l(i,t=>{if(n.o(iA,e)&&(0!==(r=iA[e])&&(iA[e]=void 0),r)){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,r[1](l)}},"chunk-"+e,e)}}},iR=(e,t)=>{var r,o,i=t[0],l=t[1],s=t[2],a=0;if(i.some(e=>0!==iA[e])){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);s&&s(n)}for(e&&e(t);a<i.length;a++)o=i[a],n.o(iA,o)&&iA[o]&&iA[o][0](),iA[o]=0},(iO=self.webpackChunkblock_note=self.webpackChunkblock_note||[]).forEach(iR.bind(null,0)),iO.push=iR.bind(null,iO.push.bind(iO));var r=n(5043),o=n.t(r,2),i=n(4391);function l(e){this.content=e}l.prototype={constructor:l,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return -1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new l(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new l(n)},addToStart:function(e,t){return new l([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new l(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new l(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=l.from(e)).size?new l(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=l.from(e)).size?new l(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=l.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},l.from=function(e){if(e instanceof l)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new l(t)};let s=l;class a{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;for(let i=0,l=0;l<t;i++){let s=this.content[i],a=l+s.nodeSize;if(a>e&&!1!==n(s,r+l,o||null,i)&&s.content.size){let c=l+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,r+c)}l=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",i=!0;return this.nodesBetween(e,t,(l,s)=>{let a=l.isText?l.text.slice(Math.max(e,s)-s,t-s):l.isLeaf?r?"function"==typeof r?r(l):r:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&a||l.isTextblock)&&n&&(i?i=!1:o+=n),o+=a},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new a(r,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,i=0;i<t;o++){let l=this.content[o],s=i+l.nodeSize;s>e&&((i<e||s>t)&&(l=l.isText?l.cut(Math.max(0,e-i),Math.min(l.text.length,t-i)):l.cut(Math.max(0,e-i-1),Math.min(l.content.size,t-i-1))),n.push(l),r+=l.nodeSize),i=s}return new a(n,r)}cutByIndex(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new a(r,o)}addToStart(e){return new a([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new a(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){return function e(t,n,r){for(let o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;let i=t.child(o),l=n.child(o);if(i!=l){if(!i.sameMarkup(l))return r;if(i.isText&&i.text!=l.text){for(let s=0;i.text[s]==l.text[s];s++)r++;return r}if(i.content.size||l.content.size){let a=e(i.content,l.content,r+1);if(null!=a)return a}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}findDiffEnd(e){return function e(t,n,r,o){for(let i=t.childCount,l=n.childCount;;){if(0==i||0==l)return i==l?null:{a:r,b:o};let s=t.child(--i),a=n.child(--l),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:r,b:o};if(s.isText&&s.text!=a.text){let d=0,u=Math.min(s.text.length,a.text.length);for(;d<u&&s.text[s.text.length-d-1]==a.text[a.text.length-d-1];)d++,r--,o--;return{a:r,b:o}}if(s.content.size||a.content.size){let h=e(s.content,a.content,r-1,o-1);if(h)return h}r-=c,o-=c}else r-=c,o-=c}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return d(0,e);if(e==this.size)return d(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?d(n+1,o):d(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return a.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new a(t||e,n)}static from(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);let c={index:0,offset:0};function d(e,t){return c.index=e,c.offset=t,c}function u(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!u(e[r],t[r]))return!1}else{for(let o in e)if(!(o in t)||!u(e[o],t[o]))return!1;for(let i in t)if(!(i in e))return!1}return!0}class h{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return h.none;if(e instanceof h)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}h.none=[];class p extends Error{}class f{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,o){let{index:i,offset:l}=t.findIndex(n),s=t.maybeChild(i);if(l==n||s.isText)return o&&!o.canReplace(i,i,r)?null:t.cut(0,n).append(r).append(t.cut(n));let a=e(s.content,n-l-1,r);return a&&t.replaceChild(i,s.copy(a))}(this.content,e+this.openStart,t);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(e,t){return new f(function e(t,n,r){let{index:o,offset:i}=t.findIndex(n),l=t.maybeChild(o),{index:s,offset:a}=t.findIndex(r);if(i==n||l.isText){if(a!=r&&!t.child(s).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(o!=s)throw RangeError("Removing non-flat range");return t.replaceChild(o,l.copy(e(l.content,n-i-1,r-i-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return f.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(e,t.content),n,r)}static maxOpen(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new f(e,n,r)}}function m(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function g(e,t,n){let r=e.node(n);return m(r,t.node(n)),r}function $(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function _(e,t,n,r){let o=(t||e).node(n),i=0,l=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&($(e.nodeAfter,r),i++));for(let s=i;s<l;s++)$(o.child(s),r);t&&t.depth==n&&t.textOffset&&$(t.nodeBefore,r)}function b(e,t){return e.type.checkContent(t),e.copy(t)}function y(e,t,n){let r=[];return _(null,e,n,r),e.depth>n&&$(b(g(e,t,n+1),y(e,t,n+1)),r),_(t,null,n,r),new a(r)}f.empty=new f(a.empty,0,0);class v{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let o=n;n=r,r=o}let i=n.marks;for(var l=0;l<i.length;l++)!1!==i[l].type.spec.inclusive||r&&i[l].isInSet(r.marks)||(i=i[l--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new C(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let i=e;;){let{index:l,offset:s}=i.content.findIndex(o),a=o-s;if(n.push(i,l,r+s),!a||(i=i.child(l)).isText)break;o=a-1,r+=s+1}return new v(t,n,o)}static resolveCached(e,t){let n=x.get(e);if(n)for(let r=0;r<n.elts.length;r++){let o=n.elts[r];if(o.pos==t)return o}else x.set(e,n=new w);let i=n.elts[n.i]=v.resolve(e,t);return n.i=(n.i+1)%k,i}}class w{constructor(){this.elts=[],this.i=0}}let k=12,x=new WeakMap;class C{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let S=Object.create(null);class E{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.none;this.type=e,this.attrs=t,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||S)&&h.sameSet(this.marks,n||h.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new E(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new E(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return f.empty;let r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),l=r.start(i),s=r.node(i).content.cut(r.pos-l,o.pos-l);return new f(s,r.depth-i,o.depth-i)}replace(e,t,n){return function e(t,n,r){if(r.openStart>t.depth)throw new p("Inserted content deeper than insertion position");if(t.depth-r.openStart!=n.depth-r.openEnd)throw new p("Inconsistent open depths");return function e(t,n,r,o){let i=t.index(o),l=t.node(o);if(i==n.index(o)&&o<t.depth-r.openStart){let s=e(t,n,r,o+1);return l.copy(l.content.replaceChild(i,s))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){let{start:c,end:d}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)r=t.node(o).copy(a.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return b(l,function e(t,n,r,o,i){let l=t.depth>i&&g(t,n,i+1),s=o.depth>i&&g(r,o,i+1),c=[];return _(null,t,i,c),l&&s&&n.index(i)==r.index(i)?(m(l,s),$(b(l,e(t,n,r,o,i+1)),c)):(l&&$(b(l,y(t,n,i+1)),c),_(n,r,i,c),s&&$(b(s,y(r,o,i+1)),c)),_(o,null,i,c),new a(c)}(t,c,d,n,o))}{let u=t.parent,h=u.content;return b(u,h.cut(0,t.parentOffset).append(r.content).append(h.cut(n.parentOffset)))}}return b(l,y(t,n,o))}(t,n,r,0)}(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return v.resolveCached(this,e)}resolveNoCache(e){return v.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),T(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),l=i&&i.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let s=r;s<o;s++)if(!this.type.allowsMarks(n.child(s).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=h.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!h.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=a.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}E.prototype.text=void 0;class M extends E{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):T(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new M(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new M(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function T(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class N{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let r=new L(e,t);if(null==r.next)return N.empty;let o=P(r);r.next&&r.err("Unexpected trailing text");let i,l=(n=function(e){let t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach(e=>e.to=t)}function i(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(i(n,t)),[]);if("seq"!=e.type){if("star"==e.type){let l=n();return r(t,l),o(i(e.expr,l),l),[r(l)]}if("plus"==e.type){let s=n();return o(i(e.expr,t),s),o(i(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){let a=t;for(let c=0;c<e.min;c++){let d=n();o(i(e.expr,a),d),a=d}if(-1==e.max)o(i(e.expr,a),a);else for(let u=e.min;u<e.max;u++){let h=n();r(a,h),o(i(e.expr,a),h),a=h}return[r(a)]}if("name"==e.type)return[r(t,void 0,e.value)];throw Error("Unknown expr type")}for(let p=0;;p++){let f=i(e.exprs[p],t);if(p==e.exprs.length-1)return f;o(f,t=n())}}}(o),i=Object.create(null),function e(t){let r=[];t.forEach(e=>{n[e].forEach(e=>{let t,{term:o,to:i}=e;if(o){for(let l=0;l<r.length;l++)r[l][0]==o&&(t=r[l][1]);H(n,i).forEach(e=>{t||r.push([o,t=[]]),-1==t.indexOf(e)&&t.push(e)})}})});let o=i[t.join(",")]=new N(t.indexOf(n.length-1)>-1);for(let l=0;l<r.length;l++){let s=r[l][1].sort(I);o.next.push({type:r[l][0],next:i[s.join(",")]||e(s)})}return o}(H(n,0)));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let o=r[n],i=!o.validEnd,l=[];for(let s=0;s<o.next.length;s++){let{type:a,next:c}=o.next[s];l.push(a.name),!i||a.isText||a.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,l){let s=i.matchFragment(e,n);if(s&&(!t||s.validEnd))return a.from(l.map(e=>e.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:d,next:u}=i.next[c];if(!d.isText&&!d.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);let h=o(u,l.concat(d));if(h)return h}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let i=[];for(let l=r;l.type;l=l.via)i.push(l.type);return i.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:c}=o.next[s];a.isLeaf||a.hasRequiredAttrs()||a.name in t||r.type&&!c.validEnd||(n.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r}).join("\n")}}N.empty=new N(!0);class L{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function P(e){let t=[];do t.push(A(e));while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function A(e){let t=[];do t.push(R(e));while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function R(e){let t=function(e){if(e.eat("(")){let t=P(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let n=(function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let l=n[i];l.isInGroup(t)&&o.push(l)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o})(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=D(e,t)}return t}function O(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function D(e,t){let n=O(e),r=n;return e.eat(",")&&(r="}"!=e.next?O(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function I(e,t){return t-e}function H(e,t){let n=[];return function t(r){let o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(let i=0;i<o.length;i++){let{term:l,to:s}=o[i];l||-1!=n.indexOf(s)||t(s)}}(t),n.sort(I)}function z(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function B(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let i=e[r];if(!i.hasDefault)throw RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function V(e,t,n,r){for(let o in t)if(!(o in e))throw RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let i in e){let l=e[i];l.validate&&l.validate(t[i])}}function j(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new U(e,r,t[r]);return n}class F{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=j(e,n.attrs),this.defaultAttrs=z(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==N.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:B(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw Error("NodeType.create can't construct text nodes");return new E(this,this.computeAttrs(e),a.from(t),h.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=a.from(t),this.checkContent(t),new E(this,this.computeAttrs(e),t,h.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=a.from(t)).size){let r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}let o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(a.empty,!0);return i?new E(this,e,t.append(i),h.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){V(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:h.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new F(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let o in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}}class U{constructor(e,t,n){var r,o,i;let l;this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?(r=e,o=t,l=(i=n.validate).split("|"),e=>{let t=null===e?"null":typeof e;if(0>l.indexOf(t))throw RangeError(`Expected value of type ${l} for attribute ${o} on type ${r}, got ${t}`)}):n.validate}get isRequired(){return!this.hasDefault}}class W{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=j(e,r.attrs),this.excluded=null;let o=z(this.attrs);this.instance=o?new h(this,o):null}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new h(this,B(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,o)=>n[e]=new W(e,r++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){V(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class G{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=s.from(e.nodes),t.marks=s.from(e.marks||{}),this.nodes=F.compile(this.spec.nodes,this),this.marks=W.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],l=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[l]||(r[l]=N.parse(l,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet="_"==a?null:a?q(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(let c in this.marks){let d=this.marks[c],u=d.spec.excludes;d.excluded=null==u?[d]:""==u?[]:q(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof F))throw RangeError("Invalid node type: "+e);if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new M(n,n.defaultAttrs,e,h.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return E.fromJSON(this,e)}markFromJSON(e){return h.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function q(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],l=i;if(i)n.push(i);else for(let s in e.marks){let a=e.marks[s];("_"==o||a.spec.group&&a.spec.group.split(" ").indexOf(o)>-1)&&n.push(l=a)}if(!l)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class K{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{var t,r;if(null!=(t=e).tag)this.tags.push(e);else if(null!=(r=e).style){let o=/[^=]*/.exec(e.style)[0];0>n.indexOf(o)&&n.push(o),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ee(this,t,!1);return n.addAll(e,h.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ee(this,t,!0);return n.addAll(e,h.none,t.from,t.to),f.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(et(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(e);if(!1===i)continue;o.attrs=i||void 0}return o}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let i=this.styles[o],l=i.style;if(!(0!=l.indexOf(e)||i.context&&!n.matchesContext(i.context)||l.length>e.length&&(61!=l.charCodeAt(e.length)||l.slice(e.length+1)!=t))){if(i.getAttrs){let s=i.getAttrs(t);if(!1===s)continue;i.attrs=s||void 0}return i}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(e=>{n(e=en(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)})}for(let i in e.nodes){let l=e.nodes[i].spec.parseDOM;l&&l.forEach(e=>{n(e=en(e)),e.node||e.ignore||e.mark||(e.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new K(e,K.schemaRules(e)))}}let J={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Z={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},X={ol:!0,ul:!0};function Q(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Y{constructor(e,t,n,r,o,i){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=i,this.content=[],this.activeMarks=h.none,this.match=o||(4&i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(a.from(e));if(!t){let n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let t,n=this.content[this.content.length-1];if(n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))){let r=n;n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}let o=a.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!J.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ee{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,o=t.topNode,i=Q(null,t.preserveWhitespace,0)|(n?4:0);r=o?new Y(o.type,o.attrs,h.none,!0,t.topMatch||o.type.contentMatch,i):new Y(n?null:e.schema.topNodeType,null,h.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top;if(2&r.options||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(1&r.options)n=2&r.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],i=e.previousSibling;(!o||i&&"BR"==i.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r,o=e.nodeName.toLowerCase();X.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&X.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,n));if(i?i.ignore:Z.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let l,s=this.top,a=this.needsBlock;if(J.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),l=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e,t);let c=i&&i.skip?t:this.readStyles(e,t);c&&this.addAll(e,c),l&&this.sync(s),this.needsBlock=a}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,i,d,!1===i.consuming?r:void 0)}}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],i=n.getPropertyValue(o);if(i)for(let l;;){let s=this.parser.matchStyle(o,i,this,l);if(!s)break;if(s.ignore)return null;if(t=s.clearMark?t.filter(e=>!s.clearMark(e)):t.concat(this.parser.schema.marks[s.mark].create(s.attrs)),!1!==s.consuming)break;l=s}}return t}addElementByRule(e,t,n,r){let o,i;if(t.node){if((i=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(i.create(t.attrs),n)||this.leafFallback(e,n);else{let l=this.enter(i,t.attrs||null,n,t.preserveWhitespace);l&&(o=!0,n=l)}}else{let s=this.parser.schema.marks[t.mark];n=n.concat(s.create(t.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n));else{let c=e;"string"==typeof t.contentElement?c=e.querySelector(t.contentElement):"function"==typeof t.contentElement?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}o&&this.sync(a)&&this.open--}addAll(e,t,n,r){let o=n||0;for(let i=n?e.childNodes[n]:e.firstChild,l=null==r?null:e.childNodes[r];i!=l;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,t);this.findAtPoint(e,o)}findPlace(e,t){let n,r;for(let o=this.open;o>=0;o--){let i=this.nodes[o],l=i.findWrapping(e);if(l&&(!n||n.length>l.length)&&(n=l,r=i,!l.length)||i.solid)break}if(!n)return null;this.sync(r);for(let s=0;s<n.length;s++)t=this.enterInner(n[s],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&(t=this.enterInner(n,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=h.none;for(let l of r.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):er(l.type,e.type))&&(i=l.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,t,n,r){let o=this.findPlace(e.create(t),n);return o&&(o=this.enterInner(e,t,n,!0,r)),o}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let l=Q(e,o,i.options);4&i.options&&0==i.content.length&&(l|=4);let s=h.none;return n=n.filter(t=>!(i.type?i.type.allowsMarkType(t.type):er(t.type,e))||(s=t.addToSet(s),!1)),this.nodes.push(new Y(e,t,s,r,null,l)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(e,l)=>{for(;e>=0;e--){let s=t[e];if(""==s){if(e==t.length-1||0==e)continue;for(;l>=o;l--)if(i(e-1,l))return!0;return!1}{let a=l>0||0==l&&r?this.nodes[l].type:n&&l>=o?n.node(l-o).type:null;if(!a||a.name!=s&&!a.isInGroup(s))return!1;l--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}}function et(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function en(e){let t={};for(let n in e)t[n]=e[n];return t}function er(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],l=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t||0>i.indexOf(o)&&l(o))return!0}};if(l(o.contentMatch))return!0}}class eo{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=el(t).createDocumentFragment());let r=n,o=[];return e.forEach(e=>{if(o.length||e.marks.length){let n=0,i=0;for(;n<o.length&&i<e.marks.length;){let l=e.marks[i];if(this.marks[l.type.name]){if(!l.eq(o[n][0])||!1===l.type.spec.spanning)break;n++,i++}else i++}for(;n<o.length;)r=o.pop()[1];for(;i<e.marks.length;){let s=e.marks[i++],a=this.serializeMark(s,e.isInline,t);a&&(o.push([s,r]),r.appendChild(a.dom),r=a.contentDOM||a.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=ea(el(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&ea(el(n),r(e,t),null,e.attrs)}static renderSpec(e,t){return ea(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new eo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ei(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return ei(e.marks)}}function ei(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function el(e){return e.document||window.document}let es=new WeakMap;function ea(e,t,n,r){var o,i;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let l,s=t[0];if("string"!=typeof s)throw RangeError("Invalid array passed to renderSpec");let a,c;if(r&&(l=(o=r,void 0===(a=es.get(o))&&es.set(o,a=(c=null,function e(t){if(t&&"object"==typeof t){if(Array.isArray(t)){if("string"==typeof t[0])c||(c=[]),c.push(t);else for(let n=0;n<t.length;n++)e(t[n])}else for(let r in t)e(t[r])}}(i=o),c)),a))&&l.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let d,u=s.indexOf(" ");u>0&&(n=s.slice(0,u),s=s.slice(u+1));let h=n?e.createElementNS(n,s):e.createElement(s),p=t[1],f=1;if(p&&"object"==typeof p&&null==p.nodeType&&!Array.isArray(p)){for(let m in f=2,p)if(null!=p[m]){let g=m.indexOf(" ");g>0?h.setAttributeNS(m.slice(0,g),m.slice(g+1),p[m]):h.setAttribute(m,p[m])}}for(let $=f;$<t.length;$++){let _=t[$];if(0===_){if($<t.length-1||$>f)throw RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}{let{dom:b,contentDOM:y}=ea(e,_,n,r);if(h.appendChild(b),y){if(d)throw RangeError("Multiple content holes");d=y}}}return{dom:h,contentDOM:d}}function ec(e,t){return e+65536*t}function ed(e){return 65535&e}class eu{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class eh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges=e,this.inverted=t,!e.length&&eh.empty)return eh.empty}recover(e){var t;let n=0,r=ed(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*r]+n+((t=e)-(65535&t))/65536}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let s=this.ranges[l]-(this.inverted?r:0);if(s>e)break;let a=this.ranges[l+o],c=this.ranges[l+i],d=s+a;if(e<=d){let u=s+r+((a?e==s?-1:e==d?1:t:t)<0?0:c);if(n)return u;let h=e==(t<0?s:d)?null:ec(l/3,e-s),p=e==s?2:e==d?1:4;return(t<0?e!=s:e!=d)&&(p|=8),new eu(u,p,h)}r+=c-a}return n?e+r:new eu(e+r,0,null)}touches(e,t){let n=0,r=ed(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let s=this.ranges[l]-(this.inverted?n:0);if(s>e)break;let a=this.ranges[l+o];if(e<=s+a&&l==3*r)return!0;n+=this.ranges[l+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],l=i-(this.inverted?o:0),s=i+(this.inverted?0:o),a=this.ranges[r+t],c=this.ranges[r+n];e(l,l+a,s,s+c),o+=c-a}}invert(){return new eh(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?eh.empty:new eh(e<0?[0,-e,0]:[0,0,e])}}eh.empty=new eh([]);class ep{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new ep(this.maps,this.mirror,e,t)}copy(){return new ep(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new ep;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let i=this.maps[o].mapResult(e,t);if(null!=i.recover){let l=this.getMirror(o);if(null!=l&&l>o&&l<this.to){o=l,e=this.maps[l].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new eu(e,r,null)}}let ef=Object.create(null);class em{getMap(){return eh.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=ef[t.stepType];if(!n)throw RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ef)throw RangeError("Duplicate use of step JSON ID "+e);return ef[e]=t,t.prototype.jsonID=e,t}}class eg{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new eg(e,null)}static fail(e){return new eg(null,e)}static fromReplace(e,t,n,r){try{return eg.ok(e.replace(t,n,r))}catch(o){if(o instanceof p)return eg.fail(o.message);throw o}}}function e$(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(e$(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return a.fromArray(r)}class e_ extends em{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new f(e$(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return eg.fromReplace(e,this.from,this.to,o)}invert(){return new eb(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new e_(t.pos,n.pos,this.mark)}merge(e){return e instanceof e_&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new e_(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new e_(t.from,t.to,e.markFromJSON(t.mark))}}em.jsonID("addMark",e_);class eb extends em{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new f(e$(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return eg.fromReplace(e,this.from,this.to,n)}invert(){return new e_(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new eb(t.pos,n.pos,this.mark)}merge(e){return e instanceof eb&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new eb(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new eb(t.from,t.to,e.markFromJSON(t.mark))}}em.jsonID("removeMark",eb);class ey extends em{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return eg.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return eg.fromReplace(e,this.pos,this.pos+1,new f(a.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(n))return new ey(this.pos,t.marks[r]);return new ey(this.pos,this.mark)}}return new ev(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ey(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ey(t.pos,e.markFromJSON(t.mark))}}em.jsonID("addNodeMark",ey);class ev extends em{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return eg.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return eg.fromReplace(e,this.pos,this.pos+1,new f(a.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new ey(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ev(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ev(t.pos,e.markFromJSON(t.mark))}}em.jsonID("removeNodeMark",ev);class ew extends em{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&e0(e,this.from,this.to)?eg.fail("Structure replace would overwrite content"):eg.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new eh([this.from,this.to-this.from,this.slice.size])}invert(e){return new ew(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new ew(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof ew)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?f.empty:new f(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ew(e.from,this.to,t,this.structure)}}{let n=this.slice.size+e.slice.size==0?f.empty:new f(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ew(this.from,this.to+(e.to-e.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new ew(t.from,t.to,f.fromJSON(e,t.slice),!!t.structure)}}em.jsonID("replace",ew);class ek extends em{constructor(e,t,n,r,o,i){let l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=l}apply(e){if(this.structure&&(e0(e,this.from,this.gapFrom)||e0(e,this.gapTo,this.to)))return eg.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return eg.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?eg.fromReplace(e,this.from,this.to,n):eg.fail("Content does not fit in gap")}getMap(){return new eh([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ek(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new ek(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ek(t.from,t.to,t.gapFrom,t.gapTo,f.fromJSON(e,t.slice),t.insert,!!t.structure)}}function e0(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let l=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,o--}}return!1}function ex(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),l=[],s=t+1;for(let c=0;c<i.childCount;c++){let d=i.child(c),u=s+d.nodeSize,h=r.matchType(d.type);if(h){r=h;for(let p=0;p<d.marks.length;p++)n.allowsMarkType(d.marks[p].type)||e.step(new eb(s,u,d.marks[p]));if(o&&d.isText&&"pre"!=n.whitespace){let m,g,$=/\r?\n|\r/g;for(;m=$.exec(d.text);)g||(g=new f(a.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),l.push(new ew(s+m.index,s+m.index+m[0].length,g))}}else l.push(new ew(s,u,f.empty));s=u}if(!r.validEnd){let _=r.fillBefore(a.empty,!0);e.replace(s,s,new f(_,0,0))}for(let b=l.length-1;b>=0;b--)e.step(l[b])}function eC(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function eS(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!eC(r,o,i))break}return null}function e1(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let l=i.length?i[0]:t;return n.canReplaceWith(r,o,l)?i:null}(e,t),i=o&&function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),l=t.contentMatch.findWrapping(i.type);if(!l)return null;let s=(l.length?l[l.length-1]:t).contentMatch;for(let a=r;s&&a<o;a++)s=s.matchType(n.child(a).type);return s&&s.validEnd?l:null}(r,t);return i?o.map(e2).concat({type:t,attrs:n}).concat(i.map(e2)):null}function e2(e){return{type:e,attrs:null}}function e3(e,t,n,r){t.forEach((o,i)=>{if(o.isText){let l,s=/\r?\n|\r/g;for(;l=s.exec(o.text);){let a=e.mapping.slice(r).map(n+1+i+l.index);e.replaceWith(a,a+1,t.type.schema.linebreakReplacement.create())}}})}function eE(e,t,n,r){t.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let l=e.mapping.slice(r).map(n+1+i);e.replaceWith(l,l+1,t.type.schema.text("\n"))}})}function e4(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,l=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!l.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let s=o.depth-1,a=n-2;s>i;s--,a--){let c=o.node(s),d=o.index(s);if(c.type.spec.isolating)return!1;let u=c.content.cutByIndex(d,c.childCount),h=r&&r[a+1];h&&(u=u.replaceChild(0,h.type.create(h.attrs)));let p=r&&r[a]||c;if(!c.canReplace(d+1,c.childCount)||!p.type.validContent(u))return!1}let f=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(f,f,m?m.type:o.node(i+1).type)}function eM(e,t){let n=e.resolve(t),r=n.index();return eT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function eT(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let o=0;o<t.childCount;o++){let i=t.child(o),l=i.type==r?e.type.schema.nodes.text:i.type;if(!(n=n.matchType(l))||!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function e8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t);for(let o=r.depth;;o--){let i,l,s=r.index(o);if(o==r.depth?(i=r.nodeBefore,l=r.nodeAfter):n>0?(i=r.node(o+1),s++,l=r.node(o).maybeChild(s)):(i=r.node(o).maybeChild(s-1),l=r.node(o+1)),i&&!i.isTextblock&&eT(i,l)&&r.node(o).canReplace(s,s+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function e6(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let l=1;l<=(0==n.openStart&&n.size?2:1);l++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(a>0?1:0),d=r.node(s),u=!1;if(1==l)u=d.canReplace(c,c,o);else{let h=d.contentMatchAt(c).findWrapping(o.firstChild.type);u=h&&d.canReplaceWith(c,c,h[0])}if(u)return 0==a?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function eN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.empty;if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return e5(o,i,r)?new ew(t,n,r):new e7(o,i,r).fit()}function e5(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}em.jsonID("replaceAround",ek);class e7{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=a.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let i=e.depth;i>0;i--)this.placed=a.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,l=r.depth,s=o.depth;for(;l&&s&&1==i.childCount;)i=i.firstChild.content,l--,s--;let a=new f(i,l,s);return t>-1?new ek(r.pos,t,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new ew(r.pos,o.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let i=1;i<=2;i++)for(let l=1==i?e:this.unplaced.openStart;l>=0;l--){let s,c=null,d=(s=l?(c=eA(this.unplaced.content,l-1).firstChild).content:this.unplaced.content).firstChild;for(let u=this.depth;u>=0;u--){let h,{type:p,match:f}=this.frontier[u],m=null;if(1==i&&(d?f.matchType(d.type)||(m=f.fillBefore(a.from(d),!1)):c&&p.compatibleContent(c.type)))return{sliceDepth:l,frontierDepth:u,parent:c,inject:m};if(2==i&&d&&(h=f.findWrapping(d.type)))return{sliceDepth:l,frontierDepth:u,parent:c,wrap:h};if(c&&f.matchType(c.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=eA(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new f(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=eA(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new f(eL(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new f(eL(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:r,inject:o,wrap:i}=e;for(;this.depth>n;)this.closeFrontierNode();if(i)for(let l=0;l<i.length;l++)this.openFrontierNode(i[l]);let s=this.unplaced,c=r?r.content:s.content,d=s.openStart-t,u=0,h=[],{match:p,type:m}=this.frontier[n];if(o){for(let g=0;g<o.childCount;g++)h.push(o.child(g));p=p.matchFragment(o)}let $=c.size+t-(s.content.size-s.openEnd);for(;u<c.childCount;){let _=c.child(u),b=p.matchType(_.type);if(!b)break;(++u>1||0==d||_.content.size)&&(p=b,h.push(eR(_.mark(m.allowedMarks(_.marks)),1==u?d:0,u==c.childCount?$:-1)))}let y=u==c.childCount;y||($=-1),this.placed=eP(this.placed,n,a.from(h)),this.frontier[n].match=p,y&&$<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,w=c;v<$;v++){let k=w.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),w=k.content}this.unplaced=y?0==t?f.empty:new f(eL(s.content,t-1,1),t-1,$<0?s.openEnd:t-1):new f(eL(s.content,t,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!eO(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=eO(e,t,r,n,o);if(i){for(let l=t-1;l>=0;l--){let{match:s,type:a}=this.frontier[l],c=eO(e,l,a,s,!0);if(!c||c.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=eP(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=eP(this.placed,this.depth,a.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(a.empty,!0);e.childCount&&(this.placed=eP(this.placed,this.frontier.length,e))}}function eL(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(eL(e.firstChild.content,t-1,n)))}function eP(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(eP(e.lastChild.content,t-1,n)))}function eA(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function eR(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,eR(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(a.empty,!0)))),e.copy(r)}function eO(e,t,n,r,o){let i=e.node(t),l=o?e.indexAfter(t):e.index(t);if(l==i.childCount&&!n.compatibleContent(i.type))return null;let s=r.fillBefore(i.content,!0,l);return s&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,l)?s:null}function eD(e,t,n,r,o){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(eD(i.content,t+1,n,r,i)))}if(t>r){let l=o.contentMatchAt(0),s=l.fillBefore(e).append(e);e=s.append(l.matchFragment(s).fillBefore(a.empty,!0))}return e}function eI(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}class eH extends em{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return eg.fail("No node at attribute step's position");let n=Object.create(null);for(let r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;let o=t.type.create(n,null,t.marks);return eg.fromReplace(e,this.pos,this.pos+1,new f(a.from(o),0,t.isLeaf?0:1))}getMap(){return eh.empty}invert(e){return new eH(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new eH(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new eH(t.pos,t.attr,t.value)}}em.jsonID("attr",eH);class ez extends em{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return eg.ok(r)}getMap(){return eh.empty}invert(e){return new ez(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new ez(t.attr,t.value)}}em.jsonID("docAttr",ez);let e9=class extends Error{};((e9=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype)).constructor=e9,e9.prototype.name="TransformError";class eB{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ep}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new e9(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.empty,r=eN(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new f(a.from(n),0,0))}delete(e,t){return this.replace(e,t,f.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){var o;if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),l=e.doc.resolve(n);if(e5(i,l,r))return e.step(new ew(t,n,r));let s=eI(i,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let c=i.depth,d=i.pos-1;c>0;c--,d--){let u=i.node(c).type.spec;if(u.defining||u.definingAsContext||u.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==d&&s.splice(1,0,-c)}let h=s.indexOf(a),p=[],m=r.openStart;for(let g=r.content,$=0;;$++){let _=g.firstChild;if(p.push(_),$==r.openStart)break;g=_.content}for(let b=m-1;b>=0;b--){let y=p[b],v=(o=y.type).spec.defining||o.spec.definingForContent;if(v&&!y.sameMarkup(i.node(Math.abs(a)-1)))m=b;else if(v||!y.type.isTextblock)break}for(let w=r.openStart;w>=0;w--){let k=(w+m+1)%(r.openStart+1),x=p[k];if(x)for(let C=0;C<s.length;C++){let S=s[(C+h)%s.length],E=!0;S<0&&(E=!1,S=-S);let M=i.node(S-1),T=i.index(S-1);if(M.canReplaceWith(T,T,x.type,x.marks))return e.replace(i.before(S),E?l.after(S):n,new f(eD(r.content,0,r.openStart,k),k,r.openEnd))}}let N=e.steps.length;for(let L=s.length-1;L>=0&&(e.replace(t,n,r),!(e.steps.length>N));L--){let P=s[L];P<0||(t=i.before(P),n=l.after(P))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let l=r.depth-1;l>=0;l--){let s=r.indexAfter(l);if(r.node(l).canReplaceWith(s,s,n))return r.after(l+1);if(s<r.node(l).childCount)break}return null}(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new f(a.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=eI(r,o);for(let l=0;l<i.length;l++){let s=i[l],a=l==i.length-1;if(a&&0==s||r.node(s).type.contentMatch.validEnd)return e.delete(r.start(s),o.end(s));if(s>0&&(a||r.node(s-1).canReplace(r.index(s-1),o.indexAfter(s-1))))return e.delete(r.before(s),o.after(s))}for(let c=1;c<=r.depth&&c<=o.depth;c++)if(t-r.start(c)==r.depth-c&&n>r.end(c)&&o.end(c)-n!=o.depth-c&&r.start(c-1)==o.start(c-1)&&r.node(c-1).canReplace(r.index(c-1),o.index(c-1)))return e.delete(r.before(c),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:o,depth:i}=t,l=r.before(i+1),s=o.after(i+1),c=l,d=s,u=a.empty,h=0;for(let p=i,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=a.from(r.node(p).copy(u)),h++):c--;let g=a.empty,$=0;for(let _=i,b=!1;_>n;_--)b||o.after(_+1)<o.end(_)?(b=!0,g=a.from(o.node(_).copy(g)),$++):d++;e.step(new ek(c,d,l,s,new f(u.append(g),h,$),u.size-h,!0))}(this,e,t),this}join(e){return function(e,t,n){let r=null,{linebreakReplacement:o}=e.doc.type.schema,i=e.doc.resolve(t-n),l=i.node().type;if(o&&l.inlineContent){let s="pre"==l.whitespace,a=!!l.contentMatch.matchType(o);s&&!a?r=!1:!s&&a&&(r=!0)}let c=e.steps.length;if(!1===r){let d=e.doc.resolve(t+n);eE(e,d.node(),d.before(),c)}l.inlineContent&&ex(e,t+n-1,l,i.node().contentMatchAt(i.index()),null==r);let u=e.mapping.slice(c),h=u.map(t-n);if(e.step(new ew(h,u.map(t+n,-1),f.empty,!0)),!0===r){let p=e.doc.resolve(h);e3(e,p.node(),p.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}wrap(e,t){return function(e,t,n){let r=a.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=a.from(n[o].type.create(n[o].attrs,r))}let l=t.start,s=t.end;e.step(new ek(l,s,l,s,new f(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e){return function(e,t,n,r,o){if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{var l,s,c;let d="function"==typeof o?o(t):o,u,h;if(t.isTextblock&&!t.hasMarkup(r,d)&&(l=e.doc,s=e.mapping.slice(i).map(n),c=r,h=(u=l.resolve(s)).index(),u.parent.canReplaceWith(h,h+1,c))){let p=null;if(r.schema.linebreakReplacement){let m="pre"==r.whitespace,g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!g?p=!1:!m&&g&&(p=!0)}!1===p&&eE(e,t,n,i),ex(e,e.mapping.slice(i).map(n,1),r,void 0,null===p);let $=e.mapping.slice(i),_=$.map(n,1),b=$.map(n+t.nodeSize,1);return e.step(new ek(_,b,_+1,b-1,new f(a.from(r.create(d,null,t.marks)),0,0),1,!0)),!0===p&&e3(e,t,n,i),!1}})}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}setNodeMarkup(e,t){return function(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw RangeError("No node at given position");n||(n=i.type);let l=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,l);if(!n.validContent(i.content))throw RangeError("Invalid content for node type "+n.name);e.step(new ek(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new f(a.from(l),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}setNodeAttribute(e,t,n){return this.step(new eH(e,t,n)),this}setDocAttribute(e,t){return this.step(new ez(e,t)),this}addNodeMark(e,t){return this.step(new ey(e,t)),this}removeNodeMark(e,t){if(!(t instanceof h)){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new ev(e,t)),this}split(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=a.empty,l=a.empty;for(let s=o.depth,c=o.depth-n,d=n-1;s>c;s--,d--){i=a.from(o.node(s).copy(i));let u=r&&r[d];l=a.from(u?u.type.create(u.attrs,l):o.node(s).copy(l))}e.step(new ew(t,t,new f(i.append(l),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}addMark(e,t,n){var r,o,i,l;let s,a,c,d;return r=this,o=e,i=t,l=n,c=[],d=[],r.doc.nodesBetween(o,i,(e,t,n)=>{if(!e.isInline)return;let r=e.marks;if(!l.isInSet(r)&&n.type.allowsMarkType(l.type)){let u=Math.max(t,o),h=Math.min(t+e.nodeSize,i),p=l.addToSet(r);for(let f=0;f<r.length;f++)r[f].isInSet(p)||(s&&s.to==u&&s.mark.eq(r[f])?s.to=h:c.push(s=new eb(u,h,r[f])));a&&a.to==u?a.to=h:d.push(a=new e_(u,h,l))}}),c.forEach(e=>r.step(e)),d.forEach(e=>r.step(e)),this}removeMark(e,t,n){var r,o,i,l;let s,a;return r=this,o=e,i=t,l=n,s=[],a=0,r.doc.nodesBetween(o,i,(e,t)=>{if(!e.isInline)return;a++;let n=null;if(l instanceof W){let r,c=e.marks;for(;r=l.isInSet(c);)(n||(n=[])).push(r),c=r.removeFromSet(c)}else l?l.isInSet(e.marks)&&(n=[l]):n=e.marks;if(n&&n.length){let d=Math.min(t+e.nodeSize,i);for(let u=0;u<n.length;u++){let h,p=n[u];for(let f=0;f<s.length;f++){let m=s[f];m.step==a-1&&p.eq(s[f].style)&&(h=m)}h?(h.to=d,h.step=a):s.push({style:p,from:Math.max(t,o),to:d,step:a})}}}),s.forEach(e=>r.step(new eb(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return ex(this,e,t,n),this}}let eV=Object.create(null);class ej{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new eF(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.empty,n=t.content.lastChild,r=null;for(let o=0;o<t.openEnd;o++)r=n,n=n.lastChild;let i=e.steps.length,l=this.ranges;for(let s=0;s<l.length;s++){let{$from:a,$to:c}=l[s],d=e.mapping.slice(i);e.replaceRange(d.map(a.pos),d.map(c.pos),s?f.empty:t),0==s&&eY(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:l}=r[o],s=e.mapping.slice(n),a=s.map(i.pos),c=s.map(l.pos);o?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),eY(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new eG(e):eQ(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let i=t<0?eQ(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):eQ(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new eZ(e.node(0))}static atStart(e){return eQ(e,e,0,0,1)||new eZ(e)}static atEnd(e){return eQ(e,e,e.content.size,e.childCount,-1)||new eZ(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=eV[t.type];if(!n)throw RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in eV)throw RangeError("Duplicate use of selection JSON ID "+e);return eV[e]=t,t.prototype.jsonID=e,t}getBookmark(){return eG.between(this.$anchor,this.$head).getBookmark()}}ej.prototype.visible=!0;class eF{constructor(e,t){this.$from=e,this.$to=t}}let eU=!1;function eW(e){eU||e.parent.inlineContent||(eU=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class eG extends ej{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;eW(e),eW(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return ej.near(n);let r=e.resolve(t.map(this.anchor));return new eG(r.parent.inlineContent?r:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.empty;if(super.replace(e,t),t==f.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof eG&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new eq(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new eG(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let o=ej.findFrom(t,n,!0)||ej.findFrom(t,-n,!0);if(!o)return ej.near(t,n);t=o.$head}return e.parent.inlineContent||(0==r||(e=(ej.findFrom(e,-n,!0)||ej.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new eG(e,t)}}ej.jsonID("text",eG);class eq{constructor(e,t){this.anchor=e,this.head=t}map(e){return new eq(e.map(this.anchor),e.map(this.head))}resolve(e){return eG.between(e.resolve(this.anchor),e.resolve(this.head))}}class eK extends ej{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?ej.near(o):new eK(o)}content(){return new f(a.from(this.node),0,0)}eq(e){return e instanceof eK&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new eJ(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new eK(e.resolve(t.anchor))}static create(e,t){return new eK(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}eK.prototype.visible=!1,ej.jsonID("node",eK);class eJ{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new eq(n,n):new eJ(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&eK.isSelectable(n)?new eK(t):ej.near(t)}}class eZ extends ej{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.empty;if(t==f.empty){e.delete(0,e.doc.content.size);let n=ej.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new eZ(e)}map(e){return new eZ(e)}eq(e){return e instanceof eZ}getBookmark(){return eX}}ej.jsonID("all",eZ);let eX={map(){return this},resolve:e=>new eZ(e)};function eQ(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return eG.create(e,n);for(let l=r-(o>0?0:1);o>0?l<t.childCount:l>=0;l+=o){let s=t.child(l);if(s.isAtom){if(!i&&eK.isSelectable(s))return eK.create(e,n-(o<0?s.nodeSize:0))}else{let a=eQ(e,s,n+o,o<0?s.childCount:0,o,i);if(a)return a}n+=s.nodeSize*o}return null}function eY(e,t,n){let r=e.steps.length-1;if(r<t)return;let o,i=e.steps[r];(i instanceof ew||i instanceof ek)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==o&&(o=r)}),e.setSelection(ej.near(e.doc.resolve(o),n)))}class te extends eB{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return h.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||h.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(ej.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function tt(e,t){return t&&e?e.bind(t):e}class tn{constructor(e,t,n){this.name=e,this.init=tt(t.init,n),this.apply=tt(t.apply,n)}}let tr=[new tn("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new tn("selection",{init:(e,t)=>e.selection||ej.atStart(t.doc),apply:e=>e.selection}),new tn("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new tn("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class to{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=tr.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new tn(e.key,e.spec.state,e))})}}class ti{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let l=this.config.plugins[i];if(l.spec.appendTransaction){let s=r?r[i].n:0,a=r?r[i].state:this,c=s<t.length&&l.spec.appendTransaction.call(l,s?t.slice(s):t,a,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let d=0;d<this.config.plugins.length;d++)r.push(d<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new ti(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new te(this)}static create(e){let t=new to(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new ti(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new to(this.schema,e.plugins),n=t.fields,r=new ti(t);for(let o=0;o<n.length;o++){let i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let r=new to(e.schema,e.plugins),o=new ti(r);return r.fields.forEach(r=>{if("doc"==r.name)o.doc=E.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=ej.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let l=n[i],s=l.spec.state;if(l.key==r.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=s.fromJSON.call(l,e,t[i],o))}o[r.name]=r.init(e,o)}}),o}}class tl{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,r){for(let o in t){let i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.key=e.key?e.key.key:ta("plugin")}getState(e){return e[this.key]}}let ts=Object.create(null);function ta(e){return e in ts?e+"$"+ ++ts[e]:(ts[e]=0,e+"$")}class tc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";this.key=ta(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}let td=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},tu=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},th=null,tp=function(e,t,n){let r=th||(th=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},tf=function(e,t,n,r){return n&&(tg(e,t,n,r,-1)||tg(e,t,n,r,1))},tm=/^(img|br|input|textarea|hr)$/i;function tg(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:t$(e))){let i=e.parentNode;if(!i||1!=i.nodeType||t_(e)||tm.test(e.nodeName)||"false"==e.contentEditable)return!1;t=td(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?t$(e):0}}}function t$(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function t_(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let tb=function(e){return e.focusNode&&tf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ty(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}let tv="undefined"!=typeof navigator?navigator:null,tw="undefined"!=typeof document?document:null,tk=tv&&tv.userAgent||"",t0=/Edge\/(\d+)/.exec(tk),tx=/MSIE \d/.exec(tk),tC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tk),tS=!!(tx||tC||t0),t1=tx?document.documentMode:tC?+tC[1]:t0?+t0[1]:0,t2=!tS&&/gecko\/(\d+)/i.test(tk);t2&&(/Firefox\/(\d+)/.exec(tk)||[0,0])[1];let t3=!tS&&/Chrome\/(\d+)/.exec(tk),tE=!!t3,t4=t3?+t3[1]:0,tM=!tS&&!!tv&&/Apple Computer/.test(tv.vendor),tT=tM&&(/Mobile\/\w+/.test(tk)||!!tv&&tv.maxTouchPoints>2),t8=tT||!!tv&&/Mac/.test(tv.platform),t6=!!tv&&/Win/.test(tv.platform),tN=/Android \d/.test(tk),t5=!!tw&&"webkitFontSmoothing"in tw.documentElement.style,t7=t5?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function tL(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function tP(e,t){return"number"==typeof e?e:e[t]}function tA(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function tR(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let l=n||e.dom;l;l=tu(l)){if(1!=l.nodeType)continue;let s=l,a=s==i.body,c=a?tL(i):tA(s),d=0,u=0;if(t.top<c.top+tP(r,"top")?u=-(c.top-t.top+tP(o,"top")):t.bottom>c.bottom-tP(r,"bottom")&&(u=t.bottom-t.top>c.bottom-c.top?t.top+tP(o,"top")-c.top:t.bottom-c.bottom+tP(o,"bottom")),t.left<c.left+tP(r,"left")?d=-(c.left-t.left+tP(o,"left")):t.right>c.right-tP(r,"right")&&(d=t.right-c.right+tP(o,"right")),d||u){if(a)i.defaultView.scrollBy(d,u);else{let h=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),d&&(s.scrollLeft+=d);let f=s.scrollLeft-h,m=s.scrollTop-p;t={left:t.left-f,top:t.top-m,right:t.right-f,bottom:t.bottom-m}}}if(a||/^(fixed|sticky)$/.test(getComputedStyle(l).position))break}}function tO(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=tu(r));return t}function tD(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let tI=null;function tH(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function tz(e){return e.top<e.bottom||e.left<e.right}function t9(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(tz(r))return r}return Array.prototype.find.call(n,tz)||e.getBoundingClientRect()}let tB=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function tV(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),l=t5||t2;if(3==r.nodeType){if(!l||!tB.test(r.nodeValue)&&(n<0?o:o!=r.nodeValue.length)){let s=o,a=o,c=n<0?1:-1;return n<0&&!o?(a++,c=-1):n>=0&&o==r.nodeValue.length?(s--,c=1):n<0?s--:a++,tj(t9(tp(r,s,a),c),c<0)}{let d=t9(tp(r,o,o),n);if(t2&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let u=t9(tp(r,o-1,o-1),-1);if(u.top==d.top){let h=t9(tp(r,o,o+1),-1);if(h.top!=d.top)return tj(h,h.left<u.left)}}return d}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&o&&(n<0||o==t$(r))){let p=r.childNodes[o-1];if(1==p.nodeType)return tF(p.getBoundingClientRect(),!1)}if(null==i&&o<t$(r)){let f=r.childNodes[o];if(1==f.nodeType)return tF(f.getBoundingClientRect(),!0)}return tF(r.getBoundingClientRect(),n>=0)}if(null==i&&o&&(n<0||o==t$(r))){let m=r.childNodes[o-1],g=3==m.nodeType?tp(m,t$(m)-(l?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(g)return tj(t9(g,1),!1)}if(null==i&&o<t$(r)){let $=r.childNodes[o];for(;$.pmViewDesc&&$.pmViewDesc.ignoreForCoords;)$=$.nextSibling;let _=$?3==$.nodeType?tp($,0,l?0:1):1==$.nodeType?$:null:null;if(_)return tj(t9(_,-1),!0)}return tj(t9(3==r.nodeType?tp(r):r,-n),n>=0)}function tj(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function tF(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function tU(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}let tW=/[\u0590-\u08ac]/,tG=null,tq=null,tK=!1;class tJ{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}{let i,l;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(l=i.pmViewDesc)||l.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(l):this.posAtEnd}}let s;if(e==this.dom&&this.contentDOM)s=t>td(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(null==s&&t==e.childNodes.length)for(let c=e;;c=c.parentNode){if(c==this.dom){s=!0;break}if(c.nextSibling)break}}return(null==s?n>0:s)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let o,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let o=0;n<this.children.length;n++){let i=this.children[n],l=o+i.size;if(l>e||i instanceof nn){r=e-o;break}o=l}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof tZ&&s.side>=0;n--);if(t<=0){let a,c=!0;for(;(a=n?this.children[n-1]:null)&&a.dom.parentNode!=this.contentDOM;n--,c=!1);return a&&t&&c&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?td(a.dom)+1:0}}{let d,u=!0;for(;(d=n<this.children.length?this.children[n]:null)&&d.dom.parentNode!=this.contentDOM;n++,u=!1);return d&&u&&!d.border&&!d.domAtom?d.domFromPos(0,t):{node:this.contentDOM,offset:d?td(d.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let i=n,l=0;;l++){let s=this.children[l],a=i+s.size;if(-1==r&&e<=a){let c=i+s.border;if(e>=c&&t<=a-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e,t,c);e=i;for(let d=l;d>0;d--){let u=this.children[d-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){r=td(u.dom)+1;break}e-=u.size}-1==r&&(r=0)}if(r>-1&&(a>t||l==this.children.length-1)){t=a;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=td(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t);for(let l=0,s=0;l<this.children.length;l++){let a=this.children[l],c=s+a.size;if(o>s&&i<c)return a.setSelection(e-s-a.border,t-s-a.border,n,r);s=c}let d=this.domFromPos(e,e?-1:1),u=t==e?d:this.domFromPos(t,t?-1:1),h=n.getSelection(),p=!1;if((t2||tM)&&e==t){let{node:f,offset:m}=d;if(3==f.nodeType){if((p=!(!m||"\n"!=f.nodeValue[m-1]))&&m==f.nodeValue.length)for(let g,$=f;$;$=$.parentNode){if(g=$.nextSibling){"BR"==g.nodeName&&(d=u={node:g.parentNode,offset:td(g)+1});break}let _=$.pmViewDesc;if(_&&_.node&&_.node.isBlock)break}}else{let b=f.childNodes[m-1];p=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(t2&&h.focusNode&&h.focusNode!=u.node&&1==h.focusNode.nodeType){let y=h.focusNode.childNodes[h.focusOffset];y&&"false"==y.contentEditable&&(r=!0)}if(!(r||p&&tM)&&tf(d.node,d.offset,h.anchorNode,h.anchorOffset)&&tf(u.node,u.offset,h.focusNode,h.focusOffset))return;let v=!1;if((h.extend||e==t)&&!p){h.collapse(d.node,d.offset);try{e!=t&&h.extend(u.node,u.offset),v=!0}catch(w){}}if(!v){if(e>t){let k=d;d=u,u=k}let x=document.createRange();x.setEnd(u.node,u.offset),x.setStart(d.node,d.offset),h.removeAllRanges(),h.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let l=n+o.border,s=i-o.border;if(e>=l&&t<=s)return this.dirty=e==n||t==i?2:1,void(e==l&&t==s&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=3:o.markDirty(e-l,t-l));o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class tZ extends tJ{constructor(e,t,n,r){let o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:r)),!t.type.spec.raw){if(1!=i.nodeType){let l=document.createElement("span");l.appendChild(i),i=l}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class tX extends tJ{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class tQ extends tJ{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let o=r.nodeViews[t.type.name],i=o&&o(t,r,n);return i&&i.dom||(i=eo.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new tQ(e,t,i.dom,i.contentDOM||i.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=tQ.create(this.parent,this.mark,!0,n),o=this.children,i=this.size;t<i&&(o=nf(o,t,i,n)),e>0&&(o=nf(o,0,e,n));for(let l=0;l<o.length;l++)o[l].parent=r;return r.children=o,r}}class tY extends tJ{constructor(e,t,n,r,o,i,l,s,a){super(e,[],o,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=l}static create(e,t,n,r,o,i){let l,s=o.nodeViews[t.type.name],a=s&&s(t,o,()=>l?l.parent?l.parent.posBeforeChild(l):void 0:i,n,r),c=a&&a.dom,d=a&&a.contentDOM;if(t.isText){if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text)}else if(!c){let u=eo.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:d}=u)}d||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let h=c;return c=nc(c,n,t),a?l=new nr(e,t,n,r,c,d||null,h,a,o,i+1):t.isText?new nt(e,t,n,r,c,h,o):new tY(e,t,n,r,c,d||null,h,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM){if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>a.empty)}else e.contentElement=this.contentDOM}else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&nd(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,o=e.composing?this.localCompositionInfo(e,t):null,i=o&&o.pos>-1?o:null,l=o&&o.pos<0,s=new nh(this,i&&i.node,e);!function(e,t,n,r){let o=t.locals(e),i=0;if(0==o.length){for(let l=0;l<e.childCount;l++){let s=e.child(l);r(s,o,t.forChild(i,s),l),i+=s.nodeSize}return}let a=0,c=[],d=null;for(let u=0;;){let h,p,f,m;for(;a<o.length&&o[a].to==i;){let g=o[a++];g.widget&&(h?(p||(p=[h])).push(g):h=g)}if(h){if(p){p.sort(np);for(let $=0;$<p.length;$++)n(p[$],u,!!d)}else n(h,u,!!d)}if(d)m=-1,f=d,d=null;else{if(!(u<e.childCount))break;m=u,f=e.child(u++)}for(let _=0;_<c.length;_++)c[_].to<=i&&c.splice(_--,1);for(;a<o.length&&o[a].from<=i&&o[a].to>i;)c.push(o[a++]);let b=i+f.nodeSize;if(f.isText){let y=b;a<o.length&&o[a].from<y&&(y=o[a].from);for(let v=0;v<c.length;v++)c[v].to<y&&(y=c[v].to);y<b&&(d=f.cut(y-i),f=f.cut(0,y-i),b=y,m=-1)}else for(;a<o.length&&o[a].to<b;)a++;r(f,f.isInline&&!f.isLeaf?c.filter(e=>!e.inline):c.slice(),t.forChild(i,f),m),i=b}}(this.node,this.innerDeco,(t,o,i)=>{t.spec.marks?s.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&s.syncToMarks(o==this.node.childCount?h.none:this.node.child(o).marks,n,e),s.placeWidget(t,e,r)},(t,i,a,c)=>{let d;s.syncToMarks(t.marks,n,e),s.findNodeMatch(t,i,a,c)||l&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(d=s.findIndexWithChild(o.node))>-1&&s.updateNodeAt(t,i,a,d,e)||s.updateNextNode(t,i,a,e,c,r)||s.addNode(t,i,a,e,r),r+=t.nodeSize}),s.syncToMarks([],n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),function e(t,n,r){let o=t.firstChild,i=!1;for(let l=0;l<n.length;l++){let s=n[l],a=s.dom;if(a.parentNode==t){for(;a!=o;)o=nu(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(a,o);if(s instanceof tQ){let c=o?o.previousSibling:t.lastChild;e(s.contentDOM,s.children,r),o=c?c.nextSibling:t.firstChild}}for(;o;)o=nu(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),tT&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof eG)||n<t||r>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,l=function(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let l=e.child(o++),s=i;if(i+=l.nodeSize,!l.isText)continue;let a=l.text;for(;o<e.childCount;){let c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;a+=c.text}if(i>=n){if(i>=r&&a.slice(r-t.length-s,r-s)==t)return r-t.length;let d=s<r?a.lastIndexOf(t,r-s-1):-1;if(d>=0&&d+t.length+s>=n)return s+d;if(n==r&&a.length>=r+t.length-s&&a.slice(r-s,r-s+t.length)==t)return r}}return -1}(this.node.content,i,n-t,r-t);return l<0?null:{node:o,pos:l,text:i}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,t){let{node:n,pos:r,text:o}=t;if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let l=new tX(this,i,n,o);e.input.compositionNodes.push(l),this.children=nf(this.children,r,r+o.length,e,l)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(nd(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ns(this.dom,this.nodeDOM,nl(this.outerDeco,this.node,t),nl(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ne(e,t,n,r,o){nc(r,t,e);let i=new tY(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class nt extends tY{constructor(e,t,n,r,o,i,l){super(e,t,n,r,o,null,i,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new nt(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class nn extends tJ{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class nr extends tY{constructor(e,t,n,r,o,i,l,s,a,c){super(e,t,n,r,o,i,l,a,c),this.spec=s}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}let no=function(e){e&&(this.nodeName=e)};no.prototype=Object.create(null);let ni=[new no];function nl(e,t,n){if(0==e.length)return ni;let r=n?ni[0]:new no,o=[r];for(let i=0;i<e.length;i++){let l=e[i].type.attrs;if(l)for(let s in l.nodeName&&o.push(r=new no(l.nodeName)),l){let a=l[s];null!=a&&(n&&1==o.length&&o.push(r=new no(t.isInline?"span":"div")),"class"==s?r.class=(r.class?r.class+" ":"")+a:"style"==s?r.style=(r.style?r.style+";":"")+a:"nodeName"!=s&&(r[s]=a))}}return o}function ns(e,t,n,r){if(n==ni&&r==ni)return t;let o=t;for(let i=0;i<r.length;i++){let l=r[i],s=n[i];if(i){let a;s&&s.nodeName==l.nodeName&&o!=e&&(a=o.parentNode)&&a.nodeName.toLowerCase()==l.nodeName||((a=document.createElement(l.nodeName)).pmIsDeco=!0,a.appendChild(o),s=ni[0]),o=a}na(o,s||ni[0],l)}return o}function na(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){let i=t.class?t.class.split(" ").filter(Boolean):[],l=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)-1==l.indexOf(i[s])&&e.classList.remove(i[s]);for(let a=0;a<l.length;a++)-1==i.indexOf(l[a])&&e.classList.add(l[a]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let c,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;c=d.exec(t.style);)e.style.removeProperty(c[1])}n.style&&(e.style.cssText+=n.style)}}function nc(e,t,n){return ns(e,e,ni,nl(t,n,1!=e.nodeType))}function nd(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function nu(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class nh{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,l=[];e:for(;o>0;){let s;for(;;)if(r){let a=n.children[r-1];if(!(a instanceof tQ)){s=a,r--;break}n=a,r=a.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=s.node;if(c){if(c!=e.child(o-1))break;--o,i.set(s,o),l.push(s)}}return{index:o,matched:i,matches:l.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let s=this.index;s<Math.min(this.index+3,this.top.children.length);s++){let a=this.top.children[s];if(a.matchesMark(e[o])&&!this.isLocked(a.dom)){l=s;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=tQ.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,r){let o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let l=this.index,s=Math.min(this.top.children.length,l+5);l<s;l++){let a=this.top.children[l];if(a.matchesNode(e,t,n)&&!this.preMatch.matched.has(a)){i=l;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,o){let i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r}return -1}e=t}}updateNextNode(e,t,n,r,o,i){for(let l=this.index;l<this.top.children.length;l++){let s=this.top.children[l];if(s instanceof tY){let a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;let c,d=s.dom,u=this.isLocked(d)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&nd(t,s.outerDeco));if(!u&&s.update(e,t,n,r))return this.destroyBetween(this.index,l),s.dom!=d&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(s,e,t,n,r,i)))return this.destroyBetween(this.index,l),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!nd(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let l=tY.create(this.top,t,n,r,o,i);if(l.contentDOM)for(let s of(l.children=e.children,e.children=[],l.children))s.parent=l;return e.destroy(),l}addNode(e,t,n,r,o){let i=tY.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new tZ(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof tQ;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof nt)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((tM||tE)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new nn(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function np(e,t){return e.type.side-t.type.side}function nf(e,t,n,r,o){let i=[];for(let l=0,s=0;l<e.length;l++){let a=e[l],c=s,d=s+=a.size;c>=n||d<=t?i.push(a):(c<t&&i.push(a.slice(0,t-c,r)),o&&(i.push(o),o=void 0),d>n&&i.push(a.slice(n-c,a.size,r)))}return i}function nm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,l=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let s,a,c=r.resolve(l);if(tb(n)){for(s=l;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&eK.isSelectable(d)&&o.parent&&(!d.isInline||!function(e,t,n){for(let r=0==t,o=t==t$(e);r||o;){if(e==n)return!0;let i=td(e);if(!(e=e.parentNode))return!1;r=r&&0==i,o=o&&i==t$(e)}}(n.focusNode,n.focusOffset,o.dom))){let u=o.posBefore;a=new eK(l==u?c:r.resolve(u))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=l,p=l;for(let f=0;f<n.rangeCount;f++){let m=n.getRangeAt(f);h=Math.min(h,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(h<0)return null;[s,l]=p==e.state.selection.anchor?[p,h]:[h,p],c=r.resolve(l)}else s=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(s<0)return null}let g=r.resolve(s);return a||(a=n0(e,g,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)),a}function ng(e){return e.editable?e.hasFocus():nC(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function n$(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(nw(e,n),ng(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&tE){let r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&tf(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,td(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&tS&&t1<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var i;let l,s,{anchor:a,head:c}=n,d,u,h,p;!n_||n instanceof eG||(n.$from.parent.inlineContent||(l=nb(e,n.from)),n.empty||n.$from.parent.inlineContent||(s=nb(e,n.to))),e.docView.setSelection(a,c,e.root,t),n_&&(l&&nv(l),s&&nv(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((d=(i=e).dom.ownerDocument).removeEventListener("selectionchange",i.input.hideSelectionGuard),h=(u=i.domSelectionRange()).anchorNode,p=u.anchorOffset,d.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{u.anchorNode==h&&u.anchorOffset==p||(d.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{ng(i)&&!i.state.selection.visible||i.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let n_=tM||tE&&t4<63;function nb(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(tM&&o&&"false"==o.contentEditable)return ny(o);if((!o||"false"==o.contentEditable)&&(!i||"false"==i.contentEditable)){if(o)return ny(o);if(i)return ny(i)}}function ny(e){return e.contentEditable="true",tM&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function nv(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function nw(e,t){if(t instanceof eK){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(nk(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else nk(e)}function nk(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function n0(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||eG.between(t,n,r)}function nx(e){return!(e.editable&&!e.hasFocus())&&nC(e)}function nC(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function nS(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&ej.findFrom(i,t)}function n1(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function n2(e,t,n){let r=e.state.selection;if(!(r instanceof eG)){if(r instanceof eK&&r.node.isInline)return n1(e,new eG(t>0?r.$to:r.$from));{let o=nS(e.state,t);return!!o&&n1(e,o)}}if(n.indexOf("s")>-1){let{$head:i}=r,l=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+l.nodeSize*(t<0?-1:1));return n1(e,new eG(r.$anchor,s))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let a=nS(e.state,t);return!!(a&&a instanceof eK)&&n1(e,a)}if(!(t8&&n.indexOf("m")>-1)){let c,d=r.$head,u=d.textOffset?null:t<0?d.nodeBefore:d.nodeAfter;if(!u||u.isText)return!1;let h=t<0?d.pos-u.nodeSize:d.pos;return!!(u.isAtom||(c=e.docView.descAt(h))&&!c.contentDOM)&&(eK.isSelectable(u)?n1(e,new eK(t<0?e.state.doc.resolve(d.pos-u.nodeSize):d)):!!t5&&n1(e,new eG(e.state.doc.resolve(t<0?h:h+u.nodeSize))))}}function n3(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nE(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function n4(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,l=!1;for(t2&&1==n.nodeType&&r<n3(n)&&nE(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(1!=n.nodeType)break;{let s=n.childNodes[r-1];if(nE(s,-1))o=n,i=--r;else{if(3!=s.nodeType)break;r=(n=s).nodeValue.length}}}else{if(nM(n))break;{let a=n.previousSibling;for(;a&&nE(a,-1);)o=n.parentNode,i=td(a),a=a.previousSibling;if(a)r=n3(n=a);else{if((n=n.parentNode)==e.dom)break;r=0}}}l?nT(e,n,r):o&&nT(e,o,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,l=n3(n);for(;;)if(r<l){if(1!=n.nodeType||!nE(n.childNodes[r],1))break;o=n,i=++r}else{if(nM(n))break;{let s=n.nextSibling;for(;s&&nE(s,1);)o=s.parentNode,i=td(s)+1,s=s.nextSibling;if(s)r=0,l=n3(n=s);else{if((n=n.parentNode)==e.dom)break;r=l=0}}}o&&nT(e,o,i)}(e)}function nM(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function nT(e,t,n){if(3!=t.nodeType){let r,o;(o=function(e,t){for(;e&&t==e.childNodes.length&&!t_(e);)t=td(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=o,n=0):(r=function(e,t){for(;e&&!t&&!t_(e);)t=td(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=r,n=r.nodeValue.length)}let i=e.domSelection();if(!i)return;if(tb(i)){let l=document.createRange();l.setEnd(t,n),l.setStart(t,n),i.removeAllRanges(),i.addRange(l)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&n$(e)},50)}function n8(e,t){let n=e.state.doc.resolve(t);if(!tE&&!t6&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(t<n.end()){let l=e.coordsAtPos(t+1),s=(l.top+l.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(l.left-r.left)>1)return l.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function n6(e,t,n){let r=e.state.selection;if(r instanceof eG&&!r.empty||n.indexOf("s")>-1||t8&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let l=nS(e.state,t);if(l&&l instanceof eK)return n1(e,l)}if(!o.parent.inlineContent){let s=t<0?o:i,a=r instanceof eZ?ej.near(s,t):ej.findFrom(s,t);return!!a&&n1(e,a)}return!1}function nN(e,t){if(!(e.state.selection instanceof eG))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let l=e.state.tr;return t<0?l.delete(n.pos-i.nodeSize,n.pos):l.delete(n.pos,n.pos+i.nodeSize),e.dispatch(l),!0}return!1}function n5(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function n7(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:o,openEnd:i}=t;for(;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;let l=r.firstChild;n.push(l.type.name,l.attrs!=l.type.defaultAttrs?l.attrs:null),r=l.content}let s=e.someProp("clipboardSerializer")||eo.fromSchema(e.state.schema),a=n9(),c=a.createElement("div");c.appendChild(s.serializeFragment(r,{document:a}));let d,u=c.firstChild,h=0;for(;u&&1==u.nodeType&&(d=nH[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let f=a.createElement(d[p]);for(;c.firstChild;)f.appendChild(c.firstChild);c.appendChild(f),h++}u=c.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${o} ${i}${h?` -${h}`:""} ${JSON.stringify(n)}`),{dom:c,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function nL(e,t,n,r,o){let i,l,s=o.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(r||s||!n);if(c){if(e.someProp("transformPastedText",n=>{t=n(t,s||r,e)}),s)return t?new f(a.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):f.empty;let d=e.someProp("clipboardTextParser",n=>n(t,o,r,e));if(d)l=d;else{let u=o.marks(),{schema:h}=e.state,p=eo.fromSchema(h);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(p.serializeNode(h.text(e,u)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),i=function(e){var t;let n=/^(\s*<meta [^>]*>)*/.exec(e);n&&(e=e.slice(n[0].length));let r,o=n9().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);(r=i&&nH[i[1].toLowerCase()])&&(e=r.map(e=>"<"+e+">").join("")+e+r.map(e=>"</"+e+">").reverse().join(""));let l;if(o.innerHTML=(t=e,(l=window.trustedTypes)?l.createPolicy("detachedDocument",{createHTML:e=>e}).createHTML(t):t),r)for(let s=0;s<r.length;s++)o=o.querySelector(r[s])||o;return o}(n),t5&&function(e){let t=e.querySelectorAll(tE?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let m=i&&i.querySelector("[data-pm-slice]"),g=m&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(m.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let $=+g[3];$>0;$--){let _=i.firstChild;for(;_&&1!=_.nodeType;)_=_.nextSibling;if(!_)break;i=_}if(!l&&(l=(e.someProp("clipboardParser")||e.someProp("domParser")||K.fromSchema(e.state.schema)).parseSlice(i,{preserveWhitespace:!(!c&&!g),context:o,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||nP.test(e.parentNode.nodeName)?null:{ignore:!0}})),g)l=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(o){return e}let{content:i,openStart:l,openEnd:s}=e;for(let c=n.length-2;c>=0;c-=2){let d=r.nodes[n[c]];if(!d||d.hasRequiredAttrs())break;i=a.from(d.create(n[c+1],i)),l++,s++}return new f(i,l,s)}(nI(l,+g[1],+g[2]),g[4]);else if((l=f.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach(e=>{if(!i)return;let t,n=o.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&nR(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=nO(i[i.length-1],r.length));let l=nA(e,n);i.push(l),o=o.matchType(l.type),r=n}}),i)return a.from(i)}return e}(l.content,o),!0)).openStart||l.openEnd){let b=0,y=0;for(let v=l.content.firstChild;b<l.openStart&&!v.type.spec.isolating;b++,v=v.firstChild);for(let w=l.content.lastChild;y<l.openEnd&&!w.type.spec.isolating;y++,w=w.lastChild);l=nI(l,b,y)}return e.someProp("transformPasted",t=>{l=t(l,e)}),l}let nP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function nA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=t.length-1;r>=n;r--)e=t[r].create(null,a.from(e));return e}function nR(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=nR(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(a.from(nA(n,e,o+1))))}}function nO(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,nO(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(a.empty,!0);return e.copy(n.append(r))}function nD(e,t,n,r,o,i){let l=t<0?e.firstChild:e.lastChild,s=l.content;return e.childCount>1&&(i=0),o<r-1&&(s=nD(s,t,n,r,o+1,i)),o>=n&&(s=t<0?l.contentMatchAt(0).fillBefore(s,i<=o).append(s):s.append(l.contentMatchAt(l.childCount).fillBefore(a.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,l.copy(s))}function nI(e,t,n){return t<e.openStart&&(e=new f(nD(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new f(nD(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}let nH={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},nz=null;function n9(){return nz||(nz=document.implementation.createHTMLDocument("title"))}let nB={},nV={},nj={touchstart:!0,touchmove:!0};function nF(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function nU(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>nW(e,t))})}function nW(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function nG(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function nq(e){return{left:e.clientX,top:e.clientY}}function nK(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let l=i.depth+1;l>0;l--)if(e.someProp(t,t=>l>i.depth?t(e,n,i.nodeAfter,i.before(l),o,!0):t(e,n,i.node(l),i.before(l),o,!1)))return!0;return!1}function nJ(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function nZ(e,t,n,r){return nK(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function nX(e,t,n,r){return nK(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(nJ(e,eG.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let l=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(l.inlineContent)nJ(e,eG.create(r,s+1,s+1+l.content.size),"pointer");else{if(!eK.isSelectable(l))continue;nJ(e,eK.create(r,s),"pointer")}return!0}}(e,n,r)}function nQ(e){return ri(e)}nV.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!rt(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!tN||!tE||13!=n.keyCode)){if(229!=n.keyCode&&e.domObserver.forceFlush(),!tT||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||function e(t,n){var r;let o,i=n.keyCode,l=(r=n,o="",r.ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o);if(8==i||t8&&72==i&&"c"==l)return nN(t,-1)||n4(t,-1);if(46==i&&!n.shiftKey||t8&&68==i&&"c"==l)return nN(t,1)||n4(t,1);if(13==i||27==i)return!0;if(37==i||t8&&66==i&&"c"==l){let s=37==i?"ltr"==n8(t,t.state.selection.from)?-1:1:-1;return n2(t,s,l)||n4(t,s)}if(39==i||t8&&70==i&&"c"==l){let a=39==i?"ltr"==n8(t,t.state.selection.from)?1:-1:1;return n2(t,a,l)||n4(t,a)}return 38==i||t8&&80==i&&"c"==l?n6(t,-1,l)||n4(t,-1):40==i||t8&&78==i&&"c"==l?function(e){if(!tM||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let r=t.firstChild;n5(e,r,"true"),setTimeout(()=>n5(e,r,"false"),20)}return!1}(t)||n6(t,1,l)||n4(t,1):l==(t8?"m":"c")&&(66==i||73==i||89==i||90==i)}(e,n)?n.preventDefault():nF(e,"key");else{let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",t=>t(e,ty(13,"Enter"))),e.input.lastIOSEnter=0)},200)}}},nV.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},nV.keypress=(e,t)=>{let n=t;if(rt(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||t8&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof eG)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);/[\r\n]/.test(o)||e.someProp("handleTextInput",t=>t(e,r.$from.pos,r.$to.pos,o))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};let nY=t8?"metaKey":"ctrlKey";nB.mousedown=(e,t)=>{var n,r,o;let i=t;e.input.shiftKey=i.shiftKey;let l=(n=e,ri(n)),s=Date.now(),a="singleClick",c,d;s-e.input.lastClick.time<500&&(r=i,c=(o=e.input.lastClick).x-r.clientX,c*c+(d=o.y-r.clientY)*d<100)&&!i[nY]&&("singleClick"==e.input.lastClick.type?a="doubleClick":"doubleClick"==e.input.lastClick.type&&(a="tripleClick")),e.input.lastClick={time:s,x:i.clientX,y:i.clientY,type:a};let u=e.posAtCoords(nq(i));u&&("singleClick"==a?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new re(e,u,i,!!l)):("doubleClick"==a?nZ:nX)(e,u.pos,u.inside,i)?i.preventDefault():nF(e,"pointer"))};class re{constructor(e,t,n,r){let o,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[nY],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let l=e.state.doc.resolve(t.pos);o=l.parent,i=l.depth?l.before():0}let s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:c}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof eK&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!t2||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),nF(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>n$(this.view)),this.view.input.mouseDown=null}up(e){var t,n,r,o,i;if(this.done(),!this.view.dom.contains(e.target))return;let l=this.pos;this.view.state.doc!=this.startDoc&&(l=this.view.posAtCoords(nq(e))),this.updateAllowDefault(e),this.allowDefault||!l?nF(this.view,"pointer"):(t=this.view,n=l.pos,r=l.inside,o=e,i=this.selectNode,nK(t,"handleClickOn",n,r,o)||t.someProp("handleClick",e=>e(t,n,o))||(i?function(e,t){if(-1==t)return!1;let n,r,o=e.state.selection;o instanceof eK&&(n=o.node);let i=e.state.doc.resolve(t);for(let l=i.depth+1;l>0;l--){let s=l>i.depth?i.nodeAfter:i.node(l);if(eK.isSelectable(s)){r=n&&o.$from.depth>0&&l>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(l);break}}return null!=r&&(nJ(e,eK.create(e.state.doc,r),"pointer"),!0)}(t,r):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&eK.isSelectable(r))&&(nJ(e,new eK(n),"pointer"),!0)}(t,r)))?e.preventDefault():0==e.button&&(this.flushed||tM&&this.mightDrag&&!this.mightDrag.node.isAtom||tE&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(l.pos-this.view.state.selection.from),Math.abs(l.pos-this.view.state.selection.to)))?(nJ(this.view,ej.near(this.view.state.doc.resolve(l.pos)),"pointer"),e.preventDefault()):nF(this.view,"pointer")}move(e){this.updateAllowDefault(e),nF(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function rt(e,t){return!!e.composing||!!(tM&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}nB.touchstart=e=>{var t;e.input.lastTouch=Date.now(),ri(e),nF(e,"pointer")},nB.touchmove=e=>{e.input.lastTouch=Date.now(),nF(e,"pointer")},nB.contextmenu=e=>{var t;return ri(t=e)};let rn=tN?5e3:-1;function rr(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>ri(e),t))}function ro(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function ri(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(tN&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),ro(e),t||e.docView&&e.docView.dirty){let n=nm(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}nV.compositionstart=nV.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof eG&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),ri(e,!0),e.markCursor=null;else if(ri(e,!t.selection.empty),t2&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){let l=i<0?o.lastChild:o.childNodes[i-1];if(!l)break;if(3==l.nodeType){let s=e.domSelection();s&&s.collapse(l,l.nodeValue.length);break}o=l,i=-1}}e.input.composing=!0}rr(e,rn)},nV.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,rr(e,20))};let rl=tS&&t1<15||tT&&t7<604;function rs(e,t,n,r,o){var i;let l=nL(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,o,l||f.empty)))return!0;if(!l)return!1;let s=0==(i=l).openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(l);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ra(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}nB.copy=nV.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=rl?null:n.clipboardData,{dom:l,text:s}=n7(e,r.content());i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",s)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,l),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},nV.paste=(e,t)=>{let n=t;if(e.composing&&!tN)return;let r=rl?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&rs(e,ra(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?rs(e,r.value,null,o,t):rs(e,r.textContent,r.innerHTML,o,t)},50)}(e,n)};class rc{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let rd=t8?"altKey":"ctrlKey";for(let ru in nB.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o,i=e.state.selection,l=i.empty?null:e.posAtCoords(nq(n));if(l&&l.pos>=i.from&&l.pos<=(i instanceof eK?i.to-1:i.to));else if(r&&r.mightDrag)o=eK.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let s=e.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&(o=eK.create(e.state.doc,s.posBefore))}let a=(o||e.state.selection).content(),{dom:c,text:d,slice:u}=n7(e,a);n.dataTransfer.files.length&&tE&&!(t4>120)||n.dataTransfer.clearData(),n.dataTransfer.setData(rl?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",rl||n.dataTransfer.setData("text/plain",d),e.dragging=new rc(u,!n[rd],o)},nB.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},nV.dragover=nV.dragenter=(e,t)=>t.preventDefault(),nV.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(nq(n));if(!o)return;let i=e.state.doc.resolve(o.pos),l=r&&r.slice;l?e.someProp("transformPasted",t=>{l=t(l,e)}):l=nL(e,ra(n.dataTransfer),rl?null:n.dataTransfer.getData("text/html"),!1,i);let s=!(!r||n[rd]);if(e.someProp("handleDrop",t=>t(e,n,l||f.empty,s)))return void n.preventDefault();if(!l)return;n.preventDefault();let a=l?e6(e.state.doc,i.pos,l):i.pos;null==a&&(a=i.pos);let c=e.state.tr;if(s){let{node:d}=r;d?d.replace(c):c.deleteSelection()}let u=c.mapping.map(a),h=0==l.openStart&&0==l.openEnd&&1==l.content.childCount,p=c.doc;if(h?c.replaceRangeWith(u,u,l.content.firstChild):c.replaceRange(u,u,l),c.doc.eq(p))return;let m=c.doc.resolve(u);if(h&&eK.isSelectable(l.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(l.content.firstChild))c.setSelection(new eK(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((e,t,n,r)=>g=r),c.setSelection(n0(e,m,c.doc.resolve(g)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},nB.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&n$(e)},20))},nB.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},nB.beforeinput=(e,t)=>{if(tE&&tN&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,ty(8,"Backspace")))))return;let{$cursor:t}=e.state.selection;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())},50)}},nV)nB[ru]=nV[ru];function rh(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let r in t)if(!(r in e))return!1;return!0}class rp{constructor(e,t){this.toDOM=e,this.spec=t||r_,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new rg(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof rp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class rf{constructor(e,t){this.attrs=e,this.spec=t||r_}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new rg(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof rf&&rh(this.attrs,e.attrs)&&rh(this.spec,e.spec)}static is(e){return e.type instanceof rf}destroy(){}}class rm{constructor(e,t){this.attrs=e,this.spec=t||r_}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new rg(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof rm&&rh(this.attrs,e.attrs)&&rh(this.spec,e.spec)}destroy(){}}class rg{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new rg(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new rg(e,e,new rp(t,n))}static inline(e,t,n,r){return new rg(e,t,new rf(n,r))}static node(e,t,n,r){return new rg(e,t,new rm(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof rf}get widget(){return this.type instanceof rp}}let r$=[],r_={};class rb{constructor(e,t){this.local=e.length?e:r$,this.children=t.length?t:r$}static create(e,t){return t.length?rx(t,e,0,r_):ry}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let l=this.local[i];l.from<=t&&l.to>=e&&(!o||o(l.spec))&&n.push(l.copy(l.from+r,l.to+r))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,n,r+a,o)}}map(e,t,n){return this==ry||0==e.maps.length?this:this.mapInner(e,t,0,0,n||r_)}mapInner(e,t,n,r,o){let i;for(let l=0;l<this.local.length;l++){let s=this.local[l].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?function(e,t,n,r,o,i,l){let s=e.slice();for(let a=0,c=i;a<n.maps.length;a++){let d=0;n.maps[a].forEach((e,t,n,r)=>{let o=r-n-(t-e);for(let i=0;i<s.length;i+=3){let l=s[i+1];if(l<0||e>l+c-d)continue;let a=s[i]+c-d;t>=a?s[i+1]=e<=a?-2:-1:e>=c&&o&&(s[i]+=o,s[i+1]+=o)}d+=o}),c=n.maps[a].map(c,-1)}let u=!1;for(let h=0;h<s.length;h+=3)if(s[h+1]<0){if(-2==s[h+1]){u=!0,s[h+1]=-1;continue}let p=n.map(e[h]+i),f=p-o;if(f<0||f>=r.content.size){u=!0;continue}let m=n.map(e[h+1]+i,-1)-o,{index:g,offset:$}=r.content.findIndex(f),_=r.maybeChild(g);if(_&&$==f&&$+_.nodeSize==m){let b=s[h+2].mapInner(n,_,p+1,e[h]+i+1,l);b!=ry?(s[h]=f,s[h+1]=m,s[h+2]=b):(s[h+1]=-2,u=!0)}else u=!0}if(u){let y=function(e,t,n,r,o,i,l){function s(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(r,o,t);a?n.push(a):l.onRemove&&l.onRemove(e.local[i].spec)}for(let c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(let a=0;a<e.length;a+=3)-1==e[a+1]&&s(e[a+2],t[a]+i+1);return n}(s,e,t,n,o,i,l),v=rx(y,r,0,l);t=v.local;for(let w=0;w<s.length;w+=3)s[w+1]<0&&(s.splice(w,3),w-=3);for(let k=0,x=0;k<v.children.length;k+=3){let C=v.children[k];for(;x<s.length&&s[x]<C;)x+=3;s.splice(x,0,v.children[k],v.children[k+1],v.children[k+2])}}return new rb(t.sort(rC),s)}(this.children,i||[],e,t,n,r,o):i?new rb(i.sort(rC),r$):ry}add(e,t){return t.length?this==ry?rb.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach((e,i)=>{let l,s=i+n;if(l=rk(t,e,s)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,l,s+1):r.splice(o,0,i,i+e.nodeSize,rx(l,e,s+1,r_)),o+=3}});let i=rw(o?r0(t):t,-n);for(let l=0;l<i.length;l++)i[l].type.valid(e,i[l])||i.splice(l--,1);return new rb(i.length?this.local.concat(i).sort(rC):this.local,r||this.children)}remove(e){return 0==e.length||this==ry?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let i,l=n[o]+t,s=n[o+1]+t;for(let a,c=0;c<e.length;c++)(a=e[c])&&a.from>l&&a.to<s&&(e[c]=null,(i||(i=[])).push(a));if(!i)continue;n==this.children&&(n=this.children.slice());let d=n[o+2].removeInner(i,l+1);d!=ry?n[o+2]=d:(n.splice(o,3),o-=3)}if(r.length){for(let u,h=0;h<e.length;h++)if(u=e[h])for(let p=0;p<r.length;p++)r[p].eq(u,t)&&(r==this.local&&(r=this.local.slice()),r.splice(p--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new rb(r,n):ry}forChild(e,t){if(this==ry)return this;if(t.isLeaf)return rb.empty;let n,r;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}let i=e+1,l=i+t.content.size;for(let s=0;s<this.local.length;s++){let a=this.local[s];if(a.from<l&&a.to>i&&a.type instanceof rf){let c=Math.max(i,a.from)-i,d=Math.min(l,a.to)-i;c<d&&(r||(r=[])).push(a.copy(c,d))}}if(r){let u=new rb(r.sort(rC),r$);return n?new rv([u,n]):u}return n||ry}eq(e){if(this==e)return!0;if(!(e instanceof rb)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return rS(this.localsInner(e))}localsInner(e){if(this==ry)return r$;if(e.inlineContent||!this.local.some(rf.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof rf||t.push(this.local[n]);return t}forEachSet(e){e(this)}}rb.empty=new rb([],[]),rb.removeOverlap=rS;let ry=rb.empty;class rv{constructor(e){this.members=e}map(e,t){let n=this.members.map(n=>n.map(e,t,r_));return rv.from(n)}forChild(e,t){if(t.isLeaf)return rb.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=ry&&(o instanceof rv?n=n.concat(o.members):n.push(o))}return rv.from(n)}eq(e){if(!(e instanceof rv)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length){if(t){n&&(t=t.slice(),n=!1);for(let i=0;i<o.length;i++)t.push(o[i])}else t=o}}return t?rS(n?t:t.sort(rC)):r$}static from(e){switch(e.length){case 0:return ry;case 1:return e[0];default:return new rv(e.every(e=>e instanceof rb)?e:e.reduce((e,t)=>e.concat(t instanceof rb?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function rw(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new rg(o.from+t,o.to+t,o.type))}return n}function rk(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i,l=0;l<e.length;l++)(i=e[l])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[l]=null);return o}function r0(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function rx(e,t,n,r){let o=[],i=!1;t.forEach((t,l)=>{let s=rk(e,t,l+n);if(s){i=!0;let a=rx(s,t,n+l+1,r);a!=ry&&o.push(l,l+t.nodeSize,a)}});let l=rw(i?r0(e):e,-n).sort(rC);for(let s=0;s<l.length;s++)l[s].type.valid(t,l[s])||(r.onRemove&&r.onRemove(l[s].spec),l.splice(s--,1));return l.length||o.length?new rb(l,o):ry}function rC(e,t){return e.from-t.from||e.to-t.to}function rS(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),r1(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),r1(t,o+1,i.copy(r.to,i.to)))}}return t}function r1(e,t,n){for(;t<e.length&&rC(n,e[t])>0;)t++;e.splice(t,0,n)}function r2(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ry&&t.push(r)}),e.cursorWrapper&&t.push(rb.create(e.state.doc,[e.cursorWrapper.deco])),rv.from(t)}let r3={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rE=new WeakMap,r4=!1;function rM(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,l=e.domAtPos(e.state.selection.anchor);return tf(l.node,l.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function rT(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function r8(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(tM&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||tM&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let r6=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function rN(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:n0(e,t.resolve(n.anchor),t.resolve(n.head))}function r5(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let i=e.node(r).maybeChild(e.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function r7(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}let rL=n7;class rP{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new class e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}},this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(rI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=rO(this),rR(this),this.nodeViews=rD(this),this.docView=ne(this.state.doc,rA(this),r2(this),this.dom,this),this.domObserver=new class e{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new class e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);tS&&t1<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),tS&&t1<=11&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,r3)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(nx(this.view)){if(this.suppressingSelectionUpdates)return n$(this.view);if(tS&&t1<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&tf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let r=e.focusNode;r;r=tu(r))n.add(r);for(let o=e.anchorNode;o;o=tu(o))if(n.has(o)){t=o;break}let i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&nx(t)&&!this.ignoreSelectionChange(r),i=-1,l=-1,s=!1,a=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(i=i<0?d.from:Math.min(d.from,i),l=l<0?d.to:Math.max(d.to,l),d.typeOver&&(s=!0))}if(t2&&a.length){let u=a.filter(e=>"BR"==e.nodeName);if(2==u.length){let[h,p]=u;h.parentNode&&h.parentNode.parentNode==p.parentNode?p.remove():h.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of u){let g=m.parentNode;!g||"LI"!=g.nodeName||f&&rT(t,f)==g||m.remove()}}}let $=null;i<0&&o&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&tb(r)&&($=nm(t))&&$.eq(ej.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,n$(t),this.currentSelection.set(r),t.scrollToSelection()):(i>-1||o)&&(i>-1&&(t.docView.markDirty(i,l),e=t,!rE.has(e)&&(rE.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=t2,!r4&&(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),r4=!0))),this.handleDOMChange(i,l,s,a),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||n$(t),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let r=0;r<e.addedNodes.length;r++){let o=e.addedNodes[r];t.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,l=e.nextSibling;if(tS&&t1<=11&&e.addedNodes.length)for(let s=0;s<e.addedNodes.length;s++){let{previousSibling:a,nextSibling:c}=e.addedNodes[s];(!a||0>Array.prototype.indexOf.call(e.addedNodes,a))&&(i=a),(!c||0>Array.prototype.indexOf.call(e.addedNodes,c))&&(l=c)}let d=i&&i.parentNode==e.target?td(i)+1:0,u=n.localPosFromDOM(e.target,d,-1),h=l&&l.parentNode==e.target?td(l):e.target.childNodes.length;return{from:u,to:n.localPosFromDOM(e.target,h,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}(this,(e,t,n,r)=>(function e(t,n,r,o,i){let l=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,n<0){let s=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,c=nm(t,s);if(c&&!t.state.selection.eq(c)){if(tE&&tN&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",e=>e(t,ty(13,"Enter"))))return;let d=t.state.tr.setSelection(c);"pointer"==s?d.setMeta("pointer",!0):"key"==s&&d.scrollIntoView(),l&&d.setMeta("composition",l),t.dispatch(d)}return}let u=t.state.doc.resolve(n),h=u.sharedDepth(r);n=u.before(h+1),r=t.state.doc.resolve(r).after(h+1);let p,f,m=t.state.selection,g=function(e,t,n){let r,{node:o,fromOffset:i,toOffset:l,from:s,to:a}=e.docView.parseRange(t,n),c=e.domSelectionRange(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:c.anchorOffset}],tb(c)||r.push({node:c.focusNode,offset:c.focusOffset})),tE&&8===e.input.lastKeyCode)for(let u=l;u>i;u--){let h=o.childNodes[u-1],p=h.pmViewDesc;if("BR"==h.nodeName&&!p){l=u;break}if(!p||p.size)break}let f=e.state.doc,m=e.someProp("domParser")||K.fromSchema(e.state.schema),g=f.resolve(s),$=null,_=m.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:l,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",findPositions:r,ruleFromNode:r8,context:g});if(r&&null!=r[0].pos){let b=r[0].pos,y=r[1]&&r[1].pos;null==y&&(y=b),$={anchor:b+s,head:y+s}}return{doc:_,sel:$,from:s,to:a}}(t,n,r),$=t.state.doc,_=$.slice(g.from,g.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,f="end"):(p=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let b=function(e,t,n,r,o){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:l,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o&&(r-=l+Math.max(0,i-Math.min(l,s))-i),l<i&&e.size<t.size){let a=r<=i&&r>=l?i-r:0;(i-=a)&&i<t.size&&r7(t.textBetween(i-1,i+1))&&(i+=a?1:-1),s=i+(s-l),l=i}else if(s<i){let c=r<=i&&r>=s?i-r:0;(i-=c)&&i<e.size&&r7(e.textBetween(i-1,i+1))&&(i+=c?1:-1),l=i+(l-s),s=i}return{start:i,endA:l,endB:s}}(_.content,g.doc.content,g.from,p,f);if(b&&t.input.domChangeCount++,(tT&&t.input.lastIOSEnter>Date.now()-225||tN)&&i.some(e=>1==e.nodeType&&!r6.test(e.nodeName))&&(!b||b.endA>=b.endB)&&t.someProp("handleKeyDown",e=>e(t,ty(13,"Enter"))))return void(t.input.lastIOSEnter=0);if(!b){if(!(o&&m instanceof eG&&!m.empty&&m.$head.sameParent(m.$anchor))||t.composing||g.sel&&g.sel.anchor!=g.sel.head){if(g.sel){let y=rN(t,t.state.doc,g.sel);if(y&&!y.eq(t.state.selection)){let v=t.state.tr.setSelection(y);l&&v.setMeta("composition",l),t.dispatch(v)}}return}b={start:m.from,endA:m.to,endB:m.to}}t.state.selection.from<t.state.selection.to&&b.start==b.endB&&t.state.selection instanceof eG&&(b.start>t.state.selection.from&&b.start<=t.state.selection.from+2&&t.state.selection.from>=g.from?b.start=t.state.selection.from:b.endA<t.state.selection.to&&b.endA>=t.state.selection.to-2&&t.state.selection.to<=g.to&&(b.endB+=t.state.selection.to-b.endA,b.endA=t.state.selection.to)),tS&&t1<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>g.from&&" \xa0"==g.doc.textBetween(b.start-g.from-1,b.start-g.from+1)&&(b.start--,b.endA--,b.endB--);let w,k=g.doc.resolveNoCache(b.start-g.from),x=g.doc.resolveNoCache(b.endB-g.from),C=$.resolve(b.start),S=k.sameParent(x)&&k.parent.inlineContent&&C.end()>=b.endA;if((tT&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!S&&k.pos<g.doc.content.size&&!k.sameParent(x)&&(w=ej.findFrom(g.doc.resolve(k.pos+1),1,!0))&&w.head==x.pos)&&t.someProp("handleKeyDown",e=>e(t,ty(13,"Enter"))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>b.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||r5(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let l=i.nodeAfter;return null!=l&&n==t+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(r5(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||r5(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}($,b.start,b.endA,k,x)&&t.someProp("handleKeyDown",e=>e(t,ty(8,"Backspace"))))return void(tN&&tE&&t.domObserver.suppressSelectionUpdates());tE&&tN&&b.endB==b.start&&(t.input.lastAndroidDelete=Date.now()),tN&&!S&&k.start()!=x.start()&&0==x.parentOffset&&k.depth==x.depth&&g.sel&&g.sel.anchor==g.sel.head&&g.sel.head==b.endA&&(b.endB-=2,x=g.doc.resolveNoCache(b.endB-g.from),setTimeout(()=>{t.someProp("handleKeyDown",function(e){return e(t,ty(13,"Enter"))})},20));let E,M,T,N=b.start,L=b.endA;if(S){if(k.pos==x.pos)tS&&t1<=11&&0==k.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>n$(t),20)),E=t.state.tr.delete(N,L),M=$.resolve(b.start).marksAcross($.resolve(b.endA));else if(b.endA==b.endB&&(T=function(e,t){let n,r,o,i=e.firstChild.marks,l=t.firstChild.marks,s=i,c=l;for(let d=0;d<l.length;d++)s=l[d].removeFromSet(s);for(let u=0;u<i.length;u++)c=i[u].removeFromSet(c);if(1==s.length&&0==c.length)r=s[0],n="add",o=e=>e.mark(r.addToSet(e.marks));else{if(0!=s.length||1!=c.length)return null;r=c[0],n="remove",o=e=>e.mark(r.removeFromSet(e.marks))}let h=[];for(let p=0;p<t.childCount;p++)h.push(o(t.child(p)));if(a.from(h).eq(e))return{mark:r,type:n}}(k.parent.content.cut(k.parentOffset,x.parentOffset),C.parent.content.cut(C.parentOffset,b.endA-C.start()))))E=t.state.tr,"add"==T.type?E.addMark(N,L,T.mark):E.removeMark(N,L,T.mark);else if(k.parent.child(k.index()).isText&&k.index()==x.index()-(x.textOffset?0:1)){let P=k.parent.textBetween(k.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",e=>e(t,N,L,P)))return;E=t.state.tr.insertText(P,N,L)}}if(E||(E=t.state.tr.replace(N,L,g.doc.slice(b.start-g.from,b.endB-g.from))),g.sel){let A=rN(t,E.doc,g.sel);A&&!(tE&&tN&&t.composing&&A.empty&&(b.start!=b.endB||t.input.lastAndroidDelete<Date.now()-100)&&(A.head==N||A.head==E.mapping.map(L)-1)||tS&&A.empty&&A.head==N)&&E.setSelection(A)}M&&E.ensureMarks(M),l&&E.setMeta("composition",l),t.dispatch(E.scrollIntoView())})(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in nB){let n=nB[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!nG(e,t)||nW(e,t)||!e.editable&&t.type in nV||n(e,t)},nj[t]?{passive:!0}:void 0)}tM&&e.dom.addEventListener("input",()=>null),nU(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&nU(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(rI),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];for(let r in t.state=this.state,e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n,r,o,i;let l=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(ro(this),a=!0),this.state=e;let c=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let d=rD(this);(function(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let i in t)r++;return n!=r})(d,this.nodeViews)&&(this.nodeViews=d,s=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&nU(this),this.editable=rO(this),rR(this);let u=r2(this),h=rA(this),p=l.plugins==e.plugins||l.doc.eq(e.doc)?e.scrollToSelection>l.scrollToSelection?"to selection":"preserve":"reset",f=s||!this.docView.matchesNode(e.doc,h,u);!f&&e.selection.eq(l.selection)||(a=!0);let m="preserve"==p&&a&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top);for(let i=(r.left+r.right)/2,l=o+1;l<Math.min(innerHeight,r.bottom);l+=5){let s=e.root.elementFromPoint(i,l);if(!s||s==e.dom||!e.dom.contains(s))continue;let a=s.getBoundingClientRect();if(a.top>=o-20){t=s,n=a.top;break}}return{refDOM:t,refTop:n,stack:tO(e.dom)}}(this);if(a){this.domObserver.stop();let g,$=f&&(tS||tE)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&(r=l.selection,o=e.selection,g=Math.min(r.$anchor.sharedDepth(r.head),o.$anchor.sharedDepth(o.head)),r.$anchor.start(g)!=o.$anchor.start(g));if(f){let _=tE?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function e(t){let n=t.domSelectionRange();if(!n.focusNode)return null;let r=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=t$(e=e.childNodes[t-1])}else{if(!e.parentNode||t_(e))return null;t=td(e),e=e.parentNode}}}(n.focusNode,n.focusOffset),o=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||t_(e))return null;t=td(e)+1,e=e.parentNode}}}(n.focusNode,n.focusOffset);if(r&&o&&r!=o){let i=o.pmViewDesc,l=t.domObserver.lastChangedTextNode;if(r==l||o==l)return l;if(!i||!i.isText(o.nodeValue))return o;if(t.input.compositionNode==o){let s=r.pmViewDesc;if(s&&s.isText(r.nodeValue))return o}}return r||o}(this)),!s&&this.docView.update(e.doc,h,u,this)||(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=ne(e.doc,h,u,this.dom,this)),_&&!this.trackWrites&&($=!0)}let b,y;$||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(i=this,b=i.docView.domFromPos(i.state.selection.anchor,0),y=i.domSelectionRange(),tf(b.node,b.offset,y.anchorNode,y.anchorOffset)))?n$(this,$):(nw(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),"reset"==p?this.dom.scrollTop=0:"to selection"==p?this.scrollToSelection():m&&function(e){let{refDOM:t,refTop:n,stack:r}=e,o=t?t.getBoundingClientRect().top:0;tD(r,0==o?0:o-n)}(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof eK){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&tR(this,t.getBoundingClientRect(),e)}else tR(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(let i=0;i<this.state.plugins.length;i++){let l=this.state.plugins[i];l.spec.view&&this.pluginViews.push(l.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let o=n.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new rc(e.slice,e.move,r<0?void 0:eK.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}let l=this.state.plugins;if(l)for(let s=0;s<l.length;s++){let a=l[s].props[e];if(null!=a&&(n=t?t(a):a))return n}}hasFocus(){if(tS){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(tI)return e.focus(tI);let t=tO(e);e.focus(null==tI?{get preventScroll(){return tI={preventScroll:!0},!0}}:void 0),tI||(tI=!1,tD(t,0))}(this.dom),n$(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function e(t,n){var r,o;let i,l=t.dom.ownerDocument,s=0,a=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(t$(r.offsetNode),r.offset)}}catch(o){}if(e.caretRangeFromPoint){let i=e.caretRangeFromPoint(t,n);if(i)return{node:i.startContainer,offset:Math.min(t$(i.startContainer),i.startOffset)}}}(l,n.left,n.top);a&&({node:i,offset:s}=a);let c,d=(t.root.elementFromPoint?t.root:l).elementFromPoint(n.left,n.top);if(!d||!t.dom.contains(1!=d.nodeType?d.parentNode:d)){let u=t.dom.getBoundingClientRect();if(!tH(n,u)||!(d=function e(t,n,r){let o=t.childNodes.length;if(o&&r.top<r.bottom)for(let i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),l=i;;){let s=t.childNodes[l];if(1==s.nodeType){let a=s.getClientRects();for(let c=0;c<a.length;c++){let d=a[c];if(tH(n,d))return e(s,n,d)}}if((l=(l+1)%o)==i)break}return t}(t.dom,n,u)))return null}if(tM)for(let h=d;i&&h;h=tu(h))h.draggable&&(i=void 0);let p;if(d=(r=d,o=n,(p=r.parentNode)&&/^li$/i.test(p.nodeName)&&o.left<r.getBoundingClientRect().left?p:r),i){if(t2&&1==i.nodeType&&(s=Math.min(s,i.childNodes.length))<i.childNodes.length){let f,m=i.childNodes[s];"IMG"==m.nodeName&&(f=m.getBoundingClientRect()).right<=n.left&&f.bottom>n.top&&s++}let g;t5&&s&&1==i.nodeType&&1==(g=i.childNodes[s-1]).nodeType&&"false"==g.contentEditable&&g.getBoundingClientRect().top>=n.top&&s--,i==t.dom&&s==i.childNodes.length-1&&1==i.lastChild.nodeType&&n.top>i.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:0!=s&&1==i.nodeType&&"BR"==i.childNodes[s-1].nodeName||(c=function(e,t,n,r){let o=-1;for(let i=t,l=!1;i!=e.dom;){let s=e.docView.nearestDesc(i,!0);if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent||!s.contentDOM)){let a=s.dom.getBoundingClientRect();if(s.node.isBlock&&s.parent&&(!l&&a.left>r.left||a.top>r.top?o=s.posBefore:(!l&&a.right<r.left||a.bottom<r.top)&&(o=s.posAfter),l=!0),!s.contentDOM&&o<0&&!s.node.isText)return(s.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?s.posBefore:s.posAfter}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(t,i,s,n))}null==c&&(c=function(e,t,n){let{node:r,offset:o}=function e(t,n){let r,o,i,l,s=2e8,a=0,c=n.top,d=n.top;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let p;if(1==u.nodeType)p=u.getClientRects();else{if(3!=u.nodeType)continue;p=tp(u).getClientRects()}for(let f=0;f<p.length;f++){let m=p[f];if(m.top<=c&&m.bottom>=d){c=Math.max(m.bottom,c),d=Math.min(m.top,d);let g=m.left>n.left?m.left-n.left:m.right<n.left?n.left-m.right:0;if(g<s){r=u,s=g,o=g&&3==r.nodeType?{left:m.right<n.left?m.right:m.left,top:n.top}:n,1==u.nodeType&&g&&(a=h+(n.left>=(m.left+m.right)/2?1:0));continue}}else m.top>n.top&&!i&&m.left<=n.left&&m.right>=n.left&&(i=u,l={left:Math.max(m.left,Math.min(m.right,n.left)),top:m.top});!r&&(n.left>=m.right&&n.top>=m.top||n.left>=m.left&&n.top>=m.bottom)&&(a=h+1)}}return!r&&i&&(r=i,o=l,s=0),r&&3==r.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let i=t9(r,1);if(i.top!=i.bottom&&tH(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(r,o):!r||s&&1==r.nodeType?{node:t,offset:a}:e(r,o)}(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let l=r.getBoundingClientRect();i=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}(t,d,n));let $=t.docView.nearestDesc(d,!0);return{pos:c,inside:$?$.posAtStart-$.border:-1}}(this,e)}coordsAtPos(e){return tV(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){var n,r,o,i,l,s;let a,c;return n=this,r=t||this.state,o=e,tG==r&&tq==o?tK:(tG=r,tq=o,tK="up"==o||"down"==o?(i=n,l=r,s=o,a=l.selection,c="up"==s?a.$from:a.$to,tU(i,l,()=>{let{node:e}=i.docView.domFromPos(c.pos,"up"==s?-1:1);for(;;){let t=i.docView.nearestDesc(e,!0);if(!t)break;if(t.node.isBlock){e=t.contentDOM||t.dom;break}e=t.dom.parentNode}let n=tV(i,c.pos,1);for(let r=e.firstChild;r;r=r.nextSibling){let o;if(1==r.nodeType)o=r.getClientRects();else{if(3!=r.nodeType)continue;o=tp(r,0,r.nodeValue.length).getClientRects()}for(let l=0;l<o.length;l++){let a=o[l];if(a.bottom>a.top+1&&("up"==s?n.top-a.top>2*(a.bottom-n.top):a.bottom-n.bottom>2*(n.bottom-a.top)))return!1}}return!0})):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=o==r.parent.content.size,l=e.domSelection();return l?tW.test(r.parent.textContent)&&l.modify?tU(e,t,()=>{let{focusNode:t,focusOffset:o,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),a=l.caretBidiLevel;l.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:d,focusOffset:u}=e.domSelectionRange(),h=d&&!c.contains(1==d.nodeType?d:d.parentNode)||t==d&&o==u;try{l.collapse(i,s),t&&(t!=i||o!=s)&&l.extend&&l.extend(t,o)}catch(p){}return null!=a&&(l.caretBidiLevel=a),h}):"left"==n||"backward"==n?!o:i:r.pos==r.start()||r.pos==r.end()}(n,r,o))}pasteHTML(e,t){return rs(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return rs(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(e){for(let t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],r2(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,th=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){var t,n;return t=this,void(nW(t,n=e)||!nB[n.type]||!t.editable&&n.type in nV||nB[n.type](t,n))}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?tM&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return rM(e,n)}let r;function o(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",o,!0),r?rM(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function rA(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let r in n)"class"==r?t.class+=" "+n[r]:"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[rg.node(0,e.state.doc.content.size,t)]}function rR(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:rg.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function rO(e){return!e.someProp("editable",t=>!1===t(e.state))}function rD(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function rI(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}for(var rH={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rz={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},r9="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),rB="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),rV=0;rV<10;rV++)rH[48+rV]=rH[96+rV]=String(rV);for(rV=1;rV<=24;rV++)rH[rV+111]="F"+rV;for(rV=65;rV<=90;rV++)rH[rV]=String.fromCharCode(rV+32),rz[rV]=String.fromCharCode(rV);for(var rj in rH)rz.hasOwnProperty(rj)||(rz[rj]=rH[rj]);let rF="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function rU(e){let t,n,r,o,i=e.split(/-(?!$)/),l=i[i.length-1];"Space"==l&&(l=" ");for(let s=0;s<i.length-1;s++){let a=i[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))r=!0;else{if(!/^mod$/i.test(a))throw Error("Unrecognized modifier name: "+a);rF?o=!0:n=!0}}return t&&(l="Alt-"+l),n&&(l="Ctrl-"+l),o&&(l="Meta-"+l),r&&(l="Shift-"+l),l}function rW(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function rG(e){let t=function(e){let t=Object.create(null);for(let n in e)t[rU(n)]=e[n];return t}(e);return function(e,n){var r,o;let i,l=(r=n,"Esc"==(o=!(r9&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||rB&&r.shiftKey&&r.key&&1==r.key.length||"Unidentified"==r.key)&&r.key||(r.shiftKey?rz:rH)[r.keyCode]||r.key||"Unidentified")&&(o="Escape"),"Del"==o&&(o="Delete"),"Left"==o&&(o="ArrowLeft"),"Up"==o&&(o="ArrowUp"),"Right"==o&&(o="ArrowRight"),"Down"==o&&(o="ArrowDown"),o),s=t[rW(l,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==l.length&&" "!=l){if(n.shiftKey){let a=t[rW(l,n,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||l.charCodeAt(0)>127)&&(i=rH[n.keyCode])&&i!=l){let c=t[rW(i,n)];if(c&&c(e.state,e.dispatch,e))return!0}}return!1}}let rq=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function rK(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let rJ=(e,t,n)=>{let r=rK(e,n);if(!r)return!1;let o=rY(r);if(!o){let i=r.blockRange(),l=i&&eS(i);return null!=l&&(t&&t(e.tr.lift(i,l).scrollIntoView()),!0)}let s=o.nodeBefore;if(ou(e,o,t,-1))return!0;if(0==r.parent.content.size&&(rX(s,"end")||eK.isSelectable(s)))for(let a=r.depth;;a--){let c=eN(e.doc,r.before(a),r.after(a),f.empty);if(c&&c.slice.size<c.to-c.from){if(t){let d=e.tr.step(c);d.setSelection(rX(s,"end")?ej.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):eK.create(d.doc,o.pos-s.nodeSize)),t(d.scrollIntoView())}return!0}if(1==a||r.node(a-1).childCount>1)break}return!(!s.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0)};function rZ(e,t,n){let r=t.nodeBefore,o=t.pos-1;for(;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;let i=r.lastChild;if(!i)return!1;r=i}let l=t.nodeAfter,s=t.pos+1;for(;!l.isTextblock;s++){if(l.type.spec.isolating)return!1;let a=l.firstChild;if(!a)return!1;l=a}let c=eN(e.doc,o,s,f.empty);if(!c||c.from!=o||c instanceof ew&&c.slice.size>=s-o)return!1;if(n){let d=e.tr.step(c);d.setSelection(eG.create(d.doc,o)),n(d.scrollIntoView())}return!0}function rX(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let rQ=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=rY(r)}let l=i&&i.nodeBefore;return!(!l||!eK.isSelectable(l))&&(t&&t(e.tr.setSelection(eK.create(e.doc,i.pos-l.nodeSize)).scrollIntoView()),!0)};function rY(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function oe(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let ot=(e,t,n)=>{let r=oe(e,n);if(!r)return!1;let o=or(r);if(!o)return!1;let i=o.nodeAfter;if(ou(e,o,t,1))return!0;if(0==r.parent.content.size&&(rX(i,"start")||eK.isSelectable(i))){let l=eN(e.doc,r.before(),r.after(),f.empty);if(l&&l.slice.size<l.to-l.from){if(t){let s=e.tr.step(l);s.setSelection(rX(i,"start")?ej.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):eK.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)},on=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=or(r)}let l=i&&i.nodeAfter;return!(!l||!eK.isSelectable(l))&&(t&&t(e.tr.setSelection(eK.create(e.doc,i.pos)).scrollIntoView()),!0)};function or(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let oo=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function oi(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let ol=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),l=oi(o.contentMatchAt(i));if(!l||!o.canReplaceWith(i,i,l))return!1;if(t){let s=n.after(),a=e.tr.replaceWith(s,s,l.createAndFill());a.setSelection(ej.near(a.doc.resolve(s),1)),t(a.scrollIntoView())}return!0},oa=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof eZ||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=oi(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let l=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(l,i.createAndFill());s.setSelection(eG.create(s.doc,l+1)),t(s.scrollIntoView())}return!0},oc=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(e4(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let o=n.blockRange(),i=o&&eS(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)},od=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof eK&&e.selection.node.isBlock)return!(!n.parentOffset||!e4(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let o,i,l=[],s=!1,a=!1;for(let c=n.depth;;c--){if(n.node(c).isBlock){s=n.end(c)==n.pos+(n.depth-c),a=n.start(c)==n.pos-(n.depth-c),i=oi(n.node(c-1).contentMatchAt(n.indexAfter(c-1)));let d=iD&&iD(r.parent,s,n);l.unshift(d||(s&&i?{type:i}:null)),o=c;break}if(1==c)return!1;l.unshift(null)}let u=e.tr;(e.selection instanceof eG||e.selection instanceof eZ)&&u.deleteSelection();let h=u.mapping.map(n.pos),p=e4(u.doc,h,l.length,l);if(p||(l[0]=i?{type:i}:null,p=e4(u.doc,h,l.length,l)),u.split(h,l.length,l),!s&&a&&n.node(o).type!=i){let f=u.mapping.map(n.before(o)),m=u.doc.resolve(f);i&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,i)&&u.setNodeMarkup(u.mapping.map(n.before(o)),i)}return t&&t(u.scrollIntoView()),!0};function ou(e,t,n,r){var o,i,l;let s,c,d=t.nodeBefore,u=t.nodeAfter,h=d.type.spec.isolating||u.type.spec.isolating,p,m,g;if(!h&&(o=e,i=t,l=n,p=i.nodeBefore,m=i.nodeAfter,g=i.index(),p&&m&&p.type.compatibleContent(m.type)&&(!p.content.size&&i.parent.canReplace(g-1,g)?(l&&l(o.tr.delete(i.pos-p.nodeSize,i.pos).scrollIntoView()),!0):!(!i.parent.canReplace(g,g+1)||!m.isTextblock&&!eM(o.doc,i.pos))&&(l&&l(o.tr.join(i.pos).scrollIntoView()),!0))))return!0;let $=!h&&t.parent.canReplace(t.index(),t.index()+1);if($&&(s=(c=d.contentMatchAt(d.childCount)).findWrapping(u.type))&&c.matchType(s[0]||u.type).validEnd){if(n){let _=t.pos+u.nodeSize,b=a.empty;for(let y=s.length-1;y>=0;y--)b=a.from(s[y].create(null,b));b=a.from(d.copy(b));let v=e.tr.step(new ek(t.pos-1,_,t.pos,_,new f(b,1,0),s.length,!0)),w=v.doc.resolve(_+2*s.length);w.nodeAfter&&w.nodeAfter.type==d.type&&eM(v.doc,w.pos)&&v.join(w.pos),n(v.scrollIntoView())}return!0}let k=u.type.spec.isolating||r>0&&h?null:ej.findFrom(t,1),x=k&&k.$from.blockRange(k.$to),C=x&&eS(x);if(null!=C&&C>=t.depth)return n&&n(e.tr.lift(x,C).scrollIntoView()),!0;if($&&rX(u,"start",!0)&&rX(d,"end")){let S=d,E=[];for(;E.push(S),!S.isTextblock;)S=S.lastChild;let M=u,T=1;for(;!M.isTextblock;M=M.firstChild)T++;if(S.canReplace(S.childCount,S.childCount,M.content)){if(n){let N=a.empty;for(let L=E.length-1;L>=0;L--)N=a.from(E[L].copy(N));n(e.tr.step(new ek(t.pos-E.length,t.pos+u.nodeSize,t.pos+T,t.pos+u.nodeSize-T,new f(N,E.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function oh(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(eG.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}let op=oh(-1),of=oh(1);function om(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:l},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(l,s,(r,i)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t)){if(r.type==e)o=!0;else{let l=n.doc.resolve(i),s=l.index();o=l.parent.canReplaceWith(s,s+1,e)}}})}if(!o)return!1;if(r){let a=n.tr;for(let c=0;c<n.selection.ranges.length;c++){let{$from:{pos:d},$to:{pos:u}}=n.selection.ranges[c];a.setBlockType(d,u,e,t)}r(a.scrollIntoView())}return!0}}function og(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}let o$=og(rq,rJ,rQ),o_=og(rq,ot,on),ob={Enter:og(oo,oa,oc,od),"Mod-Enter":ol,Backspace:o$,"Mod-Backspace":o$,"Shift-Backspace":o$,Delete:o_,"Mod-Delete":o_,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new eZ(e.doc))),!0)},oy={"Ctrl-h":ob.Backspace,"Alt-Backspace":ob["Mod-Backspace"],"Ctrl-d":ob.Delete,"Ctrl-Alt-Backspace":ob["Mod-Delete"],"Alt-Delete":ob["Mod-Delete"],"Alt-d":ob["Mod-Delete"],"Ctrl-a":op,"Ctrl-e":of};for(let ov in ob)oy[ov]=ob[ov];function ow(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class ok{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){var e=this;let{rawCommands:t,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,l=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(t=>{let[n,r]=t;return[n,function(){let t=r(...arguments)(l);return i.getMeta("preventDispatch")||e.hasCustomState||o.dispatch(i),t}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{rawCommands:r,editor:o,state:i}=this,{view:l}=o,s=[],a=!!e,c=e||i.tr,d={...Object.fromEntries(Object.entries(r).map(e=>{let[r,o]=e;return[r,function(){let e=t.buildProps(c,n),r=o(...arguments)(e);return s.push(r),d}]})),run:()=>(a||!n||c.getMeta("preventDispatch")||this.hasCustomState||l.dispatch(c),s.every(e=>!0===e))};return d}createCan(e){let{rawCommands:t,state:n}=this,r=e||n.tr,o=this.buildProps(r,!1),i=Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){return n(...arguments)({...o,dispatch:void 0})}]}));return{...i,chain:()=>this.createChain(r,!1)}}buildProps(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{rawCommands:n,editor:r,state:o}=this,{view:i}=r,l={tr:e,editor:r,view:i,state:ow({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){return n(...arguments)(l)}]}))}};return l}}class o0{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o=this.callbacks[e];return o&&o.forEach(e=>e.apply(this,n)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function ox(e,t,n){return void 0===e.config[t]&&e.parent?ox(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?ox(e.parent,t,n):null}):e.config[t]}function oC(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function oS(e){let t=[],{nodeExtensions:n,markExtensions:r}=oC(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n=ox(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:o});n&&n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[r,o]=e;t.push({type:n,name:r,attribute:{...i,...o}})})})})}),o.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=ox(e,"addAttributes",n);if(!r)return;let o=r();Object.entries(o).forEach(n=>{let[r,o]=n,l={...i,...o};"function"==typeof(null==l?void 0:l.default)&&(l.default=l.default()),(null==l?void 0:l.isRequired)&&void 0===(null==l?void 0:l.default)&&delete l.default,t.push({type:e.name,name:r,attribute:l})})}),t}function o1(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function o2(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(e=>{let[t,r]=e;if(n[t]){if("class"===t){let o=r?r.split(" "):[],i=n[t]?n[t].split(" "):[],l=o.filter(e=>!i.includes(e));n[t]=[...i,...l].join(" ")}else if("style"===t){let s=r?r.split(";").map(e=>e.trim()).filter(Boolean):[],a=n[t]?n[t].split(";").map(e=>e.trim()).filter(Boolean):[],c=new Map;a.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());c.set(t,n)}),s.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());c.set(t,n)}),n[t]=Array.from(c.entries()).map(e=>{let[t,n]=e;return`${t}: ${n}`}).join("; ")}else n[t]=r}else n[t]=r}),n},{})}function o3(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>o2(e,t),{})}function oE(e){return"function"==typeof e}function o4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(oE(e)){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t?e.bind(t)(...r):e(...r)}return e}function oM(e,t){return"style"in e?e:{...e,getAttrs(n){let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let o=t.reduce((e,t)=>{var r;let o=t.attribute.parseHTML?t.attribute.parseHTML(n):"string"!=typeof(r=n.getAttribute(t.name))?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):"true"===r||"false"!==r&&r;return null==o?e:{...e,[t.name]:o}},{});return{...r,...o}}}}function oT(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return("attrs"!==t||!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&null!=n}))}function o8(e,t){var n;let r=oS(e),{nodeExtensions:o,markExtensions:i}=oC(e),l=null===(n=o.find(e=>ox(e,"topNode")))||void 0===n?void 0:n.name,s=Object.fromEntries(o.map(n=>{let o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},l=oT({...e.reduce((e,t)=>{let r=ox(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}},{}),content:o4(ox(n,"content",i)),marks:o4(ox(n,"marks",i)),group:o4(ox(n,"group",i)),inline:o4(ox(n,"inline",i)),atom:o4(ox(n,"atom",i)),selectable:o4(ox(n,"selectable",i)),draggable:o4(ox(n,"draggable",i)),code:o4(ox(n,"code",i)),whitespace:o4(ox(n,"whitespace",i)),defining:o4(ox(n,"defining",i)),isolating:o4(ox(n,"isolating",i)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=o4(ox(n,"parseHTML",i));s&&(l.parseDOM=s.map(e=>oM(e,o)));let a=ox(n,"renderHTML",i);a&&(l.toDOM=e=>a({node:e,HTMLAttributes:o3(e,o)}));let c=ox(n,"renderText",i);return c&&(l.toText=c),[n.name,l]})),a=Object.fromEntries(i.map(n=>{let o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},l=oT({...e.reduce((e,t)=>{let r=ox(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}},{}),inclusive:o4(ox(n,"inclusive",i)),excludes:o4(ox(n,"excludes",i)),group:o4(ox(n,"group",i)),spanning:o4(ox(n,"spanning",i)),code:o4(ox(n,"code",i)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),s=o4(ox(n,"parseHTML",i));s&&(l.parseDOM=s.map(e=>oM(e,o)));let a=ox(n,"renderHTML",i);return a&&(l.toDOM=e=>a({mark:e,HTMLAttributes:o3(e,o)})),[n.name,l]}));return new G({topNode:l,nodes:s,marks:a})}function o6(e,t){return t.nodes[e]||t.marks[e]||null}function oN(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function o5(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class o7{constructor(e){this.find=e.find,this.handler=e.handler}}function oL(e){var t;let{editor:n,from:r,to:o,text:i,rules:l,plugin:s}=e,{view:a}=n;if(a.composing)return!1;let c=a.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let d=!1,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,o,i)=>{var l,s;let a=(null===(s=(l=e.type.spec).toText)||void 0===s?void 0:s.call(l,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?a:a.slice(0,Math.max(0,r-t))}),n}(c)+i;return l.forEach(e=>{if(d)return;let t=((e,t)=>{if(o5(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r})(u,e.find);if(!t)return;let l=a.state.tr,c=ow({state:a.state,transaction:l}),h={from:r-(t[0].length-i.length),to:o},{commands:p,chain:f,can:m}=new ok({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&l.steps.length&&(l.setMeta(s,{transform:l,from:r,to:o,text:i}),a.dispatch(l),d=!0)}),d}function oP(e){var t;return"Object"===(t=e,Object.prototype.toString.call(t).slice(8,-1))&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function oA(e,t){let n={...e};return oP(e)&&oP(t)&&Object.keys(t).forEach(r=>{oP(t[r])&&oP(e[r])?n[r]=oA(e[r],t[r]):n[r]=t[r]}),n}class oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=o4(ox(this,"addOptions",{name:this.name}))),this.storage=o4(ox(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new oR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>oA(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new oR(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=o4(ox(t,"addOptions",{name:t.name})),t.storage=o4(ox(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e,{tr:r}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){let i=o.marks(),l=!!i.find(e=>(null==e?void 0:e.type.name)===n.name);if(!l)return!1;let s=i.find(e=>(null==e?void 0:e.type.name)===n.name);return s&&r.removeStoredMark(s),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}}class oO{constructor(e){this.find=e.find,this.handler=e.handler}}class oD{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=oD.resolve(e),this.schema=o8(this.extensions,t),this.setupExtensions()}static resolve(e){let t=oD.sort(oD.flatten(e)),n=function(e){let t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(e=>{let t=ox(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{let n=ox(e,"priority")||100,r=ox(t,"priority")||100;return n>r?-1:n<r?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let n=ox(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:o6(t.name,this.schema)});return n?{...e,...n()}:e},{})}get plugins(){let{editor:e}=this,t=oD.sort([...this.extensions].reverse()),n=[],r=[],o=t.map(t=>{let o={name:t.name,options:t.options,storage:t.storage,editor:e,type:o6(t.name,this.schema)},i=[],l=ox(t,"addKeyboardShortcuts",o),s={};if("mark"===t.type&&ox(t,"exitable",o)&&(s.ArrowRight=()=>oR.handleExit({editor:e,mark:t})),l){let a=Object.fromEntries(Object.entries(l()).map(t=>{let[n,r]=t;return[n,()=>r({editor:e})]}));s={...s,...a}}let c=new tl({props:{handleKeyDown:rG(s)}});i.push(c);let d=ox(t,"addInputRules",o);oN(t,e.options.enableInputRules)&&d&&n.push(...d());let u=ox(t,"addPasteRules",o);oN(t,e.options.enablePasteRules)&&u&&r.push(...u());let h=ox(t,"addProseMirrorPlugins",o);if(h){let p=h();i.push(...p)}return i}).flat();return[function e(t){let{editor:n,rules:r}=t,o=new tl({state:{init:()=>null,apply(e,t){let i=e.getMeta(o);if(i)return i;let l=e.getMeta("applyInputRules");return l&&setTimeout(()=>{let{from:e,text:t}=l,i=e+t.length;oL({editor:n,from:e,to:i,text:t,rules:r,plugin:o})}),e.selectionSet||e.docChanged?null:t}},props:{handleTextInput:(e,t,i,l)=>oL({editor:n,from:t,to:i,text:l,rules:r,plugin:o}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:t}=e.state.selection;t&&oL({editor:n,from:t.pos,to:t.pos,text:"",rules:r,plugin:o})}),!1)},handleKeyDown(e,t){if("Enter"!==t.key)return!1;let{$cursor:i}=e.state.selection;return!!i&&oL({editor:n,from:i.pos,to:i.pos,text:"\n",rules:r,plugin:o})}},isInputRules:!0});return o}({editor:e,rules:n}),...function e(t){let{editor:n,rules:r}=t,o=null,i=!1,l=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,a="undefined"!=typeof DragEvent?new DragEvent("drop"):null,c=e=>{let{state:t,from:r,to:o,rule:i,pasteEvt:l}=e,c=t.tr,d=ow({state:t,transaction:c});if(function e(t){let{editor:n,state:r,from:o,to:i,rule:l,pasteEvent:s,dropEvent:a}=t,{commands:c,chain:d,can:u}=new ok({editor:n,state:r}),h=[];return r.doc.nodesBetween(o,i,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let n=Math.max(o,t),p=Math.min(i,t+e.content.size),f=((e,t,n)=>{if(o5(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]})(e.textBetween(n-t,p-t,void 0,"￼"),l.find,s);f.forEach(e=>{if(void 0===e.index)return;let t=n+e.index+1,o=t+e[0].length,i={from:r.tr.mapping.map(t),to:r.tr.mapping.map(o)},p=l.handler({state:r,range:i,match:e,commands:c,chain:d,can:u,pasteEvent:s,dropEvent:a});h.push(p)})}),h.every(e=>null!==e)}({editor:n,state:d,from:Math.max(r-1,0),to:o.b-1,rule:i,pasteEvent:l,dropEvent:a})&&c.steps.length)return a="undefined"!=typeof DragEvent?new DragEvent("drop"):null,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,c},d=r.map(e=>new tl({view(e){let t=t=>{var n;o=(null===(n=e.dom.parentElement)||void 0===n?void 0:n.contains(t.target))?e.dom.parentElement:null};return window.addEventListener("dragstart",t),{destroy(){window.removeEventListener("dragstart",t)}}},props:{handleDOMEvents:{drop:(e,t)=>(l=o===e.dom.parentElement,a=t,!1),paste(e,t){var n;let r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction(t,n,r){let o=t[0],a="paste"===o.getMeta("uiEvent")&&!i,d="drop"===o.getMeta("uiEvent")&&!l,u=o.getMeta("applyPasteRules"),h=!!u;if(!a&&!d&&!h)return;if(h){let{from:p,text:f}=u,m=p+f.length,g=(e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n})(f);return c({rule:e,state:r,from:p,to:{b:m},pasteEvt:g})}let $=n.doc.content.findDiffStart(r.doc.content),_=n.doc.content.findDiffEnd(r.doc.content);return"number"==typeof $&&_&&$!==_.b?c({rule:e,state:r,from:$,to:_,pasteEvt:s}):void 0}}));return d}({editor:e,rules:r}),...o]}get attributes(){return oS(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=oC(this.extensions);return Object.fromEntries(t.filter(e=>!!ox(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:o1(t.name,this.schema)},o=ox(t,"addNodeView",r);return o?[t.name,(r,i,l,s,a)=>{let c=o3(r,n);return o()({node:r,view:i,getPos:l,decorations:s,innerDecorations:a,editor:e,extension:t,HTMLAttributes:c})}]:[]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:o6(e.name,this.schema)};"mark"===e.type&&(null===(t=o4(ox(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name);let r=ox(e,"onBeforeCreate",n),o=ox(e,"onCreate",n),i=ox(e,"onUpdate",n),l=ox(e,"onSelectionUpdate",n),s=ox(e,"onTransaction",n),a=ox(e,"onFocus",n),c=ox(e,"onBlur",n),d=ox(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),i&&this.editor.on("update",i),l&&this.editor.on("selectionUpdate",l),s&&this.editor.on("transaction",s),a&&this.editor.on("focus",a),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}class oI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=o4(ox(this,"addOptions",{name:this.name}))),this.storage=o4(ox(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new oI(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>oA(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new oI({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=o4(ox(t,"addOptions",{name:t.name})),t.storage=o4(ox(t,"addStorage",{name:t.name,options:t.options})),t}}function oH(e,t,n){let{from:r,to:o}=t,{blockSeparator:i="\n\n",textSerializers:l={}}=n||{},s="";return e.nodesBetween(r,o,(e,n,a,c)=>{var d;e.isBlock&&n>r&&(s+=i);let u=null==l?void 0:l[e.type.name];if(u)return a&&(s+=u({node:e,pos:n,parent:a,index:c,range:t})),!1;e.isText&&(s+=null===(d=null==e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(r,n)-n,o-n))}),s}function oz(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}let o9=oI.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new tl({key:new tc("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,l=Math.min(...i.map(e=>e.$from.pos)),s=Math.max(...i.map(e=>e.$to.pos)),a=oz(n);return oH(r,{from:l,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}});function oB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:o5(t[r])?t[r].test(e[r]):t[r]===e[r])}function oV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&oB(e.attrs,n))}function oj(e,t){return!!oV(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function oF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(r.node&&r.node.marks.some(e=>e.type===t)||(r=e.parent.childBefore(e.parentOffset)),!r.node||!r.node.marks.some(e=>e.type===t))return;let o=oV([...r.node.marks],t,n);if(!o)return;let i=r.index,l=e.start()+r.offset,s=i+1,a=l+r.node.nodeSize;for(oV([...r.node.marks],t,n);i>0&&o.isInSet(e.parent.child(i-1).marks);)i-=1,l-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&oj([...e.parent.child(s).marks],t,n);)a+=e.parent.child(s).nodeSize,s+=1;return{from:l,to:a}}function oU(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function oW(e){return e instanceof eG}function oG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function oq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;let n=ej.atStart(e),r=ej.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;let o=n.from,i=r.to;return"all"===t?eG.create(e,oG(0,o,i),oG(e.content.size,o,i)):eG.create(e,oG(t,o,i),oG(t,o,i))}function oK(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let oJ=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&oJ(r)}return e};function oZ(e){let t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return oJ(n)}function oX(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return a.fromArray(e.map(e=>t.nodeFromJSON(e)));let r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(o){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),oX("",t,n)}if("string"==typeof e){if(n.errorOnInvalidContent){let i=!1,l="",s=new G({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(i=!0,l="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?K.fromSchema(s).parseSlice(oZ(e),n.parseOptions):K.fromSchema(s).parse(oZ(e),n.parseOptions),n.errorOnInvalidContent&&i)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${l}`)})}let c=K.fromSchema(t);return n.slice?c.parseSlice(oZ(e),n.parseOptions).content:c.parse(oZ(e),n.parseOptions)}return oX("",t,n)}function oQ(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof ew||o instanceof ek))return;let i=e.mapping.maps[r],l=0;i.forEach((e,t,n,r)=>{0===l&&(l=r)}),e.setSelection(ej.near(e.doc.resolve(l),n))}function oY(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function ie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{from:r,to:o,empty:i}=e.selection,l=t?o1(t,e.schema):null,s=[];e.doc.nodesBetween(r,o,(e,t)=>{if(e.isText)return;let n=Math.min(o,t+e.nodeSize);s.push({node:e,from:Math.max(r,t),to:n})});let a=s.filter(e=>!l||l.name===e.node.type.name).filter(e=>oB(e.node.attrs,n,{strict:!1}));return i?!!a.length:a.reduce((e,t)=>e+t.to-t.from,0)>=o-r}function it(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function ir(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function io(e,t){return oX(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function ii(e,t){let n=oU(t,e.schema),{from:r,to:o,empty:i}=e.selection,l=[];i?(e.storedMarks&&l.push(...e.storedMarks),l.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,e=>{l.push(...e.marks)});let s=l.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function il(e,t){let n=new eB(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}function is(e,t){let n=[];return e.descendants((e,r)=>{t(e)&&n.push({node:e,pos:r})}),n}function ia(e,t,n){let r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r}function ic(e){return t=>(function(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}})(t.$from,e)}function id(e,t){let n=it("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){let n=o1(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,e=>{i.push(e)});let l=i.reverse().find(e=>e.type.name===n.name);return l?{...l.attrs}:{}}(e,t):"mark"===n?ii(e,t):{}}function iu(e){let{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,o)=>{let i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{let{from:l,to:s}=n[o];if(void 0===l||void 0===s)return;i.push({from:l,to:s})}i.forEach(e=>{let{from:n,to:i}=e,l=t.slice(o).map(n,-1),s=t.slice(o).map(i),a=t.invert().map(l,-1),c=t.invert().map(s);r.push({oldRange:{from:a,to:c},newRange:{from:l,to:s}})})}),function e(t){let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter(e=>{let r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(t);return 1===n.length?n:n.filter((e,t)=>{let r=n.filter((e,n)=>n!==t);return!r.some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to)})}(r)}function ih(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let o=oF(n.resolve(e),t.type);o&&r.push({mark:t,...o})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function ip(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[r]=n,o=e.find(e=>e.type===t&&e.name===r);return!!o&&o.attribute.keepOnSplit}))}function im(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{empty:r,ranges:o}=e.selection,i=t?oU(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>oB(e.attrs,n,{strict:!1}));let l=0,s=[];if(o.forEach(t=>{let{$from:n,$to:r}=t,o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);l+=r-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===l)return!1;let a=s.filter(e=>!i||i.name===e.mark.type.name).filter(e=>oB(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=s.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(a>0?a+c:a)>=l}function ig(e,t){let{nodeExtensions:n}=oC(t),r=n.find(t=>t.name===e);if(!r)return!1;let o=o4(ox(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}function i$(e){var t;let{checkChildren:n=!0,ignoreWhitespace:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(t=e.text)&&void 0!==t?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(n){let o=!0;return e.content.forEach(e=>{!1!==o&&(i$(e,{ignoreWhitespace:r,checkChildren:n})||(o=!1))}),o}return!1}function i_(e){return e instanceof eK}function ib(e,t,n){let r=e.state.doc.content.size,o=oG(t,0,r),i=oG(n,0,r),l=e.coordsAtPos(o),s=e.coordsAtPos(i,-1),a=Math.min(l.top,s.top),c=Math.max(l.bottom,s.bottom),d=Math.min(l.left,s.left),u=Math.max(l.right,s.right),h={top:a,bottom:c,left:d,right:u,width:u-d,height:c-a,x:d,y:a};return{...h,toJSON:()=>h}}function iy(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}let iv=(e,t)=>{let n=ic(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!eM(e.doc,n.pos)||(e.join(n.pos),!0)},iw=(e,t)=>{let n=ic(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let o=e.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!eM(e.doc,r)||(e.join(r),!0)};var ik=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null===(e=null==window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e,{selection:o}=n,{ranges:i}=o;return!r||(i.forEach(e=>{let{$from:r,$to:o}=e;t.doc.nodesBetween(r.pos,o.pos,(e,t)=>{if(e.type.isText)return;let{doc:r,mapping:o}=n,i=r.resolve(o.map(t)),l=r.resolve(o.map(t+e.nodeSize)),s=i.blockRange(l);if(!s)return;let a=eS(s);if(e.type.isTextblock){let{defaultType:c}=i.parent.contentMatchAt(i.index());n.setNodeMarkup(s.start,c)}(a||0===a)&&n.lift(s,a)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return oa(t,n)},cut:(e,t)=>n=>{let{editor:r,tr:o}=n,{state:i}=r,l=i.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);let s=o.mapping.map(t);return o.insert(s,l.content),o.setSelection(new eG(o.doc.resolve(s-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,o=r.$anchor.node();if(o.content.size>0)return!1;let i=t.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===o.type){if(n){let s=i.before(l),a=i.after(l);t.delete(s,a).scrollIntoView()}return!0}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:o}=t,i=o1(e,r.schema),l=n.selection.$anchor;for(let s=l.depth;s>0;s-=1)if(l.node(s).type===i){if(o){let a=l.before(s),c=l.after(s);n.delete(a,c).scrollIntoView()}return!0}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t,{from:o,to:i}=e;return r&&n.delete(o,i),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return rq(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return ol(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n,l=oU(e,o.schema),{doc:s,selection:a}=r,{$from:c,from:d,to:u}=a;if(i){let h=oF(c,l,t);if(h&&h.from<=d&&h.to>=u){let p=eG.create(s,h.from,h.to);r.setSelection(p)}}return!0}},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:o,tr:i,dispatch:l}=n;t={scrollIntoView:!0,...t};let s=()=>{oK()&&o.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(o.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())})};if(o.hasFocus()&&null===e||!1===e)return!0;if(l&&null===e&&!oW(r.state.selection))return s(),!0;let a=oq(i.doc,e)||r.state.selection,c=r.state.selection.eq(a);return l&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>n=>{let{tr:r,commands:o}=n;return o.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>r=>{var o;let{tr:i,dispatch:l,editor:s}=r;if(l){let a;n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{a=oX(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!==(o=n.errorOnInvalidContent)&&void 0!==o?o:s.options.enableContentCheck})}catch(c){return s.emit("contentError",{editor:s,error:c,disableCollaboration(){s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:d,to:u}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},h=!0,p=!0;if(("type"in a?[a]:a).forEach(e=>{e.check(),h=!!h&&e.isText&&0===e.marks.length,p=!!p&&e.isBlock}),d===u&&p){let{parent:f}=i.doc.resolve(d);!f.isTextblock||f.type.spec.code||f.childCount||(d-=1,u+=1)}let m;h?(m=Array.isArray(t)?t.map(e=>e.text||"").join(""):"object"==typeof t&&t&&t.text?t.text:t,i.insertText(m,d,u)):(m=a,i.replaceWith(d,u,m)),n.updateSelection&&oQ(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:d,text:m}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:d,text:m})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return rJ(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection;if(r instanceof eK){if(r.node.isTextblock||!eM(e.doc,r.to))return!1;n=r.to}else if(null==(n=e8(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return ot(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let o=e8(t.doc,t.selection.$from.pos,-1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(i){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let o=e8(t.doc,t.selection.$from.pos,1);return null!=o&&(r.join(o,2),n&&n(r),!0)}catch(i){return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let r=rK(e,void 0);if(!r)return!1;let o=rY(r);return!!o&&rZ(e,o,t)})(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let r=oe(e,void 0);if(!r)return!1;let o=or(r);return!!o&&rZ(e,o,t)})(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection,o=r instanceof eK;if(o){if(r.node.isTextblock||!eM(e.doc,r.from))return!1;n=r.from}else if(null==(n=e8(e.doc,r.from,-1)))return!1;if(t){let i=e.tr.join(n);o&&i.setSelection(eK.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0})(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:o,dispatch:i}=t,l=(function(e){let t=e.split(/-(?!$)/),n,r,o,i,l=t[t.length-1];"Space"===l&&(l=" ");for(let s=0;s<t.length-1;s+=1){let a=t[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw Error(`Unrecognized modifier name: ${a}`);oK()||oY()?i=!0:r=!0}}return n&&(l=`Alt-${l}`),r&&(l=`Ctrl-${l}`),i&&(l=`Meta-${l}`),o&&(l=`Shift-${l}`),l})(e).split(/-(?!$)/),s=l.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,a))});return null==c||c.steps.forEach(e=>{let t=e.map(o.mapping);t&&i&&o.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n;return!!ie(r,o1(e,r.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&eS(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)})(r,o)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return oc(t,n)},liftListItem:e=>t=>{var n;let{state:r,dispatch:o}=t;return(n=o1(e,r.schema),function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,e=>e.childCount>0&&e.firstChild.type==n);return!!i&&(!t||(r.node(i.depth-1).type==n?function(e,t,n,r){let o=e.tr,i=r.end,l=r.$to.end(r.depth);i<l&&(o.step(new ek(i-1,l,i,l,new f(a.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new C(o.doc.resolve(r.$from.pos),o.doc.resolve(l),r.depth));let s=eS(r);if(null==s)return!1;o.lift(r,s);let c=o.mapping.map(i,-1)-1;return eM(o.doc,c)&&o.join(c),t(o.scrollIntoView()),!0}(e,t,n,i):function(e,t,n){let r=e.tr,o=n.parent;for(let i=n.end,l=n.endIndex-1,s=n.startIndex;l>s;l--)i-=o.child(l).nodeSize,r.delete(i-1,i+1);let c=r.doc.resolve(n.start),d=c.nodeAfter;if(r.mapping.map(n.end)!=n.start+c.nodeAfter.nodeSize)return!1;let u=0==n.startIndex,h=n.endIndex==o.childCount,p=c.node(-1),m=c.index(-1);if(!p.canReplace(m+(u?0:1),m+1,d.content.append(h?a.empty:a.from(o))))return!1;let g=c.pos,$=g+d.nodeSize;return r.step(new ek(g-(u?1:0),$+(h?1:0),g+1,$-1,new f((u?a.empty:a.from(o.copy(a.empty))).append(h?a.empty:a.from(o.copy(a.empty))),u?0:1,h?0:1),u?0:1)),t(r.scrollIntoView()),!0}(e,t,i)))})(r,o)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return oo(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:o,dispatch:i}=n,l=null,s=null,a=it("string"==typeof e?e:e.name,o.schema);return!!a&&("node"===a&&(l=o1(e,o.schema)),"mark"===a&&(s=oU(e,o.schema)),i&&r.selection.ranges.forEach(e=>{o.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{l&&l===e.type&&r.setNodeMarkup(n,void 0,ir(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(o=>{s===o.type&&r.addMark(n,n+e.nodeSize,s.create(ir(o.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,commands:n}=e;return n.setTextSelection({from:0,to:t.doc.content.size})},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return rQ(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return on(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,{$from:r,to:o}=e.selection,i=r.sharedDepth(o);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(eK.create(e.doc,n))),!0)})(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return of(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return op(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o=>{var i,l;let{editor:s,tr:a,dispatch:c,commands:d}=o,{doc:u}=a;if("full"!==n.preserveWhitespace){let h=io(e,s.schema,n,{errorOnInvalidContent:null!==(i=r.errorOnInvalidContent)&&void 0!==i?i:s.options.enableContentCheck});return c&&a.replaceWith(0,u.content.size,h).setMeta("preventUpdate",!t),!0}return c&&a.setMeta("preventUpdate",!t),d.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(l=r.errorOnInvalidContent)&&void 0!==l?l:s.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n,{selection:l}=r,{empty:s,ranges:a}=l,c=oU(e,o.schema);if(i){if(s){let d=ii(o,c);r.addStoredMark(c.create({...d,...t}))}else a.forEach(e=>{let n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(e,o)=>{let l=Math.max(o,n),s=Math.min(o+e.nodeSize,i);e.marks.find(e=>e.type===c)?e.marks.forEach(e=>{c===e.type&&r.addMark(l,s,c.create({...e.attrs,...t}))}):r.addMark(l,s,c.create(t))})})}return function(e,t,n){var r;let{selection:o}=t,i=null;if(oW(o)&&(i=o.$cursor),i){let l=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(l)||!l.some(e=>e.type.excludes(n))}let{ranges:s}=o;return s.some(t=>{let{$from:r,$to:o}=t,i=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,o.pos,(e,t,r)=>{if(i)return!1;if(e.isInline){let o=!r||r.type.allowsMarkType(n),l=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));i=o&&l}return!i}),i})}(o,r,c)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o,chain:i}=n,l=o1(e,r.schema);return l.isTextblock?i().command(e=>{let{commands:n}=e;return!!om(l,t)(r)||n.clearNodes()}).command(e=>{let{state:n}=e;return om(l,t)(n,o)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){let{doc:o}=n,i=oG(e,0,o.content.size),l=eK.create(o,i);n.setSelection(l)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){let{doc:o}=n,{from:i,to:l}="number"==typeof e?{from:e,to:e}:e,s=eG.atStart(o).from,a=eG.atEnd(o).to,c=oG(i,s,a),d=oG(l,s,a),u=eG.create(o,c,d);n.setSelection(u)}return!0},sinkListItem:e=>t=>{var n;let{state:r,dispatch:o}=t,i=o1(e,r.schema);return(n=i,function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,e=>e.childCount>0&&e.firstChild.type==n);if(!i)return!1;let l=i.startIndex;if(0==l)return!1;let s=i.parent,c=s.child(l-1);if(c.type!=n)return!1;if(t){let d=c.lastChild&&c.lastChild.type==s.type,u=a.from(d?n.create():null),h=new f(a.from(n.create(null,a.from(s.type.create(null,u)))),d?3:1,0),p=i.start,m=i.end;t(e.tr.step(new ek(p-(d?3:1),m,p,m,h,1,!0)).scrollIntoView())}return!0})(r,o)},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:r,dispatch:o,editor:i}=t,{selection:l,doc:s}=n,{$from:a,$to:c}=l,d=ip(i.extensionManager.attributes,a.node().type.name,a.node().attrs);if(l instanceof eK&&l.node.isBlock)return!(!a.parentOffset||!e4(s,a.pos))&&(o&&(e&&iy(r,i.extensionManager.splittableMarks),n.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;let u=c.parentOffset===c.parent.content.size,h=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1))),p=u&&h?[{type:h,attrs:d}]:void 0,f=e4(n.doc,n.mapping.map(a.pos),1,p);if(p||f||!e4(n.doc,n.mapping.map(a.pos),1,h?[{type:h}]:void 0)||(f=!0,p=h?[{type:h,attrs:d}]:void 0),o){if(f&&(l instanceof eG&&n.deleteSelection(),n.split(n.mapping.map(a.pos),1,p),h&&!u&&!a.parentOffset&&a.parent.type!==h)){let m=n.mapping.map(a.before()),g=n.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,h)&&n.setNodeMarkup(n.mapping.map(a.before()),h)}e&&iy(r,i.extensionManager.splittableMarks),n.scrollIntoView()}return f}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:o,state:i,dispatch:l,editor:s}=n,c=o1(e,i.schema),{$from:d,$to:u}=i.selection,h=i.selection.node;if(h&&h.isBlock||d.depth<2||!d.sameParent(u))return!1;let p=d.node(-1);if(p.type!==c)return!1;let m=s.extensionManager.attributes;if(0===d.parent.content.size&&d.node(-1).childCount===d.indexAfter(-1)){if(2===d.depth||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let g=a.empty,$=d.index(-1)?1:d.index(-2)?2:3;for(let _=d.depth-$;_>=d.depth-3;_-=1)g=a.from(d.node(_).copy(g));let b=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,y={...ip(m,d.node().type.name,d.node().attrs),...t},v=(null===(r=c.contentMatch.defaultType)||void 0===r?void 0:r.createAndFill(y))||void 0;g=g.append(a.from(c.createAndFill(null,v)||void 0));let w=d.before(d.depth-($-1));o.replace(w,d.after(-b),new f(g,4-$,0));let k=-1;o.doc.nodesBetween(w,o.doc.content.size,(e,t)=>{if(k>-1)return!1;e.isTextblock&&0===e.content.size&&(k=t+1)}),k>-1&&o.setSelection(eG.near(o.doc.resolve(k))),o.scrollIntoView()}return!0}let x=u.pos===d.end()?p.contentMatchAt(0).defaultType:null,C={...ip(m,p.type.name,p.attrs),...t},S={...ip(m,d.node().type.name,d.node().attrs),...t};if(o.delete(d.pos,u.pos),!e4(o.doc,d.pos,2))return!1;if(l){let{selection:E,storedMarks:M}=i,{splittableMarks:T}=s.extensionManager,N=M||E.$to.parentOffset&&E.$from.marks();if(o.split(d.pos,2,x?[{type:c,attrs:C},{type:x,attrs:S}]:[{type:c,attrs:C}]).scrollIntoView(),!N||!l)return!0;let L=N.filter(e=>T.includes(e.type.name));o.ensureMarks(L)}return!0}},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o=>{let{editor:i,tr:l,state:s,dispatch:a,chain:c,commands:d,can:u}=o,{extensions:h,splittableMarks:p}=i.extensionManager,f=o1(e,s.schema),m=o1(t,s.schema),{selection:g,storedMarks:$}=s,{$from:_,$to:b}=g,y=_.blockRange(b),v=$||g.$to.parentOffset&&g.$from.marks();if(!y)return!1;let w=ic(e=>ig(e.type.name,h))(g);if(y.depth>=1&&w&&y.depth-w.depth<=1){if(w.node.type===f)return d.liftListItem(m);if(ig(w.node.type.name,h)&&f.validContent(w.node.content)&&a)return c().command(()=>(l.setNodeMarkup(w.pos,f),!0)).command(()=>iv(l,f)).command(()=>iw(l,f)).run()}return n&&v&&a?c().command(()=>{let e=u().wrapInList(f,r),t=v.filter(e=>p.includes(e.type.name));return l.ensureMarks(t),!!e||d.clearNodes()}).wrapInList(f,r).command(()=>iv(l,f)).command(()=>iw(l,f)).run():c().command(()=>!!u().wrapInList(f,r)||d.clearNodes()).wrapInList(f,r).command(()=>iv(l,f)).command(()=>iw(l,f)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:o,commands:i}=r,{extendEmptyMarkRange:l=!1}=n,s=oU(e,o.schema);return im(o,s,t)?i.unsetMark(s,{extendEmptyMarkRange:l}):i.setMark(s,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:o,commands:i}=r,l=o1(e,o.schema),s=o1(t,o.schema),a=ie(o,l,n),c;return o.selection.$anchor.sameParent(o.selection.$head)&&(c=o.selection.$anchor.parent.attrs),a?i.setNode(s,c):i.setNode(l,{...c,...n})}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:o}=n,i=o1(e,r.schema);return ie(r,i,t)?o.lift(i):o.wrapIn(i,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e,r=t.plugins;for(let o=0;o<r.length;o+=1){let i=r[o],l;if(i.spec.isInputRules&&(l=i.getState(t))){if(n){let s=t.tr,a=l.transform;for(let c=a.steps.length-1;c>=0;c-=1)s.step(a.steps[c].invert(a.docs[c]));if(l.text){let d=s.doc.resolve(l.from).marks();s.replaceWith(l.from,l.to,t.schema.text(l.text,d))}else s.delete(l.from,l.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:o,ranges:i}=r;return o||n&&i.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:o,state:i,dispatch:l}=n,{extendEmptyMarkRange:s=!1}=t,{selection:a}=o,c=oU(e,i.schema),{$from:d,empty:u,ranges:h}=a;if(!l)return!0;if(u&&s){let{from:p,to:f}=a,m=null===(r=d.marks().find(e=>e.type===c))||void 0===r?void 0:r.attrs,g=oF(d,c,m);g&&(p=g.from,f=g.to),o.removeMark(p,f,c)}else h.forEach(e=>{o.removeMark(e.$from.pos,e.$to.pos,c)});return o.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n,l=null,s=null,a=it("string"==typeof e?e:e.name,o.schema);return!!a&&("node"===a&&(l=o1(e,o.schema)),"mark"===a&&(s=oU(e,o.schema)),i&&r.selection.ranges.forEach(e=>{let n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(e,o)=>{l&&l===e.type&&r.setNodeMarkup(o,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(l=>{if(s===l.type){let a=Math.min(o+e.nodeSize,i);r.addMark(Math.max(o,n),a,s.create({...l.attrs,...t}))}})})}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n;return(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:o,$to:i}=n.selection,l=o.blockRange(i),s=l&&e1(l,e,t);return!!s&&(r&&r(n.tr.wrap(l,s).scrollIntoView()),!0)}})(o1(e,r.schema),t)(r,o)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n;return(function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,r){let{$from:o,$to:i}=e.selection,l=o.blockRange(i),s=!1,c=l;if(!l)return!1;if(l.depth>=2&&o.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==o.index(l.depth-1))return!1;let d=e.doc.resolve(l.start-2);c=new C(d,d,l.depth),l.endIndex<l.parent.childCount&&(l=new C(o,e.doc.resolve(i.end(l.depth)),l.depth)),s=!0}let u=e1(c,t,n,l);return!!u&&(r&&r((function(e,t,n,r,o){let i=a.empty;for(let l=n.length-1;l>=0;l--)i=a.from(n[l].type.create(n[l].attrs,i));e.step(new ek(t.start-(r?2:0),t.end,t.start,t.end,new f(i,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==o&&(s=c+1);let d=n.length-s,u=t.start+n.length-(r?2:0),h=t.parent;for(let p=t.startIndex,m=t.endIndex,g=!0;p<m;p++,g=!1)!g&&e4(e.doc,u,d)&&(e.split(u,d),u+=2*d),u+=h.child(p).nodeSize;return e})(e.tr,l,u,s,t).scrollIntoView()),!0)}})(o1(e,r.schema),t)(r,o)}}});let i0=oI.create({name:"commands",addCommands:()=>({...ik})}),ix=oI.create({name:"drop",addProseMirrorPlugins(){return[new tl({key:new tc("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),iC=oI.create({name:"editable",addProseMirrorPlugins(){return[new tl({key:new tc("editable"),props:{editable:()=>this.editor.options.editable}})]}}),iS=oI.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new tl({key:new tc("focusEvents"),props:{handleDOMEvents:{focus(t,n){e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur(t,n){e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),i1=oI.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e,{selection:r,doc:o}=n,{empty:i,$anchor:l}=r,{pos:s,parent:a}=l,c=l.parent.isTextblock&&s>0?n.doc.resolve(s-1):l,d=c.parent.type.spec.isolating,u=l.pos-l.parentOffset,h=d&&1===c.parent.childCount?u===l.pos:ej.atStart(o).from===s;return!(!i||!a.type.isTextblock||a.textContent.length||!h||h&&"paragraph"===l.parent.type.name)&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return oK()||oY()?o:r},addProseMirrorPlugins(){return[new tl({key:new tc("clearDocument"),appendTransaction:(e,t,n)=>{let r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),o=e.some(e=>e.getMeta("preventClearDocument"));if(!r||o)return;let{empty:i,from:l,to:s}=t.selection,a=ej.atStart(t.doc).from,c=ej.atEnd(t.doc).to;if(i||!(l===a&&s===c)||!i$(n.doc))return;let d=n.tr,u=ow({state:n,transaction:d}),{commands:h}=new ok({editor:this.editor,state:u});return h.clearNodes(),d.steps.length?d:void 0}})]}}),i2=oI.create({name:"paste",addProseMirrorPlugins(){return[new tl({key:new tc("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),i3=oI.create({name:"tabindex",addProseMirrorPlugins(){return[new tl({key:new tc("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var iE=Object.freeze({__proto__:null,ClipboardTextSerializer:o9,Commands:i0,Drop:ix,Editable:iC,FocusEvents:iS,Keymap:i1,Paste:i2,Tabindex:i3});class i4{get name(){return this.node.type.name}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new i4(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new i4(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new i4(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,n)=>{let r=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,i=this.pos+n+(o?0:1),l=this.resolvedPos.doc.resolve(i);if(!r&&l.depth<=this.depth)return;let s=new i4(l,this.editor,r,r?t:null);r&&(s.actualDepth=this.depth+1),e.push(new i4(l,this.editor,r,r?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e){if(Object.keys(t).length>0){let o=r.node.attrs,i=Object.keys(t);for(let l=0;l<i.length;l+=1){let s=i[l];if(o[s]!==t[s])break}}else n=r}r=r.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;let o=Object.keys(t);return this.children.forEach(i=>{!(n&&r.length>0)&&(i.node.type.name===e&&o.every(e=>t[e]===i.node.attrs[e])&&r.push(i),n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n))))}),r}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}class iM extends o0{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError(e){let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",e=>{let{event:t,slice:n,moved:r}=e;return this.options.onDrop(t,n,r)}),this.on("paste",e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){let r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==r)return r;let o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=oE(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,n=t;if([].concat(e).forEach(e=>{let r="string"==typeof e?`${e}$`:e.key;n=t.filter(e=>!e.key.startsWith(r))}),t.length===n.length)return;let r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;let n=[...this.options.enableCoreExtensions?[iC,o9.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),i0,iS,i1,i3,ix,i2].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new oD(n,this)}createCommandManager(){this.commandManager=new ok({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=io(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=io(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let n=oq(e,this.options.autofocus);this.view=new rP(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:ti.create({doc:e,selection:n||void 0})}),this.view.dom.setAttribute("role","textbox"),this.view.dom.getAttribute("aria-label")||this.view.dom.setAttribute("aria-label","Rich-Text Editor");let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)}):void(this.capturedTransaction=e);let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return id(this.state,e)}isActive(e,t){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return ie(e,null,n)||im(e,null,n);let r=it(t,e.schema);return"node"===r?ie(e,t,n):"mark"===r&&im(e,t,n)}(this.state,"string"==typeof e?e:null,"string"==typeof e?t:e)}getJSON(){return this.state.doc.toJSON()}getHTML(){return function e(t,n){let r=eo.fromSchema(n).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(r),o.innerHTML}(this.state.doc.content,this.schema)}getText(e){var t,n;let{blockSeparator:r="\n\n",textSerializers:o={}}=e||{};return t=this.state.doc,n={blockSeparator:r,textSerializers:{...oz(this.schema),...o}},oH(t,{from:0,to:t.content.size},n)}get isEmpty(){return i$(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){let t=this.state.doc.resolve(e);return new i4(t,this)}get $doc(){return this.$pos(0)}}function iT(e){return new o7({find:e.find,handler(t){let{state:n,range:r,match:o}=t,i=o4(e.getAttributes,void 0,o);if(!1===i||null===i)return null;let{tr:l}=n,s=o[o.length-1],a=o[0];if(s){let c=a.search(/\S/),d=r.from+a.indexOf(s),u=d+s.length;if(ih(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>d).length)return null;u<r.to&&l.delete(u,r.to),d>r.from&&l.delete(r.from+c,d);let h=r.from+c+s.length;l.addMark(r.from+c,h,e.type.create(i||{})),l.removeStoredMark(e.type)}}})}class i8{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=o4(ox(this,"addOptions",{name:this.name}))),this.storage=o4(ox(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new i8(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>oA(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new i8(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=o4(ox(t,"addOptions",{name:t.name})),t.storage=o4(ox(t,"addStorage",{name:t.name,options:t.options})),t}}class i6{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,o,i,l,s;let{view:a}=this.editor,c=e.target,d=3===c.nodeType?null===(t=c.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(c))||!d)return;let u=0,h=0;if(this.dom!==d){let p=this.dom.getBoundingClientRect(),f=d.getBoundingClientRect(),m=null!==(r=e.offsetX)&&void 0!==r?r:null===(o=e.nativeEvent)||void 0===o?void 0:o.offsetX,g=null!==(i=e.offsetY)&&void 0!==i?i:null===(l=e.nativeEvent)||void 0===l?void 0:l.offsetY;u=f.x-p.x+m,h=f.y-p.y+g}null===(s=e.dataTransfer)||void 0===s||s.setDragImage(this.dom,u,h);let $=this.getPos();if("number"!=typeof $)return;let _=eK.create(a.state.doc,$),b=a.state.tr.setSelection(_);a.dispatch(b)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});let n=e.target;if(!(this.dom.contains(n)&&!(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(n))))return!1;let r=e.type.startsWith("drag"),o="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!r)return!0;let{isEditable:i}=this.editor,{isDragging:l}=this,s=!!this.node.type.spec.draggable,a=eK.isSelectable(this.node),c="copy"===e.type,d="paste"===e.type,u="cut"===e.type,h="mousedown"===e.type;if(!s&&a&&r&&e.preventDefault(),s&&r&&!l)return e.preventDefault(),!1;if(s&&i&&!l&&h){let p=n.closest("[data-drag-handle]");p&&(this.dom===p||this.dom.contains(p))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||o||c||d||u||h&&a)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(oK()||"Android"===navigator.platform||/android/i.test(navigator.userAgent))&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t,r=this.getPos();return"number"==typeof r&&(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){let e=this.getPos();if("number"!=typeof e)return;let t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function iN(e){return new oO({find:e.find,handler(t){let{state:n,range:r,match:o,pasteEvent:i}=t,l=o4(e.getAttributes,void 0,o,i);if(!1===l||null===l)return null;let{tr:s}=n,a=o[o.length-1],c=o[0],d=r.to;if(a){let u=c.search(/\S/),h=r.from+c.indexOf(a),p=h+a.length;if(ih(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>h).length)return null;p<r.to&&s.delete(p,r.to),h>r.from&&s.delete(r.from+u,h),d=r.from+u+a.length,s.addMark(r.from+u,d,e.type.create(l||{})),s.removeStoredMark(e.type)}}})}var i5,i7,iL,iP,iA,iR,iO,iD,iI,iH=new Uint8Array(16);function iz(){if(!iI&&!(iI="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iI(iH)}let i9=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var iB=[],iV=0;iV<256;++iV)iB.push((iV+256).toString(16).substr(1));let ij=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(iB[e[n+0]]+iB[e[n+1]]+iB[e[n+2]]+iB[e[n+3]]+"-"+iB[e[n+4]]+iB[e[n+5]]+"-"+iB[e[n+6]]+iB[e[n+7]]+"-"+iB[e[n+8]]+iB[e[n+9]]+"-"+iB[e[n+10]]+iB[e[n+11]]+iB[e[n+12]]+iB[e[n+13]]+iB[e[n+14]]+iB[e[n+15]]).toLowerCase();if(!("string"==typeof(t=r)&&i9.test(t)))throw TypeError("Stringified UUID is invalid");return r},iF=function(e,t,n){var r=(e=e||{}).random||(e.rng||iz)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return ij(r)};var iU=class e{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,t,n){e<0||this.cache.set(e,[t,n])}replace(e,t,n,r){this.remove(e),this.set(t,n,r)}remove(e){this.cache.delete(e)}invalidate(t){let n=new e(this.cache),r=t.mapping;return this.cache.forEach((e,o)=>{let[i,l]=e;if(o<0)return;let s=r.mapResult(o),a=t.doc.nodeAt(s.pos);if(!s.deleted&&(null==a?void 0:a.eq(i))){if(o!==s.pos){let c=l.map(e=>e.map(r,0,0)).filter(e=>null!=e);n.replace(o,s.pos,a,c)}}else n.remove(o)}),n}};function iW(e,t,n,r,o){let i=[],l=[];return e.descendants((e,s)=>{if(!e.type.isTextblock)return!0;if(n.includes(e.type.name)){let a=r(e),c=o.get(s);if(c){let[d,u]=c;i.push(...u)}else{let h=t({content:e.textContent,language:a||void 0,pos:s});h&&Array.isArray(h)?(o.set(s,e,h),i.push(...h)):h instanceof Promise&&(o.remove(s),l.push(h))}}return!1}),[rb.create(e,i),l]}let iG=[{id:"abap",name:"ABAP",import:()=>n.e(8855).then(n.bind(n,8855))},{id:"actionscript-3",name:"ActionScript",import:()=>n.e(9386).then(n.bind(n,9386))},{id:"ada",name:"Ada",import:()=>n.e(9199).then(n.bind(n,9199))},{id:"angular-html",name:"Angular HTML",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(829)]).then(n.bind(n,829))},{id:"angular-ts",name:"Angular TypeScript",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(5053),n.e(6400)]).then(n.bind(n,6400))},{id:"apache",name:"Apache Conf",import:()=>n.e(3943).then(n.bind(n,3943))},{id:"apex",name:"Apex",import:()=>n.e(7973).then(n.bind(n,7973))},{id:"apl",name:"APL",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(3798)]).then(n.bind(n,3798))},{id:"applescript",name:"AppleScript",import:()=>n.e(1814).then(n.bind(n,1814))},{id:"ara",name:"Ara",import:()=>n.e(7413).then(n.bind(n,7413))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>n.e(3284).then(n.bind(n,3284))},{id:"asm",name:"Assembly",import:()=>n.e(9662).then(n.bind(n,9662))},{id:"astro",name:"Astro",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(5088),n.e(3378)]).then(n.bind(n,3378))},{id:"awk",name:"AWK",import:()=>n.e(5588).then(n.bind(n,5588))},{id:"ballerina",name:"Ballerina",import:()=>n.e(4951).then(n.bind(n,4951))},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>n.e(2406).then(n.bind(n,2406))},{id:"beancount",name:"Beancount",import:()=>n.e(1668).then(n.bind(n,1668))},{id:"berry",name:"Berry",aliases:["be"],import:()=>n.e(2187).then(n.bind(n,2187))},{id:"bibtex",name:"BibTeX",import:()=>n.e(8931).then(n.bind(n,8931))},{id:"bicep",name:"Bicep",import:()=>n.e(3998).then(n.bind(n,3998))},{id:"blade",name:"Blade",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(4949)]).then(n.bind(n,4949))},{id:"c",name:"C",import:()=>n.e(6e3).then(n.bind(n,6e3))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>n.e(6322).then(n.bind(n,6322))},{id:"clarity",name:"Clarity",import:()=>n.e(363).then(n.bind(n,363))},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>n.e(1639).then(n.bind(n,1639))},{id:"cmake",name:"CMake",import:()=>n.e(9878).then(n.bind(n,9878))},{id:"cobol",name:"COBOL",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(3930)]).then(n.bind(n,3930))},{id:"codeowners",name:"CODEOWNERS",import:()=>n.e(942).then(n.bind(n,942))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>n.e(9293).then(n.bind(n,9293))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>Promise.all([n.e(3816),n.e(4213)]).then(n.bind(n,4213))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>n.e(3451).then(n.bind(n,3451))},{id:"coq",name:"Coq",import:()=>n.e(3232).then(n.bind(n,3232))},{id:"cpp",name:"C++",aliases:["c++"],import:()=>Promise.all([n.e(2779),n.e(6e3),n.e(3218)]).then(n.bind(n,3218))},{id:"crystal",name:"Crystal",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(2779),n.e(6e3),n.e(5972),n.e(253)]).then(n.bind(n,253))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>n.e(4304).then(n.bind(n,4304))},{id:"css",name:"CSS",import:()=>n.e(2478).then(n.bind(n,2478))},{id:"csv",name:"CSV",import:()=>n.e(5995).then(n.bind(n,5995))},{id:"cue",name:"CUE",import:()=>n.e(2078).then(n.bind(n,2078))},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>n.e(1304).then(n.bind(n,1304))},{id:"d",name:"D",import:()=>n.e(7031).then(n.bind(n,7031))},{id:"dart",name:"Dart",import:()=>n.e(4774).then(n.bind(n,4774))},{id:"dax",name:"DAX",import:()=>n.e(1752).then(n.bind(n,1752))},{id:"desktop",name:"Desktop",import:()=>n.e(6743).then(n.bind(n,6743))},{id:"diff",name:"Diff",import:()=>n.e(456).then(n.bind(n,456))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>n.e(7945).then(n.bind(n,7945))},{id:"dotenv",name:"dotEnv",import:()=>n.e(795).then(n.bind(n,795))},{id:"dream-maker",name:"Dream Maker",import:()=>n.e(2573).then(n.bind(n,2573))},{id:"edge",name:"Edge",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(5088),n.e(1330)]).then(n.bind(n,1330))},{id:"elixir",name:"Elixir",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(232)]).then(n.bind(n,232))},{id:"elm",name:"Elm",import:()=>Promise.all([n.e(6e3),n.e(6303)]).then(n.bind(n,6303))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>n.e(215).then(n.bind(n,215))},{id:"erb",name:"ERB",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(6e3),n.e(5972),n.e(6345),n.e(1394)]).then(n.bind(n,1394))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>n.e(6200).then(n.bind(n,6200))},{id:"fennel",name:"Fennel",import:()=>n.e(269).then(n.bind(n,269))},{id:"fish",name:"Fish",import:()=>n.e(7591).then(n.bind(n,7591))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>n.e(271).then(n.bind(n,271))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>Promise.all([n.e(2327),n.e(6339)]).then(n.bind(n,6339))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>n.e(2327).then(n.bind(n,2327))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>Promise.all([n.e(4645),n.e(9399)]).then(n.bind(n,9399))},{id:"gdresource",name:"GDResource",import:()=>n.e(9476).then(n.bind(n,9476))},{id:"gdscript",name:"GDScript",import:()=>n.e(2609).then(n.bind(n,2609))},{id:"gdshader",name:"GDShader",import:()=>n.e(5755).then(n.bind(n,5755))},{id:"genie",name:"Genie",import:()=>n.e(119).then(n.bind(n,119))},{id:"gherkin",name:"Gherkin",import:()=>n.e(6889).then(n.bind(n,6889))},{id:"git-commit",name:"Git Commit Message",import:()=>n.e(5131).then(n.bind(n,5131))},{id:"git-rebase",name:"Git Rebase Message",import:()=>Promise.all([n.e(5972),n.e(7152)]).then(n.bind(n,7152))},{id:"gleam",name:"Gleam",import:()=>n.e(1667).then(n.bind(n,1667))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(5088),n.e(590)]).then(n.bind(n,590))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(5088),n.e(280)]).then(n.bind(n,280))},{id:"glsl",name:"GLSL",import:()=>Promise.all([n.e(6e3),n.e(6117)]).then(n.bind(n,6117))},{id:"gnuplot",name:"Gnuplot",import:()=>n.e(5318).then(n.bind(n,5318))},{id:"go",name:"Go",import:()=>n.e(431).then(n.bind(n,431))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>Promise.all([n.e(3816),n.e(5088),n.e(8860),n.e(9654),n.e(7016)]).then(n.bind(n,7016))},{id:"groovy",name:"Groovy",import:()=>n.e(2667).then(n.bind(n,2667))},{id:"hack",name:"Hack",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(2779),n.e(6550)]).then(n.bind(n,6550))},{id:"haml",name:"Ruby Haml",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(4247)]).then(n.bind(n,4247))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(3353)]).then(n.bind(n,3353))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>n.e(483).then(n.bind(n,483))},{id:"haxe",name:"Haxe",import:()=>n.e(2101).then(n.bind(n,2101))},{id:"hcl",name:"HashiCorp HCL",import:()=>n.e(8014).then(n.bind(n,8014))},{id:"hjson",name:"Hjson",import:()=>n.e(8513).then(n.bind(n,8513))},{id:"hlsl",name:"HLSL",import:()=>n.e(6996).then(n.bind(n,6996))},{id:"html",name:"HTML",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726)]).then(n.bind(n,3726))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(6404)]).then(n.bind(n,6404))},{id:"http",name:"HTTP",import:()=>Promise.all([n.e(3816),n.e(1057),n.e(5088),n.e(5972),n.e(8860),n.e(9654),n.e(3569)]).then(n.bind(n,3569))},{id:"hxml",name:"HXML",import:()=>n.e(762).then(n.bind(n,762))},{id:"hy",name:"Hy",import:()=>n.e(5992).then(n.bind(n,5992))},{id:"imba",name:"Imba",import:()=>Promise.all([n.e(5088),n.e(5796)]).then(n.bind(n,5796))},{id:"ini",name:"INI",aliases:["properties"],import:()=>n.e(7329).then(n.bind(n,7329))},{id:"java",name:"Java",import:()=>n.e(1057).then(n.bind(n,1057))},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>n.e(3816).then(n.bind(n,3816))},{id:"jinja",name:"Jinja",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(383)]).then(n.bind(n,383))},{id:"jison",name:"Jison",import:()=>Promise.all([n.e(3816),n.e(3254)]).then(n.bind(n,3254))},{id:"json",name:"JSON",import:()=>n.e(8055).then(n.bind(n,8055))},{id:"json5",name:"JSON5",import:()=>n.e(8512).then(n.bind(n,8512))},{id:"jsonc",name:"JSON with Comments",import:()=>n.e(894).then(n.bind(n,894))},{id:"jsonl",name:"JSON Lines",import:()=>n.e(5769).then(n.bind(n,5769))},{id:"jsonnet",name:"Jsonnet",import:()=>n.e(332).then(n.bind(n,332))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>n.e(9184).then(n.bind(n,9184))},{id:"jsx",name:"JSX",import:()=>n.e(8860).then(n.bind(n,8860))},{id:"julia",name:"Julia",aliases:["jl"],import:()=>Promise.all([n.e(3816),n.e(2779),n.e(6e3),n.e(5747),n.e(289),n.e(3218),n.e(9480)]).then(n.bind(n,9480))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>n.e(1922).then(n.bind(n,1922))},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>n.e(4859).then(n.bind(n,4859))},{id:"latex",name:"LaTeX",import:()=>Promise.all([n.e(289),n.e(2879)]).then(n.bind(n,2879))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>n.e(7065).then(n.bind(n,7065))},{id:"less",name:"Less",import:()=>n.e(8806).then(n.bind(n,8806))},{id:"liquid",name:"Liquid",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(2393)]).then(n.bind(n,2393))},{id:"log",name:"Log file",import:()=>n.e(4853).then(n.bind(n,4853))},{id:"logo",name:"Logo",import:()=>n.e(7499).then(n.bind(n,9880))},{id:"lua",name:"Lua",import:()=>Promise.all([n.e(6e3),n.e(2069)]).then(n.bind(n,2069))},{id:"luau",name:"Luau",import:()=>n.e(1474).then(n.bind(n,1474))},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>n.e(9483).then(n.bind(n,9483))},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>n.e(4645).then(n.bind(n,7026))},{id:"marko",name:"Marko",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(5053),n.e(8806),n.e(2969)]).then(n.bind(n,2969))},{id:"matlab",name:"MATLAB",import:()=>n.e(2482).then(n.bind(n,2482))},{id:"mdc",name:"MDC",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(4645),n.e(4433)]).then(n.bind(n,4433))},{id:"mdx",name:"MDX",import:()=>n.e(6893).then(n.bind(n,9274))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>n.e(9134).then(n.bind(n,9134))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>n.e(8897).then(n.bind(n,8897))},{id:"mojo",name:"Mojo",import:()=>n.e(9724).then(n.bind(n,9724))},{id:"move",name:"Move",import:()=>n.e(522).then(n.bind(n,522))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>n.e(874).then(n.bind(n,8493))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>n.e(7902).then(n.bind(n,7902))},{id:"nginx",name:"Nginx",import:()=>Promise.all([n.e(6e3),n.e(6491)]).then(n.bind(n,6491))},{id:"nim",name:"Nim",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(6e3),n.e(4645),n.e(3355)]).then(n.bind(n,3355))},{id:"nix",name:"Nix",import:()=>n.e(2062).then(n.bind(n,2062))},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>n.e(9828).then(n.bind(n,9828))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>n.e(1082).then(n.bind(n,1082))},{id:"objective-cpp",name:"Objective-C++",import:()=>n.e(9130).then(n.bind(n,9130))},{id:"ocaml",name:"OCaml",import:()=>n.e(711).then(n.bind(n,711))},{id:"pascal",name:"Pascal",import:()=>n.e(2673).then(n.bind(n,2673))},{id:"perl",name:"Perl",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(7670)]).then(n.bind(n,7670))},{id:"php",name:"PHP",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(187),n.e(9068)]).then(n.bind(n,187))},{id:"plsql",name:"PL/SQL",import:()=>n.e(8775).then(n.bind(n,8775))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>n.e(1918).then(n.bind(n,1918))},{id:"postcss",name:"PostCSS",import:()=>n.e(3848).then(n.bind(n,3848))},{id:"powerquery",name:"PowerQuery",import:()=>n.e(5768).then(n.bind(n,3387))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>n.e(6262).then(n.bind(n,6262))},{id:"prisma",name:"Prisma",import:()=>n.e(8493).then(n.bind(n,874))},{id:"prolog",name:"Prolog",import:()=>n.e(1064).then(n.bind(n,1064))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>n.e(9125).then(n.bind(n,9125))},{id:"pug",name:"Pug",aliases:["jade"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(6959)]).then(n.bind(n,6959))},{id:"puppet",name:"Puppet",import:()=>n.e(7051).then(n.bind(n,7051))},{id:"purescript",name:"PureScript",import:()=>n.e(3082).then(n.bind(n,3082))},{id:"python",name:"Python",aliases:["py"],import:()=>n.e(5747).then(n.bind(n,5747))},{id:"qml",name:"QML",import:()=>Promise.all([n.e(3816),n.e(7673)]).then(n.bind(n,7673))},{id:"qmldir",name:"QML Directory",import:()=>n.e(1650).then(n.bind(n,1650))},{id:"qss",name:"Qt Style Sheets",import:()=>n.e(120).then(n.bind(n,120))},{id:"r",name:"R",import:()=>n.e(289).then(n.bind(n,289))},{id:"racket",name:"Racket",import:()=>n.e(3607).then(n.bind(n,3607))},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>n.e(6782).then(n.bind(n,6782))},{id:"razor",name:"ASP.NET Razor",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(4304),n.e(251)]).then(n.bind(n,251))},{id:"reg",name:"Windows Registry Script",import:()=>n.e(9233).then(n.bind(n,9233))},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>n.e(1926).then(n.bind(n,1926))},{id:"rel",name:"Rel",import:()=>n.e(154).then(n.bind(n,154))},{id:"riscv",name:"RISC-V",import:()=>n.e(3234).then(n.bind(n,3234))},{id:"rst",name:"reStructuredText",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(6e3),n.e(5972),n.e(5747),n.e(6345),n.e(3218),n.e(2080)]).then(n.bind(n,2080))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(6e3),n.e(5972),n.e(6345)]).then(n.bind(n,6345))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>n.e(4243).then(n.bind(n,4243))},{id:"sas",name:"SAS",import:()=>Promise.all([n.e(2779),n.e(4228)]).then(n.bind(n,4228))},{id:"sass",name:"Sass",import:()=>n.e(5331).then(n.bind(n,5331))},{id:"scala",name:"Scala",import:()=>n.e(7817).then(n.bind(n,7817))},{id:"scheme",name:"Scheme",import:()=>n.e(2048).then(n.bind(n,2048))},{id:"scss",name:"SCSS",import:()=>Promise.all([n.e(2478),n.e(5053)]).then(n.bind(n,5053))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>n.e(75).then(n.bind(n,75))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>n.e(5972).then(n.bind(n,5972))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>Promise.all([n.e(5972),n.e(8231)]).then(n.bind(n,8231))},{id:"smalltalk",name:"Smalltalk",import:()=>n.e(9736).then(n.bind(n,9736))},{id:"solidity",name:"Solidity",import:()=>n.e(3934).then(n.bind(n,3934))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(7352)]).then(n.bind(n,7352))},{id:"sparql",name:"SPARQL",import:()=>n.e(4606).then(n.bind(n,4606))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>n.e(7088).then(n.bind(n,7088))},{id:"sql",name:"SQL",import:()=>n.e(2779).then(n.bind(n,2779))},{id:"ssh-config",name:"SSH Config",import:()=>n.e(992).then(n.bind(n,992))},{id:"stata",name:"Stata",import:()=>Promise.all([n.e(2779),n.e(8611)]).then(n.bind(n,8611))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>n.e(4027).then(n.bind(n,4027))},{id:"svelte",name:"Svelte",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(5088),n.e(6320)]).then(n.bind(n,6320))},{id:"swift",name:"Swift",import:()=>n.e(1366).then(n.bind(n,1366))},{id:"system-verilog",name:"SystemVerilog",import:()=>n.e(3731).then(n.bind(n,3731))},{id:"systemd",name:"Systemd Units",import:()=>n.e(3398).then(n.bind(n,3398))},{id:"tasl",name:"Tasl",import:()=>n.e(7469).then(n.bind(n,7469))},{id:"tcl",name:"Tcl",import:()=>n.e(6141).then(n.bind(n,8522))},{id:"templ",name:"Templ",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(431),n.e(4421)]).then(n.bind(n,4421))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>n.e(227).then(n.bind(n,227))},{id:"tex",name:"TeX",import:()=>Promise.all([n.e(289),n.e(5220)]).then(n.bind(n,5220))},{id:"toml",name:"TOML",import:()=>n.e(2881).then(n.bind(n,2881))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(6e3),n.e(5088),n.e(9852)]).then(n.bind(n,9852))},{id:"tsv",name:"TSV",import:()=>n.e(6416).then(n.bind(n,6416))},{id:"tsx",name:"TSX",import:()=>n.e(9654).then(n.bind(n,9654))},{id:"turtle",name:"Turtle",import:()=>n.e(8379).then(n.bind(n,8379))},{id:"twig",name:"Twig",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(1057),n.e(2779),n.e(6e3),n.e(5972),n.e(5747),n.e(6345),n.e(5053),n.e(187),n.e(2454)]).then(n.bind(n,73))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>n.e(5088).then(n.bind(n,2707))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>n.e(5468).then(n.bind(n,5468))},{id:"typst",name:"Typst",aliases:["typ"],import:()=>n.e(585).then(n.bind(n,585))},{id:"v",name:"V",import:()=>n.e(845).then(n.bind(n,845))},{id:"vala",name:"Vala",import:()=>n.e(3267).then(n.bind(n,3267))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>n.e(1189).then(n.bind(n,1189))},{id:"verilog",name:"Verilog",import:()=>n.e(4377).then(n.bind(n,4377))},{id:"vhdl",name:"VHDL",import:()=>n.e(5599).then(n.bind(n,5599))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>n.e(3397).then(n.bind(n,3397))},{id:"vue",name:"Vue",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(5088),n.e(1763)]).then(n.bind(n,1763))},{id:"vue-html",name:"Vue HTML",import:()=>Promise.all([n.e(3816),n.e(2478),n.e(3726),n.e(5088),n.e(2835)]).then(n.bind(n,2835))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>n.e(4099).then(n.bind(n,4099))},{id:"wasm",name:"WebAssembly",import:()=>n.e(3161).then(n.bind(n,3161))},{id:"wenyan",name:"Wenyan",aliases:["文言"],import:()=>n.e(7223).then(n.bind(n,7223))},{id:"wgsl",name:"WGSL",import:()=>n.e(9962).then(n.bind(n,9962))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>n.e(2464).then(n.bind(n,2464))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>n.e(7219).then(n.bind(n,7219))},{id:"xml",name:"XML",import:()=>Promise.all([n.e(1057),n.e(9068)]).then(n.bind(n,9068))},{id:"xsl",name:"XSL",import:()=>Promise.all([n.e(1057),n.e(5710)]).then(n.bind(n,5710))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>n.e(2484).then(n.bind(n,2484))},{id:"zenscript",name:"ZenScript",import:()=>n.e(8221).then(n.bind(n,8221))},{id:"zig",name:"Zig",import:()=>n.e(2757).then(n.bind(n,2757))}],iq=Object.fromEntries(iG.map(e=>[e.id,e.import])),iK=Object.fromEntries(iG.flatMap(e=>e.aliases?.map(t=>[t,e.import])||[])),iJ={...iq,...iK},iZ=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>n.e(8984).then(n.bind(n,8984))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>n.e(9207).then(n.bind(n,9207))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>n.e(6236).then(n.bind(n,6236))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp\xe9",type:"dark",import:()=>n.e(4997).then(n.bind(n,4997))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>n.e(4891).then(n.bind(n,4891))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>n.e(6764).then(n.bind(n,6764))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>n.e(9367).then(n.bind(n,9367))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>n.e(561).then(n.bind(n,561))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>n.e(7026).then(n.bind(n,4645))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>n.e(3083).then(n.bind(n,3083))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>n.e(4112).then(n.bind(n,4112))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>n.e(800).then(n.bind(n,800))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>n.e(6346).then(n.bind(n,6346))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>n.e(1106).then(n.bind(n,1106))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>n.e(4415).then(n.bind(n,4415))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>n.e(7730).then(n.bind(n,7730))},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>n.e(9730).then(n.bind(n,9730))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>n.e(2010).then(n.bind(n,2010))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>n.e(8522).then(n.bind(n,6141))},{id:"houston",displayName:"Houston",type:"dark",import:()=>n.e(9274).then(n.bind(n,6893))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>n.e(2477).then(n.bind(n,2477))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>n.e(2317).then(n.bind(n,2317))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>n.e(9371).then(n.bind(n,9371))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>n.e(8834).then(n.bind(n,8834))},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>n.e(7153).then(n.bind(n,7153))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>n.e(2551).then(n.bind(n,2551))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>n.e(9173).then(n.bind(n,9173))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>n.e(4349).then(n.bind(n,4349))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>n.e(4054).then(n.bind(n,4054))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>n.e(9226).then(n.bind(n,9226))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>n.e(8425).then(n.bind(n,8425))},{id:"min-light",displayName:"Min Light",type:"light",import:()=>n.e(4947).then(n.bind(n,4947))},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>n.e(8954).then(n.bind(n,8954))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>n.e(1631).then(n.bind(n,1631))},{id:"nord",displayName:"Nord",type:"dark",import:()=>n.e(5735).then(n.bind(n,5735))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>n.e(9579).then(n.bind(n,9579))},{id:"one-light",displayName:"One Light",type:"light",import:()=>n.e(8567).then(n.bind(n,8567))},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>n.e(9880).then(n.bind(n,7499))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>n.e(2998).then(n.bind(n,2998))},{id:"red",displayName:"Red",type:"dark",import:()=>n.e(4217).then(n.bind(n,4217))},{id:"rose-pine",displayName:"Ros\xe9 Pine",type:"dark",import:()=>n.e(2768).then(n.bind(n,2768))},{id:"rose-pine-dawn",displayName:"Ros\xe9 Pine Dawn",type:"light",import:()=>n.e(5531).then(n.bind(n,5531))},{id:"rose-pine-moon",displayName:"Ros\xe9 Pine Moon",type:"dark",import:()=>n.e(7830).then(n.bind(n,7830))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>n.e(469).then(n.bind(n,469))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>n.e(9568).then(n.bind(n,9568))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>n.e(6078).then(n.bind(n,6078))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>n.e(7318).then(n.bind(n,7318))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>n.e(1174).then(n.bind(n,1174))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>n.e(5942).then(n.bind(n,5942))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>n.e(2799).then(n.bind(n,2799))},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>n.e(5551).then(n.bind(n,5551))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>n.e(4619).then(n.bind(n,4619))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>n.e(3566).then(n.bind(n,3566))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>n.e(3454).then(n.bind(n,3454))}],iX=Object.fromEntries(iZ.map(e=>[e.id,e.import]));class iQ extends Error{constructor(e){super(e),this.name="ShikiError"}}class iY extends Error{constructor(e){super(e),this.name="ShikiError"}}function le(){return"undefined"!=typeof performance?performance.now():Date.now()}async function lt(e){let t,n,r={};function o(e){n=e,r.HEAPU8=new Uint8Array(e),r.HEAPU32=new Uint32Array(e)}function i(e){try{return t.grow(e-n.byteLength+65535>>>16),o(t.buffer),1}catch{}}let l="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function s(e,t){return e?function(e,t){let n=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024),r=t;for(;e[r]&&!(r>=n);)++r;if(r-t>16&&e.buffer&&l)return l.decode(e.subarray(t,r));let o="";for(;t<r;){let i=e[t++];if(!(128&i)){o+=String.fromCharCode(i);continue}let s=63&e[t++];if(192==(224&i)){o+=String.fromCharCode((31&i)<<6|s);continue}let a=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|a:(7&i)<<18|s<<12|a<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{let c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}return o}(r.HEAPU8,e,t):""}let a={emscripten_get_now:le,emscripten_memcpy_big:function(e,t,n){r.HEAPU8.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t,n;let o=r.HEAPU8.length;if((e>>>=0)>2147483648)return!1;for(let l=1;l<=4;l*=2){let s=o*(1+.2/l);if(s=Math.min(s,e+100663296),i(Math.min(2147483648,(t=Math.max(e,s))+((n=65536)-t%n)%n)))return!0}return!1},fd_write:()=>0};return await async function(){let n=await e({env:a,wasi_snapshot_preview1:a});o((t=n.memory).buffer),Object.assign(r,n),r.UTF8ToString=s}(),r}let ln,lr,lo=null;class li{static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){let o=e.charCodeAt(n),i=o,l=!1;if(o>=55296&&o<=56319&&n+1<r){let s=e.charCodeAt(n+1);s>=56320&&s<=57343&&(i=65536+(o-55296<<10)|s-56320,l=!0)}t+=i<=127?1:i<=2047?2:i<=65535?3:4,l&&n++}return t}utf16Length;utf8Length;utf16Value;utf8Value;utf16OffsetToUtf8;utf8OffsetToUtf16;constructor(e){let t=e.length,n=li._utf8ByteLength(e),r=n!==t,o=r?new Uint32Array(t+1):null;r&&(o[t]=n);let i=r?new Uint32Array(n+1):null;r&&(i[n]=t);let l=new Uint8Array(n),s=0;for(let a=0;a<t;a++){let c=e.charCodeAt(a),d=c,u=!1;if(c>=55296&&c<=56319&&a+1<t){let h=e.charCodeAt(a+1);h>=56320&&h<=57343&&(d=65536+(c-55296<<10)|h-56320,u=!0)}r&&(o[a]=s,u&&(o[a+1]=s),d<=127?i[s+0]=a:d<=2047?(i[s+0]=a,i[s+1]=a):d<=65535?(i[s+0]=a,i[s+1]=a,i[s+2]=a):(i[s+0]=a,i[s+1]=a,i[s+2]=a,i[s+3]=a)),d<=127?l[s++]=d:d<=2047?(l[s++]=192|(1984&d)>>>6,l[s++]=128|(63&d)>>>0):d<=65535?(l[s++]=224|(61440&d)>>>12,l[s++]=128|(4032&d)>>>6,l[s++]=128|(63&d)>>>0):(l[s++]=240|(1835008&d)>>>18,l[s++]=128|(258048&d)>>>12,l[s++]=128|(4032&d)>>>6,l[s++]=128|(63&d)>>>0),u&&a++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=l,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=i}createString(e){let t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}class ll{static LAST_ID=0;static _sharedPtr=0;static _sharedPtrInUse=!1;id=++ll.LAST_ID;_onigBinding;content;utf16Length;utf8Length;utf16OffsetToUtf8;utf8OffsetToUtf16;ptr;constructor(e){if(!lo)throw new iY("Must invoke loadWasm first.");this._onigBinding=lo,this.content=e;let t=new li(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!ll._sharedPtrInUse?(ll._sharedPtr||(ll._sharedPtr=lo.omalloc(1e4)),ll._sharedPtrInUse=!0,lo.HEAPU8.set(t.utf8Value,ll._sharedPtr),this.ptr=ll._sharedPtr):this.ptr=t.createString(lo)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===ll._sharedPtr?ll._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}}class ls{_onigBinding;_ptr;constructor(e){if(!lo)throw new iY("Must invoke loadWasm first.");let t=[],n=[];for(let r=0,o=e.length;r<o;r++){let i=new li(e[r]);t[r]=i.createString(lo),n[r]=i.utf8Length}let l=lo.omalloc(4*e.length);lo.HEAPU32.set(t,l/4);let s=lo.omalloc(4*e.length);lo.HEAPU32.set(n,s/4);let a=lo.createOnigScanner(l,s,e.length);for(let c=0,d=e.length;c<d;c++)lo.ofree(t[c]);lo.ofree(s),lo.ofree(l),0===a&&function(e){throw new iY(e.UTF8ToString(e.getLastOnigError()))}(lo),this._onigBinding=lo,this._ptr=a}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=0;if("number"==typeof n&&(r=n),"string"==typeof e){e=new ll(e);let o=this._findNextMatchSync(e,t,!1,r);return e.dispose(),o}return this._findNextMatchSync(e,t,!1,r)}_findNextMatchSync(e,t,n,r){let o=this._onigBinding,i=o.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r);if(0===i)return null;let l=o.HEAPU32,s=i/4,a=l[s++],c=l[s++],d=[];for(let u=0;u<c;u++){let h=e.convertUtf8OffsetToUtf16(l[s++]),p=e.convertUtf8OffsetToUtf16(l[s++]);d[u]={start:h,end:p,length:p-h}}return{index:a,captureIndices:d}}}function la(e){return t=>WebAssembly.instantiate(e,t)}async function lc(e){var t;return e&&await (t=e,ln||(ln=async function(){lo=await lt(async e=>{var n,r,o,i,l,s;let a=t;return"function"==typeof(a=await a)&&(a=await a(e)),"function"==typeof a&&(a=await a(e)),"function"==typeof a.instantiator?a=await a.instantiator(e):"function"!=typeof(r=a).default?(void 0!==(o=a).data&&(a=a.data),(i=a,"undefined"!=typeof Response&&i instanceof Response)?a="function"==typeof WebAssembly.instantiateStreaming?await (n=a,e=>WebAssembly.instantiateStreaming(n,e))(e):await (s=a,async e=>{let t=await s.arrayBuffer();return WebAssembly.instantiate(t,e)})(e):(l=a,"undefined"!=typeof ArrayBuffer&&(l instanceof ArrayBuffer||ArrayBuffer.isView(l))||"undefined"!=typeof Buffer&&Buffer.isBuffer?.(l)||"undefined"!=typeof SharedArrayBuffer&&l instanceof SharedArrayBuffer||"undefined"!=typeof Uint32Array&&l instanceof Uint32Array)?a=await la(a)(e):a instanceof WebAssembly.Module?a=await la(a)(e):"default"in a&&a.default instanceof WebAssembly.Module&&(a=await la(a.default)(e))):a=await a.default(e),"instance"in a&&(a=a.instance),"exports"in a&&(a=a.exports),a})}())),{createScanner:e=>new ls(e),createString:e=>new ll(e)}}function ld(e){}function lu(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(t=>{for(let n in t)e[n]=t[n]}),e}var lh=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,lp=class{static hasCaptures(e){return null!==e&&(lh.lastIndex=0,lh.test(e))}static replaceCaptures(e,t,n){return e.replace(lh,(e,r,o,i)=>{let l=n[parseInt(r||o,10)];if(!l)return e;{let s=t.substring(l.start,l.end);for(;"."===s[0];)s=s.substring(1);switch(i){case"downcase":return s.toLowerCase();case"upcase":return s.toUpperCase();default:return s}}})}};function lf(e,t){return e<t?-1:e>t?1:0}function lm(e,t){if(null===e&&null===t)return 0;if(!e)return -1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let o=0;o<n;o++){let i=lf(e[o],t[o]);if(0!==i)return i}return 0}return n-r}function lg(e){return!!/^#[0-9a-f]{6}$/i.test(e)||!!/^#[0-9a-f]{8}$/i.test(e)||!!/^#[0-9a-f]{3}$/i.test(e)||!!/^#[0-9a-f]{4}$/i.test(e)}function l$(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var l_=class{constructor(e){this.fn=e,this.cache=new Map}get(e){if(this.cache.has(e))return this.cache.get(e);let t=this.fn(e);return this.cache.set(e,t),t}},lb=class{constructor(e,t,n){this._colorMap=e,this._defaults=t,this._root=n,this._cachedMatchRoot=new l_(e=>this._root.match(e))}static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e||!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let o=0,i=t.length;o<i;o++){let l,s=t[o];if(!s.settings)continue;if("string"==typeof s.scope){let a=s.scope;l=(a=(a=a.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else l=Array.isArray(s.scope)?s.scope:[""];let c=-1;if("string"==typeof s.settings.fontStyle){c=0;let d=s.settings.fontStyle.split(" ");for(let u=0,h=d.length;u<h;u++)switch(d[u]){case"italic":c|=1;break;case"bold":c|=2;break;case"underline":c|=4;break;case"strikethrough":c|=8}}let p=null;"string"==typeof s.settings.foreground&&lg(s.settings.foreground)&&(p=s.settings.foreground);let f=null;"string"==typeof s.settings.background&&lg(s.settings.background)&&(f=s.settings.background);for(let m=0,g=l.length;m<g;m++){let $=l[m].trim().split(" "),_=$[$.length-1],b=null;$.length>1&&(b=$.slice(0,$.length-1)).reverse(),n[r++]=new l0(_,b,o,c,p,f)}}return n}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort((e,t)=>{let n=lf(e.scope,t.scope);return 0!==n?n:0!==(n=lm(e.parentScopes,t.parentScopes))?n:e.index-t.index});let n=0,r="#000000",o="#ffffff";for(;e.length>=1&&""===e[0].scope;){let i=e.shift();-1!==i.fontStyle&&(n=i.fontStyle),null!==i.foreground&&(r=i.foreground),null!==i.background&&(o=i.background)}let l=new lC(t),s=new lk(n,l.getId(r),l.getId(o)),a=new l1(new lS(0,null,-1,0,0),[]);for(let c=0,d=e.length;c<d;c++){let u=e[c];a.insert(0,u.scope,u.parentScopes,u.fontStyle,l.getId(u.foreground),l.getId(u.background))}return new lb(l,s,a)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;let t=e.scopeName,n=this._cachedMatchRoot.get(t).find(t=>(function(e,t){if(0===t.length)return!0;for(let n=0;n<t.length;n++){let r=t[n],o=!1;if(">"===r){if(n===t.length-1)return!1;r=t[++n],o=!0}for(;e&&!lv(e.scopeName,r);){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0})(e.parent,t.parentScopes));return n?new lk(n.fontStyle,n.foreground,n.background):null}},ly=class e{constructor(e,t){this.parent=e,this.scopeName=t}static push(t,n){for(let r of n)t=new e(t,r);return t}static from(){let t=null;for(let n=0;n<arguments.length;n++)t=new e(t,n<0||arguments.length<=n?void 0:arguments[n]);return t}push(t){return new e(this,t)}getSegments(){let e=this,t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){let t=[],n=this;for(;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}};function lv(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}var lw,lk=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}},l0=class{constructor(e,t,n,r,o,i){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=o,this.background=i}},lx=((lw=lx||{})[lw.NotSet=-1]="NotSet",lw[lw.None=0]="None",lw[lw.Italic=1]="Italic",lw[lw.Bold=2]="Bold",lw[lw.Underline=4]="Underline",lw[lw.Strikethrough=8]="Strikethrough",lw),lC=class{constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},lS=class e{constructor(e,t,n,r,o){this.scopeDepth=e,this.parentScopes=t||Object.freeze([]),this.fontStyle=n,this.foreground=r,this.background=o}clone(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}acceptOverwrite(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}},l1=class e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._mainRule=e,this._children=n,this._rulesWithParentScopes=t}static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let n=0,r=0;for(;">"===e.parentScopes[n]&&n++,">"===t.parentScopes[r]&&r++,!(n>=e.parentScopes.length||r>=t.parentScopes.length);){let o=t.parentScopes[r].length-e.parentScopes[n].length;if(0!==o)return o;n++,r++}return t.parentScopes.length-e.parentScopes.length}match(t){if(""!==t){let n,r,o=t.indexOf(".");if(-1===o?(n=t,r=""):(n=t.substring(0,o),r=t.substring(o+1)),this._children.hasOwnProperty(n))return this._children[n].match(r)}let i=this._rulesWithParentScopes.concat(this._mainRule);return i.sort(e._cmpBySpecificity),i}insert(t,n,r,o,i,l){if(""===n)return void this._doInsertHere(t,r,o,i,l);let s,a,c,d=n.indexOf(".");-1===d?(s=n,a=""):(s=n.substring(0,d),a=n.substring(d+1)),this._children.hasOwnProperty(s)?c=this._children[s]:(c=new e(this._mainRule.clone(),lS.cloneArr(this._rulesWithParentScopes)),this._children[s]=c),c.insert(t+1,a,r,o,i,l)}_doInsertHere(e,t,n,r,o){if(null!==t){for(let i=0,l=this._rulesWithParentScopes.length;i<l;i++){let s=this._rulesWithParentScopes[i];if(0===lm(s.parentScopes,t))return void s.acceptOverwrite(e,n,r,o)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new lS(e,t,n,r,o))}else this._mainRule.acceptOverwrite(e,n,r,o)}},l2=class e{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(t){let n=e.getLanguageId(t),r=e.getTokenType(t),o=e.getFontStyle(t),i=e.getForeground(t),l=e.getBackground(t);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:l})}static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return 0!=(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static set(t,n,r,o,i,l,s){let a=e.getLanguageId(t),c=e.getTokenType(t),d=e.containsBalancedBrackets(t)?1:0,u=e.getFontStyle(t),h=e.getForeground(t),p=e.getBackground(t);return 0!==n&&(a=n),8!==r&&(c=r),null!==o&&(d=o?1:0),-1!==i&&(u=i),0!==l&&(h=l),0!==s&&(p=s),(a|c<<8|d<<10|u<<11|h<<15|p<<24)>>>0}};function l3(e,t){var n;let r,o,i=[],l=(n=e,o=(r=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(n),{next(){if(!o)return null;let e=o[0];return o=r.exec(n),e}}),s=l.next();for(;null!==s;){let a=0;if(2===s.length&&":"===s.charAt(1)){switch(s.charAt(0)){case"R":a=1;break;case"L":a=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=l.next()}let c=u();if(i.push({matcher:c,priority:a}),","!==s)break;s=l.next()}return i;function d(){if("-"===s){s=l.next();let e=d();return t=>!!e&&!e(t)}if("("===s){s=l.next();let n=function(){let e=[],t=u();for(;t&&(e.push(t),"|"===s||","===s);){do s=l.next();while("|"===s||","===s);t=u()}return t=>e.some(e=>e(t))}();return")"===s&&(s=l.next()),n}if(lE(s)){let r=[];do r.push(s),s=l.next();while(lE(s));return e=>t(r,e)}return null}function u(){let e=[],t=d();for(;t;)e.push(t),t=d();return t=>e.every(e=>e(t))}}function lE(e){return!!e&&!!e.match(/[\w\.:]+/)}function l4(e){"function"==typeof e.dispose&&e.dispose()}var lM=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},lT=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},l8=class{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){let t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},l6=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new lM(this.initialScopeName)]}processQueue(){let e=this.Q;this.Q=[];let t=new l8;for(let n of e)lN(n,this.initialScopeName,this.repo,t);for(let r of t.references)if(r instanceof lM){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName)||this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}};function lN(e,t,n,r){let o=n.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw Error(`No grammar provided for <${t}>`);return}let i=n.lookup(t);e instanceof lM?l7({baseGrammar:i,selfGrammar:o},r):l5(e.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);let l=n.injections(e.scopeName);if(l)for(let s of l)r.add(new lM(s))}function l5(e,t,n){t.repository&&t.repository[e]&&lL([t.repository[e]],t,n)}function l7(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&lL(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&lL(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function lL(e,t,n){for(let r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);let o=r.repository?lu({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&lL(r.patterns,{...t,repository:o},n);let i=r.include;if(!i)continue;let l=lI(i);switch(l.kind){case 0:l7({...t,selfGrammar:t.baseGrammar},n);break;case 1:l7(t,n);break;case 2:l5(l.ruleName,{...t,repository:o},n);break;case 3:case 4:let s=l.scopeName===t.selfGrammar.scopeName?t.selfGrammar:l.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(s){let a={baseGrammar:t.baseGrammar,selfGrammar:s,repository:o};4===l.kind?l5(l.ruleName,a,n):l7(a,n)}else 4===l.kind?n.add(new lT(l.scopeName,l.ruleName)):n.add(new lM(l.scopeName))}}}var lP=class{constructor(){this.kind=0}},lA=class{constructor(){this.kind=1}},lR=class{constructor(e){this.ruleName=e,this.kind=2}},lO=class{constructor(e){this.scopeName=e,this.kind=3}},lD=class{constructor(e,t){this.scopeName=e,this.ruleName=t,this.kind=4}};function lI(e){if("$base"===e)return new lP;if("$self"===e)return new lA;let t=e.indexOf("#");if(-1===t)return new lO(e);if(0===t)return new lR(e.substring(1));{let n=e.substring(0,t),r=e.substring(t+1);return new lD(n,r)}}var lH=/\\(\d+)/g;Symbol("RuleId");var lz=class{constructor(e,t,n,r){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=lp.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=lp.hasCaptures(this._contentName)}get debugName(){let e=this.$location?`${function e(t){let n=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return 0===n?t:~n==t.length-1?e(t.substring(0,t.length-1)):t.substr(1+~n)}(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?lp.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?lp.replaceCaptures(this._contentName,e,t):this._contentName}},l9=class extends lz{constructor(e,t,n,r,o){super(e,t,n,r),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(e,t){throw Error("Not supported!")}compile(e,t){throw Error("Not supported!")}compileAG(e,t,n,r){throw Error("Not supported!")}},lB=class extends lz{constructor(e,t,n,r,o){super(e,t,n,null),this._match=new lW(r,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new lG,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},lV=class extends lz{constructor(e,t,n,r,o){super(e,t,n,r),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(let n of this.patterns)e.getRule(n).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new lG,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},lj=class extends lz{constructor(e,t,n,r,o,i,l,s,a,c){super(e,t,n,r),this._begin=new lW(o,this.id),this.beginCaptures=i,this._end=new lW(l||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=s,this.applyEndPatternLast=a||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){for(let n of(this._cachedCompiledPatterns=new lG,this.patterns))e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},lF=class extends lz{constructor(e,t,n,r,o,i,l,s,a){super(e,t,n,r),this._begin=new lW(o,this.id),this.beginCaptures=i,this.whileCaptures=s,this._while=new lW(l,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns)for(let t of(this._cachedCompiledPatterns=new lG,this.patterns))e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new lG,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}},lU=class e{static createCaptureRule(e,t,n,r,o){return e.registerRule(e=>new l9(t,e,n,r,o))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(o=>{if(t.id=o,t.match)return new lB(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=lu({},r,t.repository));let i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new lV(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,n,r))}return t.while?new lF(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new lj(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let o=[];if(t){let i=0;for(let l in t){if("$vscodeTextmateLocation"===l)continue;let s=parseInt(l,10);s>i&&(i=s)}for(let a=0;a<=i;a++)o[a]=null;for(let c in t){if("$vscodeTextmateLocation"===c)continue;let d=parseInt(c,10),u=0;t[c].patterns&&(u=e.getCompiledRuleId(t[c],n,r)),o[d]=e.createCaptureRule(n,t[c].$vscodeTextmateLocation,t[c].name,t[c].contentName,u)}}return o}static _compilePatterns(t,n,r){let o=[];if(t)for(let i=0,l=t.length;i<l;i++){let s=t[i],a=-1;if(s.include){let c=lI(s.include);switch(c.kind){case 0:case 1:a=e.getCompiledRuleId(r[s.include],n,r);break;case 2:let d=r[c.ruleName];d&&(a=e.getCompiledRuleId(d,n,r));break;case 3:case 4:let u=c.scopeName,h=4===c.kind?c.ruleName:null,p=n.getExternalGrammar(u,r);if(p){if(h){let f=p.repository[h];f&&(a=e.getCompiledRuleId(f,n,p.repository))}else a=e.getCompiledRuleId(p.repository.$self,n,p.repository)}}}else a=e.getCompiledRuleId(s,n,r);if(-1!==a){let m=n.getRule(a),g=!1;if((m instanceof lV||m instanceof lj||m instanceof lF)&&m.hasMissingPatterns&&0===m.patterns.length&&(g=!0),g)continue;o.push(a)}}return{patterns:o,hasMissingPatterns:(t?t.length:0)!==o.length}}},lW=class e{constructor(e,t){if(e){let n=e.length,r=0,o=[],i=!1;for(let l=0;l<n;l++)if("\\"===e.charAt(l)&&l+1<n){let s=e.charAt(l+1);"z"===s?(o.push(e.substring(r,l)),o.push("$(?!\\n)(?<!\\n)"),r=l+2):"A"!==s&&"G"!==s||(i=!0),l++}this.hasAnchor=i,0===r?this.source=e:(o.push(e.substring(r,n)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=/\\(\d+)/.test(this.source)}clone(){return new e(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){let n=t.map(t=>e.substring(t.start,t.end));return lH.lastIndex=0,this.source.replace(lH,(e,t)=>l$(n[parseInt(t,10)]||""))}_buildAnchorCache(){let e,t,n,r,o=[],i=[],l=[],s=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),o[e]=n,i[e]=n,l[e]=n,s[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(o[e+1]="￿",i[e+1]="￿",l[e+1]="A",s[e+1]="A"):"G"===r?(o[e+1]="￿",i[e+1]="G",l[e+1]="￿",s[e+1]="G"):(o[e+1]=r,i[e+1]=r,l[e+1]=r,s[e+1]=r),e++);return{A0_G0:o.join(""),A0_G1:i.join(""),A1_G0:l.join(""),A1_G1:s.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}},lG=class{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(e=>e.source);this._cached=new lq(e,t,this._items.map(e=>e.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(e=>e.resolveAnchors(t,n));return new lq(e,r,this._items.map(e=>e.ruleId))}},lq=class{constructor(e,t,n){this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){let e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,n){let r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},lK=class{constructor(e,t){this.languageId=e,this.tokenType=t}},lJ=class e{constructor(e,t){this._getBasicScopeAttributes=new l_(e=>{let t=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new lK(t,n)}),this._defaultAttributes=new lK(e,8),this._embeddedLanguagesMatcher=new lZ(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(t){let n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw Error("Unexpected match for standard token type!")}};lJ._NULL_SCOPE_METADATA=new lK(0,0),lJ.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;var lZ=class{constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);let t=e.map(e=>{let[t,n]=e;return l$(t)});t.sort(),t.reverse(),this.scopesRegExp=RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;let t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}},lX=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function lQ(e,t,n,r,o,i,l,s){let a=t.content.length,c=!1,d=-1;if(l){let u=function(e,t,n,r,o,i){let l=o.beginRuleCapturedEOL?0:-1,s=[];for(let a=o;a;a=a.pop()){let c=a.getRule(e);c instanceof lF&&s.push({rule:c,stack:a})}for(let d=s.pop();d;d=s.pop()){let{ruleScanner:u,findOptions:h}=se(d.rule,e,d.stack.endRule,n,r===l),p=u.findNextMatchSync(t,r,h);if(!p||-2!==p.ruleId){o=d.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(i.produce(d.stack,p.captureIndices[0].start),st(e,t,n,d.stack,i,d.rule.whileCaptures,p.captureIndices),i.produce(d.stack,p.captureIndices[0].end),l=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}return{stack:o,linePos:r,anchorPosition:l,isFirstLine:n}}(e,t,n,r,o,i);o=u.stack,r=u.linePos,n=u.isFirstLine,d=u.anchorPosition}let h=Date.now();for(;!c;){if(0!==s&&Date.now()-h>s)return new lX(o,!0);p()}return new lX(o,!1);function p(){let l=function(e,t,n,r,o,i){let l=function(e,t,n,r,o,i){let l=o.getRule(e),{ruleScanner:s,findOptions:a}=lY(l,e,o.endRule,n,r===i),c=s.findNextMatchSync(t,r,a);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}(e,t,n,r,o,i),s=e.getInjections();if(0===s.length)return l;let a=function(e,t,n,r,o,i,l){let s,a=Number.MAX_VALUE,c=null,d=0,u=i.contentNameScopesList.getScopeNames();for(let h=0,p=e.length;h<p;h++){let f=e[h];if(!f.matcher(u))continue;let m=t.getRule(f.ruleId),{ruleScanner:g,findOptions:$}=lY(m,t,null,r,o===l),_=g.findNextMatchSync(n,o,$);if(!_)continue;let b=_.captureIndices[0].start;if(!(b>=a)&&(a=b,c=_.captureIndices,s=_.ruleId,d=f.priority,a===o))break}return c?{priorityMatch:-1===d,captureIndices:c,matchedRuleId:s}:null}(s,e,t,n,r,o,i);if(!a)return l;if(!l)return a;let c=l.captureIndices[0].start,d=a.captureIndices[0].start;return d<c||a.priorityMatch&&d===c?a:l}(e,t,n,r,o,d);if(!l)return i.produce(o,a),void(c=!0);let s=l.captureIndices,u=l.matchedRuleId,h=!!(s&&s.length>0)&&s[0].end>r;if(-1===u){let p=o.getRule(e);i.produce(o,s[0].start),st(e,t,n,o=o.withContentNameScopesList(o.nameScopesList),i,p.endCaptures,s),i.produce(o,s[0].end);let f=o;if(o=o.parent,d=f.getAnchorPos(),!h&&f.getEnterPos()===r)return o=f,i.produce(o,a),void(c=!0)}else{let m=e.getRule(u);i.produce(o,s[0].start);let g=o,$=m.getName(t.content,s),_=o.contentNameScopesList.pushAttributed($,e);if(o=o.push(u,r,d,s[0].end===a,null,_,_),m instanceof lj){let b=m;st(e,t,n,o,i,b.beginCaptures,s),i.produce(o,s[0].end),d=s[0].end;let y=b.getContentName(t.content,s),v=_.pushAttributed(y,e);if(o=o.withContentNameScopesList(v),b.endHasBackReferences&&(o=o.withEndRule(b.getEndWithResolvedBackReferences(t.content,s))),!h&&g.hasSameRuleAs(o))return o=o.pop(),i.produce(o,a),void(c=!0)}else if(m instanceof lF){let w=m;st(e,t,n,o,i,w.beginCaptures,s),i.produce(o,s[0].end),d=s[0].end;let k=w.getContentName(t.content,s),x=_.pushAttributed(k,e);if(o=o.withContentNameScopesList(x),w.whileHasBackReferences&&(o=o.withEndRule(w.getWhileWithResolvedBackReferences(t.content,s))),!h&&g.hasSameRuleAs(o))return o=o.pop(),i.produce(o,a),void(c=!0)}else if(st(e,t,n,o,i,m.captures,s),i.produce(o,s[0].end),o=o.pop(),!h)return o=o.safePop(),i.produce(o,a),void(c=!0)}s[0].end>r&&(r=s[0].end,n=!1)}}function lY(e,t,n,r,o){return{ruleScanner:e.compileAG(t,n,r,o),findOptions:0}}function se(e,t,n,r,o){return{ruleScanner:e.compileWhileAG(t,n,r,o),findOptions:0}}function st(e,t,n,r,o,i,l){if(0===i.length)return;let s=t.content,a=Math.min(i.length,l.length),c=[],d=l[0].end;for(let u=0;u<a;u++){let h=i[u];if(null===h)continue;let p=l[u];if(0===p.length)continue;if(p.start>d)break;for(;c.length>0&&c[c.length-1].endPos<=p.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,p.start):o.produce(r,p.start),h.retokenizeCapturedWithRuleId){let f=h.getName(s,l),m=r.contentNameScopesList.pushAttributed(f,e),g=h.getContentName(s,l),$=m.pushAttributed(g,e),_=r.push(h.retokenizeCapturedWithRuleId,p.start,-1,!1,null,m,$),b=e.createOnigString(s.substring(0,p.end));lQ(e,b,n&&0===p.start,p.start,_,o,!1,0),l4(b);continue}let y=h.getName(s,l);if(null!==y){let v=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,e);c.push(new sn(v,p.end))}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var sn=class{constructor(e,t){this.scopes=e,this.endPos=t}};function sr(e,t,n,r,o){let i=l3(t,so),l=lU.getCompiledRuleId(n,r,o.repository);for(let s of i)e.push({debugSelector:t,matcher:s.matcher,ruleId:l,grammar:o,priority:s.priority})}function so(e,t){if(t.length<e.length)return!1;let n=0;return e.every(e=>{for(let r=n;r<t.length;r++)if(si(t[r],e))return n=r+1,!0;return!1})}function si(e,t){if(!e)return!1;if(e===t)return!0;let n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}var sl=class{constructor(e,t,n,r,o,i,l,s){if(this._rootScopeName=e,this.balancedBracketSelectors=i,this._onigLib=s,this._basicScopeAttributesProvider=new lJ(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=ss(t,null),this._injections=null,this._tokenTypeMatchers=[],o)for(let a of Object.keys(o)){let c=l3(a,so);for(let d of c)this._tokenTypeMatchers.push({matcher:d.matcher,type:o[a]})}}get themeProvider(){return this._grammarRepository}dispose(){for(let e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){var e;let t=[],n=this._rootScopeName,r=(e=n)===this._rootScopeName?this._grammar:this.getExternalGrammar(e);if(r){let o=r.injections;if(o)for(let i in o)sr(t,i,o[i],this,r);let l=this._grammarRepository.injections(n);l&&l.forEach(e=>{let n=this.getExternalGrammar(e);if(n){let r=n.injectionSelector;r&&sr(t,r,n,this,n)}})}return t.sort((e,t)=>e.priority-t.priority),t}getInjections(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}registerRule(e){let t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){let n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=ss(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){let o;if(-1===this._rootId&&(this._rootId=lU.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==sd.NULL)o=!1,t.reset();else{o=!0;let i=this._basicScopeAttributesProvider.getDefaultAttributes(),l=this.themeProvider.getDefaults(),s=l2.set(0,i.languageId,i.tokenType,null,l.fontStyle,l.foregroundId,l.backgroundId),a=this.getRule(this._rootId).getName(null,null),c;c=a?sa.createRootAndLookUpScopeName(a,s,this):sa.createRoot("unknown",s),t=new sd(null,this._rootId,-1,-1,!1,null,c,c)}e+="\n";let d=this.createOnigString(e),u=d.content.length,h=new sh(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),p=lQ(this,d,o,0,t,h,!0,r);return l4(d),{lineLength:u,lineTokens:h,ruleStack:p.stack,stoppedEarly:p.stoppedEarly}}};function ss(e,t){return(e=function e(t){return Array.isArray(t)?function(t){let n=[];for(let r=0,o=t.length;r<o;r++)n[r]=e(t[r]);return n}(t):"object"==typeof t?function(t){let n={};for(let r in t)n[r]=e(t[r]);return n}(t):t}(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var sa=class e{constructor(e,t,n){this.parent=e,this.scopePath=t,this.tokenAttributes=n}static fromExtension(t,n){let r=t,o=t?.scopePath??null;for(let i of n)o=ly.push(o,i.scopeNames),r=new e(r,o,i.encodedTokenAttributes);return r}static createRoot(t,n){return new e(null,new ly(null,t),n)}static createRootAndLookUpScopeName(t,n,r){let o=r.getMetadataForScope(t),i=new ly(null,t),l=r.themeProvider.themeMatch(i),s=e.mergeAttributes(n,o,l);return new e(null,i,s)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return e.equals(this,t)}static equals(e,t){for(;;){if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,n){let r=-1,o=0,i=0;return null!==n&&(r=n.fontStyle,o=n.foregroundId,i=n.backgroundId),l2.set(e,t.languageId,t.tokenType,null,r,o,i)}pushAttributed(t,n){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,n);let r=t.split(/ /g),o=this;for(let i of r)o=e._pushAttributed(o,i,n);return o}static _pushAttributed(t,n,r){let o=r.getMetadataForScope(n),i=t.scopePath.push(n),l=r.themeProvider.themeMatch(i),s=e.mergeAttributes(t.tokenAttributes,o,l);return new e(t,i,s)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){let t=[],n=this;for(;n&&n!==e;)t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(n.parent?.scopePath??null)}),n=n.parent;return n===e?t.reverse():void 0}},sc=class e{constructor(e,t,n,r,o,i,l,s){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=o,this.endRule=i,this.nameScopesList=l,this.contentNameScopesList=s,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=r}equals(t){return null!==t&&e._equals(this,t)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&sa.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,o,i,l,s){return new e(this,t,n,r,o,i,l,s)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){let e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,n){let r=sa.fromExtension(t?.nameScopesList??null,n.nameScopesList);return new e(t,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,sa.fromExtension(r,n.contentNameScopesList))}};sc.NULL=new sc(null,0,0,0,!1,null,null,null);var sd=sc,su=class{constructor(e,t){this.allowAny=!1,this.balancedBracketScopes=e.flatMap(e=>"*"===e?(this.allowAny=!0,[]):l3(e,so).map(e=>e.matcher)),this.unbalancedBracketScopes=t.flatMap(e=>l3(e,so).map(e=>e.matcher))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(let t of this.unbalancedBracketScopes)if(t(e))return!1;for(let n of this.balancedBracketScopes)if(n(e))return!0;return this.allowAny}},sh=class{constructor(e,t,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let n=e?.tokenAttributes??0,r=!1;if(this.balancedBracketSelectors?.matchesAlways&&(r=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){let o=e?.getScopeNames()??[];for(let i of this._tokenTypeOverrides)i.matcher(o)&&(n=l2.set(n,0,i.type,null,-1,0,0));this.balancedBracketSelectors&&(r=this.balancedBracketSelectors.match(o))}return r&&(n=l2.set(n,0,8,r,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n)),void(this._lastTokenEndIndex=t)}let l=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:l}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);let n=new Uint32Array(this._binaryTokens.length);for(let r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}},sp=class{constructor(e){this._options=e,this._syncRegistry=new class{constructor(e,t){this._onigLib=t,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=e}dispose(){for(let e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,o){if(!this._grammars.has(e)){var i,l,s,a,c,d,u,h;let p=this._rawGrammars.get(e);if(!p)return null;this._grammars.set(e,(i=e,l=p,s=t,a=n,c=r,d=o,u=this,h=this._onigLib,new sl(i,l,s,a,c,d,u,h)))}return this._grammars.get(e)}}(lb.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(lb.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new su(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,n,r,o){let i=new l6(this._syncRegistry,e);for(;i.Q.length>0;)i.Q.map(e=>this._loadSingleGrammar(e.scopeName)),i.processQueue();return this._grammarForScopeName(e,t,n,r,o)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){let t=this._options.loadGrammar(e);if(t){let n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}addGrammar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,n,r)}_grammarForScopeName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._syncRegistry.grammarForScopeName(e,t,n,r,o)}},sf=sd.NULL;let sm=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var sg=n(3573),s$=n(3780),s_=n(9917);let sb=/^>|^->|<!--|-->|--!>|<!-$/g,sy=[">"],sv=["<",">"];var sw=n(3781),sk=n(2259),s0=n(3944),sx=n(4168),sC=n(478);let sS=s3(1),s1=s3(-1),s2=[];function s3(e){return function(t,n,r){let o=t?t.children:s2,i=(n||0)+e,l=o[i];if(!r)for(;l&&(0,sC.m)(l);)i+=e,l=o[i];return l}}let sE={}.hasOwnProperty;function s4(e){return function(t,n,r){return sE.call(e,t.tagName)&&e[t.tagName](t,n,r)}}let sM=s4({body:function(e,t,n){let r=sS(n,t);return!r||"comment"!==r.type},caption:sT,colgroup:sT,dd:function(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName)},dt:function(e,t,n){let r=sS(n,t);return Boolean(r&&"element"===r.type&&("dt"===r.tagName||"dd"===r.tagName))},head:sT,html:function(e,t,n){let r=sS(n,t);return!r||"comment"!==r.type},li:function(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&"li"===r.tagName},optgroup:function(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&"optgroup"===r.tagName},option:function(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&("option"===r.tagName||"optgroup"===r.tagName)},p:function(e,t,n){let r=sS(n,t);return r?"element"===r.type&&("address"===r.tagName||"article"===r.tagName||"aside"===r.tagName||"blockquote"===r.tagName||"details"===r.tagName||"div"===r.tagName||"dl"===r.tagName||"fieldset"===r.tagName||"figcaption"===r.tagName||"figure"===r.tagName||"footer"===r.tagName||"form"===r.tagName||"h1"===r.tagName||"h2"===r.tagName||"h3"===r.tagName||"h4"===r.tagName||"h5"===r.tagName||"h6"===r.tagName||"header"===r.tagName||"hgroup"===r.tagName||"hr"===r.tagName||"main"===r.tagName||"menu"===r.tagName||"nav"===r.tagName||"ol"===r.tagName||"p"===r.tagName||"pre"===r.tagName||"section"===r.tagName||"table"===r.tagName||"ul"===r.tagName):!n||!("element"===n.type&&("a"===n.tagName||"audio"===n.tagName||"del"===n.tagName||"ins"===n.tagName||"map"===n.tagName||"noscript"===n.tagName||"video"===n.tagName))},rp:s8,rt:s8,tbody:function(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName)},td:s6,tfoot:function(e,t,n){return!sS(n,t)},th:s6,thead:function(e,t,n){let r=sS(n,t);return Boolean(r&&"element"===r.type&&("tbody"===r.tagName||"tfoot"===r.tagName))},tr:function(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&"tr"===r.tagName}});function sT(e,t,n){let r=sS(n,t,!0);return!r||"comment"!==r.type&&!("text"===r.type&&(0,sC.m)(r.value.charAt(0)))}function s8(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&("rp"===r.tagName||"rt"===r.tagName)}function s6(e,t,n){let r=sS(n,t);return!r||"element"===r.type&&("td"===r.tagName||"th"===r.tagName)}let sN=s4({body:function(e){let t=sS(e,-1,!0);return!t||"comment"!==t.type&&!("text"===t.type&&(0,sC.m)(t.value.charAt(0)))&&!("element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName))},colgroup:function(e,t,n){let r=s1(n,t),o=sS(e,-1,!0);return!(n&&r&&"element"===r.type&&"colgroup"===r.tagName&&sM(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"col"===o.tagName)},head:function(e){let t=new Set;for(let n of e.children)if("element"===n.type&&("base"===n.tagName||"title"===n.tagName)){if(t.has(n.tagName))return!1;t.add(n.tagName)}let r=e.children[0];return!r||"element"===r.type},html:function(e){let t=sS(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,n){let r=s1(n,t),o=sS(e,-1);return!(n&&r&&"element"===r.type&&("thead"===r.tagName||"tbody"===r.tagName)&&sM(r,n.children.indexOf(r),n))&&Boolean(o&&"element"===o.type&&"tr"===o.tagName)}}),s5={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function s7(e,t,n){let r=(0,s0.I)(e.schema,t),o=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,i=e.settings.allowDangerousCharacters?0:1,l,s=e.quote;if(r.overloadedBoolean&&(n===r.attribute||""===n)?n=!0:(r.boolean||r.overloadedBoolean&&"string"!=typeof n)&&(n=Boolean(n)),null==n||!1===n||"number"==typeof n&&Number.isNaN(n))return"";let a=(0,s_.l)(r.attribute,Object.assign({},e.settings.characterReferences,{subset:s5.name[o][i]}));return!0===n?a:(n=Array.isArray(n)?(r.commaSeparated?sk.A:sx.A)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n?a:(e.settings.preferUnquoted&&(l=(0,s_.l)(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:s5.unquoted[o][i]}))),l!==n&&(e.settings.quoteSmart&&(0,sw.D)(n,s)>(0,sw.D)(n,e.alternative)&&(s=e.alternative),l=s+(0,s_.l)(n,Object.assign({},e.settings.characterReferences,{subset:("'"===s?s5.single:s5.double)[o][i],attribute:!0}))+s),a+(l?"="+l:l)))}let sL=["<","&"];function sP(e,t,n,r){return n&&"element"===n.type&&("script"===n.tagName||"style"===n.tagName)?e.value:(0,s_.l)(e.value,Object.assign({},r.settings.characterReferences,{subset:sL}))}let sA=(0,s$.A)("type",{invalid:function(e){throw Error("Expected node, not `"+e+"`")},unknown:function(e){throw Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,n,r){return r.settings.bogusComments?"<?"+(0,s_.l)(e.value,Object.assign({},r.settings.characterReferences,{subset:sy}))+">":"<!--"+e.value.replace(sb,function(e){return(0,s_.l)(e,Object.assign({},r.settings.characterReferences,{subset:sv}))})+"-->"},doctype:function(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,n,r){let o=r.schema,i="svg"!==o.space&&r.settings.omitOptionalTags,l="svg"===o.space?r.settings.closeEmptyElements:r.settings.voids.includes(e.tagName.toLowerCase()),s=[],a;"html"===o.space&&"svg"===e.tagName&&(r.schema=sg.JW);let c=function(e,t){let n=[],r,o=-1;if(t){for(r in t)if(null!==t[r]&&void 0!==t[r]){let i=s7(e,r,t[r]);i&&n.push(i)}}for(;++o<n.length;){let l=e.settings.tightAttributes?n[o].charAt(n[o].length-1):void 0;o!==n.length-1&&'"'!==l&&"'"!==l&&(n[o]+=" ")}return n.join("")}(r,e.properties),d=r.all("html"===o.space&&"template"===e.tagName?e.content:e);return r.schema=o,d&&(l=!1),!c&&i&&sN(e,t,n)||(s.push("<",e.tagName,c?" "+c:""),l&&("svg"===o.space||r.settings.closeSelfClosing)&&(a=c.charAt(c.length-1),(!r.settings.tightSelfClosing||"/"===a||a&&'"'!==a&&"'"!==a)&&s.push(" "),s.push("/")),s.push(">")),s.push(d),l||i&&sM(e,t,n)||s.push("</"+e.tagName+">"),s.join("")},raw:function(e,t,n,r){return r.settings.allowDangerousHtml?e.value:sP(e,0,n,r)},root:function(e,t,n,r){return r.all(e)},text:sP}}),sR={},sO={},sD=[];function sI(e,t,n){return sA(e,t,n,this)}function sH(e){let t=[],n=e&&e.children||sD,r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}function sz(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split(/(\r?\n)/g),r=0,o=[];for(let i=0;i<n.length;i+=2){let l=t?n[i]+(n[i+1]||""):n[i];o.push([l,r]),r+=n[i].length,r+=n[i+1]?.length||0}return o}function s9(e){return!e||["plaintext","txt","text","plain"].includes(e)}function sB(e){return"ansi"===e||s9(e)}function sV(e){return"none"===e}function sj(e){return sV(e)}function sF(e,t){var n;if(!t)return e;e.properties||(e.properties={}),(n=e.properties).class||(n.class=[]),"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);let r=Array.isArray(t)?t:t.split(/\s+/g);for(let o of r)o&&!e.properties.class.includes(o)&&e.properties.class.push(o);return e}async function sU(e){return Promise.resolve("function"==typeof e?e():e).then(e=>e.default||e)}function sW(e,t){let n="string"==typeof e?{}:{...e.colorReplacements},r="string"==typeof e?e:e.name;for(let[o,i]of Object.entries(t?.colorReplacements||{}))"string"==typeof i?n[o]=i:o===r&&Object.assign(n,i);return n}function sG(e,t){return e&&t?.[e?.toLowerCase()]||e}function sq(e){let t={};return e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle&&(e.fontStyle&lx.Italic&&(t["font-style"]="italic"),e.fontStyle&lx.Bold&&(t["font-weight"]="bold"),e.fontStyle&lx.Underline&&(t["text-decoration"]="underline")),t}function sK(e){return"string"==typeof e?e:Object.entries(e).map(e=>{let[t,n]=e;return`${t}:${n}`}).join(";")}class sJ extends Error{constructor(e){super(e),this.name="ShikiError"}}var sZ=Object.defineProperty,sX=(e,t,n)=>{var r,o,i;return r=e,o="symbol"!=typeof t?t+"":t,i=n,o in r?sZ(r,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[o]=i,n};let sQ=new WeakMap;function sY(e,t){sQ.set(e,t)}function ae(e){return sQ.get(e)}class at{constructor(){sX(this,"_stacks",{}),sX(this,"lang");for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(2===t.length){let[r,o]=t;this.lang=o,this._stacks=r}else{let[i,l,s]=t;this.lang=l,this._stacks={[s]:i}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){var n;return new at(Object.fromEntries((Array.isArray(n=t)?n:[n]).map(e=>[e,sf])),e)}getInternalStack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theme;return this._stacks[e]}get scopes(){return an(this._stacks[this.theme])}getScopes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theme;return an(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function an(e){let t=[],n=new Set;return function e(r){if(n.has(r))return;n.add(r);let o=r?.nameScopesList?.scopeName;o&&t.push(o),r.parent&&e(r.parent)}(e),t}function ar(e){return"text"===e.type?e.value:"element"===e.type?e.children.map(ar).join(""):""}let ao=[function e(){let t=new WeakMap;function n(e){if(!t.has(e.meta)){let n=function(t){if("number"==typeof t){if(t<0||t>e.source.length)throw new sJ(`Invalid decoration offset: ${t}. Code length: ${e.source.length}`);return{...r.indexToPos(t),offset:t}}{let n=r.lines[t.line];if(void 0===n)throw new sJ(`Invalid decoration position ${JSON.stringify(t)}. Lines length: ${r.lines.length}`);if(t.character<0||t.character>n.length)throw new sJ(`Invalid decoration position ${JSON.stringify(t)}. Line ${t.line} length: ${n.length}`);return{...t,offset:r.posToIndex(t.line,t.character)}}},r=function(e){let t=sz(e,!0).map(e=>{let[t]=e;return t});return{lines:t,indexToPos:function(n){if(n===e.length)return{line:t.length-1,character:t[t.length-1].length};let r=n,o=0;for(let i of t){if(r<i.length)break;r-=i.length,o++}return{line:o,character:r}},posToIndex:function(e,n){let r=0;for(let o=0;o<e;o++)r+=t[o].length;return r+n}}}(e.source),o=(e.options.decorations||[]).map(e=>({...e,start:n(e.start),end:n(e.end)}));!function(e){for(let t=0;t<e.length;t++){let n=e[t];if(n.start.offset>n.end.offset)throw new sJ(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=t+1;r<e.length;r++){let o=e[r],i=n.start.offset<o.start.offset&&o.start.offset<n.end.offset,l=n.start.offset<o.end.offset&&o.end.offset<n.end.offset,s=o.start.offset<n.start.offset&&n.start.offset<o.end.offset,a=o.start.offset<n.end.offset&&n.end.offset<o.end.offset;if(i||l||s||a){if(l&&l||s&&a)continue;throw new sJ(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(o.start)} intersect.`)}}}}(o),t.set(e.meta,{decorations:o,converter:r,source:e.source})}return t.get(e.meta)}return{name:"shiki:decorations",tokens(e){if(!this.options.decorations?.length)return;let t=function(e,t){let n=Array.from(t instanceof Set?t:new Set(t)).sort((e,t)=>e-t);return n.length?e.map(e=>e.flatMap(e=>{let t=n.filter(t=>e.offset<t&&t<e.offset+e.content.length).map(t=>t-e.offset).sort((e,t)=>e-t);return t.length?function(e,t){let n=0,r=[];for(let o of t)o>n&&r.push({...e,content:e.content.slice(n,o),offset:e.offset+n}),n=o;return n<e.content.length&&r.push({...e,content:e.content.slice(n),offset:e.offset+n}),r}(e,t):e})):e}(e,n(this).decorations.flatMap(e=>[e.start.offset,e.end.offset]));return t},code(e){if(!this.options.decorations?.length)return;let t=n(this),r=Array.from(e.children).filter(e=>"element"===e.type&&"span"===e.tagName);if(r.length!==t.converter.lines.length)throw new sJ(`Number of lines in code element (${r.length}) does not match the number of lines in the source (${t.converter.lines.length}). Failed to apply decorations.`);function o(e,t,n,o){let i=r[e],s="",a=-1,c=-1;if(0===t&&(a=0),0===n&&(c=0),n===Number.POSITIVE_INFINITY&&(c=i.children.length),-1===a||-1===c)for(let d=0;d<i.children.length;d++)s+=ar(i.children[d]),-1===a&&s.length===t&&(a=d+1),-1===c&&s.length===n&&(c=d+1);if(-1===a)throw new sJ(`Failed to find start index for decoration ${JSON.stringify(o.start)}`);if(-1===c)throw new sJ(`Failed to find end index for decoration ${JSON.stringify(o.end)}`);let u=i.children.slice(a,c);if(o.alwaysWrap||u.length!==i.children.length){if(o.alwaysWrap||1!==u.length||"element"!==u[0].type){let h={type:"element",tagName:"span",properties:{},children:u};l(h,o,"wrapper"),i.children.splice(a,u.length,h)}else l(u[0],o,"token")}else l(i,o,"line")}function i(e,t){r[e]=l(r[e],t,"line")}function l(e,t,n){let r=t.properties||{},o=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...r,class:e.properties.class},t.properties?.class&&sF(e,t.properties.class),e=o(e,n)||e}let s=[],a=t.decorations.sort((e,t)=>t.start.offset-e.start.offset);for(let c of a){let{start:d,end:u}=c;if(d.line===u.line)o(d.line,d.character,u.character,c);else if(d.line<u.line){o(d.line,d.character,Number.POSITIVE_INFINITY,c);for(let h=d.line+1;h<u.line;h++)s.unshift(()=>i(h,c));o(u.line,0,u.character,c)}}s.forEach(e=>e())}}}()];function ai(e){return[...e.transformers||[],...ao]}var al=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],as={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function aa(e,t){let n=e.indexOf("\x1b[",t);if(-1!==n){let r=e.indexOf("m",n);return{sequence:e.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:e.length}}function ac(e,t){let n=1,r=e[t+n++],o;if("2"===r){let i=[e[t+n++],e[t+n++],e[t+n]].map(e=>Number.parseInt(e));3!==i.length||i.some(e=>Number.isNaN(e))||(o={type:"rgb",rgb:i})}else if("5"===r){let l=Number.parseInt(e[t+n]);Number.isNaN(l)||(o={type:"table",index:Number(l)})}return[n,o]}function ad(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n],o=Number.parseInt(r);if(!Number.isNaN(o)){if(0===o)t.push({type:"resetAll"});else if(o<=9)as[o]&&t.push({type:"setDecoration",value:as[o]});else if(o<=29){let i=as[o-20];i&&t.push({type:"resetDecoration",value:i})}else if(o<=37)t.push({type:"setForegroundColor",value:{type:"named",name:al[o-30]}});else if(38===o){let[l,s]=ac(e,n);s&&t.push({type:"setForegroundColor",value:s}),n+=l}else if(39===o)t.push({type:"resetForegroundColor"});else if(o<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:al[o-40]}});else if(48===o){let[a,c]=ac(e,n);c&&t.push({type:"setBackgroundColor",value:c}),n+=a}else 49===o?t.push({type:"resetBackgroundColor"}):o>=90&&o<=97?t.push({type:"setForegroundColor",value:{type:"named",name:al[o-90+8]}}):o>=100&&o<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:al[o-100+8]}})}}return t}var au={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function ah(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{lang:r="text",theme:o=e.getLoadedThemes()[0]}=n;if(s9(r)||sV(o))return sz(t).map(e=>[{content:e[0],offset:e[1]}]);let{theme:i,colorMap:l}=e.setTheme(o);if("ansi"===r)return function e(t,n,r){let o,i,l,s=sW(t,r),a=sz(n),c=function e(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:au;function r(e){return n[e]}function o(e){return`#${e.map(e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0")).join("")}`}return{value:function(e){var r,i;switch(e.type){case"named":return n[r=e.name];case"rgb":return o(e.rgb);case"table":return i=e.index,function(){if(t)return t;t=[];for(let e=0;e<al.length;e++){var r;t.push(n[r=al[e]])}let i=[0,95,135,175,215,255];for(let l=0;l<6;l++)for(let s=0;s<6;s++)for(let a=0;a<6;a++)t.push(o([i[l],i[s],i[a]]));let c=8;for(let d=0;d<24;d++,c+=10)t.push(o([c,c,c]));return t}()[i]}}}}(Object.fromEntries(al.map(e=>[e,t.colors?.[`terminal.ansi${e[0].toUpperCase()}${e.substring(1)}`]]))),d=(o=null,i=null,l=new Set,{parse(e){let t=[],n=0;do{let r=aa(e,n),s=r.sequence?e.substring(n,r.startPosition):e.substring(n);if(s.length>0&&t.push({value:s,foreground:o,background:i,decorations:new Set(l)}),r.sequence){let a=ad(r.sequence);for(let c of a)"resetAll"===c.type?(o=null,i=null,l.clear()):"resetForegroundColor"===c.type?o=null:"resetBackgroundColor"===c.type?i=null:"resetDecoration"===c.type&&l.delete(c.value);for(let d of a)"setForegroundColor"===d.type?o=d.value:"setBackgroundColor"===d.type?i=d.value:"setDecoration"===d.type&&l.add(d.value)}n=r.position}while(n<e.length);return t}});return a.map(e=>d.parse(e[0]).map(n=>{let r,o;n.decorations.has("reverse")?(r=n.background?c.value(n.background):t.bg,o=n.foreground?c.value(n.foreground):t.fg):(r=n.foreground?c.value(n.foreground):t.fg,o=n.background?c.value(n.background):void 0),r=sG(r,s),o=sG(o,s),n.decorations.has("dim")&&(r=function(e){let t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t){if(t[3]){let n=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${n}`}return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map(e=>`${e}${e}`).join("")}80`}let r=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return r?`var(${r[1]}-dim)`:e}(r));let i=lx.None;return n.decorations.has("bold")&&(i|=lx.Bold),n.decorations.has("italic")&&(i|=lx.Italic),n.decorations.has("underline")&&(i|=lx.Underline),{content:n.value,offset:e[1],color:r,bgColor:o,fontStyle:i}}))}(i,t,n);let s=e.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==s.name)throw new iQ(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${s.name}"`);if(!n.grammarState.themes.includes(i.name))throw new iQ(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return function(e,t,n,r,o){let i=ap(e,t,n,r,o),l=new at(ap(e,t,n,r,o).stateStack,t.name,n.name);return sY(i.tokens,l),i.tokens}(t,s,i,l,n)}function ap(e,t,n,r,o){var i;let l=sW(n,o),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:a=500}=o,c=sz(e),d=o.grammarState?function(e,t){if(!(e instanceof at))throw new sJ("Invalid grammar state");return e.getInternalStack(t)}(o.grammarState,n.name)??sf:null!=o.grammarContextCode?ap(o.grammarContextCode,t,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:sf,u=[],h=[];for(let p=0,f=c.length;p<f;p++){let[m,g]=c[p];if(""===m){u=[],h.push([]);continue}if(s>0&&m.length>=s){u=[],h.push([{content:m,offset:g,color:"",fontStyle:0}]);continue}let $,_,b;o.includeExplanation&&(_=($=t.tokenizeLine(m,d)).tokens,b=0);let y=t.tokenizeLine2(m,d,a),v=y.tokens.length/2;for(let w=0;w<v;w++){let k=y.tokens[2*w],x=w+1<v?y.tokens[2*w+2]:m.length;if(k===x)continue;let C=y.tokens[2*w+1],S=sG(r[l2.getForeground(C)],l),E=l2.getFontStyle(C),M={content:m.substring(k,x),offset:g+k,color:S,fontStyle:E};if(o.includeExplanation){let T=[];if("scopeName"!==o.includeExplanation)for(let N of n.settings){let L;switch(typeof N.scope){case"string":L=N.scope.split(/,/).map(e=>e.trim());break;case"object":L=N.scope;break;default:continue}T.push({settings:N,selectors:L.map(e=>e.split(/ /))})}M.explanation=[];let P=0;for(;k+P<x;){let A=_[b],R=m.substring(A.startIndex,A.endIndex);P+=R.length,M.explanation.push({content:R,scopes:"scopeName"===o.includeExplanation?(i=A.scopes).map(e=>({scopeName:e})):af(T,A.scopes)}),b+=1}}u.push(M)}h.push(u),u=[],d=y.ruleStack}return{tokens:h,stateStack:d}}function af(e,t){let n=[];for(let r=0,o=t.length;r<o;r++){let i=t[r];n[r]={scopeName:i,themeMatches:a$(e,i,t.slice(0,r))}}return n}function am(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function ag(e,t,n){if(!am(e[e.length-1],t))return!1;let r=e.length-2,o=n.length-1;for(;r>=0&&o>=0;)am(e[r],n[o])&&(r-=1),o-=1;return -1===r}function a$(e,t,n){let r=[];for(let{selectors:o,settings:i}of e)for(let l of o)if(ag(l,t,n)){r.push(i);break}return r}function a_(e,t,n){let r=Object.entries(n.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})),o=r.map(r=>{let o=ah(e,t,{...n,theme:r.theme});return{tokens:o,state:ae(o),theme:"string"==typeof r.theme?r.theme:r.theme.name}}),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t.map(()=>[]),o=t.length;for(let i=0;i<t[0].length;i++){let l=t.map(e=>e[i]),s=r.map(()=>[]);r.forEach((e,t)=>e.push(s[t]));let a=l.map(()=>0),c=l.map(e=>e[0]);for(;c.every(e=>e);){let d=Math.min(...c.map(e=>e.content.length));for(let u=0;u<o;u++){let h=c[u];h.content.length===d?(s[u].push(h),a[u]+=1,c[u]=l[u][a[u]]):(s[u].push({...h,content:h.content.slice(0,d)}),c[u]={...h,content:h.content.slice(d),offset:h.offset+d})}}}return r}(...o.map(e=>e.tokens)),l=i[0].map((e,t)=>e.map((e,o)=>{let l={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in n&&n.includeExplanation&&(l.explanation=e.explanation),i.forEach((e,n)=>{let{content:i,explanation:s,offset:a,...c}=e[t][o];l.variants[r[n].color]=c}),l})),s=o[0].state?new at(Object.fromEntries(o.map(e=>[e.theme,e.state?.getInternalStack(e.theme)])),o[0].state.lang):void 0;return s&&sY(l,s),l}function ab(e,t,n){let r,o,i,l,s,a;if("themes"in n){let{defaultColor:c="light",cssVariablePrefix:d="--shiki-"}=n,u=Object.entries(n.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})).sort((e,t)=>e.color===c?-1:t.color===c?1:0);if(0===u.length)throw new iQ("`themes` option must not be empty");let h=a_(e,t,n);if(a=ae(h),c&&!u.find(e=>e.color===c))throw new iQ(`\`themes\` option must contain the defaultColor key \`${c}\``);let p=u.map(t=>e.getTheme(t.theme)),f=u.map(e=>e.color);i=h.map(e=>e.map(e=>(function(e,t,n,r){let o={content:e.content,explanation:e.explanation,offset:e.offset},i=t.map(t=>sq(e.variants[t])),l=new Set(i.flatMap(e=>Object.keys(e))),s={};return i.forEach((e,o)=>{for(let i of l){let a=e[i]||"inherit";if(0===o&&r)s[i]=a;else{let c="color"===i?"":"background-color"===i?"-bg":`-${i}`,d=n+t[o]+("color"===i?"":c);s[d]=a}}}),o.htmlStyle=s,o})(e,f,d,c))),a&&sY(i,a);let m=u.map(e=>sW(e.theme,n));o=u.map((e,t)=>(0===t&&c?"":`${d+e.color}:`)+(sG(p[t].fg,m[t])||"inherit")).join(";"),r=u.map((e,t)=>(0===t&&c?"":`${d+e.color}-bg:`)+(sG(p[t].bg,m[t])||"inherit")).join(";"),l=`shiki-themes ${p.map(e=>e.name).join(" ")}`,s=c?void 0:[o,r].join(";")}else{if(!("theme"in n))throw new iQ("Invalid options, either `theme` or `themes` must be provided");{let g=sW(n.theme,n);i=ah(e,t,n);let $=e.getTheme(n.theme);r=sG($.bg,g),o=sG($.fg,g),l=$.name,a=ae(i)}}return{tokens:i,fg:o,bg:r,themeName:l,rootStyle:s,grammarState:a}}function ay(e,t,n){var r,o;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{meta:{},options:n,codeToHast:(t,n)=>ay(e,t,n),codeToTokens:(t,n)=>ab(e,t,n)},l=t;for(let s of ai(n))l=s.preprocess?.call(i,l,n)||l;let{tokens:a,fg:c,bg:d,themeName:u,rootStyle:h,grammarState:p}=ab(e,l,n),{mergeWhitespaces:f=!0}=n;!0===f?a=(r=a).map(e=>{let t=[],n="",r=0;return e.forEach((o,i)=>{let l=!(o.fontStyle&&o.fontStyle&lx.Underline);l&&o.content.match(/^\s+$/)&&e[i+1]?(r||(r=o.offset),n+=o.content):n?(l?t.push({...o,offset:r,content:n+o.content}):t.push({content:n,offset:r},o),r=0,n=""):t.push(o)}),t}):"never"===f&&(a=(o=a).map(e=>e.flatMap(e=>{if(e.content.match(/^\s+$/))return e;let t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;let[,n,r,o]=t;if(!n&&!o)return e;let i=[{...e,offset:e.offset+n.length,content:r}];return n&&i.unshift({content:n,offset:e.offset}),o&&i.push({content:o,offset:e.offset+n.length+r.length}),i})));let m={...i,get source(){return l}};for(let g of ai(n))a=g.tokens?.call(m,a)||a;return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae(e),o=ai(t),i=[],l={type:"root",children:[]},{structure:s="classic",tabindex:a="0"}=t,c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...!1!==a&&null!=a?{tabindex:a.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(e=>{let[t]=e;return!t.startsWith("_")}))},children:[]},d={type:"element",tagName:"code",properties:{},children:i},u=[],h={...n,structure:s,addClassToHast:sF,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return l},get pre(){return c},get code(){return d},get lines(){return u}};if(e.forEach((e,t)=>{t&&("inline"===s?l.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===s&&i.push({type:"text",value:"\n"}));let n={type:"element",tagName:"span",properties:{class:"line"},children:[]},r=0;for(let a of e){let c={type:"element",tagName:"span",properties:{...a.htmlAttrs},children:[{type:"text",value:a.content}]};"string"==typeof a.htmlStyle&&ld("`htmlStyle` as a string is deprecated. Use an object instead.");let d=sK(a.htmlStyle||sq(a));for(let p of(d&&(c.properties.style=d),o))c=p?.span?.call(h,c,t+1,r,n,a)||c;"inline"===s?l.children.push(c):"classic"===s&&n.children.push(c),r+=a.content.length}if("classic"===s){for(let f of o)n=f?.line?.call(h,n,t+1)||n;u.push(n),i.push(n)}}),"classic"===s){for(let p of o)d=p?.code?.call(h,d)||d;for(let f of(c.children.push(d),o))c=f?.pre?.call(h,c)||c;l.children.push(c)}let m=l;for(let g of o)m=g?.root?.call(h,m)||m;return r&&sY(m,r),m}(a,{...n,fg:c,bg:d,themeName:u,rootStyle:h},m,p)}let av="__shiki_resolved";function aw(e){if(e?.[av])return e;let t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||(t.type="dark"),t.colorReplacements={...t.colorReplacements},t.settings||(t.settings=[]);let{bg:n,fg:r}=t;if(!n||!r){let o=t.settings?t.settings.find(e=>!e.name&&!e.scope):void 0;o?.settings?.foreground&&(r=o.settings.foreground),o?.settings?.background&&(n=o.settings.background),!r&&t?.colors?.["editor.foreground"]&&(r=t.colors["editor.foreground"]),!n&&t?.colors?.["editor.background"]&&(n=t.colors["editor.background"]),r||(r="light"===t.type?"#333333":"#bbbbbb"),n||(n="light"===t.type?"#fffffe":"#1e1e1e"),t.fg=r,t.bg=n}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let i=0,l=new Map;function s(e){if(l.has(e))return l.get(e);i+=1;let n=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${n}`]?s(e):(l.set(e,n),n)}for(let a of(t.settings=t.settings.map(e=>{let n=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),r=e.settings?.background&&!e.settings.background.startsWith("#");if(!n&&!r)return e;let o={...e,settings:{...e.settings}};if(n){let i=s(e.settings.foreground);t.colorReplacements[i]=e.settings.foreground,o.settings.foreground=i}if(r){let l=s(e.settings.background);t.colorReplacements[l]=e.settings.background,o.settings.background=l}return o}),Object.keys(t.colors||{})))if(("editor.foreground"===a||"editor.background"===a||a.startsWith("terminal.ansi"))&&!t.colors[a]?.startsWith("#")){let c=s(t.colors[a]);t.colorReplacements[c]=t.colors[a],t.colors[a]=c}return Object.defineProperty(t,av,{enumerable:!1,writable:!1,value:!0}),t}async function ak(e){return Array.from(new Set((await Promise.all(e.filter(e=>!sB(e)).map(async e=>await sU(e).then(e=>Array.isArray(e)?e:[e])))).flat()))}async function a0(e){return(await Promise.all(e.map(async e=>{var t;return sV(t=e)?null:aw(await sU(e))}))).filter(e=>!!e)}var ax=Object.defineProperty,aC=(e,t,n)=>{var r,o,i;return r=e,o="symbol"!=typeof t?t+"":t,i=n,o in r?ax(r,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[o]=i,n};class aS extends sp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(e),this._resolver=e,this._themes=t,this._langs=n,this._alias=r,aC(this,"_resolvedThemes",new Map),aC(this,"_resolvedGrammars",new Map),aC(this,"_langMap",new Map),aC(this,"_langGraph",new Map),aC(this,"_textmateThemeCache",new WeakMap),aC(this,"_loadedThemesCache",null),aC(this,"_loadedLanguagesCache",null),this._themes.map(e=>this.loadTheme(e)),this.loadLanguages(this._langs)}getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){let t=aw(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=lb.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){let t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new sJ(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;let t=new Set([...this._langMap.values()].filter(t=>t.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);let n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);let r=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach(t=>{this._alias[t]=e.name}),this._loadedLanguagesCache=null,t.size)for(let o of t)this._resolvedGrammars.delete(o.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(o.scopeName),this._syncRegistry?._grammars?.delete(o.scopeName),this.loadLanguage(this._langMap.get(o.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(let t of e)this.resolveEmbeddedLanguages(t);let n=Array.from(this._langGraph.entries()),r=n.filter(e=>{let[t,n]=e;return!n});if(r.length){let o=n.filter(e=>{let[t,n]=e;return n&&n.embeddedLangs?.some(e=>r.map(e=>{let[t]=e;return t}).includes(e))}).filter(e=>!r.includes(e));throw new sJ(`Missing languages ${r.map(e=>{let[t]=e;return`\`${t}\``}).join(", ")}, required by ${o.map(e=>{let[t]=e;return`\`${t}\``}).join(", ")}`)}for(let[i,l]of n)this._resolver.addLanguage(l);for(let[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(let t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}}var a1=Object.defineProperty,a2=(e,t,n)=>{var r,o,i;return r=e,o="symbol"!=typeof t?t+"":t,i=n,o in r?a1(r,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[o]=i,n};class a3{constructor(e,t){a2(this,"_langs",new Map),a2(this,"_scopeToLang",new Map),a2(this,"_injections",new Map),a2(this,"_onigLib"),this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},t.forEach(e=>this.addLanguage(e))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){let t=e.split("."),n=[];for(let r=1;r<=t.length;r++){let o=t.slice(0,r).join(".");n=[...n,...this._injections.get(o)||[]]}return n}}let aE=0;async function a4(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.loadWasm&&ld("`loadWasm` option is deprecated. Use `engine: createOnigurumaEngine(loadWasm)` instead.");let[t,n,r]=await Promise.all([a0(e.themes||[]),ak(e.langs||[]),e.engine||lc(e.loadWasm||lr)]);return function e(t){aE+=1,!1!==t.warnings&&aE>=10&&aE%10==0&&console.warn(`[Shiki] ${aE} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let n=!1;if(!t.engine)throw new sJ("`engine` option is required for synchronous mode");let r=(t.langs||[]).flat(1),o=(t.themes||[]).flat(1).map(aw),i=new a3(t.engine,r),l=new aS(i,o,r,t.langAlias),s;function a(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};u();let t=l.getTheme(e);if(!t)throw new sJ(`Theme \`${e}\` not found, you may need to load it first`);return t}function c(){u();for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.loadLanguages(t.flat(1))}function d(){u();for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r of t.flat(1))l.loadTheme(r)}function u(){if(n)throw new sJ("Shiki instance has been disposed")}function h(){n||(n=!0,l.dispose(),aE-=1)}return{setTheme:function(e){u();let t=a(e);return s!==e&&(l.setTheme(t),s=e),{theme:t,colorMap:l.getColorMap()}},getTheme:a,getLanguage:function(e){u();let t=l.getGrammar("string"==typeof e?e:e.name);if(!t)throw new sJ(`Language \`${e}\` not found, you may need to load it first`);return t},getLoadedThemes:function(){return u(),l.getLoadedThemes()},getLoadedLanguages:function(){return u(),l.getLoadedLanguages()},loadLanguage:async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return c(await ak(t))},loadLanguageSync:c,loadTheme:async function(){u();for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return d(await a0(t))},loadThemeSync:d,dispose:h,[Symbol.dispose]:h}}({...e,loadWasm:void 0,themes:t,langs:n,engine:r})}async function aM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=await a4(e);return{getLastGrammarState:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if(2===n.length)return ae(n[1]);let[o,i,l={}]=n,{lang:s="text",theme:a=o.getLoadedThemes()[0]}=l;if(s9(s)||sV(a))throw new iQ("Plain language does not have grammar state");if("ansi"===s)throw new iQ("ANSI language does not have grammar state");let{theme:c,colorMap:d}=o.setTheme(a),u=o.getLanguage(s);return new at(ap(i,u,c,d,l).stateStack,u.name,c.name)}(t,...n)},codeToTokensBase:(e,n)=>ah(t,e,n),codeToTokensWithThemes:(e,n)=>a_(t,e,n),codeToTokens:(e,n)=>ab(t,e,n),codeToHast:(e,n)=>ay(t,e,n),codeToHtml:(e,n)=>(function e(t,n,r){let o={meta:{},options:r,codeToHast:(e,n)=>ay(t,e,n),codeToTokens:(e,n)=>ab(t,e,n)},i=function(e,t){let n=sR,r=n.quote||'"';if('"'!==r&&"'"!==r)throw Error("Invalid quote `"+r+"`, expected `'` or `\"`");return({one:sI,all:sH,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||sm,characterReferences:n.characterReferences||sO,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:"svg"===n.space?sg.JW:sg.qy,quote:r,alternative:'"'===r?"'":'"'}).one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}(ay(t,n,r,o));for(let l of ai(r))i=l.postprocess?.call(o,i,r)||i;return i})(t,e,n),...t,getInternalContext:()=>t}}let aT=function e(t,n,r){let o,i,l;if(n)ld("`createdBundledHighlighter` signature with `bundledLanguages` and `bundledThemes` is deprecated. Use the options object signature instead."),o=t,i=n,l=()=>{var e;return e=void 0,ld("import `createOnigurumaEngine` from `@shikijs/engine-oniguruma` or `shiki/engine/oniguruma` instead"),lc(e)};else{let s=t;o=s.langs,i=s.themes,l=s.engine}return async function(e){function t(e){if("string"==typeof e){if(sB(e))return[];let t=o[e];if(!t)throw new iQ(`Language \`${e}\` is not included in this bundle. You may want to load it from external source.`);return t}return e}function n(e){var t;if(sV(t=e))return"none";if("string"==typeof e){let n=i[e];if(!n)throw new iQ(`Theme \`${e}\` is not included in this bundle. You may want to load it from external source.`);return n}return e}let r=(e.themes??[]).map(e=>n(e)),s=(e.langs??[]).map(e=>t(e)),a=await aM({engine:e.engine??l(),...e,themes:r,langs:s});return{...a,loadLanguage(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return a.loadLanguage(...n.map(t))},loadTheme(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.loadTheme(...t.map(n))}}}}({langs:iJ,themes:iX,engine:()=>lc(n.e(9335).then(n.bind(n,9335)))}),{codeToHtml:a8,codeToHast:a6,codeToTokens:aN,codeToTokensBase:a5,codeToTokensWithThemes:a7,getSingletonHighlighter:aL,getLastGrammarState:aP}=function e(t){var n;let r,o=(n=t,async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r){let t=await r;return await Promise.all([t.loadTheme(...e.themes||[]),t.loadLanguage(...e.langs||[])]),t}return r=n({...e,themes:e.themes||[],langs:e.langs||[]})});return{getSingletonHighlighter:e=>o(e),codeToHtml:async(e,t)=>(await o({langs:[t.lang],themes:"theme"in t?[t.theme]:Object.values(t.themes)})).codeToHtml(e,t),codeToHast:async(e,t)=>(await o({langs:[t.lang],themes:"theme"in t?[t.theme]:Object.values(t.themes)})).codeToHast(e,t),codeToTokens:async(e,t)=>(await o({langs:[t.lang],themes:"theme"in t?[t.theme]:Object.values(t.themes)})).codeToTokens(e,t),codeToTokensBase:async(e,t)=>(await o({langs:[t.lang],themes:[t.theme]})).codeToTokensBase(e,t),codeToTokensWithThemes:async(e,t)=>(await o({langs:[t.lang],themes:Object.values(t.themes).filter(Boolean)})).codeToTokensWithThemes(e,t),getLastGrammarState:async(e,t)=>(await o({langs:[t.lang],themes:[t.theme]})).getLastGrammarState(e,t)}}(aT),aA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,aR=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,aO=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,aD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,aI=oR.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML(e){let{HTMLAttributes:t}=e;return["strong",o2(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[iT({find:aA,type:this.type}),iT({find:aO,type:this.type})]},addPasteRules(){return[iN({find:aR,type:this.type}),iN({find:aD,type:this.type})]}}),aH=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,az=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,a9=oR.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:t}=e;return["code",o2(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[iT({find:aH,type:this.type})]},addPasteRules(){return[iN({find:az,type:this.type})]}}),aB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,aV=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,aj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aF=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,aU=oR.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["em",o2(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[iT({find:aB,type:this.type}),iT({find:aj,type:this.type})]},addPasteRules(){return[iN({find:aV,type:this.type}),iN({find:aF,type:this.type})]}}),aW=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,aG=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,aq=oR.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["s",o2(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleStrike:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetStrike:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[iT({find:aW,type:this.type})]},addPasteRules(){return[iN({find:aG,type:this.type})]}}),aK=oR.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["u",o2(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleUnderline:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetUnderline:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),aJ=i8.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML(e){let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML(e){let{HTMLAttributes:t}=e;return["td",o2(this.options.HTMLAttributes,t),0]}}),aZ=i8.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML(e){let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML(e){let{HTMLAttributes:t}=e;return["th",o2(this.options.HTMLAttributes,t),0]}}),aX=i8.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["tr",o2(this.options.HTMLAttributes,t),0]}});if("undefined"!=typeof WeakMap){let aQ=new WeakMap;vV=e=>aQ.get(e),vj=(e,t)=>(aQ.set(e,t),t)}else{let aY=[],ce=0;vV=e=>{for(let t=0;t<aY.length;t+=2)if(aY[t]==e)return aY[t+1]},vj=(e,t)=>(10==ce&&(ce=0),aY[ce++]=e,aY[ce++]=t)}var ct=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let r=t%this.width,o=t/this.width|0,i=r+1,l=o+1;for(let s=1;i<this.width&&this.map[t+s]==n;s++)i++;for(let a=1;l<this.height&&this.map[t+this.width*a]==n;a++)l++;return{left:r,top:o,right:i,bottom:l}}throw RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){let{left:r,right:o,top:i,bottom:l}=this.findCell(e);return"horiz"==t?(n<0?0==r:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?0==i:l==this.height)?null:this.map[r+this.width*(n<0?i-1:l)]}rectBetween(e,t){let{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:l,right:s,top:a,bottom:c}=this.findCell(t);return{left:Math.min(n,l),top:Math.min(o,a),right:Math.max(r,s),bottom:Math.max(i,c)}}cellsInRect(e){let t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){let i=r*this.width+o,l=this.map[i];n[l]||(n[l]=!0,o==e.left&&o&&this.map[i-1]==l||r==e.top&&r&&this.map[i-this.width]==l||t.push(l))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){let i=o+n.child(r).nodeSize;if(r==e){let l=t+e*this.width,s=(e+1)*this.width;for(;l<s&&this.map[l]<o;)l++;return l==s?i-1:this.map[l]}o=i}}static get(e){return vV(e)||vj(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){let o=e.child(r),i=0;if(n)for(let l=0;l<r;l++){let s=e.child(l);for(let a=0;a<s.childCount;a++){let c=s.child(a);l+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let d=0;d<o.childCount;d++){let u=o.child(d);i+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,l=[];for(let s=0,a=t*n;s<a;s++)r[s]=0;for(let c=0,d=0;c<n;c++){let u=e.child(c);d++;for(let h=0;;h++){for(;o<r.length&&0!=r[o];)o++;if(h==u.childCount)break;let p=u.child(h),{colspan:f,rowspan:m,colwidth:g}=p.attrs;for(let $=0;$<m;$++){if($+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:d,n:m-$});break}let _=o+$*t;for(let b=0;b<f;b++){0==r[_+b]?r[_+b]=d:(i||(i=[])).push({type:"collision",row:c,pos:d,n:f-b});let y=g&&g[b];if(y){let v=(_+b)%t*2,w=l[v];null==w||w!=y&&1==l[v+1]?(l[v]=y,l[v+1]=1):w==y&&l[v+1]++}}}o+=f,d+=p.nodeSize}let k=(c+1)*t,x=0;for(;o<k;)0==r[o++]&&x++;x&&(i||(i=[])).push({type:"missing",row:c,n:x}),d++}let C=new ct(t,n,r,i),S=!1;for(let E=0;!S&&E<l.length;E+=2)null!=l[E]&&l[E+1]<n&&(S=!0);return S&&function(e,t,n){e.problems||(e.problems=[]);let r={};for(let o=0;o<e.map.length;o++){let i=e.map[o];if(r[i])continue;r[i]=!0;let l=n.nodeAt(i);if(!l)throw RangeError(`No cell with offset ${i} found`);let s=null,a=l.attrs;for(let c=0;c<a.colspan;c++){let d=t[2*((o+c)%e.width)];null==d||a.colwidth&&a.colwidth[c]==d||((s||(s=cn(a)))[c]=d)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}(C,l,e),C}(e))}};function cn(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function cr(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}var co=new tc("selectingCells");function ci(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function cl(e){let t=e.selection.$head;for(let n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function cs(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;let n=ci(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){let l=o.type.spec.tableRole;if("cell"==l||"header_cell"==l)return e.doc.resolve(i-o.nodeSize)}}(t.$head);if(n)return n;throw RangeError(`No cell found around position ${t.head}`)}function ca(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function cc(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function cd(e,t,n){let r=e.node(-1),o=ct.get(r),i=e.start(-1),l=o.nextCell(e.pos-i,t,n);return null==l?null:e.node(0).resolve(i+l)}function cu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(e=>e>0)||(r.colwidth=null)),r}var ch=class e extends ej{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=e.node(-1),r=ct.get(n),o=e.start(-1),i=r.rectBetween(e.pos-o,t.pos-o),l=e.node(0),s=r.cellsInRect(i).filter(e=>e!=t.pos-o);s.unshift(t.pos-o);let a=s.map(e=>{let t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);let r=o+e+1;return new eF(l.resolve(r),l.resolve(r+t.content.size))});super(a[0].$from,a[0].$to,a),this.$anchorCell=e,this.$headCell=t}map(t,n){let r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(ca(r)&&ca(o)&&cc(r,o)){let i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?e.rowSelection(r,o):i&&this.isColSelection()?e.colSelection(r,o):new e(r,o)}return eG.between(r,o)}content(){let e=this.$anchorCell.node(-1),t=ct.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let l=r.top;l<r.bottom;l++){let s=[];for(let c=l*t.width+r.left,d=r.left;d<r.right;d++,c++){let u=t.map[c];if(o[u])continue;o[u]=!0;let h=t.findCell(u),p=e.nodeAt(u);if(!p)throw RangeError(`No cell with offset ${u} found`);let m=r.left-h.left,g=h.right-r.right;if(m>0||g>0){let $=p.attrs;if(m>0&&($=cu($,0,m)),g>0&&($=cu($,$.colspan-g,g)),h.left<r.left){if(!(p=p.type.createAndFill($)))throw RangeError(`Could not create cell with attrs ${JSON.stringify($)}`)}else p=p.type.create($,p.content)}if(h.top<r.top||h.bottom>r.bottom){let _={...p.attrs,rowspan:Math.min(h.bottom,r.bottom)-Math.max(h.top,r.top)};p=h.top<r.top?p.type.createAndFill(_):p.type.create(_,p.content)}s.push(p)}i.push(e.child(l).copy(a.from(s)))}let b=this.isColSelection()&&this.isRowSelection()?e:i;return new f(a.from(b),1,1)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.empty,n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:l}=r[o],s=e.mapping.slice(n);e.replace(s.map(i.pos),s.map(l.pos),o?f.empty:t)}let a=ej.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);a&&e.setSelection(a)}replaceWith(e,t){this.replace(e,new f(a.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),n=ct.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;let n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=t.node(-1),o=ct.get(r),i=t.start(-1),l=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return l.top<=s.top?(l.top>0&&(t=a.resolve(i+o.map[l.left])),s.bottom<o.height&&(n=a.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+o.map[s.left])),l.bottom<o.height&&(t=a.resolve(i+o.map[o.width*(o.height-1)+l.right-1]))),new e(t,n)}isRowSelection(){let e=this.$anchorCell.node(-1),t=ct.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;let i=r+this.$anchorCell.nodeAfter.attrs.colspan,l=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,l)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=t.node(-1),o=ct.get(r),i=t.start(-1),l=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return l.left<=s.left?(l.left>0&&(t=a.resolve(i+o.map[l.top*o.width])),s.right<o.width&&(n=a.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+o.map[s.top*o.width])),l.right<o.width&&(t=a.resolve(i+o.map[o.width*(l.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new cp(this.$anchorCell.pos,this.$headCell.pos)}};ch.prototype.visible=!1,ej.jsonID("cell",ch);var cp=class e{constructor(e,t){this.anchor=e,this.head=t}map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&cc(t,n)?new ch(t,n):ej.near(n,1)}};function cf(e){if(!(e.selection instanceof ch))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(rg.node(n,n+e.nodeSize,{class:"selectedCell"}))}),rb.create(e.doc,t)}var cm=new tc("fix-tables");function cg(e){let t=e.selection,n=cs(e),r=n.node(-1),o=n.start(-1),i=ct.get(r);return{...t instanceof ch?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function c$(e,t,n){let r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let o=0;o<r.length;o++){let i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function c_(e,t){var n;return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?(n=e,function(e,t){if(!cl(e))return!1;if(t){let r=cr(e.schema),o=cg(e),i=e.tr,l=o.map.cellsInRect("column"==n?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==n?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),s=l.map(e=>o.table.nodeAt(e));for(let a=0;a<l.length;a++)s[a].type==r.header_cell&&i.setNodeMarkup(o.tableStart+l[a],r.cell,s[a].attrs);if(0==i.steps.length)for(let c=0;c<l.length;c++)i.setNodeMarkup(o.tableStart+l[c],r.header_cell,s[c].attrs);t(i)}return!0}):function(t,n){if(!cl(t))return!1;if(n){let r=cr(t.schema),o=cg(t),i=t.tr,l=c$("row",o,r),s=c$("column",o,r),a=("column"===e?l:"row"===e&&s)?1:0,c="column"==e?{left:0,top:a,right:1,bottom:o.map.height}:"row"==e?{left:a,top:0,right:o.map.width,bottom:1}:o,d="column"==e?s?r.cell:r.header_cell:"row"==e?l?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach(e=>{let t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,d,n.attrs)}),n(i)}return!0}}function cb(e,t){let n=e.selection;if(!(n instanceof ch))return!1;if(t){let r=e.tr,o=cr(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new f(o,0,0))}),r.docChanged&&t(r)}return!0}function cy(e,t){let n=e.createAndFill();return new eB(n).replace(0,n.content.size,t).doc}function cv(e,t,n,r,o,i,l,s){if(0==l||l==t.height)return!1;let a=!1;for(let c=o;c<i;c++){let d=l*t.width+c,u=t.map[d];if(t.map[d-t.width]==u){a=!0;let h=n.nodeAt(u),{top:p,left:f}=t.findCell(u);e.setNodeMarkup(e.mapping.slice(s).map(u+r),null,{...h.attrs,rowspan:l-p}),e.insert(e.mapping.slice(s).map(t.positionAt(l,f,n)),h.type.createAndFill({...h.attrs,rowspan:p+h.attrs.rowspan-l})),c+=h.attrs.colspan-1}}return a}function cw(e,t,n,r,o,i,l,s){if(0==l||l==t.width)return!1;let a=!1;for(let c=o;c<i;c++){let d=c*t.width+l,u=t.map[d];if(t.map[d-1]==u){a=!0;let h=n.nodeAt(u),p=t.colCount(u),f=e.mapping.slice(s).map(u+r);e.setNodeMarkup(f,null,cu(h.attrs,l-p,h.attrs.colspan-(l-p))),e.insert(f+h.nodeSize,h.type.createAndFill(cu(h.attrs,0,l-p))),c+=h.attrs.rowspan-1}}return a}function ck(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw Error("No table found");let l=ct.get(i),{top:s,left:c}=r,d=c+o.width,u=s+o.height,h=e.tr,p=0;function m(){if(!(i=n?h.doc.nodeAt(n-1):h.doc))throw Error("No table found");l=ct.get(i),p=h.mapping.maps.length}(function(e,t,n,r,o,i,l){let s=cr(e.doc.type.schema),c,d;if(o>t.width)for(let u=0,h=0;u<t.height;u++){let p=n.child(u);h+=p.nodeSize;let f=[],m;m=null==p.lastChild||p.lastChild.type==s.cell?c||(c=s.cell.createAndFill()):d||(d=s.header_cell.createAndFill());for(let g=t.width;g<o;g++)f.push(m);e.insert(e.mapping.slice(l).map(h-1+r),f)}if(i>t.height){let $=[];for(let _=0,b=(t.height-1)*t.width;_<Math.max(t.width,o);_++){let y=!(_>=t.width)&&n.nodeAt(t.map[b+_]).type==s.header_cell;$.push(y?d||(d=s.header_cell.createAndFill()):c||(c=s.cell.createAndFill()))}let v=s.row.create(null,a.from($)),w=[];for(let k=t.height;k<i;k++)w.push(v);e.insert(e.mapping.slice(l).map(r+n.nodeSize-2),w)}return!(!c&&!d)})(h,l,i,n,d,u,p)&&m(),cv(h,l,i,n,c,d,s,p)&&m(),cv(h,l,i,n,c,d,u,p)&&m(),cw(h,l,i,n,s,u,c,p)&&m(),cw(h,l,i,n,s,u,d,p)&&m();for(let g=s;g<u;g++){let $=l.positionAt(g,c,i),_=l.positionAt(g,d,i);h.replace(h.mapping.slice(p).map($+n),h.mapping.slice(p).map(_+n),new f(o.rows[g-s],0,0))}m(),h.setSelection(new ch(h.doc.resolve(n+l.positionAt(s,c,i)),h.doc.resolve(n+l.positionAt(u-1,d-1,i)))),t(h)}c_("row",{useDeprecatedLogic:!0}),c_("column",{useDeprecatedLogic:!0}),c_("cell",{useDeprecatedLogic:!0});var c0=rG({ArrowLeft:cC("horiz",-1),ArrowRight:cC("horiz",1),ArrowUp:cC("vert",-1),ArrowDown:cC("vert",1),"Shift-ArrowLeft":cS("horiz",-1),"Shift-ArrowRight":cS("horiz",1),"Shift-ArrowUp":cS("vert",-1),"Shift-ArrowDown":cS("vert",1),Backspace:cb,"Mod-Backspace":cb,Delete:cb,"Mod-Delete":cb});function cx(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function cC(e,t){return(n,r,o)=>{if(!o)return!1;let i=n.selection;if(i instanceof ch)return cx(n,r,ej.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;let l=cE(o,e,t);if(null==l)return!1;if("horiz"==e)return cx(n,r,ej.near(n.doc.resolve(i.head+t),t));{let s=n.doc.resolve(l),a=cd(s,e,t),c;return c=a?ej.near(a,1):t<0?ej.near(n.doc.resolve(s.before(-1)),-1):ej.near(n.doc.resolve(s.after(-1)),1),cx(n,r,c)}}}function cS(e,t){return(n,r,o)=>{if(!o)return!1;let i=n.selection,l;if(i instanceof ch)l=i;else{let s=cE(o,e,t);if(null==s)return!1;l=new ch(n.doc.resolve(s))}let a=cd(l.$headCell,e,t);return!!a&&cx(n,r,new ch(l.$anchorCell,a))}}function c1(e,t){let n=ci(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new ch(n))),!0)}function c2(e,t,n){if(!cl(e.state))return!1;let r=function e(t){if(!t.size)return null;let{content:n,openStart:r,openEnd:o}=t;for(;1==n.childCount&&(r>0&&o>0||"table"==n.child(0).type.spec.tableRole);)r--,o--,n=n.child(0).content;let i=n.child(0),l=i.type.spec.tableRole,s=i.type.schema,c=[];if("row"==l)for(let d=0;d<n.childCount;d++){let u=n.child(d).content,h=d?0:Math.max(0,r-1),p=d<n.childCount-1?0:Math.max(0,o-1);(h||p)&&(u=cy(cr(s).row,new f(u,h,p)).content),c.push(u)}else{if("cell"!=l&&"header_cell"!=l)return null;c.push(r||o?cy(cr(s).row,new f(n,r,o)).content:n)}return function(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r];for(let i=o.childCount-1;i>=0;i--){let{rowspan:l,colspan:s}=o.child(i).attrs;for(let c=r;c<r+l;c++)n[c]=(n[c]||0)+s}}let d=0;for(let u=0;u<n.length;u++)d=Math.max(d,n[u]);for(let h=0;h<n.length;h++)if(h>=t.length&&t.push(a.empty),n[h]<d){let p=cr(e).cell.createAndFill(),f=[];for(let m=n[h];m<d;m++)f.push(p);t[h]=t[h].append(a.from(f))}return{height:t.length,width:d,rows:t}}(s,c)}(n),o=e.state.selection;if(o instanceof ch){r||(r={width:1,height:1,rows:[a.from(cy(cr(e.state.schema).cell,n))]});let i=o.$anchorCell.node(-1),l=o.$anchorCell.start(-1),s=ct.get(i).rectBetween(o.$anchorCell.pos-l,o.$headCell.pos-l);return r=function(e,t,n){let{width:r,height:o,rows:i}=e;if(r!=t){let l=[],s=[];for(let c=0;c<i.length;c++){let d=i[c],u=[];for(let h=l[c]||0,p=0;h<t;p++){let f=d.child(p%d.childCount);h+f.attrs.colspan>t&&(f=f.type.createChecked(cu(f.attrs,f.attrs.colspan,h+f.attrs.colspan-t),f.content)),u.push(f),h+=f.attrs.colspan;for(let m=1;m<f.attrs.rowspan;m++)l[c+m]=(l[c+m]||0)+f.attrs.colspan}s.push(a.from(u))}i=s,r=t}if(o!=n){let g=[];for(let $=0,_=0;$<n;$++,_++){let b=[],y=i[_%o];for(let v=0;v<y.childCount;v++){let w=y.child(v);$+w.attrs.rowspan>n&&(w=w.type.create({...w.attrs,rowspan:Math.max(1,n-w.attrs.rowspan)},w.content)),b.push(w)}g.push(a.from(b))}i=g,o=n}return{width:r,height:o,rows:i}}(r,s.right-s.left,s.bottom-s.top),ck(e.state,e.dispatch,l,s,r),!0}if(r){let c=cs(e.state),d=c.start(-1);return ck(e.state,e.dispatch,d,ct.get(c.node(-1)).findCell(c.pos-d),r),!0}return!1}function c3(e,t){var n;if(t.ctrlKey||t.metaKey)return;let r=c4(e,t.target),o;if(t.shiftKey&&e.state.selection instanceof ch)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(o=ci(e.state.selection.$anchor))&&(null==(n=cM(e,t))?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(t,n){let r=cM(e,n),o=null==co.getState(e.state);if(!r||!cc(t,r)){if(!o)return;r=t}let i=new ch(t,r);if(o||!e.state.selection.eq(i)){let l=e.state.tr.setSelection(i);o&&l.setMeta(co,t.pos),e.dispatch(l)}}function l(){e.root.removeEventListener("mouseup",l),e.root.removeEventListener("dragstart",l),e.root.removeEventListener("mousemove",s),null!=co.getState(e.state)&&e.dispatch(e.state.tr.setMeta(co,-1))}function s(n){let o=n,s=co.getState(e.state),a;if(null!=s)a=e.state.doc.resolve(s);else if(c4(e,o.target)!=r&&!(a=cM(e,t)))return l();a&&i(a,o)}e.root.addEventListener("mouseup",l),e.root.addEventListener("dragstart",l),e.root.addEventListener("mousemove",s)}function cE(e,t,n){if(!(e.state.selection instanceof eG))return null;let{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){let i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))break;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){let l=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?l:null}}return null}function c4(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function cM(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?ci(e.state.doc.resolve(n.pos)):null}var cT=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),c8(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,c8(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function c8(e,t,n,r,o,i){var l;let s=0,a=!0,c=t.firstChild,d=e.firstChild;if(d){for(let u=0,h=0;u<d.childCount;u++){let{colspan:p,colwidth:f}=d.child(u).attrs;for(let m=0;m<p;m++,h++){let g=o==h?i:f&&f[m],$=g?g+"px":"";if(s+=g||r,g||(a=!1),c)c.style.width!=$&&(c.style.width=$),c=c.nextSibling;else{let _=document.createElement("col");_.style.width=$,t.appendChild(_)}}}for(;c;){let b=c.nextSibling;null==(l=c.parentNode)||l.removeChild(c),c=b}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var c6=new tc("tableColumnResizing"),cN=class e{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(t){let n=t.getMeta(c6);if(n&&null!=n.setHandle)return new e(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new e(this.activeHandle,n.setDragging);if(this.activeHandle>-1&&t.docChanged){let r=t.mapping.map(this.activeHandle,-1);return ca(t.doc.resolve(r))||(r=-1),new e(r,this.dragging)}return this}};function c5(e,t,n,r){let o=e.posAtCoords({left:t.clientX+("right"==n?-r:r),top:t.clientY});if(!o)return -1;let{pos:i}=o,l=ci(e.state.doc.resolve(i));if(!l)return -1;if("right"==n)return l.pos;let s=ct.get(l.node(-1)),a=l.start(-1),c=s.map.indexOf(l.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function c7(e,t,n){let r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function cL(e,t){e.dispatch(e.state.tr.setMeta(c6,{setHandle:t}))}function cP(e,t,n,r){let o=e.state.doc.resolve(t),i=o.node(-1),l=o.start(-1),s=ct.get(i).colCount(o.pos-l)+o.nodeAfter.attrs.colspan-1,a=e.domAtPos(o.start(-1)).node;for(;a&&"TABLE"!=a.nodeName;)a=a.parentNode;a&&c8(i,a.firstChild,a,r,s,n)}function cA(e){return Array(e).fill(0)}let cR=new tc("y-sync"),cO=new tc("y-undo"),cD=new tc("yjs-cursor"),cI=Math.floor,cH=Math.abs,cz=(e,t)=>e<t?e:t,c9=(e,t)=>e>t?e:t,cB=e=>0!==e?e<0:1/e<0,cV=Object.assign,cj=Object.keys,cF=e=>cj(e).length,cU=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),cW=Object.freeze,cG=e=>{for(let t in e){let n=e[t];"object"!=typeof n&&"function"!=typeof n||cG(e[t])}return cW(e)},cq=()=>new Set,cK=/[\uD800-\uDBFF]/,cJ=/[\uDC00-\uDFFF]/,cZ=(e,t)=>{let n=0,r=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;for(n>0&&cK.test(e[n-1])&&n--;r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1];)r++;return r>0&&cJ.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},cX=e=>Error(e),cQ=()=>{throw cX("Method unimplemented")},cY=()=>{throw cX("Unexpected case")},de=()=>new Map,dt=e=>{let t=de();return e.forEach((e,n)=>{t.set(n,e)}),t},dn=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},dr=e=>e[e.length-1],di=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},dl=Array.from,ds=Array.isArray;class da{constructor(){this._observers=de()}on(e,t){return dn(this._observers,e,cq).add(t),t}once(e,t){var n=this;let r=function(){n.off(e,r),t(...arguments)};this.on(e,r)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return dl((this._observers.get(e)||de()).values()).forEach(e=>e(...t))}destroy(){this._observers=de()}}let dc=Number.MAX_SAFE_INTEGER,dd=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&cI(e)===e),du=String.fromCharCode,dh=(du(65535),/^\s*/g),dp=/([A-Z])/g,df=(e,t)=>{var n;return e.replace(dp,e=>{var n;return`${t}${e.toLowerCase()}`}).replace(dh,"")},dm="undefined"!=typeof TextEncoder?new TextEncoder:null,dg=dm?e=>dm.encode(e):e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},d$="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});d$&&1===d$.decode(new Uint8Array).length&&(d$=null);class d_{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let db=()=>new d_,dy=e=>{let t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e)),n=0;for(let r=0;r<e.bufs.length;r++){let o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},dv=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},dw=dv,dk=(e,t)=>{for(;t>127;)dv(e,128|127&t),t=cI(t/128);dv(e,127&t)},d0=(e,t)=>{let n=cB(t);for(n&&(t=-t),dv(e,(t>63?128:0)|(n?64:0)|63&t),t=cI(t/64);t>0;)dv(e,(t>127?128:0)|127&t),t=cI(t/128)},dx=new Uint8Array(3e4),dC=dx.length/3,dS=dm&&dm.encodeInto?(e,t)=>{if(t.length<dC){let n=dm.encodeInto(t,dx).written||0;dk(e,n);for(let r=0;r<n;r++)dv(e,dx[r])}else d2(e,dg(t))}:(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;dk(e,r);for(let o=0;o<r;o++)dv(e,n.codePointAt(o))},d1=(e,t)=>{let n=e.cbuf.length,r=e.cpos,o=cz(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(c9(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},d2=(e,t)=>{dk(e,t.byteLength),d1(e,t)},d3=(e,t)=>{((e,t)=>{let n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*c9(n,t)),e.cpos=0)})(e,t);let n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},dE=new DataView(new ArrayBuffer(4)),d4=(e,t)=>{var n;switch(typeof t){case"string":dv(e,119),dS(e,t);break;case"number":dd(t)&&2147483647>=cH(t)?(dv(e,125),d0(e,t)):(n=t,dE.setFloat32(0,n),dE.getFloat32(0)===n?(dv(e,124),((e,t)=>{d3(e,4).setFloat32(0,t,!1)})(e,t)):(dv(e,123),((e,t)=>{d3(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":dv(e,122),((e,t)=>{d3(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)dv(e,126);else if(ds(t)){dv(e,117),dk(e,t.length);for(let r=0;r<t.length;r++)d4(e,t[r])}else if(t instanceof Uint8Array)dv(e,116),d2(e,t);else{dv(e,118);let o=Object.keys(t);dk(e,o.length);for(let i=0;i<o.length;i++){let l=o[i];dS(e,l),d4(e,t[l])}}break;case"boolean":dv(e,t?120:121);break;default:dv(e,127)}};class dM extends d_{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&dk(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}let dT=e=>{e.count>0&&(d0(e.encoder,1===e.count?e.s:-e.s),e.count>1&&dk(e.encoder,e.count-2))};class d8{constructor(){this.encoder=new d_,this.s=0,this.count=0}write(e){this.s===e?this.count++:(dT(this),this.count=1,this.s=e)}toUint8Array(){return dT(this),dy(this.encoder)}}let d6=e=>{if(e.count>0){let t=2*e.diff+(1===e.count?0:1);d0(e.encoder,t),e.count>1&&dk(e.encoder,e.count-2)}};class dN{constructor(){this.encoder=new d_,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(d6(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return d6(this),dy(this.encoder)}}let d5=cX("Unexpected end of array"),d7=cX("Integer out of Range");class dL{constructor(e){this.arr=e,this.pos=0}}let dP=e=>new dL(e),dA=e=>e.pos!==e.arr.length,dR=(e,t)=>{let n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},dO=e=>dR(e,dI(e)),dD=e=>e.arr[e.pos++],dI=e=>{let t=0,n=1,r=e.arr.length;for(;e.pos<r;){let o=e.arr[e.pos++];if(t+=(127&o)*n,n*=128,o<128)return t;if(t>dc)throw d7}throw d5},dH=e=>{let t=e.arr[e.pos++],n=63&t,r=64,o=(64&t)>0?-1:1;if(0==(128&t))return o*n;let i=e.arr.length;for(;e.pos<i;){if(n+=(127&(t=e.arr[e.pos++]))*r,r*=128,t<128)return o*n;if(n>dc)throw d7}throw d5},dz=d$?e=>d$.decode(dO(e)):e=>{let t=dI(e);if(0===t)return"";{let n=String.fromCodePoint(dD(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(dD(e));else for(;t>0;){let r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},d9=(e,t)=>{let n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},dB=[e=>{},e=>null,dH,e=>d9(e,4).getFloat32(0,!1),e=>d9(e,8).getFloat64(0,!1),e=>d9(e,8).getBigInt64(0,!1),e=>!1,e=>!0,dz,e=>{let t=dI(e),n={};for(let r=0;r<t;r++)n[dz(e)]=dV(e);return n},e=>{let t=dI(e),n=[];for(let r=0;r<t;r++)n.push(dV(e));return n},dO],dV=e=>dB[127-dD(e)](e);class dj extends dL{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),dA(this)?this.count=dI(this)+1:this.count=-1),this.count--,this.s}}class dF extends dL{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=dH(this);let e=cB(this.s);this.count=1,e&&(this.s=-this.s,this.count=dI(this)+2)}return this.count--,this.s}}class dU extends dL{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=dH(this);this.diff=cI(e/2),this.count=1,1&e&&(this.count=dI(this)+2)}return this.s+=this.diff,this.count--,this.s}}crypto.subtle;let dW=crypto.getRandomValues.bind(crypto),dG=Math.random,dq=()=>dW(new Uint32Array(1))[0],dK=e=>new Promise(e),dJ=(Promise.all.bind(Promise),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&dJ(e,t,n+1)}}),dZ=e=>void 0===e?null:e,dX=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},dQ=!0;try{"undefined"!=typeof localStorage&&localStorage&&(dX=localStorage,dQ=!1)}catch(dY){}let ue=dX,ut="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),un="undefined"!=typeof window&&"undefined"!=typeof document&&!ut;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let ur,uo=[],ui=()=>{if(void 0===ur){if(ut){ur=de();let e=process.argv,t=null;for(let n=0;n<e.length;n++){let r=e[n];"-"===r[0]?(null!==t&&ur.set(t,""),t=r):null!==t?(ur.set(t,r),t=null):uo.push(r)}null!==t&&ur.set(t,"")}else"object"==typeof location?(ur=de(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,n]=e.split("=");ur.set(`--${df(t,"-")}`,n),ur.set(`-${df(t,"-")}`,n)}})):ur=de()}return ur},ul=e=>ui().has(e),us=e=>dZ(ut?({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[e.toUpperCase().replaceAll("-","_")]:ue.getItem(e)),ua=e=>ul("--"+e)||null!==us(e),uc=(ua("production"),ut&&["true","1","2"].includes(v9=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FORCE_COLOR)),ud=uc||!ul("--no-colors")&&!ua("no-color")&&(!ut||process.stdout.isTTY)&&(!ut||ul("--color")||null!==us("COLORTERM")||(us("TERM")||"").includes("color"));class uu{constructor(e,t){this.left=e,this.right=t}}let uh=(e,t)=>new uu(e,t),up="undefined"!=typeof document?document:{},uf=("undefined"!=typeof DOMParser&&new DOMParser,e=>((e,t)=>{let n=[];for(let[r,o]of e)n.push(t(o,r));return n})(e,(e,t)=>`${t}:${e};`).join("")),um=(up.ELEMENT_NODE,up.TEXT_NODE,up.CDATA_SECTION_NODE,up.COMMENT_NODE,up.DOCUMENT_NODE,up.DOCUMENT_TYPE_NODE,up.DOCUMENT_FRAGMENT_NODE,Symbol),ug=Date.now,u$=um(),u_=um(),ub=um(),uy=um(),uv=um(),uw=um(),uk=um(),u0=um(),ux=um();ug();let uC={[u$]:uh("font-weight","bold"),[u_]:uh("font-weight","normal"),[ub]:uh("color","blue"),[uv]:uh("color","green"),[uy]:uh("color","grey"),[uw]:uh("color","red"),[uk]:uh("color","purple"),[u0]:uh("color","orange"),[ux]:uh("color","black")},uS=ud?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],n=[],r=de(),o=[],i=0;for(;i<e.length;i++){let l=e[i],s=uC[l];if(void 0!==s)r.set(s.left,s.right);else{if(void 0===l||l.constructor!==String&&l.constructor!==Number)break;{let a=uf(r);i>0||a.length>0?(t.push("%c"+l),n.push(a)):t.push(l)}}}for(i>0&&(o=n).unshift(t.join(""));i<e.length;i++){let c=e[i];c instanceof Symbol||o.push(c)}return o}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],n=[],r=0;for(;r<e.length;r++){let o=e[r];if(void 0===o)break;if(o.constructor===String||o.constructor===Number)t.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){let i=e[r];i instanceof Symbol||n.push(i)}return n},u1=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(...uS(t)),u3.forEach(e=>e.print(t))},u2=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(...uS(t)),t.unshift(u0),u3.forEach(e=>e.print(t))},u3=cq(),uE=e=>({[Symbol.iterator](){return this},next:e}),u4=(e,t)=>uE(()=>{let{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class uM{constructor(e,t){this.clock=e,this.len=t}}class uT{constructor(){this.clients=new Map}}let u8=(e,t,n)=>t.clients.forEach((t,r)=>{let o=e.doc.store.clients.get(r);for(let i=0;i<t.length;i++){let l=t[i];hk(e,o,l.clock,l.len,n)}}),u6=(e,t)=>{let n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){let o=cI((n+r)/2),i=e[o],l=i.clock;if(l<=t){if(t<l+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},uN=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){let r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=c9(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n})},u5=e=>{let t=new uT;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){let i=r.slice();for(let l=n+1;l<e.length;l++)di(i,e[l].clients.get(o)||[]);t.clients.set(o,i)}});return uN(t),t},u7=(e,t,n,r)=>{dn(e.clients,t,()=>[]).push(new uM(n,r))},uL=()=>new uT,uP=e=>{let t=uL();return e.clients.forEach((e,n)=>{let r=[];for(let o=0;o<e.length;o++){let i=e[o];if(i.deleted){let l=i.id.clock,s=i.length;if(o+1<e.length)for(let a=e[o+1];o+1<e.length&&a.deleted;a=e[1+ ++o])s+=a.length;r.push(new uM(l,s))}}r.length>0&&t.clients.set(n,r)}),t},uA=(e,t)=>{dk(e.restEncoder,t.clients.size),dl(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(t=>{let[n,r]=t;e.resetDsCurVal(),dk(e.restEncoder,n);let o=r.length;dk(e.restEncoder,o);for(let i=0;i<o;i++){let l=r[i];e.writeDsClock(l.clock),e.writeDsLen(l.len)}})},uR=e=>{let t=new uT,n=dI(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();let o=dI(e.restDecoder),i=dI(e.restDecoder);if(i>0){let l=dn(t.clients,o,()=>[]);for(let s=0;s<i;s++)l.push(new uM(e.readDsClock(),e.readDsLen()))}}return t},uO=(e,t,n)=>{let r=new uT,o=dI(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();let l=dI(e.restDecoder),s=dI(e.restDecoder),a=n.clients.get(l)||[],c=hg(n,l);for(let d=0;d<s;d++){let u=e.readDsClock(),h=u+e.readDsLen();if(u<c){c<h&&u7(r,l,c,h-c);let p=h_(a,u),f=a[p];for(!f.deleted&&f.id.clock<u&&(a.splice(p+1,0,pG(t,f,u-f.id.clock)),p++);p<a.length&&(f=a[p++]).id.clock<h;)f.deleted||(h<f.id.clock+f.length&&a.splice(p,0,pG(t,f,h-f.id.clock)),f.delete(t))}else u7(r,l,u,h-u)}}if(r.clients.size>0){let m=new uj;return dk(m.restEncoder,0),uA(m,r),m.toUint8Array()}return null},uD=dq;class uI extends da{constructor(){let{guid:e="10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^dq()&15>>e/4).toString(16)),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:l=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.gc=n,this.gcFilter=r,this.clientID=uD(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new hf,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=dK(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});let s=()=>dK(e=>{let t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=s()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=s()}load(){let e=this._item;null===e||this.shouldLoad||hE(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(dl(this.subdocs).map(e=>e.guid))}transact(e){return hE(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hF,n=dn(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==hF&&r!==t){if(r===hF){let o=new t;o._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=o}),o._start=n._start;for(let i=o._start;null!==i;i=i.right)i.parent=o;return o._length=n._length,this.share.set(e,o),o._integrate(this,null),o}throw Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,pa)}getText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,pC)}getMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,pd)}getXmlElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,p2)}getXmlFragment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,p1)}toJSON(){let e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,dl(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new uI({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,hE(e.parent.doc,n=>{let r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class uH{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=dI(this.restDecoder),this.dsCurrVal}readDsLen(){let e=dI(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class uz extends uH{constructor(e){super(e),this.keys=[],dI(e),this.keyClockDecoder=new dU(dO(e)),this.clientDecoder=new dF(dO(e)),this.leftClockDecoder=new dU(dO(e)),this.rightClockDecoder=new dU(dO(e)),this.infoDecoder=new dj(dO(e),dD),this.stringDecoder=new class e{constructor(e){this.decoder=new dF(e),this.str=dz(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}(dO(e)),this.parentInfoDecoder=new dj(dO(e),dD),this.typeRefDecoder=new dF(dO(e)),this.lenDecoder=new dF(dO(e))}readLeftID(){return new uX(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new uX(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return dV(this.restDecoder)}readBuf(){return dO(this.restDecoder)}readJSON(){return dV(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let t=this.stringDecoder.read();return this.keys.push(t),t}}}class u9{constructor(){this.restEncoder=db()}toUint8Array(){return dy(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){dk(this.restEncoder,e)}writeDsLen(e){dk(this.restEncoder,e)}}class uB extends u9{writeLeftID(e){dk(this.restEncoder,e.client),dk(this.restEncoder,e.clock)}writeRightID(e){dk(this.restEncoder,e.client),dk(this.restEncoder,e.clock)}writeClient(e){dk(this.restEncoder,e)}writeInfo(e){dw(this.restEncoder,e)}writeString(e){dS(this.restEncoder,e)}writeParentInfo(e){dk(this.restEncoder,e?1:0)}writeTypeRef(e){dk(this.restEncoder,e)}writeLen(e){dk(this.restEncoder,e)}writeAny(e){d4(this.restEncoder,e)}writeBuf(e){d2(this.restEncoder,e)}writeJSON(e){dS(this.restEncoder,JSON.stringify(e))}writeKey(e){dS(this.restEncoder,e)}}class uV{constructor(){this.restEncoder=db(),this.dsCurrVal=0}toUint8Array(){return dy(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,dk(this.restEncoder,t)}writeDsLen(e){0===e&&cY(),dk(this.restEncoder,e-1),this.dsCurrVal+=e}}class uj extends uV{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new dN,this.clientEncoder=new d8,this.leftClockEncoder=new dN,this.rightClockEncoder=new dN,this.infoEncoder=new dM(dw),this.stringEncoder=new class e{constructor(){this.sarr=[],this.s="",this.lensE=new d8}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new d_;return this.sarr.push(this.s),this.s="",dS(e,this.sarr.join("")),d1(e,this.lensE.toUint8Array()),dy(e)}},this.parentInfoEncoder=new dM(dw),this.typeRefEncoder=new d8,this.lenEncoder=new d8}toUint8Array(){let e=db();return dk(e,0),d2(e,this.keyClockEncoder.toUint8Array()),d2(e,this.clientEncoder.toUint8Array()),d2(e,this.leftClockEncoder.toUint8Array()),d2(e,this.rightClockEncoder.toUint8Array()),d2(e,dy(this.infoEncoder)),d2(e,this.stringEncoder.toUint8Array()),d2(e,dy(this.parentInfoEncoder)),d2(e,this.typeRefEncoder.toUint8Array()),d2(e,this.lenEncoder.toUint8Array()),d1(e,dy(this.restEncoder)),dy(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){d4(this.restEncoder,e)}writeBuf(e){d2(this.restEncoder,e)}writeJSON(e){d4(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}let uF=(e,t,n)=>{let r=new Map;n.forEach((e,n)=>{hg(t,n)>e&&r.set(n,e)}),hm(t).forEach((e,t)=>{n.has(t)||r.set(t,0)}),dk(e.restEncoder,r.size),dl(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(n=>{let[r,o]=n;((e,t,n,r)=>{r=c9(r,t[0].id.clock);let o=h_(t,r);dk(e.restEncoder,t.length-o),e.writeClient(n),dk(e.restEncoder,r);let i=t[o];i.write(e,r-i.id.clock);for(let l=o+1;l<t.length;l++)t[l].write(e,0)})(e,t.clients.get(r),r,o)})},uU=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new uz(e);return hE(t,e=>{e.local=!1;let t=!1,n=e.doc,o=n.store,i=((e,t)=>{let n=de(),r=dI(e.restDecoder);for(let o=0;o<r;o++){let i=dI(e.restDecoder),l=Array(i),s=e.readClient(),a=dI(e.restDecoder);n.set(s,{i:0,refs:l});for(let c=0;c<i;c++){let d=e.readInfo();switch(31&d){case 0:{let u=e.readLen();l[c]=new pT(uY(s,a),u),a+=u;break}case 10:{let h=dI(e.restDecoder);l[c]=new pQ(uY(s,a),h),a+=h;break}default:{let p=0==(192&d),f=new pJ(uY(s,a),null,(128&d)==128?e.readLeftID():null,null,(64&d)==64?e.readRightID():null,p?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,p&&32==(32&d)?e.readString():null,pZ(e,d));l[c]=f,a+=f.length}}}}return n})(r,n),l=((e,t,n)=>{let r=[],o=dl(n.keys()).sort((e,t)=>e-t);if(0===o.length)return null;let i=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e},l=i();if(null===l)return null;let s=new hf,a=new Map,c=(e,t)=>{let n=a.get(e);(null==n||n>t)&&a.set(e,t)},d=l.refs[l.i++],u=new Map,h=()=>{for(let e of r){let t=e.id.client,i=n.get(t);i?(i.i--,s.clients.set(t,i.refs.slice(i.i)),n.delete(t),i.i=0,i.refs=[]):s.clients.set(t,[e]),o=o.filter(e=>e!==t)}r.length=0};for(;;){if(d.constructor!==pQ){let p=dn(u,d.id.client,()=>hg(t,d.id.client))-d.id.clock;if(p<0)r.push(d),c(d.id.client,d.id.clock-1),h();else{let f=d.getMissing(e,t);if(null!==f){r.push(d);let m=n.get(f)||{refs:[],i:0};if(m.refs.length!==m.i){d=m.refs[m.i++];continue}c(f,hg(t,f)),h()}else(0===p||p<d.length)&&(d.integrate(e,p),u.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(null!==l&&l.i<l.refs.length)d=l.refs[l.i++];else{if(null===(l=i()))break;d=l.refs[l.i++]}}if(s.clients.size>0){let g=new uj;return uF(g,s,new Map),dk(g.restEncoder,0),{missing:a,update:g.toUint8Array()}}return null})(e,o,i),s=o.pendingStructs;if(s){for(let[a,c]of s.missing)if(c<hg(o,a)){t=!0;break}if(l){for(let[d,u]of l.missing){let h=s.missing.get(d);(null==h||h>u)&&s.missing.set(d,u)}s.update=h7([s.update,l.update])}}else o.pendingStructs=l;let p=uO(r,e,o);if(o.pendingDs){let f=new uz(dP(o.pendingDs));dI(f.restDecoder);let m=uO(f,e,o);o.pendingDs=p&&m?h7([p,m]):p||m}else o.pendingDs=p;if(t){let g=o.pendingStructs.update;o.pendingStructs=null,uW(e.doc,g)}},n,!1)},uW=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz,o=dP(t);uU(o,e,n,new r(o))};class uG{constructor(){this.l=[]}}let uq=()=>new uG,uK=(e,t)=>e.l.push(t),uJ=(e,t)=>{let n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},uZ=(e,t,n)=>dJ(e.l,[t,n]);class uX{constructor(e,t){this.client=e,this.clock=t}}let uQ=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,uY=(e,t)=>new uX(e,t),he=e=>{for(let[t,n]of e.doc.share.entries())if(n===e)return t;throw cY()},ht=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class hn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.type=e,this.tname=t,this.item=n,this.assoc=r}}let hr=e=>new hn(null==e.type?null:uY(e.type.client,e.type.clock),e.tname??null,null==e.item?null:uY(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class ho{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.type=e,this.index=t,this.assoc=n}}let hi=(e,t,n)=>{let r=null,o=null;return null===e._item?o=he(e):r=uY(e._item.id.client,e._item.id.clock),new hn(r,o,t,n)},hl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e._start;if(n<0){if(0===t)return hi(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return hi(e,uY(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return hi(e,r.lastId,n);r=r.right}return hi(e,null,n)},hs=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.store,o=e.item,i=e.type,l=e.tname,s=e.assoc,a=null,c=0;if(null!==o){if(hg(r,o.client)<=o.clock)return null;let d=n?pU(r,o):{item:hb(r,o),diff:0},u=d.item;if(!(u instanceof pJ))return null;if(null===(a=u.parent)._item||!a._item.deleted){c=u.deleted||!u.countable?0:d.diff+(s>=0?0:1);let h=u.left;for(;null!==h;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(null!==l)a=t.get(l);else{if(null===i)throw cY();{if(hg(r,i.client)<=i.clock)return null;let{item:p}=n?pU(r,i):{item:hb(r,i)};if(!(p instanceof pJ&&p.content instanceof pF))return null;a=p.content.type}}c=s>=0?a._length:0}return function(e,t){return new ho(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}(a,c,e.assoc)},ha=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&uQ(e.item,t.item)&&uQ(e.type,t.type)&&e.assoc===t.assoc;class hc{constructor(e,t){this.ds=e,this.sv=t}}let hd=(e,t)=>new hc(e,t),hu=(hd(uL(),new Map),e=>hd(uP(e.store),hm(e.store))),hh=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!u6(t.ds,e.id),hp=(e,t)=>{let n=dn(e.meta,hp,cq),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<hg(r,n)&&hv(e,uY(n,t))}),u8(e,t.ds,e=>{}),n.add(t))};class hf{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let hm=e=>{let t=new Map;return e.clients.forEach((e,n)=>{let r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},hg=(e,t)=>{let n=e.clients.get(t);if(void 0===n)return 0;let r=n[n.length-1];return r.id.clock+r.length},h$=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{let r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw cY()}n.push(t)},h_=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let l=cI(t/(i+o.length-1)*r);for(;n<=r;){if((i=(o=e[l]).id.clock)<=t){if(t<i+o.length)return l;n=l+1}else r=l-1;l=cI((n+r)/2)}throw cY()},hb=(e,t)=>{let n=e.clients.get(t.client);return n[h_(n,t.clock)]},hy=(e,t,n)=>{let r=h_(t,n),o=t[r];return o.id.clock<n&&o instanceof pJ?(t.splice(r+1,0,pG(e,o,n-o.id.clock)),r+1):r},hv=(e,t)=>{let n=e.doc.store.clients.get(t.client);return n[hy(e,n,t.clock)]},hw=(e,t,n)=>{let r=t.clients.get(n.client),o=h_(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==pT&&r.splice(o+1,0,pG(e,i,n.clock-i.id.clock+1)),i},hk=(e,t,n,r,o)=>{if(0===r)return;let i=n+r,l,s=hy(e,t,n);do i<(l=t[s++]).id.clock+l.length&&hy(e,t,i),o(l);while(s<t.length&&t[s].id.clock<i)};class h0{constructor(e,t,n){this.doc=e,this.deleteSet=new uT,this.beforeState=hm(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let hx=(e,t)=>{var n,r;return!(0===t.deleteSet.clients.size&&!((e,t)=>{for(let[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,(e,n)=>t.beforeState.get(n)!==e))&&(uN(t.deleteSet),uF(n=e,(r=t).doc.store,r.beforeState),uA(e,t.deleteSet),!0)},hC=(e,t,n)=>{let r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&dn(e.changed,t,cq).add(n)},hS=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n);n=r,r=e[--o-1])n instanceof pJ&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);let i=t-o;return i&&e.splice(t+1-i,i),i},h1=(e,t,n)=>{for(let[r,o]of e.clients.entries()){let i=t.clients.get(r);for(let l=o.length-1;l>=0;l--){let s=o[l],a=s.clock+s.len;for(let c=h_(i,s.clock),d=i[c];c<i.length&&d.id.clock<a;d=i[++c]){let u=i[c];if(s.clock+s.len<=u.id.clock)break;u instanceof pJ&&u.deleted&&!u.keep&&n(u)&&u.gc(t,!1)}}}},h2=(e,t)=>{e.clients.forEach((e,n)=>{let r=t.clients.get(n);for(let o=e.length-1;o>=0;o--){let i=e[o];for(let l=cz(r.length-1,1+h_(r,i.clock+i.len-1)),s=r[l];l>0&&s.id.clock>=i.clock;s=r[l])l-=1+hS(r,l)}})},h3=(e,t)=>{if(t<e.length){let n=e[t],r=n.doc,o=r.store,i=n.deleteSet,l=n._mergeStructs;try{uN(i),n.afterState=hm(n.doc.store),r.emit("beforeObserverCalls",[n,r]);let s=[];n.changed.forEach((e,t)=>s.push(()=>{null!==t._item&&t._item.deleted||t._callObserver(n,e)})),s.push(()=>{n.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),uZ(t._dEH,e,n))})}),s.push(()=>r.emit("afterTransaction",[n,r])),dJ(s,[]),n._needFormattingCleanup&&pk(n)}finally{r.gc&&h1(i,o,r.gcFilter),h2(i,o),n.afterState.forEach((e,t)=>{let r=n.beforeState.get(t)||0;if(r!==e){let i=o.clients.get(t),l=c9(h_(i,r),1);for(let s=i.length-1;s>=l;)s-=1+hS(i,s)}});for(let a=l.length-1;a>=0;a--){let{client:c,clock:d}=l[a].id,u=o.clients.get(c),h=h_(u,d);h+1<u.length&&hS(u,h+1)>1||h>0&&hS(u,h)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(u1(u0,u$,"[yjs] ",u_,uw,"Changed the client-id because another client seems to be using it."),r.clientID=uD()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){let p=new uB;hx(p,n)&&r.emit("update",[p.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){let f=new uj;hx(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}let{subdocsAdded:m,subdocsLoaded:g,subdocsRemoved:$}=n;(m.size>0||$.size>0||g.size>0)&&(m.forEach(e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)}),$.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:g,added:m,removed:$},r,n]),$.forEach(e=>e.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):h3(e,t+1)}}},hE=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e._transactionCleanups,i=!1,l=null;null===e._transaction&&(i=!0,e._transaction=new h0(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{l=t(e._transaction)}finally{if(i){let s=e._transaction===o[0];e._transaction=null,s&&h3(o,0)}}return l};class h4{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}let hM=(e,t,n)=>{u8(e,n.deletions,e=>{e instanceof pJ&&t.scope.some(t=>ht(t,e))&&pW(e,!1)})},hT=(e,t,n)=>{let r=null,o=e.doc,i=e.scope;hE(o,n=>{for(;t.length>0&&null===e.currStackItem;){let l=o.store,s=t.pop(),a=new Set,c=[],d=!1;u8(n,s.insertions,e=>{if(e instanceof pJ){if(null!==e.redone){let{item:t,diff:r}=pU(l,e.id);r>0&&(t=hv(n,uY(t.id.client,t.id.clock+r))),e=t}!e.deleted&&i.some(t=>ht(t,e))&&c.push(e)}}),u8(n,s.deletions,e=>{e instanceof pJ&&i.some(t=>ht(t,e))&&!u6(s.insertions,e.id)&&a.add(e)}),a.forEach(t=>{d=null!==pK(n,t,a,s.insertions,e.ignoreRemoteMapChanges,e)||d});for(let u=c.length-1;u>=0;u--){let h=c[u];e.deleteFilter(h)&&(h.delete(n),d=!0)}e.currStackItem=d?s:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),r=n},e);let l=e.currStackItem;if(null!=l){let s=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:l,type:n,changedParentTypes:s,origin:e},e]),e.currStackItem=null}return l};class h8 extends da{constructor(e){let{captureTimeout:t=500,captureTransaction:n=e=>!0,deleteFilter:r=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:l=ds(e)?e[0].doc:e.doc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.scope=[],this.doc=l,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some(t=>e.changedParentTypes.has(t))||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;let t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);let o=new uT;e.afterState.forEach((t,n)=>{let r=e.beforeState.get(n)||0,i=t-r;i>0&&u7(o,n,r,i)});let i=ug(),l=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){let s=r[r.length-1];s.deletions=u5([s.deletions,e.deleteSet]),s.insertions=u5([s.insertions,o])}else r.push(new h4(e.deleteSet,o)),l=!0;t||n||(this.lastChange=i),u8(e,e.deleteSet,e=>{e instanceof pJ&&this.scope.some(t=>ht(t,e))&&pW(e,!0)});let a=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];l?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){(e=ds(e)?e:[e]).forEach(e=>{this.scope.every(t=>t!==e)&&(e.doc!==this.doc&&u2("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(e=>hM(n,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>hM(n,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=hT(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=hT(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class h6{constructor(e,t){this.gen=function*(e){let t=dI(e.restDecoder);for(let n=0;n<t;n++){let r=dI(e.restDecoder),o=e.readClient(),i=dI(e.restDecoder);for(let l=0;l<r;l++){let s=e.readInfo();if(10===s){let a=dI(e.restDecoder);yield new pQ(uY(o,i),a),i+=a}else if(0!=(31&s)){let c=0==(192&s),d=new pJ(uY(o,i),null,(128&s)==128?e.readLeftID():null,null,(64&s)==64?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&32==(32&s)?e.readString():null,pZ(e,s));yield d,i+=d.length}else{let u=e.readLen();yield new pT(uY(o,i),u),i+=u}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===pQ);return this.curr}}class hN{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let h5=(e,t)=>{if(e.constructor===pT){let{client:n,clock:r}=e.id;return new pT(uY(n,r+t),e.length-t)}if(e.constructor===pQ){let{client:o,clock:i}=e.id;return new pQ(uY(o,i+t),e.length-t)}{let l=e,{client:s,clock:a}=l.id;return new pJ(uY(s,a+t),null,uY(s,a+t-1),null,l.rightOrigin,l.parent,l.parentSub,l.content.splice(t))}},h7=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uj;if(1===e.length)return e[0];let r=e.map(e=>new t(dP(e))),o=r.map(e=>new h6(e,!0)),i=null,l=new n,s=new hN(l);for(;(o=o.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client===t.curr.id.client){let n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===pQ?1:-1:n}return t.curr.id.client-e.curr.id.client}),0!==o.length;){let a=o[0],c=a.curr.id.client;if(null!==i){let d=a.curr,u=!1;for(;null!==d&&d.id.clock+d.length<=i.struct.id.clock+i.struct.length&&d.id.client>=i.struct.id.client;)d=a.next(),u=!0;if(null===d||d.id.client!==c||u&&d.id.clock>i.struct.id.clock+i.struct.length)continue;if(c!==i.struct.id.client)hP(s,i.struct,i.offset),i={struct:d,offset:0},a.next();else if(i.struct.id.clock+i.struct.length<d.id.clock){if(i.struct.constructor===pQ)i.struct.length=d.id.clock+d.length-i.struct.id.clock;else{hP(s,i.struct,i.offset);let h=d.id.clock-i.struct.id.clock-i.struct.length;i={struct:new pQ(uY(c,i.struct.id.clock+i.struct.length),h),offset:0}}}else{let p=i.struct.id.clock+i.struct.length-d.id.clock;p>0&&(i.struct.constructor===pQ?i.struct.length-=p:d=h5(d,p)),i.struct.mergeWith(d)||(hP(s,i.struct,i.offset),i={struct:d,offset:0},a.next())}}else i={struct:a.curr,offset:0},a.next();for(let f=a.curr;null!==f&&f.id.client===c&&f.id.clock===i.struct.id.clock+i.struct.length&&f.constructor!==pQ;f=a.next())hP(s,i.struct,i.offset),i={struct:f,offset:0}}null!==i&&(hP(s,i.struct,i.offset),i=null),hA(s);let m=r.map(e=>uR(e)),g=u5(m);return uA(l,g),l.toUint8Array()},hL=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:dy(e.encoder.restEncoder)}),e.encoder.restEncoder=db(),e.written=0)},hP=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&hL(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),dk(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},hA=e=>{hL(e);let t=e.encoder.restEncoder;dk(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){let r=e.clientStructs[n];dk(t,r.written),d1(t,r.restEncoder)}},hR="You must not compute changes after the event-handler fired.";class hO{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=hD(this.currentTarget,this.target))}deletes(e){return u6(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw cX(hR);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(n=>{if(null!==n){let r=t._map.get(n),o,i;if(this.adds(r)){let l=r.left;for(;null!==l&&this.adds(l);)l=l.left;if(this.deletes(r)){if(null===l||!this.deletes(l))return;o="delete",i=dr(l.content.getContent())}else null!==l&&this.deletes(l)?(o="update",i=dr(l.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=dr(r.content.getContent())}e.set(n,{action:o,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw cX(hR);let t=this.target,n=cq(),r=cq(),o=[];if(e={added:n,deleted:r,delta:o,keys:this.keys},this.transaction.changed.get(t).has(null)){let i=null,l=()=>{i&&o.push(i)};for(let s=t._start;null!==s;s=s.right)s.deleted?this.deletes(s)&&!this.adds(s)&&(null!==i&&void 0!==i.delete||(l(),i={delete:0}),i.delete+=s.length,r.add(s)):this.adds(s)?(null!==i&&void 0!==i.insert||(l(),i={insert:[]}),i.insert=i.insert.concat(s.content.getContent()),n.add(s)):(null!==i&&void 0!==i.retain||(l(),i={retain:0}),i.retain+=s.length);null!==i&&void 0===i.retain&&l()}this._changes=e}return e}}let hD=(e,t)=>{let n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&null!==o;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},hI=()=>{u2("Invalid access: Add Yjs type to a document before reading data.")},hH=0;class hz{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=hH++}}let h9=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=hH++},hB=(e,t)=>{var n;if(null===e._start||0===t||null===e._searchMarker)return null;let r=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>cH(t-e.index)<cH(t-n.index)?e:n),o=e._start,i=0;for(null!==r&&(o=r.p,i=r.index,r.timestamp=hH++);null!==o.right&&i<t;){if(!o.deleted&&o.countable){if(t<i+o.length)break;i+=o.length}o=o.right}for(;null!==o.left&&i>t;)!(o=o.left).deleted&&o.countable&&(i-=o.length);for(;null!==o.left&&o.left.id.client===o.id.client&&o.left.id.clock+o.left.length===o.id.clock;)!(o=o.left).deleted&&o.countable&&(i-=o.length);return null!==r&&cH(r.index-i)<o.parent.length/80?(h9(r,o,i),r):((e,t,n)=>{if(e.length>=80){let r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return h9(r,t,n),r}{let o=new hz(t,n);return e.push(o),o}})(e._searchMarker,o,i)},hV=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){let o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)(i=i.left)&&!i.deleted&&i.countable&&(o.index-=i.length);if(null===i||!0===i.marker){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=c9(t,o.index+n))}},hj=(e,t,n)=>{let r=e,o=t.changedParentTypes;for(;dn(o,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;uZ(r._eH,n,t)};class hF{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=uq(),this._dEH=uq(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw cQ()}clone(){throw cQ()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){uK(this._eH,e)}observeDeep(e){uK(this._dEH,e)}unobserve(e){uJ(this._eH,e)}unobserveDeep(e){uJ(this._dEH,e)}toJSON(){}}let hU=(e,t,n)=>{e.doc,hI(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t,o=[],i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){let l=i.content.getContent();if(l.length<=t)t-=l.length;else{for(let s=t;s<l.length&&r>0;s++)o.push(l[s]),r--;t=0}}i=i.right}return o},hW=e=>{e.doc,hI();let t=[],n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){let r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},hG=(e,t)=>{let n=[],r=e._start;for(;null!==r;){if(r.countable&&hh(r,t)){let o=r.content.getContent();for(let i=0;i<o.length;i++)n.push(o[i])}r=r.right}return n},hq=(e,t)=>{let n=0,r=e._start;for(e.doc,hI();null!==r;){if(r.countable&&!r.deleted){let o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},hK=(e,t)=>{let n=[];return hq(e,(r,o)=>{n.push(t(r,o,e))}),n},hJ=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next(){if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}let e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},hZ=(e,t)=>{e.doc,hI();let n=hB(e,t),r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},hX=(e,t,n,r)=>{let o=n,i=e.doc,l=i.clientID,s=i.store,a=null===n?t._start:n.right,c=[],d=()=>{c.length>0&&((o=new pJ(uY(l,hg(s,l)),o,o&&o.lastId,a,a&&a.id,t,null,new pR(c))).integrate(e,0),c=[])};r.forEach(n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(d(),n.constructor){case Uint8Array:case ArrayBuffer:(o=new pJ(uY(l,hg(s,l)),o,o&&o.lastId,a,a&&a.id,t,null,new p8(new Uint8Array(n)))).integrate(e,0);break;case uI:(o=new pJ(uY(l,hg(s,l)),o,o&&o.lastId,a,a&&a.id,t,null,new p5(n))).integrate(e,0);break;default:if(!(n instanceof hF))throw Error("Unexpected content type in insert operation");(o=new pJ(uY(l,hg(s,l)),o,o&&o.lastId,a,a&&a.id,t,null,new pF(n))).integrate(e,0)}}}),d()},hQ=()=>cX("Length exceeded!"),hY=(e,t,n,r)=>{if(n>t._length)throw hQ();if(0===n)return t._searchMarker&&hV(t._searchMarker,n,r.length),hX(e,t,null,r);let o=n,i=hB(t,n),l=t._start;for(null!==i&&(l=i.p,0==(n-=i.index)&&(n+=(l=l.prev)&&l.countable&&!l.deleted?l.length:0));null!==l;l=l.right)if(!l.deleted&&l.countable){if(n<=l.length){n<l.length&&hv(e,uY(l.id.client,l.id.clock+n));break}n-=l.length}return t._searchMarker&&hV(t._searchMarker,o,r.length),hX(e,t,l,r)},pe=(e,t,n,r)=>{if(0===r)return;let o=n,i=r,l=hB(t,n),s=t._start;for(null!==l&&(s=l.p,n-=l.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&hv(e,uY(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&hv(e,uY(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw hQ();t._searchMarker&&hV(t._searchMarker,o,-i+r)},pt=(e,t,n)=>{let r=t._map.get(n);void 0!==r&&r.delete(e)},pn=(e,t,n,r)=>{let o=t._map.get(n)||null,i=e.doc,l=i.clientID,s;if(null==r)s=new pR([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:s=new pR([r]);break;case Uint8Array:s=new p8(r);break;case uI:s=new p5(r);break;default:if(!(r instanceof hF))throw Error("Unexpected content type");s=new pF(r)}new pJ(uY(l,hg(i.store,l)),o,o&&o.lastId,null,null,t,n,s).integrate(e,0)},pr=(e,t)=>{e.doc,hI();let n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},po=e=>{let t={};return e.doc,hI(),e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},pi=(e,t)=>{e.doc,hI();let n=e._map.get(t);return void 0!==n&&!n.deleted},pl=e=>{var t,n;return e.doc,hI(),t=e._map.entries(),n=e=>!e[1].deleted,uE(()=>{let e;do e=t.next();while(!e.done&&!n(e.value));return e})};class ps extends hO{}class pa extends hF{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new pa;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new pa}clone(){let e=new pa;return e.insert(0,this.toArray().map(e=>e instanceof hF?e.clone():e)),e}get length(){return this.doc,hI(),this._length}_callObserver(e,t){super._callObserver(e,t),hj(this,e,new ps(this,e))}insert(e,t){null!==this.doc?hE(this.doc,n=>{hY(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?hE(this.doc,t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;hX(e,t,r,n)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?hE(this.doc,n=>{pe(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return hZ(this,e)}toArray(){return hW(this)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return hU(this,e,t)}toJSON(){return this.map(e=>e instanceof hF?e.toJSON():e)}map(e){return hK(this,e)}forEach(e){hq(this,e)}[Symbol.iterator](){return hJ(this)}_write(e){e.writeTypeRef(pI)}}class pc extends hO{constructor(e,t,n){super(e,t),this.keysChanged=n}}class pd extends hF{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new pd}clone(){let e=new pd;return this.forEach((t,n)=>{e.set(n,t instanceof hF?t.clone():t)}),e}_callObserver(e,t){hj(this,e,new pc(this,e,t))}toJSON(){this.doc,hI();let e={};return this._map.forEach((t,n)=>{if(!t.deleted){let r=t.content.getContent()[t.length-1];e[n]=r instanceof hF?r.toJSON():r}}),e}get size(){return[...pl(this)].length}keys(){return u4(pl(this),e=>e[0])}values(){return u4(pl(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return u4(pl(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc,hI(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?hE(this.doc,t=>{pt(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?hE(this.doc,n=>{pn(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return pr(this,e)}has(e){return pi(this,e)}clear(){null!==this.doc?hE(this.doc,e=>{this.forEach(function(t,n,r){pt(e,r,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(pH)}}let pu=(e,t)=>{var n,r;return e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&((n=e)===(r=t)||cF(n)===cF(r)&&((e,t)=>{for(let n in e)if(!t(e[n],n))return!1;return!0})(n,(e,t)=>(void 0!==e||cU(r,t))&&r[t]===e))};class ph{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){(null===this.right&&cY(),this.right.content.constructor===pL)?this.right.deleted||pg(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}let pp=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===pL?t.right.deleted||pg(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&hv(e,uY(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},pf=(e,t,n,r)=>{let o=new Map,i=r?hB(t,n):null;if(i){let l=new ph(i.p.left,i.p,i.index,o);return pp(e,l,n-i.index)}{let s=new ph(null,t._start,0,o);return pp(e,s,n)}},pm=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===pL&&pu(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();let o=e.doc,i=o.clientID;r.forEach((r,l)=>{let s=n.left,a=n.right,c=new pJ(uY(i,hg(o.store,i)),s,s&&s.lastId,a,a&&a.id,t,null,new pL(l,r));c.integrate(e,0),n.right=c,n.forward()})},pg=(e,t)=>{let{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},p$=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===pL&&pu(t[e.right.content.key]??null,e.right.content.value));)e.forward()},p_=(e,t,n,r)=>{let o=e.doc,i=o.clientID,l=new Map;for(let s in r){let a=r[s],c=n.currentAttributes.get(s)??null;if(!pu(c,a)){l.set(s,c);let{left:d,right:u}=n;n.right=new pJ(uY(i,hg(o.store,i)),d,d&&d.lastId,u,u&&u.id,t,null,new pL(s,a)),n.right.integrate(e,0),n.forward()}}return l},pb=(e,t,n,r,o)=>{n.currentAttributes.forEach((e,t)=>{void 0===o[t]&&(o[t]=null)});let i=e.doc,l=i.clientID;p$(n,o);let s=p_(e,t,n,o),a=r.constructor===String?new pO(r):r instanceof hF?new pF(r):new p7(r),{left:c,right:d,index:u}=n;t._searchMarker&&hV(t._searchMarker,n.index,a.getLength()),(d=new pJ(uY(l,hg(i.store,l)),c,c&&c.lastId,d,d&&d.id,t,null,a)).integrate(e,0),n.right=d,n.index=u,n.forward(),pm(e,t,n,s)},py=(e,t,n,r,o)=>{let i=e.doc,l=i.clientID;p$(n,o);let s=p_(e,t,n,o);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===pL));){if(!n.right.deleted){if(n.right.content.constructor===pL){let{key:a,value:c}=n.right.content,d=o[a];if(void 0!==d){if(pu(d,c))s.delete(a);else{if(0===r)break e;s.set(a,c)}n.right.delete(e)}else n.currentAttributes.set(a,c)}else r<n.right.length&&hv(e,uY(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let u="";for(;r>0;r--)u+="\n";n.right=new pJ(uY(l,hg(i.store,l)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new pO(u)),n.right.integrate(e,0),n.forward()}pm(e,t,n,s)},pv=(e,t,n,r,o)=>{let i=t,l=de();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===pL){let s=i.content;l.set(s.key,s)}i=i.right}let a=0,c=!1;for(;t!==i;){if(n===t&&(c=!0),!t.deleted){let d=t.content;if(d.constructor===pL){let{key:u,value:h}=d,p=r.get(u)??null;l.get(u)===d&&p!==h||(t.delete(e),a++,c||(o.get(u)??null)!==h||p===h||(null===p?o.delete(u):o.set(u,p))),c||t.deleted||pg(o,d)}}t=t.right}return a},pw=e=>{let t=0;return hE(e.doc,n=>{let r=e._start,o=e._start,i=de(),l=dt(i);for(;o;)!1===o.deleted&&(o.content.constructor===pL?pg(l,o.content):(t+=pv(n,r,o,i,l),i=dt(l),r=o)),o=o.right}),t},pk=e=>{let t=new Set,n=e.doc;for(let[r,o]of e.afterState.entries()){let i=e.beforeState.get(r)||0;o!==i&&hk(e,n.store.clients.get(r),i,o,e=>{e.deleted||e.content.constructor!==pL||e.constructor===pT||t.add(e.parent)})}hE(n,n=>{for(let r of(u8(e,e.deleteSet,e=>{if(e instanceof pT||!e.parent._hasFormatting||t.has(e.parent))return;let r=e.parent;e.content.constructor===pL?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;let n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===pL){let r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}),t))pw(r)})},p0=(e,t,n)=>{let r=n,o=dt(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case pF:case p7:case pO:n<t.right.length&&hv(e,uY(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&pv(e,i,t.right,o,t.currentAttributes);let l=(t.left||t.right).parent;return l._searchMarker&&hV(l._searchMarker,t.index,-r+n),t};class px extends hO{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];hE(e,e=>{let n=new Map,r=new Map,o=this.target._start,i=null,l={},s="",a=0,c=0,d=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)}))),s="";break;case"retain":a>0&&(e={retain:a},(e=>{for(let t in e)return!1;return!0})(l)||(e.attributes=cV({},l))),a=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case pF:case p7:this.adds(o)?this.deletes(o)||(d(),i="insert",s=o.content.getContent()[0],d()):this.deletes(o)?("delete"!==i&&(d(),i="delete"),c+=1):o.deleted||("retain"!==i&&(d(),i="retain"),a+=1);break;case pO:this.adds(o)?this.deletes(o)||("insert"!==i&&(d(),i="insert"),s+=o.content.str):this.deletes(o)?("delete"!==i&&(d(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(d(),i="retain"),a+=o.length);break;case pL:{let{key:u,value:h}=o.content;if(this.adds(o)){if(!this.deletes(o)){let p=n.get(u)??null;pu(p,h)?null!==h&&o.delete(e):("retain"===i&&d(),pu(h,r.get(u)??null)?delete l[u]:l[u]=h)}}else if(this.deletes(o)){r.set(u,h);let f=n.get(u)??null;pu(f,h)||("retain"===i&&d(),l[u]=f)}else if(!o.deleted){r.set(u,h);let m=l[u];void 0!==m&&(pu(m,h)?null!==m&&o.delete(e):("retain"===i&&d(),null===h?delete l[u]:l[u]=h))}o.deleted||("insert"===i&&d(),pg(n,o.content))}}o=o.right}for(d();t.length>0;){let g=t[t.length-1];if(void 0===g.retain||void 0!==g.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class pC extends hF{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc,hI(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(n){console.error(n)}this._pending=null}_copy(){return new pC}clone(){let e=new pC;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let n=new px(this,e,t);hj(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc,hI();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===pO&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e){let{sanitize:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==this.doc?hE(this.doc,n=>{let r=new ph(null,this._start,0,new Map);for(let o=0;o<e.length;o++){let i=e[o];if(void 0!==i.insert){let l=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof l||l.length>0)&&pb(n,this,r,l,i.attributes||{})}else void 0!==i.retain?py(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&p0(n,r,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc,hI();let r=[],o=new Map,i=this.doc,l="",s=this._start;function a(){if(l.length>0){let e={},t=!1;o.forEach((n,r)=>{t=!0,e[r]=n});let n={insert:l};t&&(n.attributes=e),r.push(n),l=""}}let c=()=>{for(;null!==s;){if(hh(s,e)||void 0!==t&&hh(s,t))switch(s.content.constructor){case pO:{let i=o.get("ychange");void 0===e||hh(s,e)?void 0===t||hh(s,t)?void 0!==i&&(a(),o.delete("ychange")):void 0!==i&&i.user===s.id.client&&"added"===i.type||(a(),o.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==i&&i.user===s.id.client&&"removed"===i.type||(a(),o.set("ychange",n?n("removed",s.id):{type:"removed"})),l+=s.content.str;break}case pF:case p7:{a();let c={insert:s.content.getContent()[0]};if(o.size>0){let d={};c.attributes=d,o.forEach((e,t)=>{d[t]=e})}r.push(c);break}case pL:hh(s,e)&&(a(),pg(o,s.content))}s=s.right}a()};return e||t?hE(i,n=>{e&&hp(n,e),t&&hp(n,t),c()},"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;let r=this.doc;null!==r?hE(r,r=>{let o=pf(r,this,e,!n);n||(n={},o.currentAttributes.forEach((e,t)=>{n[t]=e})),pb(r,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){let r=this.doc;null!==r?hE(r,r=>{let o=pf(r,this,e,!n);pb(r,this,o,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(0===t)return;let n=this.doc;null!==n?hE(n,n=>{p0(n,pf(n,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;let r=this.doc;null!==r?hE(r,r=>{let o=pf(r,this,e,!1);null!==o.right&&py(r,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?hE(this.doc,t=>{pt(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?hE(this.doc,n=>{pn(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return pr(this,e)}getAttributes(){return po(this)}_write(e){e.writeTypeRef(pz)}}class pS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc,hI()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==p2&&t.constructor!==p1||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class p1 extends hF{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new p1}clone(){let e=new p1;return e.insert(0,this.toArray().map(e=>e instanceof hF?e.clone():e)),e}get length(){return this.doc,hI(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new pS(this,e)}querySelector(e){e=e.toUpperCase();let t=new pS(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),dl(new pS(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){hj(this,e,new p3(this,t,e))}toString(){return hK(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),hq(this,o=>{r.insertBefore(o.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?hE(this.doc,n=>{hY(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)hE(this.doc,n=>{let r=e&&e instanceof hF?e._item:e;hX(n,this,r,t)});else{let n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw cX("Reference item not found");n.splice(r,0,...t)}}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?hE(this.doc,n=>{pe(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return hW(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return hZ(this,e)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return hU(this,e,t)}forEach(e){hq(this,e)}_write(e){e.writeTypeRef(pB)}}class p2 extends p1{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new p2(this.nodeName)}clone(){let e=new p2(this.nodeName);return((e,t)=>{for(let n in e)t(e[n],n)})(this.getAttributes(),(t,n)=>{"string"==typeof t&&e.setAttribute(n,t)}),e.insert(0,this.toArray().map(e=>e instanceof hF?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],n=[];for(let r in e)n.push(r);n.sort();let o=n.length;for(let i=0;i<o;i++){let l=n[i];t.push(l+'="'+e[l]+'"')}let s=this.nodeName.toLocaleLowerCase();return`<${s}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${s}>`}removeAttribute(e){null!==this.doc?hE(this.doc,t=>{pt(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?hE(this.doc,n=>{pn(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return pr(this,e)}hasAttribute(e){return pi(this,e)}getAttributes(e){return e?((e,t)=>{let n={};return e._map.forEach((e,r)=>{let o=e;for(;null!==o&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;null!==o&&hh(o,t)&&(n[r]=o.content.getContent()[o.length-1])}),n})(this,e):po(this)}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createElement(this.nodeName),o=this.getAttributes();for(let i in o){let l=o[i];"string"==typeof l&&r.setAttribute(i,l)}return hq(this,o=>{r.appendChild(o.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(p9),e.writeKey(this.nodeName)}}class p3 extends hO{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class pE extends pd{constructor(e){super(),this.hookName=e}_copy(){return new pE(this.hookName)}clone(){let e=new pE(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(){arguments.length>0&&void 0!==arguments[0]||document;let e=arguments.length>2?arguments[2]:void 0,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[this.hookName],n;return(n=void 0!==t?t.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==e&&e._createAssociation(n,this),n}_write(e){e.writeTypeRef(pV),e.writeKey(this.hookName)}}class p4 extends pC{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new p4}clone(){let e=new p4;return e.applyDelta(this.toDelta()),e}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0,n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{let t=[];for(let n in e.attributes){let r=[];for(let o in e.attributes[n])r.push({key:o,value:e.attributes[n][o]});r.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:n,attrs:r})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let i="";for(let l=0;l<t.length;l++){let s=t[l];i+=`<${s.nodeName}`;for(let a=0;a<s.attrs.length;a++){let c=s.attrs[a];i+=` ${c.key}="${c.value}"`}i+=">"}i+=e.insert;for(let d=t.length-1;d>=0;d--)i+=`</${t[d].nodeName}>`;return i}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(pj)}}class pM{constructor(e,t){this.id=e,this.length=t}get deleted(){throw cQ()}mergeWith(e){return!1}write(e,t,n){throw cQ()}integrate(e,t){throw cQ()}}class pT extends pM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),h$(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class p8{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new p8(this.content)}splice(e){throw cQ()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class p6{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new p6(this.len)}splice(e){let t=new p6(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){u7(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}let pN=(e,t)=>new uI({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class p5{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new p5(pN(this.doc.guid,this.opts))}splice(e){throw cQ()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class p7{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new p7(this.embed)}splice(e){throw cQ()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class pL{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new pL(this.key,this.value)}splice(e){throw cQ()}mergeWith(e){return!1}integrate(e,t){let n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class pP{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new pP(this.arr)}splice(e){let t=new pP(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){let o=this.arr[r];e.writeString(void 0===o?"undefined":JSON.stringify(o))}}getRef(){return 2}}let pA="development"===us("node_env");class pR{constructor(e){this.arr=e,pA&&cG(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new pR(this.arr)}splice(e){let t=new pR(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){let o=this.arr[r];e.writeAny(o)}}getRef(){return 8}}class pO{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new pO(this.str)}splice(e){let t=new pO(this.str.slice(e));this.str=this.str.slice(0,e);let n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}let pD=[e=>new pa,e=>new pd,e=>new pC,e=>new p2(e.readKey()),e=>new p1,e=>new pE(e.readKey()),e=>new p4],pI=0,pH=1,pz=2,p9=3,pB=4,pV=5,pj=6;class pF{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new pF(this.type._copy())}splice(e){throw cQ()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}let pU=(e,t)=>{let n,r=t,o=0;do o>0&&(r=uY(r.client,r.clock+o)),n=hb(e,r),o=r.clock-n.id.clock,r=n.redone;while(null!==r&&n instanceof pJ);return{item:n,diff:o}},pW=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},pG=(e,t,n)=>{let{client:r,clock:o}=t.id,i=new pJ(uY(r,o+n),t,uY(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=uY(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},pq=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1})(e,e=>u6(e.deletions,t)),pK=(e,t,n,r,o,i)=>{let l=e.doc,s=l.store,a=l.clientID,c=t.redone;if(null!==c)return hv(e,c);let d,u=t.parent._item,h=null;if(null!==u&&!0===u.deleted){if(null===u.redone&&(!n.has(u)||null===pK(e,u,n,r,o,i)))return null;for(;null!==u.redone;)u=hv(e,u.redone)}let p=null===u?t.parent:u.content.type;if(null===t.parentSub){for(h=t.left,d=t;null!==h;){let f=h;for(;null!==f&&f.parent._item!==u;)f=null===f.redone?null:hv(e,f.redone);if(null!==f&&f.parent._item===u){h=f;break}h=h.left}for(;null!==d;){let m=d;for(;null!==m&&m.parent._item!==u;)m=null===m.redone?null:hv(e,m.redone);if(null!==m&&m.parent._item===u){d=m;break}d=d.right}}else if(d=null,t.right&&!o){for(h=t;null!==h&&null!==h.right&&(h.right.redone||u6(r,h.right.id)||pq(i.undoStack,h.right.id)||pq(i.redoStack,h.right.id));)for(h=h.right;h.redone;)h=hv(e,h.redone);if(h&&null!==h.right)return null}else h=p._map.get(t.parentSub)||null;let g=hg(s,a),$=uY(a,g),_=new pJ($,h,h&&h.lastId,d,d&&d.id,p,t.parentSub,t.content.copy());return t.redone=$,pW(_,!0),_.integrate(e,0),_};class pJ extends pM{constructor(e,t,n,r,o,i,l,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=l,this.redone=null,this.content=s,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=hg(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=hg(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===uX&&this.id.client!==this.parent.client&&this.parent.clock>=hg(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=hw(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=hv(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===pT||this.right&&this.right.constructor===pT)this.parent=null;else if(this.parent){if(this.parent.constructor===uX){let n=hb(t,this.parent);n.constructor===pT?this.parent=null:this.parent=n.content.type}}else this.left&&this.left.constructor===pJ&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===pJ&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=hw(e,e.doc.store,uY(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let n,r=this.left;if(null!==r)n=r.right;else if(null!==this.parentSub)for(n=this.parent._map.get(this.parentSub)||null;null!==n&&null!==n.left;)n=n.left;else n=this.parent._start;let o=new Set,i=new Set;for(;null!==n&&n!==this.right;){if(i.add(n),o.add(n),uQ(this.origin,n.origin)){if(n.id.client<this.id.client)r=n,o.clear();else if(uQ(this.rightOrigin,n.rightOrigin))break}else{if(null===n.origin||!i.has(hb(e.doc.store,n.origin)))break;o.has(hb(e.doc.store,n.origin))||(r=n,o.clear())}n=n.right}this.left=r}if(null!==this.left){let l=this.left.right;this.right=l,this.left.right=this}else{let s;if(null!==this.parentSub)for(s=this.parent._map.get(this.parentSub)||null;null!==s&&null!==s.left;)s=s.left;else s=this.parent._start,this.parent._start=this;this.right=s}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),h$(e.doc.store,this),this.content.integrate(e,this),hC(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new pT(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:uY(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&uQ(e.origin,this.lastId)&&this.right===e&&uQ(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),u7(e.deleteSet,this.id.client,this.id.clock,this.length),hC(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw cY();this.content.gc(e),t?((e,t,n)=>{let r=e.clients.get(t.id.client);r[h_(r,t.id.clock)]=n})(e,this,new pT(this.id,this.length)):this.content=new p6(this.length)}write(e,t){let n=t>0?uY(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:128)|(null===r?0:64)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){let l=this.parent;if(void 0!==l._item){let s=l._item;if(null===s){let a=he(l);e.writeParentInfo(!0),e.writeString(a)}else e.writeParentInfo(!1),e.writeLeftID(s.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===uX?(e.writeParentInfo(!1),e.writeLeftID(l)):cY();null!==o&&e.writeString(o)}this.content.write(e,t)}}let pZ=(e,t)=>pX[31&t](e),pX=[()=>{cY()},e=>new p6(e.readLen()),e=>{let t=e.readLen(),n=[];for(let r=0;r<t;r++){let o=e.readString();"undefined"===o?n.push(void 0):n.push(JSON.parse(o))}return new pP(n)},e=>new p8(e.readBuf()),e=>new pO(e.readString()),e=>new p7(e.readJSON()),e=>new pL(e.readKey(),e.readJSON()),e=>new pF(pD[e.readTypeRef()](e)),e=>{let t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new pR(n)},e=>new p5(pN(e.readString(),e.readAny())),()=>{cY()}];class pQ extends pM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){cY()}write(e,t){e.writeInfo(10),dk(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let pY="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},fe="__ $YJS$ __";!0===pY[fe]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),pY[fe]=!0;let ft=e=>class{constructor(e){this._=e}destroy(){e(this._)}},fn=ft(clearTimeout),fr=(e,t)=>new fn(setTimeout(t,e));ft(clearInterval),ft(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),ft(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e));let fo=null,fi=()=>{let e=fo;fo=null,e.forEach((e,t)=>{let n=t.state.tr,r=cR.getState(t.state);r&&r.binding&&!r.binding.isDestroyed&&(e.forEach((e,t)=>{n.setMeta(t,e)}),t.dispatch(n))})},fl=(e,t,n)=>{if(0===e)return hl(t,0,-1);let r=null===t._first?null:t._first.content.type;for(;null!==r&&t!==r;){if(r instanceof p4){if(r._length>=e)return hl(r,e,-1);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do r=null===r._item?null:r._item.parent,e--;while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{let o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new hn(null===r._item?null:r._item.id,null===r._item?he(r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new hn(null===r._item?null:r._item.id,null===r._item?he(r):null,null);do r=r._item.parent,e--;while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw cY();if(0===e&&r.constructor!==p4&&r!==t)return fs(r._item.parent,r._item)}return hl(t,t._length,-1)},fs=(e,t)=>{let n=null,r=null;return null===e._item?r=he(e):n=uY(e._item.id.client,e._item.id.clock),new hn(n,r,t.id)},fa=(e,t,n,r)=>{let o=hs(n,e);if(null===o||o.type!==t&&!ht(t,o.type._item))return null;let i=o.type,l=0;if(i.constructor===p4)l=o.index;else if(null===i._item||!i._item.deleted){let s=i._first,a=0;for(;a<i._length&&a<o.index&&null!==s;){if(!s.deleted){let c=s.content.type;a++,l+=c instanceof p4?c._length:r.get(c).nodeSize}s=s.right}l+=1}for(;i!==t&&null!==i._item;){let d=i._item.parent;if(null===d._item||!d._item.deleted){l+=1;let u=d._first;for(;null!==u;){let h=u.content.type;if(h===i)break;u.deleted||(l+=h instanceof p4?h._length:r.get(h).nodeSize),u=u.right}}i=d}return l-1},fc=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!u6(t.ds,e.id),fd=[{light:"#ecd44433",dark:"#ecd444"}],fu=(e,t,n)=>{var r;if(!e.has(n)){if(e.size<t.length){let o=cq();e.forEach(e=>o.add(e)),t=t.filter(e=>!o.has(e))}e.set(n,(r=t)[cI(dG()*r.length)])}return e.get(n)},fh=(e,t)=>({anchor:fl(t.selection.anchor,e.type,e.mapping),head:fl(t.selection.head,e.type,e.mapping)});class fp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n;this.type=e,this.prosemirrorView=null,this.mux=(n=!0,(e,t)=>{if(n){n=!1;try{e()}finally{n=!0}}else void 0!==t&&t()}),this.mapping=t,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&null!=this.prosemirrorView&&(this.beforeTransactionSelection=fh(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(un&&null===this._domSelectionInView&&(fr(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){let e=this.prosemirrorView._root.getSelection(),t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);let n=t.getBoundingClientRect(),r=up.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}renderSnapshot(e,t){t||(t=hd(uL(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(cR,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{let e=this.type.toArray().map(e=>fm(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new f(a.from(e),0,0));t.setMeta(cR,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{let e=null!==this.beforeTransactionSelection?null:this.prosemirrorView.state.selection,t=this.type.toArray().map(e=>fm(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new f(a.from(t),0,0));e&&n.setSelection(eG.create(n.doc,e.anchor,e.head)),this.prosemirrorView.dispatch(n.setMeta(cR,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,t,n){let r=this.doc;e||(e=hu(this.doc)),(e instanceof Uint8Array||t instanceof Uint8Array)&&(e instanceof Uint8Array&&t instanceof Uint8Array||cY(),r=new uI({gc:!1}),uW(r,t),t=hu(r),uW(r,e),e=hu(r)),this.mapping.clear(),this.mux(()=>{r.transact(r=>{let o=n.permanentUserData;o&&o.dss.forEach(e=>{u8(r,e,e=>{})});let i=(e,t)=>{let r="added"===e?o.getUserByClientId(t.client):o.getUserByDeletedId(t);return{user:r,type:e,color:fu(n.colorMapping,n.colors,r)}},l=hG(this.type,new hc(t.ds,e.sv)).map(n=>!n._item.deleted||fc(n._item,e)||fc(n._item,t)?fm(n,this.prosemirrorView.state.schema,new Map,e,t,i):null).filter(e=>null!==e),s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new f(a.from(l),0,0));this.prosemirrorView.dispatch(s.setMeta(cR,{isChangeOrigin:!0}))},cR)})}_typeChanged(e,t){if(null==this.prosemirrorView)return;let n=cR.getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{let e=(e,t)=>this.mapping.delete(t);u8(t,t.deleteSet,e=>{if(e.constructor===pJ){let t=e.content.type;t&&this.mapping.delete(t)}}),t.changed.forEach(e),t.changedParentTypes.forEach(e);let n=this.type.toArray().map(e=>ff(e,this.prosemirrorView.state.schema,this.mapping)).filter(e=>null!==e),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new f(a.from(n),0,0));((e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head){let r=fa(n.doc,n.type,t.anchor,n.mapping),o=fa(n.doc,n.type,t.head,n.mapping);null!==r&&null!==o&&(e=e.setSelection(eG.create(e.doc,r,o)))}})(r,this.beforeTransactionSelection,this),r=r.setMeta(cR,{isChangeOrigin:!0,isUndoRedoOperation:t.origin instanceof h8}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.doc.transact(()=>{fS(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=fh(this,this.prosemirrorView.state)},cR)}initView(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}let ff=(e,t,n,r,o,i)=>{let l=n.get(e);if(void 0===l){if(e instanceof p2)return fm(e,t,n,r,o,i);throw cQ()}return l},fm=(e,t,n,r,o,i)=>{let l=[],s=e=>{if(e.constructor===p2){let s=ff(e,t,n,r,o,i);null!==s&&l.push(s)}else{let a=e._item.right?.content.type;a instanceof pC&&!a._item.deleted&&a._item.id.client===a.doc.clientID&&(e.applyDelta([{retain:e.length},...a.toDelta()]),a.doc.transact(e=>{a._item.delete(e)}));let c=fg(e,t,n,r,o,i);null!==c&&c.forEach(e=>{null!==e&&l.push(e)})}};void 0===r||void 0===o?e.toArray().forEach(s):hG(e,new hc(o.ds,r.sv)).forEach(s);try{let a=e.getAttributes(r);void 0!==r&&(fc(e._item,r)?fc(e._item,o)||(a.ychange=i?i("added",e._item.id):{type:"added"}):a.ychange=i?i("removed",e._item.id):{type:"removed"});let c=t.node(e.nodeName,a,l);return n.set(e,c),c}catch(d){return e.doc.transact(t=>{e._item.delete(t)},cR),n.delete(e),null}},fg=(e,t,n,r,o,i)=>{let l=[],s=e.toDelta(r,o,i);try{for(let a=0;a<s.length;a++){let c=s[a],d=[];for(let u in c.attributes)d.push(t.mark(u,c.attributes[u]));l.push(t.text(c.insert,d))}}catch(h){return e.doc.transact(t=>{e._item.delete(t)},cR),null}return l},f$=(e,t)=>e instanceof Array?((e,t)=>{let n=new p4,r=e.map(e=>({insert:e.text,attributes:fC(e.marks)}));return n.applyDelta(r),t.set(n,e),n})(e,t):((e,t)=>{let n=new p2(e.type.name);for(let r in e.attrs){let o=e.attrs[r];null!==o&&"ychange"!==r&&n.setAttribute(r,o)}return n.insert(0,fy(e).map(e=>f$(e,t))),t.set(n,e),n})(e,t),f_=e=>"object"==typeof e&&null!==e,fb=(e,t)=>{let n=Object.keys(e).filter(t=>null!==e[t]),r=n.length===Object.keys(t).filter(e=>null!==t[e]).length;for(let o=0;o<n.length&&r;o++){let i=n[o],l=e[i],s=t[i];r="ychange"===i||l===s||f_(l)&&f_(s)&&fb(l,s)}return r},fy=e=>{let t=e.content.content,n=[];for(let r=0;r<t.length;r++){let o=t[r];if(o.isText){let i=[];for(let l=t[r];r<t.length&&l.isText;l=t[++r])i.push(l);r--,n.push(i)}else n.push(o)}return n},fv=(e,t)=>{let n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&cj(e.attributes||{}).length===t[n].marks.length&&t[n].marks.every(t=>fb(e.attributes[t.type.name]||{},t.attrs)))},fw=(e,t)=>{if(e instanceof p2&&!(t instanceof Array)&&f1(e,t)){let n=fy(t);return e._length===n.length&&fb(e.getAttributes(),t.attrs)&&e.toArray().every((e,t)=>fw(e,n[t]))}return e instanceof p4&&t instanceof Array&&fv(e,t)},fk=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),f0=(e,t,n)=>{let r=e.toArray(),o=fy(t),i=o.length,l=r.length,s=cz(l,i),a=0,c=0,d=!1;for(;a<s;a++){let u=r[a],h=o[a];if(fk(n.get(u),h))d=!0;else if(!fw(u,h))break}for(;a+c<s;c++){let p=r[l-c-1],f=o[i-c-1];if(fk(n.get(p),f))d=!0;else if(!fw(p,f))break}return{equalityFactor:a+c,foundMappedChild:d}},fx=(e,t,n)=>{n.set(e,t);let{nAttrs:r,str:o}=(e=>{let t="",n=e._start,r={};for(;null!==n;)n.deleted||(n.countable&&n.content instanceof pO?t+=n.content.str:n.content instanceof pL&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}})(e),i=t.map(e=>({insert:e.text,attributes:Object.assign({},r,fC(e.marks))})),{insert:l,remove:s,index:a}=cZ(o,i.map(e=>e.insert).join(""));e.delete(a,s),e.insert(a,l),e.applyDelta(i.map(e=>({retain:e.insert.length,attributes:e.attributes})))},fC=e=>{let t={};return e.forEach(e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)}),t},fS=(e,t,n,r)=>{if(t instanceof p2&&t.nodeName!==n.type.name)throw Error("node name mismatch!");if(r.set(t,n),t instanceof p2){let o=t.getAttributes(),i=n.attrs;for(let l in i)null!==i[l]?o[l]!==i[l]&&"ychange"!==l&&t.setAttribute(l,i[l]):t.removeAttribute(l);for(let s in o)void 0===i[s]&&t.removeAttribute(s)}let a=fy(n),c=a.length,d=t.toArray(),u=d.length,h=cz(c,u),p=0,f=0;for(;p<h;p++){let m=d[p],g=a[p];if(!fk(r.get(m),g)){if(!fw(m,g))break;r.set(m,g)}}for(;f+p+1<h;f++){let $=d[u-f-1],_=a[c-f-1];if(!fk(r.get($),_)){if(!fw($,_))break;r.set($,_)}}e.transact(()=>{for(;u-p-f>0&&c-p-f>0;){let n=d[p],o=a[p],i=d[u-f-1],l=a[c-f-1];if(n instanceof p4&&o instanceof Array)fv(n,o)||fx(n,o,r),p+=1;else{let s=n instanceof p2&&f1(n,o),h=i instanceof p2&&f1(i,l);if(s&&h){let m=f0(n,o,r),g=f0(i,l,r);m.foundMappedChild&&!g.foundMappedChild?h=!1:!m.foundMappedChild&&g.foundMappedChild||m.equalityFactor<g.equalityFactor?s=!1:h=!1}s?(fS(e,n,o,r),p+=1):h?(fS(e,i,l,r),f+=1):(r.delete(t.get(p)),t.delete(p,1),t.insert(p,[f$(o,r)]),p+=1)}}let $=u-p-f;if(1===u&&0===c&&d[0]instanceof p4?(r.delete(d[0]),d[0].delete(0,d[0].length)):$>0&&(t.slice(p,p+$).forEach(e=>r.delete(e)),t.delete(p,$)),p+f<c){let _=[];for(let b=p;b<c-f;b++)_.push(f$(a[b],r));t.insert(p,_)}},cR)},f1=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name,f2=new Set(["paragraph"]),f3=function(){let{protectedNodes:e=f2,trackedOrigins:t=[],undoManager:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new tl({key:cO,state:{init(r,o){let i=cR.getState(o),l=n||new h8(i.type,{trackedOrigins:new Set([cR].concat(t)),deleteFilter(t){var n,r;return n=t,r=e,!(n instanceof pJ)||!(n.content instanceof pF)||!(n.content.type instanceof pC||n.content.type instanceof p2&&r.has(n.content.type.nodeName))||0===n.content.type._length},captureTransaction:e=>!1!==e.meta.get("addToHistory")});return{undoManager:l,prevSel:null,hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}},apply(e,t,n,r){let o=cR.getState(r).binding,i=t.undoManager,l=i.undoStack.length>0,s=i.redoStack.length>0;return o?{undoManager:i,prevSel:fh(o,n),hasUndoOps:l,hasRedoOps:s}:l!==t.hasUndoOps||s!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}):t}},view(e){let t=cR.getState(e.state),n=cO.getState(e.state).undoManager;return n.on("stack-item-added",n=>{let{stackItem:r}=n,o=t.binding;o&&r.meta.set(o,cO.getState(e.state).prevSel)}),n.on("stack-item-popped",e=>{let{stackItem:n}=e,r=t.binding;r&&(r.beforeTransactionSelection=n.meta.get(r)||r.beforeTransactionSelection)}),{destroy(){n.destroy()}}}})},fE=oI.create({name:"collaboration",priority:1e3,addOptions:()=>({document:null,field:"default",fragment:null}),addStorage:()=>({isDisabled:!1}),onCreate(){this.editor.extensionManager.extensions.find(e=>"history"===e.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands:()=>({undo:()=>e=>{let{tr:t,state:n,dispatch:r}=e;return t.setMeta("preventDispatch",!0),0!==cO.getState(n).undoManager.undoStack.length&&(!r||(e=>{let t=cO.getState(e).undoManager;if(null!=t)return t.undo(),!0})(n))},redo:()=>e=>{let{tr:t,state:n,dispatch:r}=e;return t.setMeta("preventDispatch",!0),0!==cO.getState(n).undoManager.redoStack.length&&(!r||(e=>{let t=cO.getState(e).undoManager;if(null!=t)return t.redo(),!0})(n))}}),addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var e;let t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),n=f3(this.options.yUndoOptions),r=n.spec.view;n.spec.view=e=>{let{undoManager:t}=cO.getState(e.state);t.restore&&(t.restore(),t.restore=()=>{});let n=r?r(e):void 0;return{destroy(){let e=t.trackedOrigins.has(t),r=t._observers;t.restore=()=>{e&&t.trackedOrigins.add(t),t.doc.on("afterTransaction",t.afterTransactionHandler),t._observers=r},(null==n?void 0:n.destroy)&&n.destroy()}}};let o={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},i=function(e){let{colors:t=fd,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=!1,s=new fp(e,i),a=new tl({props:{editable(e){let t=cR.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:cR,state:{init:(o,i)=>({type:e,doc:e.doc,binding:s,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:n,permanentUserData:r}),apply(e,t){let n=e.getMeta(cR);if(void 0!==n)for(let r in t=Object.assign({},t),n)t[r]=n[r];return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==s.prosemirrorView&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||fr(0,()=>{null!=s.prosemirrorView&&(null==n.restore?s._renderSnapshot(n.snapshot,n.prevSnapshot,t):(s._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,s.mux(()=>{s._prosemirrorChanged(s.prosemirrorView.state.doc)})))})),t}},view:e=>(s.initView(e),null==i&&s._forceRerender(),o(),{update(){let t=a.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(l||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(l=!0,!1===t.addToHistory&&!t.isChangeOrigin){let n=cO.getState(e.state),r=n&&n.undoManager;r&&r.stopCapturing()}s.mux(()=>{t.doc.transact(n=>{n.meta.set("addToHistory",t.addToHistory),s._prosemirrorChanged(e.state.doc)},cR)})}},destroy(){s.destroy()}})});return a}(t,o);return this.editor.options.enableContentCheck&&(null===(e=t.doc)||void 0===e||e.on("beforeTransaction",()=>{try{var e;let n=(e=t,{type:"doc",content:e.toArray().map(function e(t){let n;if(t.nodeName){n={type:t.nodeName};let r=t.getAttributes();Object.keys(r).length&&(n.attrs=r);let o=t.toArray();o.length&&(n.content=o.map(e).flat())}else n=t.toDelta().map(e=>{let t={type:"text",text:e.insert};return e.attributes&&(t.marks=Object.keys(e.attributes).map(t=>{let n=e.attributes[t],r={type:t};return Object.keys(n)&&(r.attrs=n),r})),t});return n})});if(0===n.content.length)return;this.editor.schema.nodeFromJSON(n).check()}catch(r){return this.editor.emit("contentError",{error:r,editor:this.editor,disableCollaboration:()=>{var e;null===(e=t.doc)||void 0===e||e.destroy(),this.storage.isDisabled=!0}}),!1}})),[i,n,this.editor.options.enableContentCheck&&new tl({key:new tc("filterInvalidContent"),filterTransaction:()=>{var e;return!this.storage.isDisabled||(null===(e=t.doc)||void 0===e||e.destroy(),!0)}})].filter(Boolean)}}),f4=(e,t,n)=>e!==t,fM=e=>{let t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);let n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);let r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t},fT=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),f8=/^#[0-9a-fA-F]{6}$/,f6=(e,t,n,r,o)=>{let i=cR.getState(e),l=i.doc,s=[];return null!=i.snapshot||null!=i.prevSnapshot||0===i.binding.mapping.size?rb.create(e.doc,[]):(t.getStates().forEach((t,a)=>{if(n(l.clientID,a,t)&&null!=t.cursor){let c=t.user||{};null==c.color?c.color="#ffa500":f8.test(c.color)||console.warn("A user uses an unsupported color format",c),null==c.name&&(c.name=`User: ${a}`);let d=fa(l,i.type,hr(t.cursor.anchor),i.binding.mapping),u=fa(l,i.type,hr(t.cursor.head),i.binding.mapping);if(null!==d&&null!==u){let h=c9(e.doc.content.size-1,0);d=cz(d,h),u=cz(u,h),s.push(rg.widget(u,()=>r(c),{key:a+"",side:10}));let p=cz(d,u),f=c9(d,u);s.push(rg.inline(p,f,o(c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),rb.create(e.doc,s))},fN=function(e){let{awarenessStateFilter:t=f4,cursorBuilder:n=fM,selectionBuilder:r=fT,getSelection:o=e=>e.selection}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cursor";return new tl({key:cD,state:{init:(o,i)=>f6(i,e,t,n,r),apply(o,i,l,s){let a=cR.getState(s),c=o.getMeta(cD);return a&&a.isChangeOrigin||c&&c.awarenessUpdated?f6(s,e,t,n,r):i.map(o.mapping,o.doc)}},props:{decorations:e=>cD.getState(e)},view(t){let n=()=>{var e,n,r;t.docView&&(e=t,n=cD,r={awarenessUpdated:!0},fo||(fo=new Map,fr(0,fi)),dn(fo,e,de).set(n,r))},r=()=>{let n=cR.getState(t.state),r=e.getLocalState()||{};if(t.hasFocus()){let l=o(t.state),s=fl(l.anchor,n.type,n.binding.mapping),a=fl(l.head,n.type,n.binding.mapping);null!=r.cursor&&ha(hr(r.cursor.anchor),s)&&ha(hr(r.cursor.head),a)||e.setLocalStateField(i,{anchor:s,head:a})}else null!=r.cursor&&null!==fa(n.doc,n.type,hr(r.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(i,null)};return e.on("change",n),t.dom.addEventListener("focusin",r),t.dom.addEventListener("focusout",r),{update:r,destroy(){t.dom.removeEventListener("focusin",r),t.dom.removeEventListener("focusout",r),e.off("change",n),e.setLocalStateField(i,null)}}}})},f5=e=>Array.from(e.entries()).map(e=>{let[t,n]=e;return{clientId:t,...n.user}}),f7=()=>null,fL=oI.create({name:"collaborationCursor",priority:999,addOptions:()=>({provider:null,user:{name:null,color:null},render(e){let t=document.createElement("span");t.classList.add("collaboration-cursor__caret"),t.setAttribute("style",`border-color: ${e.color}`);let n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null),t.insertBefore(n,null),t},selectionRender:fT,onUpdate:f7}),onCreate(){if(this.options.onUpdate!==f7&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),!this.options.provider)throw Error('The "provider" option is required for the CollaborationCursor extension')},addStorage:()=>({users:[]}),addCommands(){return{updateUser:e=>()=>(this.options.user=e,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:e=>t=>{let{editor:n}=t;return console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),n.commands.updateUser(e)}}},addProseMirrorPlugins(){return[fN((this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=f5(this.options.provider.awareness.states),this.options.provider.awareness.on("update",()=>{this.storage.users=f5(this.options.provider.awareness.states)}),this.options.provider.awareness),{cursorBuilder:this.options.render,selectionBuilder:this.options.selectionRender})]}});class fP{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)})}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let r=t.nodeBefore,o=t.nodeAfter;if(r||o){let i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(i){let l=i.getBoundingClientRect(),s=r?l.bottom:l.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:l.left,right:l.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!e){let a=this.editorView.coordsAtPos(this.cursorPos);e={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let c,d,u=this.editorView.dom.offsetParent;if(this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),u&&(u!=document.body||"static"!=getComputedStyle(u).position)){let h=u.getBoundingClientRect();c=h.left-u.scrollLeft,d=h.top-u.scrollTop}else c=-pageXOffset,d=-pageYOffset;this.element.style.left=e.left-c+"px",this.element.style.top=e.top-d+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){let i=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=e6(this.editorView.state.doc,i,this.editorView.dragging.slice);null!=l&&(i=l)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}let fA=oI.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new tl({view:e=>new fP(e,t)})}(this.options)]}});class fR extends ej{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return fR.valid(n)?new fR(n):ej.near(n)}content(){return f.empty}eq(e){return e instanceof fR&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new fR(e.resolve(t.pos))}getBookmark(){return new fO(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)break}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)break}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&fR.valid(e))return e;let r=e.pos,o=null;for(let i=e.depth;;i--){let l=e.node(i);if(t>0?e.indexAfter(i)<l.childCount:e.index(i)>0){o=l.child(t>0?e.indexAfter(i):e.index(i)-1);break}if(0==i)return null;r+=t;let s=e.doc.resolve(r);if(fR.valid(s))return s}for(;;){let a=t>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!eK.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=a,r+=t;let c=e.doc.resolve(r);if(fR.valid(c))return c}return null}}}fR.prototype.visible=!1,fR.findFrom=fR.findGapCursorFrom,ej.jsonID("gapcursor",fR);class fO{constructor(e){this.pos=e}map(e){return new fO(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return fR.valid(t)?new fR(t):ej.near(t)}}let fD=rG({ArrowLeft:fI("horiz",-1),ArrowRight:fI("horiz",1),ArrowUp:fI("vert",-1),ArrowDown:fI("vert",1)});function fI(e,t){let n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){let i=e.selection,l=t>0?i.$to:i.$from,s=i.empty;if(i instanceof eG){if(!o.endOfTextblock(n)||0==l.depth)return!1;s=!1,l=e.doc.resolve(t>0?l.after():l.before())}let a=fR.findGapCursorFrom(l,t,s);return!!a&&(r&&r(e.tr.setSelection(new fR(a))),!0)}}function fH(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!fR.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&eK.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new fR(r))),!0)}function fz(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof fR))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=a.empty;for(let i=r.length-1;i>=0;i--)o=a.from(r[i].createAndFill(null,o));let l=e.state.tr.replace(n.pos,n.pos,new f(o,0,0));return l.setSelection(eG.near(l.doc.resolve(n.pos+1))),e.dispatch(l),!1}function f9(e){if(!(e.selection instanceof fR))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",rb.create(e.doc,[rg.widget(e.selection.head,t,{key:"gapcursor"})])}let fB=oI.create({name:"gapCursor",addProseMirrorPlugins:()=>[new tl({props:{decorations:f9,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&fR.valid(n)?new fR(n):null,handleClick:fH,handleKeyDown:fD,handleDOMEvents:{beforeinput:fz}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=o4(ox(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),fV=i8.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:t}=e;return["br",o2(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>e=>{let{commands:t,chain:n,state:r,editor:o}=e;return t.first([()=>t.exitCode(),()=>t.command(()=>{let{selection:e,storedMarks:t}=r;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:i}=this.options,{splittableMarks:l}=o.extensionManager,s=t||e.$to.parentOffset&&e.$from.marks();return n().insertContent({type:this.name}).command(e=>{let{tr:t,dispatch:n}=e;if(n&&s&&i){let r=s.filter(e=>l.includes(e.type.name));t.ensureMarks(r)}return!0}).run()})])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var fj=function(){};fj.prototype.append=function(e){return e.length?(e=fj.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},fj.prototype.prepend=function(e){return e.length?fj.from(e).append(this):this},fj.prototype.appendInner=function(e){return new fU(this,e)},fj.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?fj.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},fj.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},fj.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},fj.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},fj.from=function(e){return e instanceof fj?e:e&&e.length?new fF(e):fj.empty};var fF=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(fj);fj.empty=new fF([]);var fU=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(fj);let fW=fj;class fG{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--)if(this.items.get(o-1).selection){--o;break}t&&(r=(n=this.remapping(o,this.items.length)).maps.length);let i,l,s=e.tr,a=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(r=(n=this.remapping(o,t+1)).maps.length),r--,void c.push(e);if(n){c.push(new fq(e.map));let d,u=e.step.map(n.slice(r));u&&s.maybeStep(u).doc&&(d=s.mapping.maps[s.mapping.maps.length-1],a.push(new fq(d,void 0,void 0,a.length+c.length))),r--,d&&n.appendMap(d,r)}else s.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,l=new fG(this.items.slice(0,o).append(c.reverse().concat(a)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:l,transform:s,selection:i}}addTransform(e,t,n,r){var o,i;let l=[],s=this.eventCount,a=this.items,c=!r&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u,h=e.steps[d].invert(e.docs[d]),p=new fq(e.mapping.maps[d],h,t);(u=c&&c.merge(p))&&(p=u,d?l.pop():a=a.slice(0,a.length-1)),l.push(p),t&&(s++,t=void 0),r||(c=p)}let f=s-n.depth,m;return f>fJ&&(a=(o=a,i=f,o.forEach((e,t)=>{if(e.selection&&0==i--)return m=t,!1}),o.slice(m)),s-=f),new fG(a.append(l),s)}remapping(e,t){let n=new ep;return this.items.forEach((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)},e,t),n}addMaps(e){return 0==this.eventCount?this:new fG(this.items.append(e.map(e=>new fq(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,l=this.eventCount;this.items.forEach(e=>{e.selection&&l--},r);let s=t;this.items.forEach(t=>{let r=o.getMirror(--s);if(null==r)return;i=Math.min(i,r);let a=o.maps[r];if(t.step){let c=e.steps[r].invert(e.docs[r]),d=t.selection&&t.selection.map(o.slice(s+1,r));d&&l++,n.push(new fq(a,c,d))}else n.push(new fq(a))},r);let a=[];for(let c=t;c<i;c++)a.push(new fq(o.maps[c]));let d=this.items.slice(0,r).append(a).append(n),u=new fG(d,l);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((i,l)=>{if(l>=e)r.push(i),i.selection&&o++;else if(i.step){let s=i.step.map(t.slice(n)),a=s&&s.getMap();if(n--,a&&t.appendMap(a,n),s){let c=i.selection&&i.selection.map(t.slice(n));c&&o++;let d,u=new fq(a.invert(),s,c),h=r.length-1;(d=r.length&&r[h].merge(u))?r[h]=d:r.push(u)}}else i.map&&n--},this.items.length,0),new fG(fW.from(r.reverse()),o)}}fG.empty=new fG(fW.empty,0);class fq{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new fq(t.getMap().invert(),t,this.selection)}}}class fK{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}let fJ=20;function fZ(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,o)=>t.push(r,o));return t}function fX(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}let fQ=!1,fY=null;function me(e){let t=e.plugins;if(fY!=t){fQ=!1,fY=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){fQ=!0;break}}return fQ}let mt=new tc("history"),mn=new tc("closeHistory");function mr(e,t){return(n,r)=>{let o=mt.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){let i=function(e,t,n){let r=me(t),o=mt.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let l=i.selection.resolve(i.transform.doc),s=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,r),a=new fK(n?s:i.remaining,n?i.remaining:s,null,0,-1);return i.transform.setSelection(l).setMeta(mt,{redo:n,historyState:a})}(o,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}let mo=mr(!1,!0),mi=mr(!0,!0);mr(!1,!1),mr(!0,!1);let ml=oI.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>e=>{let{state:t,dispatch:n}=e;return mo(t,n)},redo:()=>e=>{let{state:t,dispatch:n}=e;return mi(t,n)}}),addProseMirrorPlugins(){return[function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new tl({key:mt,state:{init:()=>new fK(fG.empty,fG.empty,null,0,-1),apply:(e,n,r)=>(function(e,t,n,r){let o,i=n.getMeta(mt);if(i)return i.historyState;n.getMeta(mn)&&(e=new fK(e.done,e.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(l&&l.getMeta(mt))return l.getMeta(mt).redo?new fK(e.done.addTransform(n,void 0,r,me(t)),e.undone,fZ(n.mapping.maps),e.prevTime,e.prevComposition):new fK(e.done,e.undone.addTransform(n,void 0,r,me(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||l&&!1===l.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new fK(e.done.rebased(n,o),e.undone.rebased(n,o),fX(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new fK(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),fX(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let s=n.getMeta("composition"),a=0==e.prevTime||!l&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),c=l?fX(e.prevRanges,n.mapping):fZ(n.mapping.maps);return new fK(e.done.addTransform(n,a?t.selection.getBookmark():void 0,r,me(t)),fG.empty,c,n.time,null==s?e.prevComposition:s)}})(n,r,e,t)},config:t,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?mo:"historyRedo"==n?mi:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),ms=(e,t)=>{for(let n in t)e[n]=t[n];return e},ma="numeric",mc="ascii",md="alpha",mu="asciinumeric",mh="alphanumeric",mp="domain",mf="emoji",mm="whitespace";function mg(e,t){return e in t||(t[e]=[]),t[e]}function m$(e,t,n){for(let r in t[ma]&&(t[mu]=!0,t[mh]=!0),t[mc]&&(t[mu]=!0,t[md]=!0),t[mu]&&(t[mh]=!0),t[md]&&(t[mh]=!0),t[mh]&&(t[mp]=!0),t[mf]&&(t[mp]=!0),t){let o=mg(r,n);0>o.indexOf(e)&&o.push(e)}}function m_(e){void 0===e&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}m_.groups={},m_.prototype={accepts(){return!!this.t},go(e){let t=this.j[e];if(t)return t;for(let n=0;n<this.jr.length;n++){let r=this.jr[n][0],o=this.jr[n][1];if(o&&r.test(e))return o}return this.jd},has(e,t){return void 0===t&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,r)},tr(e,t,n,r){let o;return r=r||m_.groups,t&&t.j?o=t:(o=new m_(t),n&&r&&m$(t,n,r)),this.jr.push([e,o]),o},ts(e,t,n,r){let o=this,i=e.length;if(!i)return o;for(let l=0;l<i-1;l++)o=o.tt(e[l]);return o.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||m_.groups;let o=this;if(t&&t.j)return o.j[e]=t,t;let i=t,l,s=o.go(e);if(s?(l=new m_,ms(l.j,s.j),l.jr.push.apply(l.jr,s.jr),l.jd=s.jd,l.t=s.t):l=new m_,i){if(r){if(l.t&&"string"==typeof l.t){let a=ms(function(e,t){let n={};for(let r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(l.t,r),n);m$(i,a,r)}else n&&m$(i,n,r)}l.t=i}return o.j[e]=l,l}};let mb=(e,t,n,r,o)=>e.ta(t,n,r,o),my=(e,t,n,r,o)=>e.tr(t,n,r,o),mv=(e,t,n,r,o)=>e.ts(t,n,r,o),mw=(e,t,n,r,o)=>e.tt(t,n,r,o),mk="WORD",m0="UWORD",mx="LOCALHOST",mC="UTLD",mS="SCHEME",m1="SLASH_SCHEME",m2="OPENBRACE",m3="CLOSEBRACE",mE="OPENBRACKET",m4="CLOSEBRACKET",mM="OPENPAREN",mT="CLOSEPAREN",m8="OPENANGLEBRACKET",m6="CLOSEANGLEBRACKET",mN="FULLWIDTHLEFTPAREN",m5="FULLWIDTHRIGHTPAREN",m7="LEFTCORNERBRACKET",mL="RIGHTCORNERBRACKET",mP="LEFTWHITECORNERBRACKET",mA="RIGHTWHITECORNERBRACKET",mR="FULLWIDTHLESSTHAN",mO="FULLWIDTHGREATERTHAN",mD="AMPERSAND",mI="APOSTROPHE",mH="ASTERISK",mz="BACKSLASH",m9="BACKTICK",mB="CARET",mV="COLON",mj="COMMA",mF="DOLLAR",mU="EQUALS",mW="EXCLAMATION",mG="HYPHEN",mq="PERCENT",mK="PIPE",mJ="PLUS",mZ="POUND",mX="QUERY",mQ="QUOTE",mY="SEMI",ge="SLASH",gt="TILDE",gn="UNDERSCORE",gr="EMOJI";var go=Object.freeze({__proto__:null,WORD:mk,UWORD:m0,LOCALHOST:mx,TLD:"TLD",UTLD:mC,SCHEME:mS,SLASH_SCHEME:m1,NUM:"NUM",WS:"WS",NL:"NL",OPENBRACE:m2,CLOSEBRACE:m3,OPENBRACKET:mE,CLOSEBRACKET:m4,OPENPAREN:mM,CLOSEPAREN:mT,OPENANGLEBRACKET:m8,CLOSEANGLEBRACKET:m6,FULLWIDTHLEFTPAREN:mN,FULLWIDTHRIGHTPAREN:m5,LEFTCORNERBRACKET:m7,RIGHTCORNERBRACKET:mL,LEFTWHITECORNERBRACKET:mP,RIGHTWHITECORNERBRACKET:mA,FULLWIDTHLESSTHAN:mR,FULLWIDTHGREATERTHAN:mO,AMPERSAND:mD,APOSTROPHE:mI,ASTERISK:mH,AT:"AT",BACKSLASH:mz,BACKTICK:m9,CARET:mB,COLON:mV,COMMA:mj,DOLLAR:mF,DOT:"DOT",EQUALS:mU,EXCLAMATION:mW,HYPHEN:mG,PERCENT:mq,PIPE:mK,PLUS:mJ,POUND:mZ,QUERY:mX,QUOTE:mQ,SEMI:mY,SLASH:ge,TILDE:gt,UNDERSCORE:gn,EMOJI:gr,SYM:"SYM"});let gi=/[a-z]/,gl=/\p{L}/u,gs=/\p{Emoji}/u,ga=/\d/,gc=/\s/,gd=null,gu=null;function gh(e,t,n,r,o){let i,l=t.length;for(let s=0;s<l-1;s++){let a=t[s];e.j[a]?i=e.j[a]:((i=new m_(r)).jr=o.slice(),e.j[a]=i),e=i}return(i=new m_(n)).jr=o.slice(),e.j[t[l-1]]=i,i}function gp(e){let t=[],n=[],r=0;for(;r<e.length;){let o=0;for(;"0123456789".indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}let gf={defaultProtocol:"http",events:null,format:gg,formatHref:gg,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function gm(e,t){void 0===t&&(t=null);let n=ms({},gf);e&&(n=ms(n,e instanceof gm?e.o:e));let r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}function gg(e){return e}function g$(e,t){this.t="token",this.v=e,this.tk=t}function g_(e,t){class n extends g${constructor(t,n){super(t,n),this.t=e}}for(let r in t)n.prototype[r]=t[r];return n.t=e,n}gm.prototype={o:gf,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){let r=null!=t,o=this.o[e];return o&&("object"==typeof o?"function"==typeof(o=n.t in o?o[n.t]:gf[e])&&r&&(o=o(t,n)):"function"==typeof o&&r&&(o=o(t,n.t,n))),o},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){let t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},g$.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){let t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return void 0===e&&(e=gf.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){let t=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",t,this),r=e.get("tagName",t,this),o=this.toFormattedString(e),i={},l=e.get("className",t,this),s=e.get("target",t,this),a=e.get("rel",t,this),c=e.getObj("attributes",t,this),d=e.getObj("events",t,this);return i.href=n,l&&(i.class=l),s&&(i.target=s),a&&(i.rel=a),c&&ms(i,c),{tagName:r,attributes:i,content:o,eventListeners:d}}};let gb=g_("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),gy=g_("text"),gv=g_("nl"),gw=g_("url",{isLink:!0,toHref(e){return void 0===e&&(e=gf.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){let e=this.tk;return e.length>=2&&e[0].t!==mx&&e[1].t===mV}}),gk=e=>new m_(e);function g0(e,t,n){let r=n[0].s,o=n[n.length-1].e;return new e(t.slice(r,o),n)}let gx="undefined"!=typeof console&&console&&console.warn||(()=>{}),gC={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function gS(e,t){if(void 0===t&&(t=!1),gC.initialized&&gx(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');gC.customSchemes.push([e,t])}function g1(e){return gC.initialized||function e(){gC.scanner=function(e){void 0===e&&(e=[]);let t={};m_.groups=t;let n=new m_;null==gd&&(gd=gp("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==gu&&(gu=gp("ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2")),mw(n,"'",mI),mw(n,"{",m2),mw(n,"}",m3),mw(n,"[",mE),mw(n,"]",m4),mw(n,"(",mM),mw(n,")",mT),mw(n,"<",m8),mw(n,">",m6),mw(n,"（",mN),mw(n,"）",m5),mw(n,"「",m7),mw(n,"」",mL),mw(n,"『",mP),mw(n,"』",mA),mw(n,"＜",mR),mw(n,"＞",mO),mw(n,"&",mD),mw(n,"*",mH),mw(n,"@","AT"),mw(n,"`",m9),mw(n,"^",mB),mw(n,":",mV),mw(n,",",mj),mw(n,"$",mF),mw(n,".","DOT"),mw(n,"=",mU),mw(n,"!",mW),mw(n,"-",mG),mw(n,"%",mq),mw(n,"|",mK),mw(n,"+",mJ),mw(n,"#",mZ),mw(n,"?",mX),mw(n,'"',mQ),mw(n,"/",ge),mw(n,";",mY),mw(n,"~",gt),mw(n,"_",gn),mw(n,"\\",mz);let r=my(n,ga,"NUM",{[ma]:!0});my(r,ga,r);let o=my(n,gi,mk,{[mc]:!0});my(o,gi,o);let i=my(n,gl,m0,{[md]:!0});my(i,gi),my(i,gl,i);let l=my(n,gc,"WS",{[mm]:!0});mw(n,"\n","NL",{[mm]:!0}),mw(l,"\n"),my(l,gc,l);let s=my(n,gs,gr,{[mf]:!0});my(s,gs,s),mw(s,"️",s);let a=mw(s,"‍");my(a,gs,s);let c=[[gi,o]],d=[[gi,null],[gl,i]];for(let u=0;u<gd.length;u++)gh(n,gd[u],"TLD",mk,c);for(let h=0;h<gu.length;h++)gh(n,gu[h],mC,m0,d);m$("TLD",{tld:!0,ascii:!0},t),m$(mC,{utld:!0,alpha:!0},t),gh(n,"file",mS,mk,c),gh(n,"mailto",mS,mk,c),gh(n,"http",m1,mk,c),gh(n,"https",m1,mk,c),gh(n,"ftp",m1,mk,c),gh(n,"ftps",m1,mk,c),m$(mS,{scheme:!0,ascii:!0},t),m$(m1,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let p=0;p<e.length;p++){let f=e[p][0],m=e[p][1]?{scheme:!0}:{slashscheme:!0};f.indexOf("-")>=0?m[mp]=!0:gi.test(f)?ga.test(f)?m[mu]=!0:m[mc]=!0:m[ma]=!0,mv(n,f,f,m)}return mv(n,"localhost",mx,{ascii:!0}),n.jd=new m_("SYM"),{start:n,tokens:ms({groups:t},go)}}(gC.customSchemes);for(let t=0;t<gC.tokenQueue.length;t++)gC.tokenQueue[t][1]({scanner:gC.scanner});gC.parser=function(e){let{groups:t}=e,n=t.domain.concat([mD,mH,"AT",mz,m9,mB,mF,mU,mG,"NUM",mq,mK,mJ,mZ,ge,"SYM",gt,gn]),r=[mI,mV,mj,"DOT",mW,mX,mQ,mY,m8,m6,m2,m3,m4,mE,mM,mT,mN,m5,m7,mL,mP,mA,mR,mO],o=[mD,mI,mH,mz,m9,mB,mF,mU,mG,m2,m3,mq,mK,mJ,mZ,mX,ge,"SYM",gt,gn],i=gk(),l=mw(i,gt);mb(l,o,l),mb(l,t.domain,l);let s=gk(),a=gk(),c=gk();mb(i,t.domain,s),mb(i,t.scheme,a),mb(i,t.slashscheme,c),mb(s,o,l),mb(s,t.domain,s);let d=mw(s,"AT");mw(l,"AT",d),mw(a,"AT",d),mw(c,"AT",d);let u=mw(l,"DOT");mb(u,o,l),mb(u,t.domain,l);let h=gk();mb(d,t.domain,h),mb(h,t.domain,h);let p=mw(h,"DOT");mb(p,t.domain,h);let f=gk(gb);mb(p,t.tld,f),mb(p,t.utld,f),mw(d,mx,f);let m=mw(h,mG);mb(m,t.domain,h),mb(f,t.domain,h),mw(f,"DOT",p),mw(f,mG,m);let g=mw(f,mV);mb(g,t.numeric,gb);let $=mw(s,mG),_=mw(s,"DOT");mb($,t.domain,s),mb(_,o,l),mb(_,t.domain,s);let b=gk(gw);mb(_,t.tld,b),mb(_,t.utld,b),mb(b,t.domain,s),mb(b,o,l),mw(b,"DOT",_),mw(b,mG,$),mw(b,"AT",d);let y=mw(b,mV),v=gk(gw);mb(y,t.numeric,v);let w=gk(gw),k=gk();mb(w,n,w),mb(w,r,k),mb(k,n,w),mb(k,r,k),mw(b,ge,w),mw(v,ge,w);let x=mw(a,mV),C=mw(c,mV),S=mw(C,ge),E=mw(S,ge);mb(a,t.domain,s),mw(a,"DOT",_),mw(a,mG,$),mb(c,t.domain,s),mw(c,"DOT",_),mw(c,mG,$),mb(x,t.domain,w),mw(x,ge,w),mb(E,t.domain,w),mb(E,n,w),mw(E,ge,w);let M=[[m2,m3],[mE,m4],[mM,mT],[m8,m6],[mN,m5],[m7,mL],[mP,mA],[mR,mO]];for(let T=0;T<M.length;T++){let[N,L]=M[T],P=mw(w,N);mw(k,N,P),mw(P,L,w);let A=gk(gw);mb(P,n,A);let R=gk();mb(P,r),mb(A,n,A),mb(A,r,R),mb(R,n,A),mb(R,r,R),mw(A,L,w),mw(R,L,w)}return mw(i,mx,b),mw(i,"NL",gv),{start:i,tokens:go}}(gC.scanner.tokens);for(let n=0;n<gC.pluginQueue.length;n++)gC.pluginQueue[n][1]({scanner:gC.scanner,parser:gC.parser});gC.initialized=!0}(),function(e,t,n){let r=n.length,o=0,i=[],l=[];for(;o<r;){let s=e,a=null,c=null,d=0,u=null,h=-1;for(;o<r&&!(a=s.go(n[o].t));)l.push(n[o++]);for(;o<r&&(c=a||s.go(n[o].t));)a=null,(s=c).accepts()?(h=0,u=s):h>=0&&h++,o++,d++;if(h<0)(o-=d)<r&&(l.push(n[o]),o++);else{l.length>0&&(i.push(g0(gy,t,l)),l=[]),o-=h,d-=h;let p=u.t,f=n.slice(o-d,o);i.push(g0(p,t,f))}}return l.length>0&&i.push(g0(gy,t,l)),i}(gC.parser.start,e,function(e,t){let n=function(e){let t=[],n=e.length,r=0;for(;r<n;){let o,i=e.charCodeAt(r),l=i<55296||i>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(l),r+=l.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),r=n.length,o=[],i=0,l=0;for(;l<r;){let s=e,a=null,c=0,d=null,u=-1,h=-1;for(;l<r&&(a=s.go(n[l]));)(s=a).accepts()?(u=0,h=0,d=s):u>=0&&(u+=n[l].length,h++),c+=n[l].length,i+=n[l].length,l++;i-=u,l-=h,c-=u,o.push({t:d.t,v:t.slice(i-c,i),s:i-c,e:i})}return o}(gC.scanner.start,e))}function g2(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}let r=new gm(n),o=g1(e),i=[];for(let l=0;l<o.length;l++){let s=o[l];s.isLink&&(!t||s.t===t)&&r.check(s)&&i.push(s.toFormattedObject(r))}return i}let g3=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function gE(e,t){let n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{let t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(g3,"").match(RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}let g4=oR.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(e=>{"string"!=typeof e?gS(e.scheme,e.optionalSlashes):gS(e)})},onDestroy(){m_.groups={},gC.scanner=null,gC.parser=null,gC.tokenQueue=[],gC.pluginQueue=[],gC.customSchemes=[],gC.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{let t=e.getAttribute("href");return!(!t||!gE(t,this.options.protocols))&&null}}]},renderHTML(e){let{HTMLAttributes:t}=e;return gE(t.href,this.options.protocols)?["a",o2(this.options.HTMLAttributes,t),0]:["a",o2(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:e=>t=>{let{chain:n}=t;return n().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>t=>{let{chain:n}=t;return n().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>e=>{let{chain:t}=e;return t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}},addPasteRules(){return[iN({find:e=>{let t=[];if(e){let{validate:n}=this.options,r=g2(e).filter(e=>e.isLink&&n(e.value));r.length&&r.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes(e){var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins(){var e,t,n;let r=[];return this.options.autolink&&r.push((e={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate},new tl({key:new tc("autolink"),appendTransaction(t,n,r){let o=t.some(e=>e.docChanged)&&!n.doc.eq(r.doc),i=t.some(e=>e.getMeta("preventAutolink"));if(!o||i)return;let{tr:l}=r;return iu(il(n.doc,[...t])).forEach(t=>{var n;let{newRange:o}=t,i=ia(r.doc,o,e=>e.isTextblock),s,a;if(i.length>1?(s=i[0],a=r.doc.textBetween(s.pos,s.pos+s.node.nodeSize,void 0," ")):i.length&&r.doc.textBetween(o.from,o.to," "," ").endsWith(" ")&&(s=i[0],a=r.doc.textBetween(s.pos,o.to,void 0," ")),s&&a){let c=a.split(" ").filter(e=>""!==e);if(c.length<=0)return!1;let d=c[c.length-1],u=s.pos+a.lastIndexOf(d);if(!d)return!1;let h=g1(d).map(t=>t.toObject(e.defaultProtocol));if(!(1===(n=h).length?n[0].isLink:3===n.length&&n[1].isLink&&["()","[]"].includes(n[0].value+n[2].value)))return!1;h.filter(e=>e.isLink).map(e=>({...e,from:u+e.start+1,to:u+e.end+1})).filter(e=>!r.schema.marks.code||!r.doc.rangeHasMark(e.from,e.to,r.schema.marks.code)).filter(t=>e.validate(t.value)).forEach(t=>{ih(t.from,t.to,r.doc).some(t=>t.mark.type===e.type)||l.addMark(t.from,t.to,e.type.create({href:t.href}))})}}),l.steps.length?l:void 0}}))),!0===this.options.openOnClick&&r.push((t={type:this.type},new tl({key:new tc("handleClickLink"),props:{handleClick(e,n,r){var o,i;if(0!==r.button||!e.editable)return!1;let l=r.target,s=[];for(;"DIV"!==l.nodeName;)s.push(l),l=l.parentNode;if(!s.find(e=>"A"===e.nodeName))return!1;let a=id(e.state,t.type.name),c=r.target,d=null!==(o=null==c?void 0:c.href)&&void 0!==o?o:a.href,u=null!==(i=null==c?void 0:c.target)&&void 0!==i?i:a.target;return!(!c||!d)&&(window.open(d,u),!0)}}}))),this.options.linkOnPaste&&r.push((n={editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type},new tl({key:new tc("handlePasteLink"),props:{handlePaste(e,t,r){let{state:o}=e,{selection:i}=o,{empty:l}=i;if(l)return!1;let s="";r.content.forEach(e=>{s+=e.textContent});let a=g2(s,{defaultProtocol:n.defaultProtocol}).find(e=>e.isLink&&e.value===s);return!(!s||!a)&&(n.editor.commands.setMark(n.type,{href:a.href}),!0)}}}))),r}}),gM=i8.create({name:"text",group:"inline"});var gT=Object.defineProperty,g8=(e,t,n)=>{var r,o,i;return r=e,o="symbol"!=typeof t?t+"":t,i=n,o in r?gT(r,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[o]=i};class g6 extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function gN(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{"data-test":n,...r}=e;if(Object.keys(r).length>0&&t)throw Error("Object must be empty "+JSON.stringify(e))}let g5=oI.create({name:"uniqueID",priority:1e4,addOptions:()=>({attributeName:"id",types:[],setIdAttribute:!1,generateID(){if("u">typeof window&&window.__TEST_OPTIONS){let e=window.__TEST_OPTIONS;return void 0===e.mockID?e.mockID=0:e.mockID++,e.mockID.toString()}return iF()},filterTransaction:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>e.getAttribute(`data-${this.options.attributeName}`),renderHTML:e=>{let t={[`data-${this.options.attributeName}`]:e[this.options.attributeName]};return this.options.setIdAttribute?{...t,id:e[this.options.attributeName]}:t}}}}]},addProseMirrorPlugins(){let e=null,t=!1;return[new tl({key:new tc("uniqueID"),appendTransaction:(e,t,n)=>{let r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),o=this.options.filterTransaction&&e.some(e=>{let t,n;return!(null!==(n=(t=this.options).filterTransaction)&&void 0!==n&&n.call(t,e))});if(!r||o)return;let{tr:i}=n,{types:l,attributeName:s,generateID:a}=this.options,c=il(t.doc,e),{mapping:d}=c;return iu(c).forEach(e=>{let{newRange:r}=e,o=ia(n.doc,r,e=>l.includes(e.type.name)),c=o.map(e=>{let{node:t}=e;return t.attrs[s]}).filter(e=>null!==e),u=function e(t){let n=t.filter((e,n)=>t.indexOf(e)!==n);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter(e=>{let r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(n)}(c);o.forEach(e=>{let r,{node:o,pos:l}=e,c=null===(r=i.doc.nodeAt(l))||void 0===r?void 0:r.attrs[s];if(null===c){let h=t.doc.type.createAndFill().content;if(null===t.doc.content.findDiffStart(h)){let p=JSON.parse(JSON.stringify(n.doc.toJSON()));if(p.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(p.content)===JSON.stringify(h.toJSON()))return void i.setNodeMarkup(l,void 0,{...o.attrs,[s]:"initialBlockId"})}return void i.setNodeMarkup(l,void 0,{...o.attrs,[s]:a()})}let{deleted:f}=d.invert().mapResult(l);f&&u.includes(c)&&i.setNodeMarkup(l,void 0,{...o.attrs,[s]:a()})})}),i.steps.length?i:void 0},view(t){let n=n=>{let r;e=null!==(r=t.dom.parentElement)&&void 0!==r&&r.contains(n.target)?t.dom.parentElement:null};return window.addEventListener("dragstart",n),{destroy(){window.removeEventListener("dragstart",n)}}},props:{handleDOMEvents:{drop(n,r){let o;return(e!==n.dom.parentElement||"copy"===(null===(o=r.dataTransfer)||void 0===o?void 0:o.effectAllowed))&&(e=null,t=!0),!1},paste:()=>(t=!0,!1)},transformPasted:e=>{if(!t)return e;let{types:n,attributeName:r}=this.options,o=e=>{let t=[];return e.forEach(e=>{if(e.isText)return void t.push(e);if(!n.includes(e.type.name))return void t.push(e.copy(o(e.content)));let i=e.type.create({...e.attrs,[r]:null},o(e.content),e.marks);t.push(i)}),a.from(t)};return t=!1,new f(o(e.content),e.openStart,e.openEnd)}}})]}});function g7(e){return"link"===e.type}function gL(e){return"string"!=typeof e&&"link"===e.type}function gP(e){return"string"!=typeof e&&"text"===e.type}function gA(e,t,n){let r=[];for(let[o,i]of Object.entries(e.styles)){let l=n[o];if(!l)throw Error(`style ${o} not found in styleSchema`);if("boolean"===l.propSchema)r.push(t.mark(o));else{if("string"!==l.propSchema)throw new g6(l.propSchema);r.push(t.mark(o,{stringValue:i}))}}return e.text.split(/(\n)/g).filter(e=>e.length>0).map(e=>"\n"===e?t.nodes.hardBreak.create():t.text(e,r))}function gR(e,t,n){let r=t.marks.link.create({href:e.href});return gO(e.content,t,n).map(e=>{if("text"===e.type.name)return e.mark([...e.marks,r]);if("hardBreak"===e.type.name)return e;throw Error("unexpected node type")})}function gO(e,t,n){let r=[];if("string"==typeof e)return r.push(...gA({type:"text",text:e,styles:{}},t,n)),r;for(let o of e)r.push(...gA(o,t,n));return r}function gD(e,t,n){let r=[];for(let o of e)"string"==typeof o?r.push(...gO(o,t,n)):gL(o)?r.push(...gR(o,t,n)):gP(o)?r.push(...gO([o],t,n)):r.push(gH(o,t,n));return r}function gI(e,t,n){var r;let o=[];for(let i of e.rows){let l=[];for(let s=0;s<i.cells.length;s++){let a=i.cells[s],c;if(a){if("string"==typeof a)c=t.nodes.tableParagraph.create({},t.text(a));else{let d=gD(a,t,n);c=t.nodes.tableParagraph.create({},d)}}else c=t.nodes.tableParagraph.create({});let u=t.nodes.tableCell.create({colwidth:null!=(r=e.columnWidths)&&r[s]?[e.columnWidths[s]]:null},c);l.push(u)}let h=t.nodes.tableRow.create({},l);o.push(h)}return o}function gH(e,t,n){let r,o=e.type;if(void 0===o&&(o="paragraph"),!t.nodes[o])throw Error(`node type ${o} not found in schema`);if(e.content){if("string"==typeof e.content){let i=gD([e.content],t,n);r=t.nodes[o].create(e.props,i)}else if(Array.isArray(e.content)){let l=gD(e.content,t,n);r=t.nodes[o].create(e.props,l)}else{if("tableContent"!==e.content.type)throw new g6(e.content.type);{let s=gI(e.content,t,n);r=t.nodes[o].create(e.props,s)}}}else r=t.nodes[o].create(e.props);return r}function gz(e,t,n){let r=e.id;void 0===r&&(r=g5.options.generateID());let o=gH(e,t,n),i=[];if(e.children)for(let l of e.children)i.push(gz(l,t,n));let s=t.nodes.blockGroup.create({},i);return t.nodes.blockContainer.create({id:r,...e.props},i.length>0?[o,s]:o)}function g9(e){let t=[...e.classList].filter(e=>!e.startsWith("bn-"))||[];t.length>0?e.className=t.join(" "):e.removeAttribute("class")}function gB(e,t,n,r){let o;if(!t)throw Error("blockContent is required");if("string"==typeof t)o=gD([t],e.pmSchema,e.schema.styleSchema);else if(Array.isArray(t))o=gD(t,e.pmSchema,e.schema.styleSchema);else{if("tableContent"!==t.type)throw new g6(t.type);o=gI(t,e.pmSchema,e.schema.styleSchema)}let i=n.serializeFragment(a.from(o),r);return 1===i.nodeType&&g9(i),i}function gV(e,t,n,r,o,i,l){var s,a,c,d,u,h,p;let f=(null==l?void 0:l.document)??document,m=t.pmSchema.nodes.blockContainer,g=n.props;if(!n.props)for(let[$,_]of(g={},Object.entries(t.schema.blockSchema[n.type].propSchema)))g[$]=_.default;let b=[...(null==(a=null==(s=m.spec)?void 0:s.toDOM)?void 0:a.call(s,m.create({id:n.id,...g}))).dom.attributes],y=t.blockImplementations[n.type].implementation.toExternalHTML({...n,props:g},t),v=f.createDocumentFragment();if(y.dom.classList.contains("bn-block-content")){let w=[...b,...y.dom.attributes].filter(e=>e.name.startsWith("data")&&"data-content-type"!==e.name&&"data-file-block"!==e.name&&"data-node-view-wrapper"!==e.name&&"data-node-type"!==e.name&&"data-id"!==e.name&&"data-index"!==e.name&&"data-editable"!==e.name);for(let k of w)y.dom.firstChild.setAttribute(k.name,k.value);g9(y.dom.firstChild),v.append(...y.dom.childNodes)}else v.append(y.dom);if(y.contentDOM&&n.content){let x=gB(t,n.content,r,l);y.contentDOM.appendChild(x)}let C;if(o.has(n.type)?C="OL":i.has(n.type)&&(C="UL"),C){if((null==(c=e.lastChild)?void 0:c.nodeName)!==C){let S=f.createElement(C);e.append(S)}let E=f.createElement("li");E.append(v),e.lastChild.appendChild(E)}else e.append(v);if(n.children&&n.children.length>0){let M=f.createDocumentFragment();if(gj(M,t,n.children,r,o,i,l),"UL"===(null==(d=e.lastChild)?void 0:d.nodeName)||"OL"===(null==(u=e.lastChild)?void 0:u.nodeName))for(;"UL"===(null==(h=M.firstChild)?void 0:h.nodeName)||"OL"===(null==(p=M.firstChild)?void 0:p.nodeName);)e.lastChild.lastChild.appendChild(M.firstChild);e.append(M)}}let gj=(e,t,n,r,o,i,l)=>{for(let s of n)gV(e,t,s,r,o,i,l)},gF=(e,t)=>{let n=eo.fromSchema(e);return{exportBlocks(e,r){let o=((e,t,n,r,o,i)=>{let l=((null==i?void 0:i.document)??document).createDocumentFragment();return gj(l,e,t,n,r,o,i),l})(t,e,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),r),i=document.createElement("div");return i.append(o),i.innerHTML},exportInlineContent(e,r){let o=gB(t,e,n,r),i=document.createElement("div");return i.append(o.cloneNode(!0)),i.innerHTML}}};function gU(e,t,n,r,o){var i,l,s,c;let d=e.pmSchema.nodes.blockContainer,u=t.props;if(!t.props)for(let[h,p]of(u={},Object.entries(e.schema.blockSchema[t.type].propSchema)))u[h]=p.default;let f=null==(l=null==(i=d.spec)?void 0:i.toDOM)?void 0:l.call(i,d.create({id:t.id,...u})),m=e.blockImplementations[t.type].implementation.toInternalHTML({...t,props:u},e);if("numberedListItem"===t.type&&m.dom.setAttribute("data-index",r.toString()),m.contentDOM&&t.content){let g=function(e,t,n,r){let o;if(!t)throw Error("blockContent is required");if("string"==typeof t)o=gD([t],e.pmSchema,e.schema.styleSchema);else if(Array.isArray(t))o=gD(t,e.pmSchema,e.schema.styleSchema);else{if("tableContent"!==t.type)throw new g6(t.type);o=gI(t,e.pmSchema,e.schema.styleSchema)}return n.serializeFragment(a.from(o),r)}(e,t.content,n,o);m.contentDOM.appendChild(g)}return null==(s=f.contentDOM)||s.appendChild(m.dom),t.children&&t.children.length>0&&(null==(c=f.contentDOM)||c.appendChild(gW(e,t.children,n,o))),f.dom}let gW=(e,t,n,r)=>{let o=e.pmSchema.nodes.blockGroup,i=o.spec.toDOM(o.create({})),l=0;for(let s of t){"numberedListItem"===s.type?l++:l=0;let a=gU(e,s,n,l,r);i.contentDOM.appendChild(a)}return i.dom};function gG(e,t){let n=e.resolve(t);if(n.nodeAfter&&"blockContainer"===n.nodeAfter.type.name)return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if("blockContainer"===o.type.name)return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}let i=[];e.descendants((e,t)=>{"blockContainer"===e.type.name&&i.push(t)}),console.warn(`Position ${t} is not within a blockContainer node.`);let l=e.resolve(i.find(e=>e>=t)||i[i.length-1]);return{posBeforeNode:l.pos,node:l.nodeAfter}}function gq(e,t){let n=e,r=t,o=r+n.nodeSize,i,l;if(n.forEach((e,t)=>{if("blockContent"===e.type.spec.group){let n=r+t+1,o=n+e.nodeSize;i={node:e,beforePos:n,afterPos:o}}else if("blockGroup"===e.type.name){let s=r+t+1,a=s+e.nodeSize;l={node:e,beforePos:s,afterPos:a}}}),!i)throw Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{blockContainer:{node:n,beforePos:r,afterPos:o},blockContent:i,blockGroup:l}}function gK(e){return gq(e.node,e.posBeforeNode)}function gJ(e){if(!e.nodeAfter)throw Error(`Attempted to get blockContainer node at position ${e.pos} but a node at this position does not exist`);if("blockContainer"!==e.nodeAfter.type.name)throw Error(`Attempted to get blockContainer node at position ${e.pos} but found node of different type ${e.nodeAfter}`);return gq(e.nodeAfter,e.pos)}function gZ(e){return gK(gG(e.doc,e.selection.anchor))}function gX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ctrl";return"u">typeof navigator&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent))?e.replace("Mod","⌘"):e.replace("Mod",t)}function gQ(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>e).join(" ")}let gY=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function $e(e,t,n,r){let o=document.createElement("div");for(let[i,l]of(o.className=gQ("bn-block-content",n.class),o.setAttribute("data-content-type",e),Object.entries(n)))"class"!==i&&o.setAttribute(i,l);let s=document.createElement(t);for(let[a,c]of(s.className=gQ("bn-inline-content",r.class),Object.entries(r)))"class"!==a&&s.setAttribute(a,c);return o.appendChild(s),{dom:o,contentDOM:s}}let $t=(e,t)=>{let n=gz(e,t.pmSchema,t.schema.styleSchema).firstChild,r=t.pmSchema.nodes[n.type.name].spec.toDOM;if(void 0===r)throw Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");let o=r(n);if("object"!=typeof o||!("dom"in o))throw Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},$n={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},$r=["backgroundColor","textColor"];function $o(e){return"data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $i(e){let t=e.split("/");return t.length&&""!==t[t.length-1]?t[t.length-1]:e}function $l(e){let t={};return Object.entries(e).filter(e=>{let[t,n]=e;return!$r.includes(t)}).forEach(e=>{let[n,r]=e;t[n]={default:r.default,keepOnSplit:!0,parseHTML(e){let t=e.getAttribute($o(n));if(null===t)return null;if("boolean"==typeof r.default)return"true"===t||"false"!==t&&null;if("number"==typeof r.default){let o=parseFloat(t);return!Number.isNaN(o)&&Number.isFinite(o)?o:null}return t},renderHTML:e=>e[n]!==r.default?{[$o(n)]:e[n]}:{}}}),t}function $s(e,t,n,r){if("boolean"==typeof e)throw Error("Cannot find node position as getPos is a boolean, not a function.");let o=e(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw Error("Block doesn't have id");let l=t.getBlock(i);if(l.type!==r)throw Error("Block type does not match");return l}function $a(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,l=document.createElement("div");if(void 0!==i)for(let[s,a]of Object.entries(i))"class"!==s&&l.setAttribute(s,a);for(let[c,d]of(l.className=gQ("bn-block-content",(null==i?void 0:i.class)||""),l.setAttribute("data-content-type",t),Object.entries(n)))$r.includes(c)||d===r[c].default||l.setAttribute($o(c),d);return o&&l.setAttribute("data-file-block",""),l.appendChild(e.dom),void 0!==e.contentDOM&&(e.contentDOM.className=gQ("bn-inline-content",e.contentDOM.className),e.contentDOM.setAttribute("data-editable","")),{...e,dom:l}}function $c(e){return i8.create(e)}function $d(e,t){return{config:e,implementation:t}}function $u(e,t,n){return $d({type:e.name,content:"inline*"===e.config.content?"inline":"tableRow+"===e.config.content?"table":"none",propSchema:t},{node:e,requiredExtensions:n,toInternalHTML:$t,toExternalHTML:$t})}function $h(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,n.config]}))}function $p(e,t){e.stopEvent=e=>("mousedown"===e.type&&setTimeout(()=>{t.view.dom.blur()},10),!0)}function $f(e,t){let n=[{tag:"[data-content-type="+e.type+"]",contentElement:"[data-editable]"}];return t&&n.push({tag:"*",getAttrs(e){if("string"==typeof e)return!1;let n=null==t?void 0:t(e);return void 0!==n&&n}}),n}function $m(e,t){let n=$c({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:e.isSelectable??!0,addAttributes:()=>$l(e.propSchema),parseHTML:()=>$f(e,t.parse),renderHTML(t){let{HTMLAttributes:n}=t,r=document.createElement("div");return $a({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView(){return n=>{var r;let{getPos:o}=n,i=this.options.editor,l=$s(o,i,this.editor,e.type),s=(null==(r=this.options.domAttributes)?void 0:r.blockContent)||{},a=$a(t.render(l,i),l.type,l.props,e.propSchema,s);return!1===e.isSelectable&&$p(a,this.editor),a}}});if(n.name!==e.type)throw Error("Node name does not match block type. This is a bug in BlockNote.");return $d(e,{node:n,toInternalHTML(r,o){var i;let l=(null==(i=n.options.domAttributes)?void 0:i.blockContent)||{};return $a(t.render(r,o),r.type,r.props,e.propSchema,e.isFileBlock,l)},toExternalHTML(r,o){var i,l;let s=(null==(i=n.options.domAttributes)?void 0:i.blockContent)||{},a=null==(l=t.toExternalHTML)?void 0:l.call(t,r,o);return void 0===a&&(a=t.render(r,o)),$a(a,r.type,r.props,e.propSchema,s)}})}function $g(e,t,n){let r={type:"tableContent",columnWidths:[],rows:[]};return e.content.forEach((e,o,i)=>{let l={cells:[]};0===i&&e.content.forEach(e=>{var t;r.columnWidths.push((null==(t=e.attrs.colwidth)?void 0:t[0])||void 0)}),e.content.forEach(e=>{l.cells.push($$(e.firstChild,t,n))}),r.rows.push(l)}),r}function $$(e,t,n){let r=[],o;return e.content.forEach(e=>{if("hardBreak"===e.type.name){if(o){if(gP(o))o.text+="\n";else{if(!g7(o))throw Error("unexpected");o.content[o.content.length-1].text+="\n"}}else o={type:"text",text:"\n",styles:{}};return}if("link"!==e.type.name&&"text"!==e.type.name&&t[e.type.name])return o&&(r.push(o),o=void 0),void r.push(function e(t,n,r){if("text"===t.type.name||"link"===t.type.name)throw Error("unexpected");let o={},i=n[t.type.name];for(let[l,s]of Object.entries(t.attrs)){if(!i)throw Error("ic node is of an unrecognized type: "+t.type.name);l in i.propSchema&&(o[l]=s)}let a;return a="styled"===i.content?$$(t,n,r):void 0,{type:t.type.name,props:o,content:a}}(e,t,n));let i={},l;for(let s of e.marks)if("link"===s.type.name)l=s;else{let a=n[s.type.name];if(!a)throw Error(`style ${s.type.name} not found in styleSchema`);if("boolean"===a.propSchema)i[a.type]=!0;else{if("string"!==a.propSchema)throw new g6(a.propSchema);i[a.type]=s.attrs.stringValue}}o?gP(o)?l?(r.push(o),o={type:"link",href:l.attrs.href,content:[{type:"text",text:e.textContent,styles:i}]}):JSON.stringify(o.styles)===JSON.stringify(i)?o.text+=e.textContent:(r.push(o),o={type:"text",text:e.textContent,styles:i}):g7(o)&&(l?o.href===l.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(i)?o.content[o.content.length-1].text+=e.textContent:o.content.push({type:"text",text:e.textContent,styles:i}):(r.push(o),o={type:"link",href:l.attrs.href,content:[{type:"text",text:e.textContent,styles:i}]}):(r.push(o),o={type:"text",text:e.textContent,styles:i})):o=l?{type:"link",href:l.attrs.href,content:[{type:"text",text:e.textContent,styles:i}]}:{type:"text",text:e.textContent,styles:i}}),o&&r.push(o),r}function $_(e,t,n,r,o){if("blockContainer"!==e.type.name)throw Error("Node must be of type blockContainer, but is of type"+e.type.name+".");let i=null==o?void 0:o.get(e);if(i)return i;let{blockContainer:l,blockContent:s,blockGroup:a}=gq(e,0),c=l.node.attrs.id;null===c&&(c=g5.options.generateID());let d={};for(let[u,h]of Object.entries({...e.attrs,...s.node.attrs})){let p=t[s.node.type.name];if(!p)throw Error("Block is of an unrecognized type: "+s.node.type.name);u in p.propSchema&&(d[u]=h)}let f=t[s.node.type.name],m=[],g;if(null==a||a.node.forEach(e=>{m.push($_(e,t,n,r,o))}),"inline"===f.content)g=$$(s.node,n,r);else if("table"===f.content)g=$g(s.node,n,r);else{if("none"!==f.content)throw new g6(f.content);g=void 0}let $={id:c,type:f.type,props:d,content:g,children:m};return null==o||o.set(e,$),$}function $b(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,n.config]}))}function $y(e,t){var n,r;return n={type:e.name,propSchema:t},{config:n,implementation:r={mark:e}}}function $v(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,n.config]}))}let $w=(e,t,n,r,o)=>{let i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",""===e.props.url){let l=$x(e,t,r,o);i.appendChild(l.dom);let s=document.createElement("div");s.className="bn-file-loading-preview",s.textContent="Loading...";let a=t.onUploadStart(t=>{t===e.id&&(i.removeChild(l.dom),i.appendChild(s))}),c=t.onUploadEnd(t=>{t===e.id&&(i.removeChild(s),i.appendChild(l.dom))});return{dom:i,destroy(){var e;null==(e=l.destroy)||e.call(l),a(),c()}}}if(!1===e.props.showPreview){let d=$k(e).dom;return{dom:$0(e,d).dom}}return i.appendChild(n.dom),{dom:i,destroy:n.destroy}},$k=e=>{let t=document.createElement("div");t.className="bn-file-default-preview";let n=document.createElement("div");n.className="bn-file-default-preview-icon",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>';let r=document.createElement("p");return r.className="bn-file-default-preview-name",r.textContent=e.props.name||"",t.appendChild(n),t.appendChild(r),{dom:t}},$0=(e,t)=>{let n=document.createElement("div");n.className="bn-file-and-caption-wrapper";let r=document.createElement("p");return r.className="bn-file-caption",r.textContent=e.props.caption,"number"==typeof e.props.previewWidth&&e.props.previewWidth>0&&void 0!==e.props.caption&&(r.style.width=`${e.props.previewWidth}px`),n.appendChild(t),n.appendChild(r),{dom:n}},$x=(e,t,n,r)=>{let o=document.createElement("div");o.className="bn-add-file-button";let i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>';let l=document.createElement("p");l.className="bn-add-file-button-text",l.innerHTML=n||t.dictionary.file_blocks.file.add_button_text;let s=e=>{e.preventDefault()},a=()=>{t.dispatch(t._tiptapEditor.state.tr.setMeta(t.filePanel.plugin,{block:e}))};return o.appendChild(i),o.appendChild(l),o.addEventListener("mousedown",s,!0),o.addEventListener("click",a,!0),{dom:o,destroy(){o.removeEventListener("mousedown",s,!0),o.removeEventListener("click",a,!0)}}},$C=e=>({url:e.src||void 0}),$S=(e,t)=>{let n=e.querySelector(t);if(!n)return;let r=e.querySelector("figcaption");return{targetElement:n,caption:(null==r?void 0:r.textContent)??void 0}},$1=(e,t)=>{let n=document.createElement("div"),r=document.createElement("p");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},$2=(e,t)=>{let n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=t,n.appendChild(e),n.appendChild(r),{dom:n}},$3=(e,t,n,r,o)=>{if(!e.props.previewWidth)throw Error("Block must have a `previewWidth` prop.");let i=document.createElement("div");i.className="bn-visual-media-wrapper";let l=document.createElement("div");l.className="bn-visual-media-resize-handle",l.style.left="4px";let s=document.createElement("div"),a;s.className="bn-visual-media-resize-handle",s.style.right="4px";let c=n=>{if(!a)return void(!t.isEditable&&i.contains(l)&&i.contains(s)&&(i.removeChild(l),i.removeChild(s)));let r;(r="center"===e.props.textAlignment?"left"===a.handleUsed?a.initialWidth+2*(a.initialClientX-n.clientX):a.initialWidth+2*(n.clientX-a.initialClientX):"left"===a.handleUsed?a.initialWidth+a.initialClientX-n.clientX:a.initialWidth+n.clientX-a.initialClientX)<64?o(64):r>t.domElement.firstElementChild.clientWidth?o(t.domElement.firstElementChild.clientWidth):o(r)},d=n=>{(!n.target||!i.contains(n.target)||!t.isEditable)&&i.contains(l)&&i.contains(s)&&(i.removeChild(l),i.removeChild(s)),a&&(a=void 0,t.updateBlock(e,{props:{previewWidth:r()}}))},u=()=>{t.isEditable&&(i.appendChild(l),i.appendChild(s))},h=e=>{e.relatedTarget===l||e.relatedTarget===s||a||t.isEditable&&i.contains(l)&&i.contains(s)&&(i.removeChild(l),i.removeChild(s))},p=t=>{t.preventDefault(),i.appendChild(l),i.appendChild(s),a={handleUsed:"left",initialWidth:e.props.previewWidth,initialClientX:t.clientX}},f=t=>{t.preventDefault(),i.appendChild(l),i.appendChild(s),a={handleUsed:"right",initialWidth:e.props.previewWidth,initialClientX:t.clientX}};return i.appendChild(n),window.addEventListener("mousemove",c),window.addEventListener("mouseup",d),n.addEventListener("mouseenter",u),n.addEventListener("mouseleave",h),l.addEventListener("mousedown",p),s.addEventListener("mousedown",f),{dom:i,destroy(){window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),n.removeEventListener("mouseenter",u),n.removeEventListener("mouseleave",h),l.removeEventListener("mousedown",p),s.removeEventListener("mousedown",f)}}},$E=e=>({url:e.src||void 0}),$4={type:"audio",propSchema:{backgroundColor:$n.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},$M=e=>{if("AUDIO"===e.tagName)return $E(e);if("FIGURE"===e.tagName){let t=$S(e,"audio");if(!t)return;let{targetElement:n,caption:r}=t;return{...$E(n),caption:r}}},$T=$m($4,{render(e,t){let n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>';let r=document.createElement("audio");r.className="bn-audio",t.resolveFileUrl(e.props.url).then(e=>{r.src=e}),r.controls=!0,r.contentEditable="false",r.draggable=!1;let o=$0(e,r);return $w(e,t,o,t.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},parse:$M,toExternalHTML(e){if(!e.props.url){let t=document.createElement("p");return t.textContent="Add audio",{dom:t}}let n;return e.props.showPreview?(n=document.createElement("audio")).src=e.props.url:((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?$2(n,e.props.caption):$1(n,e.props.caption):{dom:n}}}),$8=[{id:"angular-html",name:"Angular HTML",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(5026)]).then(n.bind(n,5026)).then(e=>e.f)},{id:"angular-ts",name:"Angular TypeScript",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(2509),n.e(5852)]).then(n.bind(n,5852))},{id:"astro",name:"Astro",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(3253),n.e(8696)]).then(n.bind(n,8696))},{id:"blade",name:"Blade",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(3535),n.e(3979),n.e(966)]).then(n.bind(n,966))},{id:"c",name:"C",import:()=>n.e(357).then(n.bind(n,357))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>Promise.all([n.e(3014),n.e(2707)]).then(n.bind(n,5088))},{id:"cpp",name:"C++",aliases:["c++"],import:()=>Promise.all([n.e(3979),n.e(357),n.e(9764)]).then(n.bind(n,9764))},{id:"css",name:"CSS",import:()=>n.e(3224).then(n.bind(n,3224))},{id:"glsl",name:"GLSL",import:()=>Promise.all([n.e(357),n.e(6750)]).then(n.bind(n,6750))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>Promise.all([n.e(3014),n.e(3253),n.e(8283),n.e(4507),n.e(5138)]).then(n.bind(n,5138))},{id:"haml",name:"Ruby Haml",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(6114)]).then(n.bind(n,6114))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(2549)]).then(n.bind(n,2549))},{id:"html",name:"HTML",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464)]).then(n.bind(n,9464))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(853)]).then(n.bind(n,853))},{id:"http",name:"HTTP",import:()=>Promise.all([n.e(3014),n.e(3253),n.e(3535),n.e(8283),n.e(4507),n.e(3383),n.e(5092)]).then(n.bind(n,5092))},{id:"imba",name:"Imba",import:()=>Promise.all([n.e(3253),n.e(7013)]).then(n.bind(n,7013))},{id:"java",name:"Java",import:()=>n.e(3535).then(n.bind(n,3535))},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>n.e(3014).then(n.bind(n,3014))},{id:"jinja",name:"Jinja",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(4503)]).then(n.bind(n,4503))},{id:"jison",name:"Jison",import:()=>Promise.all([n.e(3014),n.e(3722)]).then(n.bind(n,3722))},{id:"json",name:"JSON",import:()=>n.e(528).then(n.bind(n,528))},{id:"json5",name:"JSON5",import:()=>n.e(567).then(n.bind(n,567))},{id:"jsonc",name:"JSON with Comments",import:()=>n.e(4918).then(n.bind(n,4918))},{id:"jsonl",name:"JSON Lines",import:()=>n.e(6972).then(n.bind(n,6972))},{id:"jsx",name:"JSX",import:()=>n.e(8283).then(n.bind(n,8283))},{id:"julia",name:"Julia",aliases:["jl"],import:()=>Promise.all([n.e(3014),n.e(3979),n.e(357),n.e(9764),n.e(2144),n.e(7041),n.e(8287)]).then(n.bind(n,8287))},{id:"less",name:"Less",import:()=>n.e(7734).then(n.bind(n,7734))},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>n.e(3387).then(n.bind(n,5768))},{id:"marko",name:"Marko",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(2509),n.e(7734),n.e(9567)]).then(n.bind(n,9567))},{id:"mdc",name:"MDC",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(3387),n.e(6251)]).then(n.bind(n,6251))},{id:"mdx",name:"MDX",import:()=>n.e(8228).then(n.bind(n,8228))},{id:"php",name:"PHP",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(3535),n.e(3979),n.e(3117)]).then(n.bind(n,3117))},{id:"postcss",name:"PostCSS",import:()=>n.e(1606).then(n.bind(n,1606))},{id:"pug",name:"Pug",aliases:["jade"],import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(8846)]).then(n.bind(n,8846))},{id:"python",name:"Python",aliases:["py"],import:()=>n.e(2144).then(n.bind(n,2144))},{id:"r",name:"R",import:()=>n.e(7041).then(n.bind(n,7041))},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>n.e(4730).then(n.bind(n,4730))},{id:"sass",name:"Sass",import:()=>n.e(5129).then(n.bind(n,5129))},{id:"scss",name:"SCSS",import:()=>Promise.all([n.e(3224),n.e(2509)]).then(n.bind(n,2509))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>n.e(3383).then(n.bind(n,3383))},{id:"sql",name:"SQL",import:()=>n.e(3979).then(n.bind(n,3979))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>n.e(7096).then(n.bind(n,7096))},{id:"svelte",name:"Svelte",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(3253),n.e(7196)]).then(n.bind(n,7196))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(3253),n.e(3535),n.e(3979),n.e(357),n.e(9306)]).then(n.bind(n,9306))},{id:"tsx",name:"TSX",import:()=>n.e(4507).then(n.bind(n,4507))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>n.e(3253).then(n.bind(n,3253))},{id:"vue",name:"Vue",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(3253),n.e(6795)]).then(n.bind(n,6795))},{id:"vue-html",name:"Vue HTML",import:()=>Promise.all([n.e(3014),n.e(3224),n.e(9464),n.e(3253),n.e(7231)]).then(n.bind(n,7231))},{id:"wasm",name:"WebAssembly",import:()=>n.e(1567).then(n.bind(n,1567))},{id:"wgsl",name:"WGSL",import:()=>n.e(4960).then(n.bind(n,4960))},{id:"xml",name:"XML",import:()=>Promise.all([n.e(3535),n.e(7177)]).then(n.bind(n,7177))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>n.e(3468).then(n.bind(n,3468))}],$6=(Object.fromEntries($8.map(e=>[e.id,e.import])),Object.fromEntries($8.flatMap(e=>{var t;return(null==(t=e.aliases)?void 0:t.map(t=>[t,e.import]))||[]})),[{id:"text",name:"Plain Text",match:["text","txt","plain"]},...$8.filter(e=>!["angular-html","angular-ts","astro","blade","coffee","handlebars","html-derivative","http","imba","jinja","jison","json5","marko","mdc","stylus","ts-tags"].includes(e.id)).map(e=>({match:[e.id,...e.aliases||[]],id:e.id,name:e.name})),{id:"haskell",name:"Haskell",match:["haskell","hs"]},{id:"csharp",name:"C#",match:["c#","csharp","cs"]},{id:"latex",name:"LaTeX",match:["latex"]},{id:"lua",name:"Lua",match:["lua"]},{id:"mermaid",name:"Mermaid",match:["mermaid","mmd"]},{id:"ruby",name:"Ruby",match:["ruby","rb"]},{id:"rust",name:"Rust",match:["rust","rs"]},{id:"scala",name:"Scala",match:["scala"]},{id:"swift",name:"Swift",match:["swift"]},{id:"kotlin",name:"Kotlin",match:["kotlin","kt","kts"]},{id:"objective-c",name:"Objective C",match:["objective-c","objc"]}]),$N={language:{default:"javascript",values:[...$6.map(e=>e.id)]}},$5=$c({name:"codeBlock",content:"inline*",group:"blockContent",marks:"",code:!0,defining:!0,addOptions:()=>({defaultLanguage:"javascript",indentLineWithTab:!0,supportedLanguages:$6}),addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML(e){let t=e;"DIV"===(null==t?void 0:t.tagName)&&"codeBlock"===(null==t?void 0:t.dataset.contentType)&&(t=t.children[0]),"PRE"===(null==t?void 0:t.tagName)&&(t=null==t?void 0:t.children[0]);let n=null==t?void 0:t.getAttribute("data-language");if(n)return n.toLowerCase();let r=[...(null==t?void 0:t.className.split(" "))||[]].filter(e=>e.startsWith("language-")).map(e=>e.replace("language-","")),[o]=r;return o?o.toLowerCase():null},renderHTML:e=>e.language&&"text"!==e.language?{class:`language-${e.language}`}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML(e){var t,n;let{HTMLAttributes:r}=e,o=document.createElement("pre"),{dom:i,contentDOM:l}=$e(this.name,"code",(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},{...(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{},...r});return i.removeChild(l),i.appendChild(o),o.appendChild(l),{dom:i,contentDOM:l}},addNodeView(){let e=this.options.supportedLanguages;return t=>{var n,r;let{editor:o,node:i,getPos:l,HTMLAttributes:s}=t,a=document.createElement("pre"),c=document.createElement("select"),d=document.createElement("div"),{dom:u,contentDOM:h}=$e(this.name,"code",{...(null==(n=this.options.domAttributes)?void 0:n.blockContent)||{},...s},(null==(r=this.options.domAttributes)?void 0:r.inlineContent)||{}),p=e=>{let t=e.target.value;o.commands.command(e=>{let{tr:n}=e;return n.setNodeAttribute(l(),"language",t),!0})};return e.forEach(e=>{let{id:t,name:n}=e,r=document.createElement("option");r.value=t,r.text=n,c.appendChild(r)}),d.contentEditable="false",c.value=i.attrs.language||this.options.defaultLanguage,u.removeChild(h),u.appendChild(d),u.appendChild(a),a.appendChild(h),d.appendChild(c),c.addEventListener("change",p),{dom:u,contentDOM:h,update:e=>e.type===this.type,destroy(){c.removeEventListener("change",p)}}}},addProseMirrorPlugins(){let e,t,n=this.options.supportedLanguages;return[function e(t){let{parser:n,nodeTypes:r=["code_block"],languageExtractor:o=e=>e.attrs.language}=t,i=new tc;return new tl({key:i,state:{init(e,t){let i=new iU,[l,s]=iW(t.doc,n,r,o,i);return{cache:i,decorations:l,promises:s}},apply(e,t){let i=t.cache.invalidate(e),l=!!e.getMeta("prosemirror-highlight-refresh");if(!e.docChanged&&!l)return{cache:i,decorations:t.decorations.map(e.mapping,e.doc),promises:t.promises};let[s,a]=iW(e.doc,n,r,o,i);return{cache:i,decorations:s,promises:a}}},view(e){let t=new Set,n=()=>{if(t.size>0)return;let n=e.state.tr.setMeta("prosemirror-highlight-refresh",!0);e.dispatch(n)},r=()=>{var r;let o=i.getState(e.state);for(let l of null!=(r=null==o?void 0:o.promises)?r:[])t.add(l),l.then(()=>{t.delete(l),n()}).catch(()=>{t.delete(l)})};return r(),{update(){r()}}},props:{decorations(e){var t;return null==(t=this.getState(e))?void 0:t.decorations}}})}({parser(r){var o,i;if(!e)return aT({themes:["github-dark"],langs:[]}).then(t=>{e=t});let l=r.language;return l&&"text"!==l&&!e.getLoadedLanguages().includes(l)&&n.find(e=>{let{id:t}=e;return t===l})&&iG.find(e=>{let{id:t}=e;return t===l})?e.loadLanguage(l):(t||(t=(o=e,function(e){var t;let{content:n,language:r,pos:l}=e,s=[],{tokens:a}=o.codeToTokens(n,{lang:r,...null!=i?i:{theme:o.getLoadedThemes()[0]}}),c=l+1;for(let d of a){for(let u of d){let h=c+u.content.length,p=rg.inline(c,h,{style:null!=(t=u.htmlStyle)?t:`color: ${u.color}`,class:"shiki"});s.push(p),c=h}c+=1}return s})),t(r))},languageExtractor:e=>e.attrs.language,nodeTypes:[this.name]})]},addInputRules(){let e=this.options.supportedLanguages;return[new o7({find:/^```(.*?)\s$/,handler:t=>{var n;let{state:r,range:o,match:i}=t,l=r.doc.resolve(o.from),s=i[1].trim(),a={language:(null==(n=e.find(e=>{let{match:t}=e;return t.includes(s)}))?void 0:n.id)||this.options.defaultLanguage};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),this.type))return null;r.tr.delete(o.from,o.to).setBlockType(o.from,o.from,this.type,a).setSelection(eG.create(r.tr.doc,o.from))}})]},addKeyboardShortcuts(){return{Delete:e=>{let{editor:t}=e,{selection:n}=t.state,{$from:r}=n;if(t.isActive(this.name)&&!r.parent.textContent&&oW(n)){let o=r.pos-r.parentOffset-2;return t.chain().setNodeSelection(o).deleteSelection().run(),!0}return!1},Tab:e=>{let{editor:t}=e;return!(!this.options.indentLineWithTab||!t.isActive(this.name))&&(t.commands.insertContent("  "),!0)},Enter:e=>{let{editor:t}=e,{$from:n}=t.state.selection;if(!t.isActive(this.name))return!1;let r=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith("\n\n");return r&&o?t.chain().command(e=>{let{tr:t}=e;return t.delete(n.pos-2,n.pos),!0}).exitCode().run():(t.commands.insertContent("\n"),!0)},"Shift-Enter":e=>{let{editor:t}=e,{$from:n}=t.state.selection;return!!t.isActive(this.name)&&(t.chain().insertContentAt(n.pos-n.parentOffset+n.parent.nodeSize,{type:"paragraph"}).run(),!0)}}}}),$7=$u($5,$N),$L=$y(oR.create({name:"backgroundColor",addAttributes:()=>({stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-background-color"),renderHTML:e=>({"data-background-color":e.stringValue})}}),parseHTML:()=>[{tag:"span",getAttrs:e=>"string"!=typeof e&&!!e.hasAttribute("data-background-color")&&{stringValue:e.getAttribute("data-background-color")}}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",t,0]}}),"string"),$P=$y(oR.create({name:"textColor",addAttributes:()=>({stringValue:{default:void 0,parseHTML:e=>e.getAttribute("data-text-color"),renderHTML:e=>({"data-text-color":e.stringValue})}}),parseHTML:()=>[{tag:"span",getAttrs:e=>"string"!=typeof e&&!!e.hasAttribute("data-text-color")&&{stringValue:e.getAttribute("data-text-color")}}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",t,0]}}),"string"),$A={type:"file",propSchema:{backgroundColor:$n.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},content:"none",isFileBlock:!0},$R=e=>{if("EMBED"===e.tagName)return $C(e);if("FIGURE"===e.tagName){let t=$S(e,"embed");if(!t)return;let{targetElement:n,caption:r}=t;return{...$C(n),caption:r}}},$O=$m($A,{render(e,t){let n=$k(e).dom,r=$0(e,n);return $w(e,t,r)},parse:$R,toExternalHTML(e){if(!e.props.url){let t=document.createElement("p");return t.textContent="Add file",{dom:t}}let n=document.createElement("a");return n.href=e.props.url,n.textContent=e.props.name||e.props.url,e.props.caption?$1(n,e.props.caption):{dom:n}}});function $D(e,t){let n,r;if(t.firstChild.descendants((t,o)=>!n&&("blockContainer"!==t.type.name||t.attrs.id!==e||(n=t,r=o+1,!1))),void 0===n||void 0===r)throw Error("Could not find block in the editor with matching ID.");return{node:n,posBeforeNode:r}}let $I=(e,t,n)=>r=>{let{state:o,dispatch:i}=r,{blockContainer:l,blockContent:s,blockGroup:c}=gJ(o.doc.resolve(t));if(i){if(void 0!==n.children){let d=[];for(let u of n.children)d.push(gz(u,o.schema,e.schema.styleSchema));c?o.tr.replace(c.beforePos+1,c.afterPos-1,new f(a.from(d),0,0)):o.tr.insert(s.afterPos,o.schema.nodes.blockGroup.create({},d))}let h=s.node.type.name,p=n.type||h,m="keep";if(n.content){if("string"==typeof n.content)m=gD([n.content],o.schema,e.schema.styleSchema);else if(Array.isArray(n.content))m=gD(n.content,o.schema,e.schema.styleSchema);else{if("tableContent"!==n.content.type)throw new g6(n.content.type);m=gI(n.content,o.schema,e.schema.styleSchema)}}else{let g=o.schema.nodes[h].spec.content,$=o.schema.nodes[p].spec.content;""===g||$!==g&&(m=[])}"keep"===m?o.tr.setNodeMarkup(s.beforePos,void 0===n.type?void 0:o.schema.nodes[n.type],{...s.node.attrs,...n.props}):o.tr.replaceWith(s.beforePos,s.afterPos,o.schema.nodes[p].create({...s.node.attrs,...n.props},m)),o.tr.setNodeMarkup(l.beforePos,void 0,{...l.node.attrs,...n.props})}return!0},$H={...$n,level:{default:1,values:[1,2,3]}},$z=$c({name:"heading",content:"inline*",group:"blockContent",addAttributes:()=>({level:{default:1,parseHTML(e){let t=e.getAttribute("data-level"),n=parseInt(t);if(isFinite(n))return n},renderHTML:e=>({"data-level":e.level.toString()})}}),addInputRules(){return[...[1,2,3].map(e=>new o7({find:RegExp(`^(#{${e}})\\s$`),handler:t=>{let{state:n,chain:r,range:o}=t,i=gZ(n);"inline*"===i.blockContent.node.type.spec.content&&r().command($I(this.options.editor,i.blockContainer.beforePos,{type:"heading",props:{level:e}})).deleteRange({from:o.from,to:o.to}).run()}}))]},addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{let e=gZ(this.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{let e=gZ(this.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{let e=gZ(this.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",getAttrs:e=>"string"!=typeof e&&{level:e.getAttribute("data-level")}},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML(e){var t,n;let{node:r,HTMLAttributes:o}=e;return $e(this.name,`h${r.attrs.level}`,{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...o},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),$9=$u($z,$H),$B=e=>({url:e.src||void 0,previewWidth:e.width||void 0}),$V={type:"image",propSchema:{textAlignment:$n.textAlignment,backgroundColor:$n.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:512}},content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},$j=e=>{if("IMG"===e.tagName)return $B(e);if("FIGURE"===e.tagName){let t=$S(e,"img");if(!t)return;let{targetElement:n,caption:r}=t;return{...$B(n),caption:r}}},$F=$m($V,{render(e,t){let n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>';let r=document.createElement("img");r.className="bn-visual-media",t.resolveFileUrl(e.props.url).then(e=>{r.src=e}),r.alt=e.props.name||e.props.caption||"BlockNote image",r.contentEditable="false",r.draggable=!1,r.width=Math.min(e.props.previewWidth,t.domElement.firstElementChild.clientWidth);let o=$3(e,t,r,()=>r.width,e=>r.width=e),i=$0(e,o.dom);return $w(e,t,i,t.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},parse:$j,toExternalHTML(e){if(!e.props.url){let t=document.createElement("p");return t.textContent="Add image",{dom:t}}let n;return e.props.showPreview?((n=document.createElement("img")).src=e.props.url,n.alt=e.props.name||e.props.caption||"BlockNote image",n.width=e.props.previewWidth):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?$2(n,e.props.caption):$1(n,e.props.caption):{dom:n}}}),$U=(e,t,n)=>r=>{let{state:o,dispatch:i}=r,l=gG(o.doc,e),{blockContainer:s,blockContent:a}=gK(l),c=[{type:s.node.type,attrs:n?{...s.node.attrs,id:void 0}:{}},{type:t?a.node.type:o.schema.nodes.paragraph,attrs:n?{...a.node.attrs}:{}}];return i&&o.tr.split(e,2,c),!0},$W=e=>{let t=e._tiptapEditor,{blockContent:n,blockContainer:r}=gZ(t.state),o=t.state.selection.anchor===t.state.selection.head;return!("bulletListItem"!==n.node.type.name&&"numberedListItem"!==n.node.type.name&&"checkListItem"!==n.node.type.name||!o)&&t.commands.first(t=>{let{state:o,chain:i,commands:l}=t;return[()=>l.command(()=>0===n.node.childCount&&l.command($I(e,r.beforePos,{type:"paragraph",props:{}}))),()=>l.command(()=>n.node.childCount>0&&(i().deleteSelection().command($U(o.selection.from,!0)).run(),!0))]})},$G={...$n},$q=$c({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new o7({find:RegExp("^[-+*]\\s$"),handler:e=>{let{state:t,chain:n,range:r}=e,o=gZ(t);"inline*"===o.blockContent.node.type.spec.content&&n().command($I(this.options.editor,o.blockContainer.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{Enter:()=>$W(this.options.editor),"Mod-Shift-8":()=>{let e=gZ(this.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.options.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"li",getAttrs(e){if("string"==typeof e)return!1;let t=e.parentElement;return null!==t&&("UL"===t.tagName||"DIV"===t.tagName&&"UL"===t.parentElement.tagName)&&{}},node:"bulletListItem"},{tag:"p",getAttrs(e){if("string"==typeof e)return!1;let t=e.parentElement;return null!==t&&"bulletListItem"===t.getAttribute("data-content-type")&&{}},priority:300,node:"bulletListItem"}]},renderHTML(e){var t,n;let{HTMLAttributes:r}=e;return $e(this.name,"p",{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...r},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),$K=$u($q,$G),$J={...$n,checked:{default:!1}},$Z=$c({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes:()=>({checked:{default:!1,parseHTML:e=>"true"===e.getAttribute("data-checked")||void 0,renderHTML:e=>e.checked?{"data-checked":e.checked.toString()}:{}}}),addInputRules(){return[new o7({find:RegExp("\\[\\s*\\]\\s$"),handler:e=>{let{state:t,chain:n,range:r}=e,o=gZ(t);"inline*"===o.blockContent.node.type.spec.content&&n().command($I(this.options.editor,o.blockContainer.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:r.from,to:r.to})}}),new o7({find:RegExp("\\[[Xx]\\]\\s$"),handler:e=>{let{state:t,chain:n,range:r}=e,o=gZ(t);"inline*"===o.blockContent.node.type.spec.content&&n().command($I(this.options.editor,o.blockContainer.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{Enter:()=>$W(this.options.editor),"Mod-Shift-9":()=>{let e=gZ(this.options.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"input",getAttrs:e=>"string"!=typeof e&&"checkbox"===e.type&&{checked:e.checked},node:"checkListItem"},{tag:"li",getAttrs(e){if("string"==typeof e)return!1;let t=e.parentElement;if(null===t)return!1;if("UL"===t.tagName||"DIV"===t.tagName&&"UL"===t.parentElement.tagName){let n=e.querySelector("input[type=checkbox]")||null;return null!==n&&{checked:n.checked}}return!1},node:"checkListItem"}]},renderHTML(e){var t,n;let{node:r,HTMLAttributes:o}=e,i=document.createElement("input");i.type="checkbox",i.checked=r.attrs.checked,r.attrs.checked&&i.setAttribute("checked","");let{dom:l,contentDOM:s}=$e(this.name,"p",{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...o},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{});return l.insertBefore(i,s),{dom:l,contentDOM:s}},addNodeView(){return e=>{var t,n;let{node:r,getPos:o,editor:i,HTMLAttributes:l}=e,s=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";let c=document.createElement("input");c.type="checkbox",c.checked=r.attrs.checked,r.attrs.checked&&c.setAttribute("checked","");let d=()=>{if(i.isEditable){if("boolean"!=typeof o){let e=gG(i.state.doc,o());this.editor.commands.command($I(this.options.editor,e.posBeforeNode,{type:"checkListItem",props:{checked:c.checked}}))}}else c.checked=!c.checked};c.addEventListener("change",d);let{dom:u,contentDOM:h}=$e(this.name,"p",{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...l},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{});if("boolean"!=typeof o){let p="label-"+this.editor.state.doc.resolve(o()).node().attrs.id;c.setAttribute("aria-labelledby",p),h.id=p}return u.removeChild(h),u.appendChild(s),s.appendChild(a),s.appendChild(h),a.appendChild(c),{dom:u,contentDOM:h,destroy(){c.removeEventListener("change",d)}}}}}),$X=$u($Z,$J),$Q=new tc("numbered-list-indexing"),$Y={...$n},_e=$c({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes:()=>({index:{default:null,parseHTML:e=>e.getAttribute("data-index"),renderHTML:e=>({"data-index":e.index})}}),addInputRules(){return[new o7({find:RegExp("^1\\.\\s$"),handler:e=>{let{state:t,chain:n,range:r}=e,o=gZ(t);"inline*"===o.blockContent.node.type.spec.content&&n().command($I(this.options.editor,o.blockContainer.beforePos,{type:"numberedListItem",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{Enter:()=>$W(this.options.editor),"Mod-Shift-7":()=>{let e=gZ(this.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins:()=>[new tl({key:$Q,appendTransaction(e,t,n){let r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((e,t)=>{if("blockContainer"===e.type.name&&"numberedListItem"===e.firstChild.type.name){let n="1",i=gK({posBeforeNode:t,node:e}),l=r.doc.resolve(i.blockContainer.beforePos).nodeBefore;if(l){let s=gK({posBeforeNode:i.blockContainer.beforePos-l.nodeSize,node:l});if("numberedListItem"===s.blockContent.node.type.name){let a=s.blockContent.node.attrs.index;n=(parseInt(a)+1).toString()}}i.blockContent.node.attrs.index!==n&&(o=!0,r.setNodeMarkup(i.blockContent.beforePos,void 0,{index:n}))}}),o?r:null}})],parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"li",getAttrs(e){if("string"==typeof e)return!1;let t=e.parentElement;return null!==t&&("OL"===t.tagName||"DIV"===t.tagName&&"OL"===t.parentElement.tagName)&&{}},node:"numberedListItem"},{tag:"p",getAttrs(e){if("string"==typeof e)return!1;let t=e.parentElement;return null!==t&&"numberedListItem"===t.getAttribute("data-content-type")&&{}},priority:300,node:"numberedListItem"}]},renderHTML(e){var t,n;let{HTMLAttributes:r}=e;return $e(this.name,"p",{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...r},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),_t=$u(_e,$Y),_n={...$n},_r=$u($c({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{let e=gZ(this.editor.state);return"inline*"!==e.blockContent.node.type.spec.content||this.editor.commands.command($I(this.options.editor,e.blockContainer.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"p",priority:200,getAttrs(e){var t;return!("string"==typeof e||null==(t=e.textContent)||!t.trim())&&{}},node:"paragraph"}]},renderHTML(e){var t,n;let{HTMLAttributes:r}=e;return $e(this.name,"p",{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...r},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})}}),_n),_o=oI.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[function e(){let{handleWidth:t=5,cellMinWidth:n=25,defaultCellMinWidth:r=100,View:o=cT,lastColumnResizable:i=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=new tl({key:c6,state:{init(e,t){var n,i;let s=null==(i=null==(n=l.spec)?void 0:n.props)?void 0:i.nodeViews,a=cr(t.schema).table.name;return o&&s&&(s[a]=(e,t)=>new o(e,r,t)),new cN(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes(e){let t=c6.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove(e,n){!function(e,t,n,r){let o=c6.getState(e.state);if(o&&!o.dragging){let i=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),l=-1;if(i){let{left:s,right:a}=i.getBoundingClientRect();t.clientX-s<=n?l=c5(e,t,"left",n):a-t.clientX<=n&&(l=c5(e,t,"right",n))}if(l!=o.activeHandle){if(!r&&-1!==l){let c=e.state.doc.resolve(l),d=c.node(-1),u=ct.get(d),h=c.start(-1);if(u.colCount(c.pos-h)+c.nodeAfter.attrs.colspan-1==u.width-1)return}cL(e,l)}}}(e,n,t,i)},mouseleave(e){!function(e){let t=c6.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&cL(e,-1)}(e)},mousedown(e,t){!function(e,t,n,r){var o;let i=null!=(o=e.dom.ownerDocument.defaultView)?o:window,l=c6.getState(e.state);if(!l||-1==l.activeHandle||l.dragging)return!1;let s=e.state.doc.nodeAt(l.activeHandle),a=function(e,t,n){let{colspan:r,colwidth:o}=n,i=o&&o[o.length-1];if(i)return i;let l=e.domAtPos(t),s=l.node.childNodes[l.offset].offsetWidth,a=r;if(o)for(let c=0;c<r;c++)o[c]&&(s-=o[c],a--);return s/a}(e,l.activeHandle,s.attrs);function c(t){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",d);let r=c6.getState(e.state);(null==r?void 0:r.dragging)&&(!function(e,t,n){let r=e.state.doc.resolve(t),o=r.node(-1),i=ct.get(o),l=r.start(-1),s=i.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,a=e.state.tr;for(let c=0;c<i.height;c++){let d=c*i.width+s;if(c&&i.map[d]==i.map[d-i.width])continue;let u=i.map[d],h=o.nodeAt(u).attrs,p=1==h.colspan?0:s-i.colCount(u);if(h.colwidth&&h.colwidth[p]==n)continue;let f=h.colwidth?h.colwidth.slice():cA(h.colspan);f[p]=n,a.setNodeMarkup(l+u,null,{...h,colwidth:f})}a.docChanged&&e.dispatch(a)}(e,r.activeHandle,c7(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(c6,{setDragging:null})))}function d(t){if(!t.which)return c(t);let o=c6.getState(e.state);if(o&&o.dragging){let i=c7(o.dragging,t,n);cP(e,o.activeHandle,i,r)}}e.dispatch(e.state.tr.setMeta(c6,{setDragging:{startX:t.clientX,startWidth:a}})),cP(e,l.activeHandle,a,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",d),t.preventDefault()}(e,t,n,r)}},decorations(e){let t=c6.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;let r=[],o=e.doc.resolve(t),i=o.node(-1);if(!i)return rb.empty;let l=ct.get(i),s=o.start(-1),a=l.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<l.height;c++){let d=a+c*l.width;if((a==l.width-1||l.map[d]!=l.map[d+1])&&(0==c||l.map[d]!=l.map[d-l.width])){let u=l.map[d],h=s+u+i.nodeAt(u).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(null==(n=c6.getState(e))?void 0:n.dragging)&&r.push(rg.node(s+u,s+u+i.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),r.push(rg.widget(h,p))}}return rb.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return l}({cellMinWidth:35,defaultCellMinWidth:120,View:null}),function e(){let{allowTableNodeSelection:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new tl({key:co,state:{init:()=>null,apply(e,t){let n=e.getMeta(co);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:r,pos:o}=e.mapping.mapResult(t);return r?null:o}},props:{decorations:cf,handleDOMEvents:{mousedown:c3},createSelectionBetween:e=>null!=co.getState(e.state)?e.state.selection:null,handleTripleClick:c1,handleKeyDown:c0,handlePaste:c2},appendTransaction:(e,n,r)=>(function(e,t,n){let r=(t||e).selection,o=(t||e).doc,i,l;if(r instanceof eK&&(l=r.node.type.spec.tableRole)){if("cell"==l||"header_cell"==l)i=ch.create(o,r.from);else if("row"==l){let s=o.resolve(r.from+1);i=ch.rowSelection(s,s)}else if(!n){let a=ct.get(r.node),c=r.from+1,d=c+a.map[a.width*a.height-1];i=ch.create(o,c+1,d)}}else r instanceof eG&&function(e){let{$from:t,$to:n}=e;if(t.pos==n.pos||t.pos<n.pos-6)return!1;let r=t.pos,o=n.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(let l=n.depth;l>=0&&!(n.before(l+1)>n.start(l));l--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(r)?i=eG.create(o,r.from):r instanceof eG&&function(e){let t,n,{$from:r,$to:o}=e;for(let i=r.depth;i>0;i--){let l=r.node(i);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){t=l;break}}for(let s=o.depth;s>0;s--){let a=o.node(s);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){n=a;break}}return t!==n&&0===o.parentOffset}(r)&&(i=eG.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t})(r,function e(t,n){let r,o=(e,n)=>{"table"==e.type.spec.tableRole&&(r=function(e,t,n,r){let o=ct.get(t);if(!o.problems)return r;r||(r=e.tr);let i=[];for(let l=0;l<o.height;l++)i.push(0);for(let s=0;s<o.problems.length;s++){let a=o.problems[s];if("collision"==a.type){let c=t.nodeAt(a.pos);if(!c)continue;let d=c.attrs;for(let u=0;u<d.rowspan;u++)i[a.row+u]+=a.n;r.setNodeMarkup(r.mapping.map(n+1+a.pos),null,cu(d,d.colspan-a.n,a.n))}else if("missing"==a.type)i[a.row]+=a.n;else if("overlong_rowspan"==a.type){let h=t.nodeAt(a.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+a.pos),null,{...h.attrs,rowspan:h.attrs.rowspan-a.n})}else if("colwidth mismatch"==a.type){let p=t.nodeAt(a.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(n+1+a.pos),null,{...p.attrs,colwidth:a.colwidth})}}let f,m;for(let g=0;g<i.length;g++)i[g]&&(null==f&&(f=g),m=g);for(let $=0,_=n+1;$<o.height;$++){let b=t.child($),y=_+b.nodeSize,v=i[$];if(v>0){let w="cell";b.firstChild&&(w=b.firstChild.type.spec.tableRole);let k=[];for(let x=0;x<v;x++){let C=cr(e.schema)[w].createAndFill();C&&k.push(C)}let S=0!=$&&f!=$-1||m!=$?y-1:_+1;r.insert(r.mapping.map(S),k)}_=y}return r.setMeta(cm,{fixTables:!0})}(t,e,n,r))};return n?n.doc!=t.doc&&function e(t,n,r,o){let i=t.childCount,l=n.childCount;e:for(let s=0,a=0;s<l;s++){let c=n.child(s);for(let d=a,u=Math.min(i,s+3);d<u;d++)if(t.child(d)==c){a=d+1,r+=c.nodeSize;continue e}o(c,r),a<i&&t.child(a).sameMarkup(c)?e(t.child(a),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(n.doc,t.doc,0,o):t.doc.descendants(o),r}(r,n),t)})}()],addKeyboardShortcuts(){return{Enter:()=>!(!this.editor.state.selection.empty||"tableParagraph"!==this.editor.state.selection.$head.parent.type.name)&&(this.editor.commands.setHardBreak(),!0),Backspace:()=>{let e=this.editor.state.selection,t=e.empty,n=0===e.$head.parentOffset,r="tableParagraph"===e.$head.node().type.name;return t&&n&&r}}},extendNodeSchema:e=>({tableRole:o4(ox(e,"tableRole",{name:e.name,options:e.options,storage:e.storage}))})}),_i={backgroundColor:$n.backgroundColor,textColor:$n.textColor},_l=$c({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",isolating:!0,parseHTML:()=>[{tag:"table"}],renderHTML(e){var t,n;let{HTMLAttributes:r}=e;return $e(this.name,"table",{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...r},(null==(n=this.options.domAttributes)?void 0:n.inlineContent)||{})},addNodeView(){return e=>{var t;let{node:n,HTMLAttributes:r}=e;return new class extends cT{constructor(e,t,n){super(e,t),this.node=e,this.cellMinWidth=t,this.blockContentHTMLAttributes=n;let r=document.createElement("div");for(let[o,i]of(r.className=gQ("bn-block-content",n.class),r.setAttribute("data-content-type","table"),Object.entries(n)))"class"!==o&&r.setAttribute(o,i);let l=this.dom,s=document.createElement("div");s.className="tableWrapper-inner",s.appendChild(l.firstChild),l.appendChild(s),r.appendChild(l);let a=document.createElement("div");a.className="table-widgets-container",a.style.position="relative",l.appendChild(a),this.dom=r}ignoreMutation(e){return!e.target.closest(".tableWrapper-inner")||super.ignoreMutation(e)}}(n,120,{...(null==(t=this.options.domAttributes)?void 0:t.blockContent)||{},...r})}}}),_s=$u(_l,_i,[_o,i8.create({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML:()=>[{preserveWhitespace:"full",priority:210,context:"tableContent",tag:"p",getAttrs:e=>({})},{tag:"p",getAttrs(e){if("string"==typeof e||!e.textContent)return!1;let t=e.parentElement;return null!==t&&"TD"===t.tagName&&{}}}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",t,0]}}),aZ.extend({content:"tableContent"}),aJ.extend({content:"tableContent"}),aX]),_a=e=>({url:e.src||void 0,previewWidth:e.width||void 0}),_c={type:"video",propSchema:{textAlignment:$n.textAlignment,backgroundColor:$n.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:512}},content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},_d=e=>{if("VIDEO"===e.tagName)return _a(e);if("FIGURE"===e.tagName){let t=$S(e,"video");if(!t)return;let{targetElement:n,caption:r}=t;return{..._a(n),caption:r}}},_u=$m(_c,{render(e,t){let n=document.createElement("div");n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>';let r=document.createElement("video");r.className="bn-visual-media",r.src=e.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,r.width=Math.min(e.props.previewWidth,t.domElement.firstElementChild.clientWidth);let o=$3(e,t,r,()=>r.width,e=>r.width=e),i=$0(e,o.dom);return $w(e,t,i,t.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},parse:_d,toExternalHTML(e){if(!e.props.url){let t=document.createElement("p");return t.textContent="Add video",{dom:t}}let n;return e.props.showPreview?((n=document.createElement("video")).src=e.props.url,n.width=e.props.previewWidth):((n=document.createElement("a")).href=e.props.url,n.textContent=e.props.name||e.props.url),e.props.caption?e.props.showPreview?$2(n,e.props.caption):$1(n,e.props.caption):{dom:n}}}),_h={paragraph:_r,heading:$9,codeBlock:$7,bulletListItem:$K,numberedListItem:_t,checkListItem:$X,table:_s,file:$O,image:$F,video:_u,audio:$T},_p=$h(_h),_f={bold:$y(aI,"boolean"),italic:$y(aU,"boolean"),underline:$y(aK,"boolean"),strike:$y(aq,"boolean"),code:$y(a9,"boolean"),textColor:$P,backgroundColor:$L},_m=($v(_f),{text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}}),_g=$b(_m);function _$(e,t){return e in t.schema.blockSchema&&t.schema.blockSchema[e]===_p[e]}function __(e,t){return e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock||!1}function _b(e,t){return t.schema.blockSchema[e.type].isFileBlock&&!e.props.url}function _y(e,t,n){return t in n.schema.blockSchema&&e in n.schema.blockSchema[t].propSchema&&n.schema.blockSchema[t].propSchema[e]===$n[e]}function _v(e,t,n){return _y(e,t.type,n)}function _w(e,t,n){let{block:r}=e.getTextCursorPosition(),o=function(e){let{blockContainer:t}=gZ(e._tiptapEditor.state),n={blockId:t.node.attrs.id,blockPos:t.beforePos};return e._tiptapEditor.state.selection instanceof ch?{...n,type:"cell",anchorCell:e._tiptapEditor.state.selection.$anchorCell.pos,headCell:e._tiptapEditor.state.selection.$headCell.pos}:e._tiptapEditor.state.selection instanceof eK?{...n,type:"node",from:e._tiptapEditor.state.selection.from}:{...n,type:"text",anchor:e._tiptapEditor.state.selection.anchor,head:e._tiptapEditor.state.selection.head}}(e);e.removeBlocks([r]),e.insertBlocks([r],t,n),function(e,t){let n=$D(t.blockId,e._tiptapEditor.state.doc).posBeforeNode,r;r="cell"===t.type?ch.create(e._tiptapEditor.state.doc,t.anchorCell+(n-t.blockPos),t.headCell+(n-t.blockPos)):"node"===t.type?eK.create(e._tiptapEditor.state.doc,t.from+(n-t.blockPos)):eG.create(e._tiptapEditor.state.doc,t.anchor+(n-t.blockPos),t.head+(n-t.blockPos)),e._tiptapEditor.view.dispatch(e._tiptapEditor.state.tr.setSelection(r))}(e,o)}function _k(e,t,n){let r=e._tiptapEditor,o=r.state.tr,i=new Set(t.map(e=>"string"==typeof e?e:e.id)),l=[],s=0;if(r.state.doc.descendants((t,r)=>{if(0===i.size)return!1;if("blockContainer"!==t.type.name||!i.has(t.attrs.id))return!0;l.push($_(t,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)),i.delete(t.attrs.id),s=(null==n?void 0:n(t,r,o,s))||s;let a=o.doc.nodeSize;o.delete(r-s-1,r-s+t.nodeSize+1);let c=o.doc.nodeSize;return s+=a-c,!1}),i.size>0){let a=[...i].join("\n");throw Error("Blocks with the following IDs could not be found in the editor: "+a)}return e.dispatch(o),l}let _0;async function _x(){if(_0)return _0;let e=await Promise.all([n.e(9425).then(n.bind(n,9425)),n.e(6100).then(n.bind(n,6100)),n.e(7672).then(n.bind(n,7672)),n.e(7363).then(n.bind(n,7363)),Promise.all([n.e(4723),n.e(8470)]).then(n.bind(n,8470)),Promise.all([n.e(1196),n.e(3510)]).then(n.bind(n,3510)),Promise.all([n.e(4723),n.e(7647)]).then(n.bind(n,7647)),Promise.all([n.e(1196),n.e(5696)]).then(n.bind(n,5696)),Promise.all([n.e(4723),n.e(8552)]).then(n.bind(n,8552)),n.e(6104).then(n.bind(n,6104))]);return _0={rehypeParse:e[0],rehypeStringify:e[1],unified:e[2],hastUtilFromDom:e[3],rehypeRemark:e[4],remarkGfm:e[5],remarkStringify:e[6],remarkParse:e[7],remarkRehype:e[8],rehypeFormat:e[9]}}function _C(){let e=t=>{let n=t.children.length;for(let r=0;r<n;r++){let o=t.children[r];if("element"===o.type&&(e(o),"u"===o.tagName)){if(o.children.length>0){t.children.splice(r,1,...o.children);let i=o.children.length-1;n+=i,r+=i}else t.children.splice(r,1),n--,r--}}};return e}function _S(){let e=_0;if(!e)throw Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");let t=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){let i=n.children[o],l=o+1<n.children.length?n.children[o+1]:void 0;"element"===i.type&&"input"===i.tagName&&"checkbox"===(null==(r=i.properties)?void 0:r.type)&&"element"===(null==l?void 0:l.type)&&"p"===l.tagName?(l.tagName="span",l.children.splice(0,0,e.hastUtilFromDom.fromDom(document.createTextNode(" ")))):t(i)}};return t}function _1(e){let t=_0;if(!t)throw Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return t.unified.unified().use(t.rehypeParse.default,{fragment:!0}).use(_C).use(_S).use(t.rehypeRemark.default).use(t.remarkGfm.default).use(t.remarkStringify.default,{handlers:{text:e=>e.value}}).processSync(e).value}let _2=null;function _3(e){if("string"==typeof e){let t=(_2||(_2=document.implementation.createHTMLDocument("title"))).createElement("div");t.innerHTML=e,e=t}return function e(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{var t;let n=(t=e,Array.prototype.indexOf.call(t.parentElement.childNodes,t)),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(e=>{e.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(t=>{var n;if(3===(n=t).nodeType&&!/\S/.test(n.nodeValue||""))return;let r=document.createElement("li");r.append(t),e.insertAdjacentElement("afterend",r)}),0===r.childNodes.length&&r.remove()})}(e),function(e){e.querySelectorAll("li + ul, li + ol").forEach(e=>{var t,n;let r=e.previousElementSibling,o=document.createElement("div");r.insertAdjacentElement("afterend",o),o.append(r);let i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),o.append(i);"UL"===(null==(t=o.nextElementSibling)?void 0:t.nodeName)||"OL"===(null==(n=o.nextElementSibling)?void 0:n.nodeName);)i.append(o.nextElementSibling)})}(e),e}async function _E(e,t,n,r,o){let i=_3(e),l=K.fromSchema(o).parse(i,{topNode:o.nodes.blockGroup.create()}),s=[];for(let a=0;a<l.childCount;a++)s.push($_(l.child(a),t,n,r));return s}function _4(e,t){let n=t.value?t.value:"",r={};t.lang&&(r["data-language"]=t.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(o.data={meta:t.meta}),e.patch(t,o),o={type:"element",tagName:"pre",properties:{},children:[o=e.applyData(t,o)]},e.patch(t,o),o}class _M{constructor(){g8(this,"callbacks",{})}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),()=>this.off(e,t)}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o=this.callbacks[e];o&&o.forEach(e=>e.apply(this,n))}off(e,t){let n=this.callbacks[e];n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}}class _T{constructor(e,t,n,r){g8(this,"state"),g8(this,"emitUpdate"),g8(this,"mouseDownHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),g8(this,"dragstartHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),g8(this,"scrollHandler",()=>{var e;if(null!=(e=this.state)&&e.show){let t=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!t)return;this.state.referencePos=t.getBoundingClientRect(),this.emitUpdate()}}),g8(this,"closeMenu",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=t,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw Error("Attempting to update uninitialized file panel");r(this.state)},n.dom.addEventListener("mousedown",this.mouseDownHandler),n.dom.addEventListener("dragstart",this.dragstartHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,t){var n,r;let o=this.pluginKey.getState(e.state);if((null==(n=this.state)||!n.show)&&o.block&&this.editor.isEditable){let i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${o.block.id}"]`);if(!i)return;return this.state={show:!0,referencePos:i.getBoundingClientRect(),block:o.block},void this.emitUpdate()}e.state.selection.eq(t.selection)&&e.state.doc.eq(t.doc)&&this.editor.isEditable||null==(r=this.state)||!r.show||(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}let _8=new tc("FilePanelPlugin");class _6{constructor(e,t,n){g8(this,"state"),g8(this,"emitUpdate"),g8(this,"preventHide",!1),g8(this,"preventShow",!1),g8(this,"shouldShow",e=>{let{state:t,from:n,to:r,view:o}=e,{doc:i,selection:l}=t,{empty:s}=l,a=!i.textBetween(n,r).length&&oW(t.selection);return!(l.$from.parent.type.spec.code||i_(l)&&l.node.type.spec.code)&&!(!o.hasFocus()||s||a)}),g8(this,"blurHandler",e=>{var t;if(this.preventHide)return void(this.preventHide=!1);let n=this.pmView.dom.parentElement;e&&e.relatedTarget&&(n===e.relatedTarget||n.contains(e.relatedTarget)||e.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||null!=(t=this.state)&&t.show&&(this.state.show=!1,this.emitUpdate())}),g8(this,"viewMousedownHandler",()=>{this.preventShow=!0}),g8(this,"viewMouseupHandler",()=>{this.preventShow=!1,setTimeout(()=>this.update(this.pmView))}),g8(this,"dragHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),g8(this,"scrollHandler",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),g8(this,"closeMenu",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw Error("Attempting to update uninitialized formatting toolbar");n(this.state)},t.dom.addEventListener("mousedown",this.viewMousedownHandler),t.dom.addEventListener("mouseup",this.viewMouseupHandler),t.dom.addEventListener("dragstart",this.dragHandler),t.dom.addEventListener("dragover",this.dragHandler),t.dom.addEventListener("blur",this.blurHandler),t.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,t){var n,r;let{state:o,composing:i}=e,{doc:l,selection:s}=o,a=t&&t.doc.eq(l)&&t.selection.eq(s);if(i||a)return;let{ranges:c}=s,d=Math.min(...c.map(e=>e.$from.pos)),u=Math.max(...c.map(e=>e.$to.pos)),h=null==(n=this.shouldShow)?void 0:n.call(this,{view:e,state:o,from:d,to:u});return!this.preventShow&&(h||this.preventHide)?(this.state={show:!0,referencePos:this.getSelectionBoundingBox()},void this.emitUpdate()):null==(r=this.state)||!r.show||this.preventHide||h&&!this.preventShow&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.dom.removeEventListener("mouseup",this.viewMouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){let{state:e}=this.pmView,{selection:t}=e,{ranges:n}=t,r=Math.min(...n.map(e=>e.$from.pos)),o=Math.max(...n.map(e=>e.$to.pos));if(i_(t)){let i=this.pmView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return ib(this.pmView,r,o)}}let _N=new tc("FormattingToolbarPlugin");class _5{constructor(e,t,n){g8(this,"state"),g8(this,"emitUpdate"),g8(this,"menuUpdateTimer"),g8(this,"startMenuUpdateTimer"),g8(this,"stopMenuUpdateTimer"),g8(this,"mouseHoveredLinkMark"),g8(this,"mouseHoveredLinkMarkRange"),g8(this,"keyboardHoveredLinkMark"),g8(this,"keyboardHoveredLinkMarkRange"),g8(this,"linkMark"),g8(this,"linkMarkRange"),g8(this,"mouseOverHandler",e=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),e.target instanceof HTMLAnchorElement&&"A"===e.target.nodeName){let t=e.target,n=this.pmView.posAtDOM(t,0)+1,r=this.pmView.state.doc.resolve(n),o=r.marks();for(let i of o)if(i.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=i,this.mouseHoveredLinkMarkRange=oF(r,i.type,i.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),g8(this,"clickHandler",e=>{var t;let n=this.pmView.dom.parentElement;this.linkMark&&e&&e.target&&n!==e.target&&!n.contains(e.target)&&null!=(t=this.state)&&t.show&&(this.state.show=!1,this.emitUpdate())}),g8(this,"scrollHandler",()=>{var e;void 0!==this.linkMark&&null!=(e=this.state)&&e.show&&(this.state.referencePos=ib(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),g8(this,"closeMenu",()=>{var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw Error("Attempting to update uninitialized link toolbar");n(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update()},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,t){var n;let r=this.pmView.state.tr.insertText(t,this.linkMarkRange.from,this.linkMarkRange.to);r.addMark(this.linkMarkRange.from,this.linkMarkRange.from+t.length,this.pmView.state.schema.mark("link",{href:e})),this.editor.dispatch(r),this.pmView.focus(),null!=(n=this.state)&&n.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.dispatch(this.pmView.state.tr.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate())}update(){var e;if(!this.pmView.hasFocus())return;let t=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){let n=this.pmView.state.selection.$from.marks();for(let r of n)if(r.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=r,this.keyboardHoveredLinkMarkRange=oF(this.pmView.state.selection.$from,r.type,r.attrs)||void 0;break}}return this.mouseHoveredLinkMark&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable?(this.state={show:!0,referencePos:ib(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},void this.emitUpdate()):null==(e=this.state)||!e.show||!t||this.linkMark&&this.editor.isEditable?void 0:(this.state.show=!1,void this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}let _7=new tc("LinkToolbarPlugin");function _L(e,t){let n=[];return e.descendants(e=>{var r;return"blockContainer"!==e.type.name||"blockGroup"===(null==(r=e.firstChild)?void 0:r.type.name)||(n.push($_(e,t.blockSchema,t.inlineContentSchema,t.styleSchema)),!1)}),n}class _P extends ej{constructor(e,t){super(e,t),g8(this,"nodes");let n=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,t.pos,(e,t,r)=>{if(null!==r&&r.eq(n))return this.nodes.push(e),!1})}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return new _P(e.resolve(t),e.resolve(n))}content(){return new f(a.from(this.nodes),0,0)}eq(e){if(!(e instanceof _P)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let t=0;t<this.nodes.length;t++)if(!this.nodes[t].eq(e.nodes[t]))return!1;return!0}map(e,t){let n=t.mapResult(this.from),r=t.mapResult(this.to);return r.deleted?ej.near(e.resolve(n.pos)):n.deleted?ej.near(e.resolve(r.pos)):new _P(e.resolve(n.pos),e.resolve(r.pos))}toJSON(){return{type:"node",anchor:this.anchor,head:this.head}}}let _A;function _R(e,t){for(var n,r;e&&e.parentElement&&e.parentElement!==t.dom&&"blockContainer"!==(null==(n=e.getAttribute)?void 0:n.call(e,"data-node-type"));)e=e.parentElement;if("blockContainer"===(null==(r=e.getAttribute)?void 0:r.call(e,"data-node-type")))return{node:e,id:e.getAttribute("data-id")}}function _O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;t===n&&(n+=e.state.doc.resolve(t+1).node().nodeSize);let r=e.domAtPos(t).node.cloneNode(!0),o=e.domAtPos(t).node,i=(e,t)=>Array.prototype.indexOf.call(e.children,t),l=i(o,e.domAtPos(t+1).node.parentElement),s=i(o,e.domAtPos(n-1).node.parentElement);for(let a=o.childElementCount-1;a>=0;a--)(a>s||a<l)&&r.removeChild(r.children[a]);_D(e.root),_A=r;let c=e.dom.className.split(" ").filter(e=>"ProseMirror"!==e&&"bn-root"!==e&&"bn-editor"!==e).join(" ");_A.className=_A.className+" bn-drag-preview "+c,e.root instanceof ShadowRoot?e.root.appendChild(_A):e.root.body.appendChild(_A)}function _D(e){void 0!==_A&&(e instanceof ShadowRoot?e.removeChild(_A):e.body.removeChild(_A),_A=void 0)}class _I{constructor(e,t,n){g8(this,"state"),g8(this,"emitUpdate"),g8(this,"mousePos"),g8(this,"hoveredBlock"),g8(this,"menuFrozen",!1),g8(this,"updateState",e=>{this.state=e,this.emitUpdate(this.state)}),g8(this,"updateStateFromMousePos",()=>{var e,t,n,r;if(this.menuFrozen||!this.mousePos)return;let o=((e,t)=>{if(!t.dom.firstChild)return;let n=t.dom.firstChild.getBoundingClientRect(),r={left:n.left+n.width/2,top:e.y},o=t.root.elementsFromPoint(r.left,r.top),i;for(let l of o)if(t.dom.contains(l)){i=_R(l,t);break}return i})(this.mousePos,this.pmView);if(!o||!this.editor.isEditable)return void(null!=(e=this.state)&&e.show&&(this.state.show=!1,this.updateState(this.state)));if(null!=(t=this.state)&&t.show&&null!=(n=this.hoveredBlock)&&n.hasAttribute("data-id")&&(null==(r=this.hoveredBlock)?void 0:r.getAttribute("data-id"))===o.id)return;this.hoveredBlock=o.node;let i=o.node.firstChild;if(i&&this.editor.isEditable){let l=this.pmView.dom.firstChild.getBoundingClientRect(),s=i.getBoundingClientRect();this.updateState({show:!0,referencePos:new DOMRect(l.x,s.y,s.width,s.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),g8(this,"onDrop",e=>{var t;if(this.editor._tiptapEditor.commands.blur(),e.synthetic||null==(t=e.dataTransfer)||!t.types.includes("blocknote/html"))return;let n=this.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!n||-1===n.inside){let r=new Event("drop",e),o=this.pmView.dom.firstChild.getBoundingClientRect();r.clientX=e.clientX<o.left||e.clientX>o.left+o.width?o.left+o.width/2:e.clientX,r.clientY=Math.min(Math.max(e.clientY,o.top),o.top+o.height),r.dataTransfer=e.dataTransfer,r.preventDefault=()=>e.preventDefault(),r.synthetic=!0,this.pmView.dom.dispatchEvent(r)}}),g8(this,"onDragOver",e=>{var t;if(e.synthetic||null==(t=e.dataTransfer)||!t.types.includes("blocknote/html"))return;let n=this.pmView.posAtCoords({left:e.clientX,top:e.clientY});if(!n||-1===n.inside&&this.pmView.dom.firstChild){let r=new Event("dragover",e),o=this.pmView.dom.firstChild.getBoundingClientRect();r.clientX=o.left+o.width/2,r.clientY=e.clientY,r.dataTransfer=e.dataTransfer,r.preventDefault=()=>e.preventDefault(),r.synthetic=!0,this.pmView.dom.dispatchEvent(r)}}),g8(this,"onKeyDown",e=>{var t;null!=(t=this.state)&&t.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),g8(this,"onMouseMove",e=>{var t;if(this.menuFrozen)return;this.mousePos={x:e.clientX,y:e.clientY};let n=this.pmView.dom.getBoundingClientRect(),r=this.mousePos.x>n.left&&this.mousePos.x<n.right&&this.mousePos.y>n.top&&this.mousePos.y<n.bottom,o=this.pmView.dom.parentElement;r&&e&&e.target&&o!==e.target&&!o.contains(e.target)?null!=(t=this.state)&&t.show&&(this.state.show=!1,this.emitUpdate(this.state)):this.updateStateFromMousePos()}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw Error("Attempting to update uninitialized side menu");n(this.state)},this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragover",this.onDragOver),_x(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0)}update(e,t){var n;!t.doc.eq(this.pmView.state.doc)&&null!=(n=this.state)&&n.show&&this.updateStateFromMousePos()}destroy(){var e;null!=(e=this.state)&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0)}}let _H=new tc("SideMenuPlugin"),_z=ic(e=>"blockContainer"===e.type.name);class _9{constructor(e,t){g8(this,"state"),g8(this,"emitUpdate"),g8(this,"rootEl"),g8(this,"pluginState"),g8(this,"handleScroll",()=>{var e,t;if(null!=(e=this.state)&&e.show){let n=null==(t=this.rootEl)?void 0:t.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!n)return;this.state.referencePos=n.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),g8(this,"closeMenu",()=>{this.editor.dispatch(this.editor._tiptapEditor.view.state.tr.setMeta(_B,null))}),g8(this,"clearQuery",()=>{void 0!==this.pluginState&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor._tiptapEditor.state.selection.from}).run()}),this.editor=e,this.pluginState=void 0,this.emitUpdate=e=>{var n;if(!this.state)throw Error("Attempting to update uninitialized suggestions menu");t(e,{...this.state,ignoreQueryLength:null==(n=this.pluginState)?void 0:n.ignoreQueryLength})},this.rootEl=this.editor._tiptapEditor.view.root,this.rootEl.addEventListener("scroll",this.handleScroll,!0)}update(e,t){var n;let r=_B.getState(t),o=_B.getState(e.state),i=void 0!==r&&void 0===o;if(!(void 0===r&&void 0!==o)&&(void 0===r||void 0===o)&&!i)return;if(this.pluginState=i?r:o,i||!this.editor.isEditable)return this.state.show=!1,void this.emitUpdate(this.pluginState.triggerCharacter);let l=null==(n=this.rootEl)?void 0:n.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;null==(e=this.rootEl)||e.removeEventListener("scroll",this.handleScroll,!0)}}let _B=new tc("SuggestionMenuPlugin"),_V;function _j(e){_V||((_V=document.createElement("div")).innerHTML="_",_V.style.opacity="0",_V.style.height="1px",_V.style.width="1px",e instanceof Document?e.body.appendChild(_V):e.appendChild(_V))}function _F(e){return Array.prototype.indexOf.call(e.parentElement.childNodes,e)}class _U{constructor(e,t,n){g8(this,"state"),g8(this,"emitUpdate"),g8(this,"tableId"),g8(this,"tablePos"),g8(this,"tableElement"),g8(this,"menuFrozen",!1),g8(this,"mouseState","up"),g8(this,"prevWasEditable",null),g8(this,"viewMousedownHandler",()=>{this.mouseState="down"}),g8(this,"mouseUpHandler",e=>{this.mouseState="up",this.mouseMoveHandler(e)}),g8(this,"mouseMoveHandler",e=>{var t,n,r,o,i,l;if(this.menuFrozen||"selecting"===this.mouseState||!(e.target instanceof Element)||!this.pmView.dom.contains(e.target))return;let s=function(e){let t=e;for(;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName&&!t.classList.contains("tableWrapper");){if(t.classList.contains("ProseMirror"))return;let n=t.parentNode;if(!n||!(n instanceof Element))return;t=n}return"TD"===t.nodeName||"TH"===t.nodeName?{type:"cell",domNode:t,tbodyNode:t.closest("tbody")}:{type:"wrapper",domNode:t,tbodyNode:t.querySelector("tbody")}}(e.target);if("cell"===(null==s?void 0:s.type)&&"down"===this.mouseState&&(null==(t=this.state)||!t.draggingState))return this.mouseState="selecting",void(null!=(n=this.state)&&n.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate()));if(!s||!this.editor.isEditable)return void(null!=(r=this.state)&&r.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate()));if(!s.tbodyNode)return;let a=s.tbodyNode.getBoundingClientRect(),c=_R(s.domNode,this.pmView);if(!c)return;let d;this.tableElement=c.node;let u=$D(c.id,this.editor._tiptapEditor.state.doc),h=$_(u.node,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema,this.editor.blockCache);if(i=h,l=this.editor,"table"===i.type&&i.type in l.schema.blockSchema&&_$(i.type,l)&&(this.tablePos=u.posBeforeNode+1,d=h),!d)return;this.tableId=c.id;let p=null==(o=s.domNode.closest(".tableWrapper"))?void 0:o.querySelector(".table-widgets-container");if("wrapper"===(null==s?void 0:s.type)){let f=e.clientY>=a.bottom-1&&e.clientY<a.bottom+20,m=e.clientX>=a.right-1&&e.clientX<a.right+20,g=e.clientX>a.right||e.clientY>a.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:f,showAddOrRemoveColumnsButton:m,referencePosTable:a,block:d,widgetContainer:p,colIndex:g?void 0:this.state.colIndex,rowIndex:g?void 0:this.state.rowIndex,referencePosCell:g?void 0:this.state.referencePosCell}}else{let $=_F(s.domNode),_=_F(s.domNode.parentElement),b=s.domNode.getBoundingClientRect();if(void 0!==this.state&&this.state.show&&this.tableId===c.id&&this.state.rowIndex===_&&this.state.colIndex===$)return;this.state={show:!0,showAddOrRemoveColumnsButton:$===d.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:_===d.content.rows.length-1,referencePosTable:a,block:d,draggingState:void 0,referencePosCell:b,colIndex:$,rowIndex:_,widgetContainer:p}}return this.emitUpdate(),!1}),g8(this,"dragOverHandler",e=>{var t;if(void 0===(null==(t=this.state)?void 0:t.draggingState))return;e.preventDefault(),e.dataTransfer.dropEffect="move",function(e,t){let n=t.querySelectorAll(e);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);let n={left:Math.min(Math.max(e.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(e.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},r=this.pmView.root.elementsFromPoint(n.left,n.top).filter(e=>"TD"===e.tagName||"TH"===e.tagName);if(0===r.length)throw Error("Could not find table cell element that the mouse cursor is hovering over.");let o=r[0],i=!1,l=_F(o.parentElement),s=_F(o),a="row"===this.state.draggingState.draggedCellOrientation?this.state.rowIndex:this.state.colIndex,c=("row"===this.state.draggingState.draggedCellOrientation?l:s)!==a;(this.state.rowIndex!==l||this.state.colIndex!==s)&&(this.state.rowIndex=l,this.state.colIndex=s,this.state.referencePosCell=o.getBoundingClientRect(),i=!0);let d="row"===this.state.draggingState.draggedCellOrientation?n.top:n.left;this.state.draggingState.mousePos!==d&&(this.state.draggingState.mousePos=d,i=!0),i&&this.emitUpdate(),c&&this.editor.dispatch(this.pmView.state.tr.setMeta(_W,!0))}),g8(this,"dropHandler",e=>{if(this.mouseState="up",void 0===this.state||void 0===this.state.draggingState)return;if(void 0===this.state.rowIndex||void 0===this.state.colIndex)throw Error("Attempted to drop table row or column, but no table block was hovered prior.");e.preventDefault();let{draggingState:t,colIndex:n,rowIndex:r}=this.state,o=this.state.block.content.rows;if("row"===t.draggedCellOrientation){let i=o[t.originalIndex];o.splice(t.originalIndex,1),o.splice(r,0,i)}else{let l=o.map(e=>e.cells[t.originalIndex]);o.forEach((e,r)=>{e.cells.splice(t.originalIndex,1),e.cells.splice(n,0,l[r])})}this.editor.updateBlock(this.state.block,{type:"table",content:{type:"tableContent",rows:o}}),this.editor.setTextCursorPosition(this.state.block.id)}),this.editor=e,this.pmView=t,this.emitUpdate=()=>{if(!this.state)throw Error("Attempting to update uninitialized image toolbar");n(this.state)},t.dom.addEventListener("mousemove",this.mouseMoveHandler),t.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),t.root.addEventListener("dragover",this.dragOverHandler),t.root.addEventListener("drop",this.dropHandler)}update(){if(!this.state||!this.state.show)return;let e=this.tableElement.querySelector("tbody");if(e){if(void 0!==this.state.rowIndex&&void 0!==this.state.colIndex){this.state.rowIndex>=e.children.length&&(this.state.rowIndex=e.children.length-1),this.state.colIndex>=e.children[0].children.length&&(this.state.colIndex=e.children[0].children.length-1);let t=e.children[this.state.rowIndex].children[this.state.colIndex];this.state.referencePosCell=t.getBoundingClientRect()}this.state.block=this.editor.getBlock(this.state.block.id),this.state.referencePosTable=e.getBoundingClientRect(),this.emitUpdate()}}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}let _W=new tc("TableHandlesPlugin"),_G=["vscode-editor-data","blocknote/html","Files","text/html","text/plain"];function _q(e,t){if(!e.startsWith(".")||!t.startsWith("."))throw Error("The strings provided are not valid file extensions.");return e===t}function _K(e,t){let n=e.split("/"),r=t.split("/");if(2!==n.length)throw Error(`The string ${e} is not a valid MIME type.`);if(2!==r.length)throw Error(`The string ${t} is not a valid MIME type.`);return"*"===n[1]||"*"===r[1]?n[0]===r[0]:("*"===n[0]||"*"===r[0]||n[0]===r[0])&&n[1]===r[1]}async function _J(e,t){if(!t.uploadFile)return;let n="dataTransfer"in e?e.dataTransfer:e.clipboardData;if(null===n)return;let r=null;for(let o of _G)if(n.types.includes(o)){r=o;break}if("Files"!==r)return;let i=n.items;if(!i)return;e.preventDefault();let l=Object.values(t.schema.blockSchema).filter(e=>e.isFileBlock);for(let s=0;s<i.length;s++){let a="file";for(let c of l)for(let d of c.fileBlockAccept||[]){let u=d.startsWith("."),h=i[s].getAsFile();if(h&&(!u&&h.type&&_K(i[s].type,d)||u&&_q("."+h.name.split(".").pop(),d))){a=c.type;break}}let p=i[s].getAsFile();if(p){let f={type:a,props:{name:p.name}},m;if("paste"===e.type)m=t.insertBlocks([f],t.getTextCursorPosition().block,"after")[0].id;else{if("drop"!==e.type)return;{let g={left:e.clientX,top:e.clientY},$=t._tiptapEditor.view.posAtCoords(g);if(!$)return;let _=gK(gG(t._tiptapEditor.state.doc,$.pos));m=t.insertBlocks([f],_.blockContainer.node.attrs.id,"after")[0].id}}let b=await t.uploadFile(p,m),y="string"==typeof b?{props:{url:b}}:{...b};t.updateBlock(m,y)}}}let _Z=e=>oI.create({name:"dropFile",addProseMirrorPlugins:()=>[new tl({props:{handleDOMEvents:{drop(t,n){if(!e.isEditable)return;let r=null;for(let o of _G)if(n.dataTransfer.types.includes(o)){r=o;break}return null===r||"Files"===r&&(_J(n,e),!0)}}}})]}),_X=e=>oI.create({name:"pasteFromClipboard",addProseMirrorPlugins:()=>[new tl({props:{handleDOMEvents:{paste(t,n){if(n.preventDefault(),!e.isEditable)return;let r;for(let o of _G)if(n.clipboardData.types.includes(o)){r=o;break}if(!r)return!0;if("vscode-editor-data"===r)return async function(e,t){let n=t.prosemirrorView,{schema:r}=n.state;if(!e.clipboardData)return!1;let o=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),l=i?JSON.parse(i):void 0,s=null==l?void 0:l.mode;o&&(r.nodes.codeBlock?s&&t._tiptapEditor.view.pasteHTML(`<pre><code class="language-${s}">${o.replace(/\r\n?/g,"\n")}</code></pre>`):n.pasteText(o))}(n,e),!0;if("Files"===r)return _J(n,e),!0;let i=n.clipboardData.getData(r);return"blocknote/html"===r?(e._tiptapEditor.view.pasteHTML(i),!0):"text/html"===r?(i=_3(i.trim()).innerHTML,e._tiptapEditor.view.pasteHTML(i),!0):(e._tiptapEditor.view.pasteText(i),!0)}}}})]});function _Q(e,t){"node"in e.state.selection&&"blockContent"===e.state.selection.node.type.spec.group&&t.dispatch(t._tiptapEditor.state.tr.setSelection(new eK(e.state.doc.resolve(e.state.selection.from-1))));let n=rL(e,e.state.selection.content()).dom.innerHTML,r=e.state.selection.content().content,o=function(e,t,n){var r;let o=!1,i=e.state.selection instanceof ch;if(!i){let l=e.state.doc.slice(e.state.selection.from,e.state.selection.to,!1).content,s=[];for(let a=0;a<l.childCount;a++)s.push(l.child(a));(o=void 0===s.find(e=>"blockContainer"===e.type.name||"blockGroup"===e.type.name||"blockContent"===e.type.spec.group))&&(t=l)}let c,d=gF(e.state.schema,n);if(i){"table"===(null==(r=t.firstChild)?void 0:r.type.name)&&(t=t.firstChild.content);let u=$g(t,n.schema.inlineContentSchema,n.schema.styleSchema);c=d.exportInlineContent(u,{})}else if(o){let h=$$(t,n.schema.inlineContentSchema,n.schema.styleSchema);c=d.exportInlineContent(h,{})}else{let p=_L(t,n.schema);c=d.exportBlocks(p,{})}return c}(e,r,t);return{clipboardHTML:n,externalHTML:o,markdown:_1(o)}}let _Y=(e,t,n)=>{n.preventDefault(),n.clipboardData.clearData();let{clipboardHTML:r,externalHTML:o,markdown:i}=_Q(t,e);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i)},be=e=>oI.create({name:"copyToClipboard",addProseMirrorPlugins:()=>[new tl({props:{handleDOMEvents:{copy:(t,n)=>(_Y(e,t,n),!0),cut:(t,n)=>(_Y(e,t,n),t.dispatch(t.state.tr.deleteSelection()),!0),dragstart(t,n){if(!("node"in t.state.selection)||"blockContent"!==t.state.selection.node.type.spec.group)return;e.dispatch(e._tiptapEditor.state.tr.setSelection(new eK(t.state.doc.resolve(t.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();let{clipboardHTML:r,externalHTML:o,markdown:i}=_Q(t,e);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",i),!0}}}})]}),bt=oI.create({name:"blockBackgroundColor",addGlobalAttributes:()=>[{types:["blockContainer"],attributes:{backgroundColor:{default:$n.backgroundColor.default,parseHTML:e=>e.hasAttribute("data-background-color")?e.getAttribute("data-background-color"):$n.backgroundColor.default,renderHTML:e=>e.backgroundColor===$n.backgroundColor.default?{}:{"data-background-color":e.backgroundColor}}}}]}),bn=(e,t)=>{if(!t.nodeBefore)throw Error(`Attempted to get previous blockContainer node for merge at position ${t.pos} but a previous node does not exist`);let n=t.posAtIndex(t.index()-1),r=gJ(e.resolve(n));for(;r.blockGroup;){let o=r.blockGroup.node;n=e.resolve(r.blockGroup.beforePos+1).posAtIndex(o.childCount-1),r=gJ(e.resolve(n))}return e.resolve(n)},br=e=>t=>{let{state:n,dispatch:r}=t,o=n.doc.resolve(e),i=bn(n.doc,o);return!!((e,t)=>{let n=gJ(e),r=gJ(t);return"inline*"===n.blockContent.node.type.spec.content&&"inline*"===r.blockContent.node.type.spec.content&&n.blockContent.node.childCount>0})(i,o)&&((e,t,n,r)=>{let o=gJ(r);if(o.blockGroup){let i=e.doc.resolve(o.blockGroup.beforePos+1),l=e.doc.resolve(o.blockGroup.afterPos-1),s=i.blockRange(l);t&&e.tr.lift(s,r.depth)}if(t){let a=gJ(n);t(e.tr.delete(a.blockContent.afterPos-1,o.blockContent.beforePos+1))}return!0})(n,r,i,o)},bo=oI.create({priority:50,addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.first(e=>{let{chain:t,commands:n}=e;return[()=>n.deleteSelection(),()=>n.undoInputRule(),()=>n.command(e=>{let{state:t}=e,r=gZ(t),o=t.selection.from===r.blockContent.beforePos+1,i="paragraph"===r.blockContent.node.type.name;return!(!o||i)&&n.command($I(this.options.editor,r.blockContainer.beforePos,{type:"paragraph",props:{}}))}),()=>n.command(e=>{let{state:t}=e,{blockContent:r}=gZ(t);return t.selection.from===r.beforePos+1&&n.liftListItem("blockContainer")}),()=>n.command(e=>{let{state:n}=e,{blockContainer:r,blockContent:o}=gZ(n),{depth:i}=n.doc.resolve(r.beforePos),l=n.selection.from===o.beforePos+1,s=n.selection.empty,a=1===r.beforePos,c=r.beforePos;return!(a||!l||!s||1!==i)&&t().command(br(c)).scrollIntoView().run()}),()=>n.command(e=>{let{state:n}=e,r=gZ(n),{depth:o}=n.doc.resolve(r.blockContainer.beforePos),i=n.selection.from===r.blockContent.beforePos+1,l=n.selection.empty;if(1!==r.blockContainer.beforePos&&i&&l&&1===o){let s=bn(n.doc,n.doc.resolve(r.blockContainer.beforePos)),a=gJ(n.doc.resolve(s.pos));if(""===a.blockContent.node.type.spec.content||"inline*"===a.blockContent.node.type.spec.content&&0===a.blockContent.node.childCount)return t().cut({from:r.blockContainer.beforePos,to:r.blockContainer.afterPos},a.blockContainer.afterPos).deleteRange({from:a.blockContainer.beforePos,to:a.blockContainer.afterPos}).run()}return!1})]}),Delete:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.command(e=>{let{state:n}=e,{blockContainer:r,blockContent:o,blockGroup:i}=gZ(n),{depth:l}=n.doc.resolve(r.beforePos),s=r.afterPos===n.doc.nodeSize-3,a=n.selection.from===o.afterPos-1,c=n.selection.empty;if(!s&&a&&c&&void 0===i){let d=l,u=r.afterPos+1,h=n.doc.resolve(u).depth;for(;h<d;)d=h,u+=2,h=n.doc.resolve(u).depth;return t.command(br(u-1))}return!1})]}),Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.command(e=>{let{state:n}=e,{blockContent:r,blockContainer:o}=gZ(n),{depth:i}=n.doc.resolve(o.beforePos),l=0===n.selection.$anchor.parentOffset,s=n.selection.anchor===n.selection.head,a=0===r.node.childCount;return!!(l&&s&&a&&i>1)&&t.liftListItem("blockContainer")}),()=>t.command(e=>{let{state:t,dispatch:n}=e,{blockContainer:r,blockContent:o}=gZ(t),i=0===t.selection.$anchor.parentOffset,l=t.selection.anchor===t.selection.head,s=0===o.node.childCount;if(i&&l&&s){let a=r.afterPos;if(n){let c=t.schema.nodes.blockContainer.createAndFill();t.tr.insert(a,c).scrollIntoView(),t.tr.setSelection(new eG(t.doc.resolve(a+2)))}return!0}return!1}),()=>t.command(e=>{let{state:t,chain:n}=e,{blockContent:r}=gZ(t),o=0===t.selection.$anchor.parentOffset;return 0!==r.node.childCount&&(n().deleteSelection().command($U(t.selection.from,o,o)).run(),!0)})]}),Tab:()=>{var e,t,n;return!(null!=(e=this.options.editor.formattingToolbar)&&e.shown||null!=(t=this.options.editor.linkToolbar)&&t.shown||null!=(n=this.options.editor.filePanel)&&n.shown)&&(this.editor.commands.sinkListItem("blockContainer"),!0)},"Shift-Tab":()=>{var e,t,n;return!(null!=(e=this.options.editor.formattingToolbar)&&e.shown||null!=(t=this.options.editor.linkToolbar)&&t.shown||null!=(n=this.options.editor.filePanel)&&n.shown)&&(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlockUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlockDown(),!0)}}}),bi=oI.create({name:"textAlignment",addGlobalAttributes:()=>[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem"],attributes:{textAlignment:{default:"left",parseHTML:e=>e.getAttribute("data-text-alignment"),renderHTML:e=>"left"===e.textAlignment?{}:{"data-text-alignment":e.textAlignment}}}}]}),bl=oI.create({name:"blockTextColor",addGlobalAttributes:()=>[{types:["blockContainer"],attributes:{textColor:{default:$n.textColor.default,parseHTML:e=>e.hasAttribute("data-text-color")?e.getAttribute("data-text-color"):$n.textColor.default,renderHTML:e=>e.textColor===$n.textColor.default?{}:{"data-text-color":e.textColor}}}}]}),bs=oI.create({name:"trailingNode",addProseMirrorPlugins(){let e=new tc(this.name);return[new tl({key:e,appendTransaction(t,n,r){let{doc:o,tr:i,schema:l}=r,s=e.getState(r),a=o.content.size-2,c=l.nodes.blockContainer,d=l.nodes.paragraph;if(s)return i.insert(a,c.create(void 0,d.create()))},state:{init(e,t){},apply(e,t){if(!e.docChanged)return t;let n=e.doc.lastChild;if(!n||"blockGroup"!==n.type.name)throw Error("Expected blockGroup");if(!(n=n.lastChild)||"blockContainer"!==n.type.name)throw Error("Expected blockContainer");let r=n.firstChild;if(!r)throw Error("Expected blockContent");return n.nodeSize>4||"inline*"!==r.type.spec.content}}})]}}),ba={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},bc=i8.create({name:"blockContainer",group:"blockContainer",content:"blockContent blockGroup?",priority:50,defining:!0,parseHTML:()=>[{tag:"div",getAttrs(e){if("string"==typeof e)return!1;let t={};for(let[n,r]of Object.entries(ba))e.getAttribute(r)&&(t[n]=e.getAttribute(r));return"blockContainer"===e.getAttribute("data-node-type")&&t}}],renderHTML(e){var t;let{HTMLAttributes:n}=e,r=document.createElement("div");for(let[o,i]of(r.className="bn-block-outer",r.setAttribute("data-node-type","blockOuter"),Object.entries(n)))"class"!==o&&r.setAttribute(o,i);let l={...(null==(t=this.options.domAttributes)?void 0:t.block)||{},...n},s=document.createElement("div");for(let[a,c]of(s.className=gQ("bn-block",l.class),s.setAttribute("data-node-type",this.name),Object.entries(l)))"class"!==a&&s.setAttribute(a,c);return r.appendChild(s),{dom:r,contentDOM:s}}}),bd=i8.create({name:"blockGroup",group:"blockGroup",content:"blockContainer+",parseHTML:()=>[{tag:"div",getAttrs:e=>"string"!=typeof e&&"blockGroup"===e.getAttribute("data-node-type")&&null}],renderHTML(e){var t;let{HTMLAttributes:n}=e,r={...(null==(t=this.options.domAttributes)?void 0:t.blockGroup)||{},...n},o=document.createElement("div");for(let[i,l]of(o.className=gQ("bn-block-group",r.class),o.setAttribute("data-node-type","blockGroup"),Object.entries(r)))"class"!==i&&o.setAttribute(i,l);return{dom:o,contentDOM:o}}}),bu=i8.create({name:"doc",topNode:!0,content:"blockGroup"});function bh(e,t){let n=[];return e.forEach((e,r,o)=>{o!==t&&n.push(e)}),a.from(n)}function bp(e){return e&&Object.fromEntries(Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t}))}class bf{constructor(e){g8(this,"blockSpecs"),g8(this,"inlineContentSpecs"),g8(this,"styleSpecs"),g8(this,"blockSchema"),g8(this,"inlineContentSchema"),g8(this,"styleSchema"),g8(this,"BlockNoteEditor","only for types"),g8(this,"Block","only for types"),g8(this,"PartialBlock","only for types"),this.blockSpecs=bp(null==e?void 0:e.blockSpecs)||_h,this.inlineContentSpecs=bp(null==e?void 0:e.inlineContentSpecs)||_m,this.styleSpecs=bp(null==e?void 0:e.styleSpecs)||_f,this.blockSchema=$h(this.blockSpecs),this.inlineContentSchema=$b(this.inlineContentSpecs),this.styleSchema=$v(this.styleSpecs)}static create(e){return new bf(e)}}let bm=class extends iM{constructor(e,t){super({...e,content:void 0}),g8(this,"_state"),g8(this,"mount",e=>{e?(this.options.element=e,this.createViewAlternative()):this.destroy()});let n=this.schema,r,o=n.nodes.doc.createAndFill,i;n.nodes.doc.createAndFill=function(){if(r)return r;for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let l=o.apply(n.nodes.doc,t),s=JSON.parse(JSON.stringify(l.toJSON()));return s.content[0].content[0].attrs.id="initialBlockId",r=E.fromJSON(n,s)};try{i=io({type:"doc",content:[{type:"blockGroup",content:null==e?void 0:e.content.map(e=>gz(e,this.schema,t).toJSON())}]},this.schema,this.options.parseOptions)}catch(l){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",l),Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=ti.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){this.view?this.view.dispatch(e):this._state=this.state.apply(e)}createViewAlternative(){queueMicrotask(()=>{this.view=new rP({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:this.state});let e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews(),this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0})}};g8(bm,"create",(e,t)=>{var n,r;let o=null==(n=null==globalThis?void 0:globalThis.window)?void 0:n.setTimeout;"u">typeof(null==(r=null==globalThis?void 0:globalThis.window)?void 0:r.setTimeout)&&(globalThis.window.setTimeout=()=>0);try{return new bm(e,t)}finally{o&&(globalThis.window.setTimeout=o)}});let bg=bm;bg.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};let b$=new tc("blocknote-placeholder"),b_=(e,t)=>new tl({key:b$,view(){let n=document.createElement("style"),r=e._tiptapEditor.options.injectNonce;r&&n.setAttribute("nonce",r),e._tiptapEditor.view.root instanceof ShadowRoot?e._tiptapEditor.view.root.append(n):e._tiptapEditor.view.root.head.appendChild(n);let o=n.sheet,i=function(){return`.bn-block-content${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`},l=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"[data-is-empty-and-focused]":"";return"default"===e?i(t):i(t+`[data-content-type="${e}"]`)};for(let[s,a]of Object.entries(t)){let c="default"===s;o.insertRule(`${l(s,c)}{ content: ${JSON.stringify(a)}; }`),c||o.insertRule(`${l(s,!0)}{ content: ${JSON.stringify(a)}; }`)}return{destroy(){e._tiptapEditor.view.root instanceof ShadowRoot?e._tiptapEditor.view.root.removeChild(n):e._tiptapEditor.view.root.head.removeChild(n)}}},props:{decorations(t){let{doc:n,selection:r}=t;if(!e.isEditable||!r.empty||r.$from.parent.type.spec.code)return;let o=r.$anchor,i=o.parent;if(i.content.size>0)return null;let l=o.before(),s=rg.node(l,l+i.nodeSize,{"data-is-empty-and-focused":"true"});return rb.create(n,[s])}}}),bb=new tc("node-selection-keyboard"),by=new tc("previous-blocks"),bv={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"},bw=()=>{let e;return new tl({key:by,view(t){return{update:async(t,n)=>{var r;(null==(r=this.key)?void 0:r.getState(t.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{t.dispatch(t.state.tr.setMeta(by,{clearUpdate:!0}))},0))},destroy(){e&&clearTimeout(e)}}},state:{init:()=>({prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}),apply(e,t,n,r){if(t.currentTransactionOldBlockAttrs={},t.updatedBlocks.clear(),!e.docChanged||n.doc.eq(r.doc))return t;let o={},i=is(n.doc,e=>e.attrs.id),l=new Map(i.map(e=>[e.node.attrs.id,e])),s=is(r.doc,e=>e.attrs.id);for(let a of s){let c=l.get(a.node.attrs.id),d=null==c?void 0:c.node.firstChild,u=a.node.firstChild;if(c&&d&&u){let h={index:u.attrs.index,level:u.attrs.level,type:u.type.name,depth:r.doc.resolve(a.pos).depth},p={index:d.attrs.index,level:d.attrs.level,type:d.type.name,depth:n.doc.resolve(c.pos).depth};o[a.node.attrs.id]=p,e.getMeta("numberedListIndexing")&&(a.node.attrs.id in t.prevTransactionOldBlockAttrs&&(p=t.prevTransactionOldBlockAttrs[a.node.attrs.id]),"numberedListItem"===h.type&&(p.index=h.index)),t.currentTransactionOldBlockAttrs[a.node.attrs.id]=p,JSON.stringify(p)!==JSON.stringify(h)&&(p["depth-change"]=p.depth-h.depth,t.updatedBlocks.add(a.node.attrs.id))}}return t.prevTransactionOldBlockAttrs=o,t}},props:{decorations(e){let t=this.getState(e);if(0===t.updatedBlocks.size)return;let n=[];return e.doc.descendants((e,r)=>{if(!e.attrs.id||!t.updatedBlocks.has(e.attrs.id))return;let o=t.currentTransactionOldBlockAttrs[e.attrs.id],i={};for(let[l,s]of Object.entries(o))i["data-prev-"+bv[l]]=s||"none";let a=rg.node(r,r+e.nodeSize,{...i});n.push(a)}),rb.create(e.doc,n)}}})};class bk{constructor(e){var t,n,r,o,i,l,s,c;g8(this,"_pmSchema"),g8(this,"headless",!1),g8(this,"_tiptapEditor"),g8(this,"elementRenderer",null),g8(this,"blockCache",new WeakMap),g8(this,"dictionary"),g8(this,"schema"),g8(this,"blockImplementations"),g8(this,"inlineContentImplementations"),g8(this,"styleImplementations"),g8(this,"formattingToolbar"),g8(this,"linkToolbar"),g8(this,"sideMenu"),g8(this,"suggestionMenus"),g8(this,"filePanel"),g8(this,"tableHandles"),g8(this,"uploadFile"),g8(this,"onUploadStartCallbacks",[]),g8(this,"onUploadEndCallbacks",[]),g8(this,"resolveFileUrl"),g8(this,"mount",e=>{this._tiptapEditor.mount(e)}),this.options=e;let d=e;if(d.onEditorContentChange)throw Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(d.onTextCursorPositionChange)throw Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(d.onEditorReady)throw Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(d.editable)throw Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||{slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List"},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below"},suggestion_menu:{no_items_title:"No items found",loading:"Loading…"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},generic:{ctrl_shortcut:"Ctrl"}};let u={defaultStyles:!0,schema:e.schema||bf.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};this.schema=u.schema,this.blockImplementations=u.schema.blockSpecs,this.inlineContentImplementations=u.schema.inlineContentSpecs,this.styleImplementations=u.schema.styleSpecs,this.formattingToolbar=new class e extends _M{constructor(e){super(),g8(this,"view"),g8(this,"plugin"),g8(this,"closeMenu",()=>this.view.closeMenu()),this.plugin=new tl({key:_N,view:t=>(this.view=new _6(e,t,e=>{this.emit("update",e)}),this.view),props:{handleKeyDown:(e,t)=>!("Escape"!==t.key||!this.shown)&&(this.view.closeMenu(),!0)}})}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}onUpdate(e){return this.on("update",e)}}(this),this.linkToolbar=new class e extends _M{constructor(e){super(),g8(this,"view"),g8(this,"plugin"),g8(this,"editLink",(e,t)=>{this.view.editLink(e,t)}),g8(this,"deleteLink",()=>{this.view.deleteLink()}),g8(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),g8(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),g8(this,"closeMenu",()=>this.view.closeMenu()),this.plugin=new tl({key:_7,view:t=>(this.view=new _5(e,t,e=>{this.emit("update",e)}),this.view),props:{handleKeyDown:(e,t)=>!("Escape"!==t.key||!this.shown)&&(this.view.closeMenu(),!0)}})}onUpdate(e){return this.on("update",e)}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}(this),this.sideMenu=new class e extends _M{constructor(e){super(),g8(this,"view"),g8(this,"plugin"),g8(this,"blockDragStart",e=>{(function e(t,n){if(!t.dataTransfer)return;let r=n.prosemirrorView,o=r.dom.getBoundingClientRect(),i={left:o.left+o.width/2,top:t.clientY},l=r.root.elementsFromPoint(i.left,i.top),s;for(let a of l)if(r.dom.contains(a)){s=_R(a,r);break}if(!s)return;let c=function(e,t){let n=_R(e,t);if(n&&1===n.node.nodeType){let r=t.docView,o=r.nearestDesc(n.node,!0);return o&&o!==r?o.posBefore:null}return null}(s.node,r);if(null!=c){let d=r.state.selection,u=r.state.doc,{from:h,to:p}=function(e,t){let n,r,o="blockContent"===t.resolve(e.from).node().type.spec.group,i="blockContent"===t.resolve(e.to).node().type.spec.group,l=Math.min(e.$anchor.depth,e.$head.depth);if(o&&i){let s=e.$from.start(l-1),a=e.$to.end(l-1);n=t.resolve(s-1).pos,r=t.resolve(a+1).pos}else n=e.from,r=e.to;return{from:n,to:r}}(d,u),f=d.$anchor.node()!==d.$head.node()||d instanceof _P;h<=c&&c<p&&f?(r.dispatch(r.state.tr.setSelection(_P.create(u,h,p))),_O(r,h,p)):(r.dispatch(r.state.tr.setSelection(eK.create(r.state.doc,c))),_O(r,c));let m=r.state.selection.content(),g=n.pmSchema,$=rL(r,m).dom.innerHTML,_=gF(g,n),b=_L(m.content,n.schema),y=_.exportBlocks(b,{}),v=_1(y);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",$),t.dataTransfer.setData("text/html",y),t.dataTransfer.setData("text/plain",v),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(_A,0,0),r.dragging={slice:m,move:!0}}})(e,this.editor)}),g8(this,"blockDragEnd",()=>_D(this.editor.prosemirrorView.root)),g8(this,"freezeMenu",()=>this.view.menuFrozen=!0),g8(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.plugin=new tl({key:_H,view:t=>(this.view=new _I(e,t,e=>{this.emit("update",e)}),this.view)})}onUpdate(e){return this.on("update",e)}}(this),this.suggestionMenus=new class e extends _M{constructor(e){super(),g8(this,"view"),g8(this,"plugin"),g8(this,"triggerCharacters",[]),g8(this,"addTriggerCharacter",e=>{this.triggerCharacters.push(e)}),g8(this,"removeTriggerCharacter",e=>{this.triggerCharacters=this.triggerCharacters.filter(t=>t!==e)}),g8(this,"closeMenu",()=>this.view.closeMenu()),g8(this,"clearQuery",()=>this.view.clearQuery());let t=this.triggerCharacters;this.plugin=new tl({key:_B,view:()=>(this.view=new _9(e,(e,t)=>{this.emit(`update ${e}`,t)}),this.view),state:{init(){},apply(e,t,n,r){if(void 0!==e.getMeta("orderedListIndexing")||e.selection.$from.parent.type.spec.code)return t;let o=e.getMeta(_B);if("object"==typeof o&&null!==o&&void 0===t)return{triggerCharacter:o.triggerCharacter,deleteTriggerCharacter:!1!==o.deleteTriggerCharacter,queryStartPos:r.selection.from,query:"",decorationId:`id_${Math.floor(4294967295*Math.random())}`,ignoreQueryLength:null==o?void 0:o.ignoreQueryLength};if(void 0===t)return t;if(r.selection.from!==r.selection.to||null===o||e.getMeta("focus")||e.getMeta("blur")||e.getMeta("pointer")||void 0!==t.triggerCharacter&&r.selection.from<t.queryStartPos)return;let i={...t};return i.query=r.doc.textBetween(t.queryStartPos,r.selection.from),i}},props:{handleTextInput(e,n,r,o){let i=this.getState(e.state);return!(!t.includes(o)||void 0!==i)&&(e.dispatch(e.state.tr.insertText(o).scrollIntoView().setMeta(_B,{triggerCharacter:o})),!0)},decorations(e){let t=this.getState(e);if(void 0===t)return null;if(!t.deleteTriggerCharacter){let n=_z(e.selection);if(n)return rb.create(e.doc,[rg.node(n.pos,n.pos+n.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}return rb.create(e.doc,[rg.inline(t.queryStartPos-t.triggerCharacter.length,t.queryStartPos,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":t.decorationId})])}}})}onUpdate(e,t){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,t)}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}}(this),this.filePanel=new class e extends _M{constructor(e){super(),g8(this,"view"),g8(this,"plugin"),g8(this,"closeMenu",()=>{var e;return null==(e=this.view)?void 0:e.closeMenu()}),this.plugin=new tl({key:_8,view:t=>(this.view=new _T(e,_8,t,e=>{this.emit("update",e)}),this.view),props:{handleKeyDown:(e,t)=>{var n;return!("Escape"!==t.key||!this.shown)&&(null==(n=this.view)||n.closeMenu(),!0)}},state:{init:()=>({block:void 0}),apply(e){var t;return{block:null==(t=e.getMeta(_8))?void 0:t.block}}}})}get shown(){var e,t;return(null==(t=null==(e=this.view)?void 0:e.state)?void 0:t.show)||!1}onUpdate(e){return this.on("update",e)}}(this),_$("table",this)&&(this.tableHandles=new class e extends _M{constructor(e){super(),g8(this,"view"),g8(this,"plugin"),g8(this,"colDragStart",e=>{if(void 0===this.view.state||void 0===this.view.state.colIndex)throw Error("Attempted to drag table column, but no table block was hovered prior.");this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:e.clientX},this.view.emitUpdate(),this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(_W,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),_j(this.editor._tiptapEditor.view.root),e.dataTransfer.setDragImage(_V,0,0),e.dataTransfer.effectAllowed="move"}),g8(this,"rowDragStart",e=>{if(void 0===this.view.state||void 0===this.view.state.rowIndex)throw Error("Attempted to drag table row, but no table block was hovered prior.");this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:e.clientY},this.view.emitUpdate(),this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(_W,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),_j(this.editor._tiptapEditor.view.root),e.dataTransfer.setDragImage(_V,0,0),e.dataTransfer.effectAllowed="copyMove"}),g8(this,"dragEnd",()=>{var e;if(void 0===this.view.state)throw Error("Attempted to drag table row, but no table block was hovered prior.");this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(_W,null)),e=this.editor._tiptapEditor.view.root,_V&&(e instanceof Document?e.body.removeChild(_V):e.removeChild(_V),_V=void 0)}),g8(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),g8(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),this.editor=e,this.plugin=new tl({key:_W,view:t=>(this.view=new _U(e,t,e=>{this.emit("update",e)}),this.view),props:{decorations:e=>{if(void 0===this.view||void 0===this.view.state||void 0===this.view.state.draggingState||void 0===this.view.tablePos)return;let t="row"===this.view.state.draggingState.draggedCellOrientation?this.view.state.rowIndex:this.view.state.colIndex;if(void 0===t)return;let n=[];if(t===this.view.state.draggingState.originalIndex)return rb.create(e.doc,n);let r=e.doc.resolve(this.view.tablePos+1),o=r.node();if("row"===this.view.state.draggingState.draggedCellOrientation){let i=e.doc.resolve(r.posAtIndex(t)+1),l=i.node();for(let s=0;s<l.childCount;s++){let a=e.doc.resolve(i.posAtIndex(s)+1),c=a.node(),d=a.pos+(t>this.view.state.draggingState.originalIndex?c.nodeSize-2:0);n.push(rg.widget(d,()=>{let e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.left="0",e.style.right="0",t>this.view.state.draggingState.originalIndex?e.style.bottom="-2px":e.style.top="-3px",e.style.height="4px",e}))}}else for(let u=0;u<o.childCount;u++){let h=e.doc.resolve(r.posAtIndex(u)+1),p=e.doc.resolve(h.posAtIndex(t)+1),f=p.node(),m=p.pos+(t>this.view.state.draggingState.originalIndex?f.nodeSize-2:0);n.push(rg.widget(m,()=>{let e=document.createElement("div");return e.className="bn-table-drop-cursor",e.style.top="0",e.style.bottom="0",t>this.view.state.draggingState.originalIndex?e.style.right="-2px":e.style.left="-3px",e.style.width="4px",e}))}return rb.create(e.doc,n)}}})}onUpdate(e){return this.on("update",e)}}(this));let h=(e=>{var t;let n=[iE.ClipboardTextSerializer,iE.Commands,iE.Editable,iE.FocusEvents,iE.Tabindex,fB,g5.configure({types:["blockContainer"],setIdAttribute:e.setIdAttribute}),fV.extend({priority:10}),gM,g4.extend({addKeyboardShortcuts(){return{"Mod-k":()=>(this.editor.commands.toggleLink({href:""}),!0)}}}),...Object.values(e.styleSpecs).map(e=>e.implementation.mark),bl,bt,bi,oI.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>!e.editor.suggestionMenus.shown&&this.editor.commands.blur()}}}),bu,bc.configure({editor:e.editor,domAttributes:e.domAttributes}),bo.configure({editor:e.editor}),bd.configure({domAttributes:e.domAttributes}),...Object.values(e.inlineContentSpecs).filter(e=>"link"!==e.config&&"text"!==e.config).map(t=>t.implementation.node.configure({editor:e.editor})),...Object.values(e.blockSpecs).flatMap(t=>[...(t.implementation.requiredExtensions||[]).map(t=>t.configure({editor:e.editor,domAttributes:e.domAttributes})),t.implementation.node.configure({editor:e.editor,domAttributes:e.domAttributes})]),be(e.editor),_X(e.editor),_Z(e.editor),fA.configure({width:5,color:"#ddeeff"}),...void 0===e.trailingBlock||e.trailingBlock?[bs]:[]];if(e.collaboration){if(n.push(fE.configure({fragment:e.collaboration.fragment})),null!=(t=e.collaboration.provider)&&t.awareness){let r=e=>{let t=document.createElement("span");t.classList.add("collaboration-cursor__caret"),t.setAttribute("style",`border-color: ${e.color}`);let n=document.createElement("span");n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);let r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(o,null),t};n.push(fL.configure({user:e.collaboration.user,render:e.collaboration.renderCursor||r,provider:e.collaboration.provider}))}}else n.push(ml);let o=e.disableExtensions||[];return n.filter(e=>!o.includes(e.name))})({editor:this,domAttributes:u.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:u.collaboration,trailingBlock:u.trailingBlock,disableExtensions:u.disableExtensions,setIdAttribute:u.setIdAttribute}),p=oI.create({name:"BlockNoteUIExtension",addProseMirrorPlugins:()=>[this.formattingToolbar.plugin,this.linkToolbar.plugin,this.sideMenu.plugin,this.suggestionMenus.plugin,...this.filePanel?[this.filePanel.plugin]:[],...this.tableHandles?[this.tableHandles.plugin]:[],b_(this,u.placeholders),new tl({key:bb,props:{handleKeyDown(e,t){if("node"in e.state.selection){if(t.ctrlKey||t.metaKey)return!1;if(1===t.key.length)return t.preventDefault(),!0;if("Enter"===t.key&&!t.shiftKey&&!t.altKey&&!t.ctrlKey&&!t.metaKey){let n=e.state.tr;return e.dispatch(n.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.create()).setSelection(new eG(n.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}),...this.options.animations??1?[bw()]:[]]});if(h.push(p),u.uploadFile){let m=u.uploadFile;this.uploadFile=async(e,t)=>{this.onUploadStartCallbacks.forEach(e=>e.apply(this,[t]));try{return await m(e,t)}finally{this.onUploadEndCallbacks.forEach(e=>e.apply(this,[t]))}}}this.resolveFileUrl=u.resolveFileUrl||(async e=>e),this.headless=u._headless,u.collaboration&&u.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");let g=u.initialContent||(e.collaboration?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:g5.options.generateID()}]);if(!Array.isArray(g)||0===g.length)throw Error("initialContent must be a non-empty array of blocks, received: "+g);let $={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1,...u._tiptapOptions,content:g,extensions:[...(null==(t=u._tiptapOptions)?void 0:t.extensions)||[],...h],editorProps:{...null==(n=u._tiptapOptions)?void 0:n.editorProps,attributes:{tabIndex:"0",...null==(o=null==(r=u._tiptapOptions)?void 0:r.editorProps)?void 0:o.attributes,...null==(i=u.domAttributes)?void 0:i.editor,class:gQ("bn-editor",u.defaultStyles?"bn-default-styles":"",(null==(s=null==(l=u.domAttributes)?void 0:l.editor)?void 0:s.class)||"")},transformPasted:function e(t,n){let r=a.from(t.content);r=function(e,t){let n=[];for(let r=0;r<e.childCount;r++)if("tableRow"===e.child(r).type.name){if(n.length>0&&"table"===n[n.length-1].type.name){let o=n[n.length-1],i=o.copy(o.content.addToEnd(e.child(r)));n[n.length-1]=i}else{let l=t.nodes.table.create(void 0,e.child(r));n.push(l)}}else n.push(e.child(r));return a.from(n)}(r,n.state.schema);for(let o=0;o<r.childCount;o++)if("blockContent"===r.child(o).type.spec.group){let i=[r.child(o)];if(o+1<r.childCount&&"blockGroup"===r.child(o+1).type.spec.group){let l=r.child(o+1).child(0).child(0);("bulletListItem"===l.type.name||"numberedListItem"===l.type.name||"checkListItem"===l.type.name)&&(i.push(r.child(o+1)),r=bh(r,o+1))}let s=n.state.schema.nodes.blockContainer.create(void 0,i);r=r.replaceChild(o,s)}return new f(r,t.openStart,t.openEnd)}}};this.headless?this._pmSchema=(c=$.extensions,o8(oD.resolve(c),void 0)):(this._tiptapEditor=bg.create($,this.schema.styleSchema),this._pmSchema=this._tiptapEditor.schema)}get pmSchema(){return this._pmSchema}static create(){return new bk(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}dispatch(e){this._tiptapEditor.dispatch(e)}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){return this._tiptapEditor.view.dom}isFocused(){return this._tiptapEditor.view.hasFocus()}focus(){this._tiptapEditor.view.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{let t=this.onUploadStartCallbacks.indexOf(e);t>-1&&this.onUploadStartCallbacks.splice(t,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{let t=this.onUploadEndCallbacks.indexOf(e);t>-1&&this.onUploadEndCallbacks.splice(t,1)}}get topLevelBlocks(){return this.document}get document(){let e=[];return this._tiptapEditor.state.doc.firstChild.descendants(t=>(e.push($_(t,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.blockCache)),!1)),e}getBlock(e){let t="string"==typeof e?e:e.id,n;return this._tiptapEditor.state.doc.firstChild.descendants(e=>!("u">typeof n)&&("blockContainer"!==e.type.name||e.attrs.id!==t||(n=$_(e,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.blockCache),!1))),n}forEachBlock(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.document.slice();t&&n.reverse(),function n(r){for(let o of r)if(!1===e(o)||!n(t?o.children.slice().reverse():o.children))return!1;return!0}(n)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return function(e){let{blockContainer:t}=gZ(e._tiptapEditor.state),n=e._tiptapEditor.state.doc.resolve(t.beforePos),r=n.nodeBefore,o=e._tiptapEditor.state.doc.resolve(t.afterPos).nodeAfter,i;return n.depth>1&&(i=n.node(n.depth-1)),{block:$_(t.node,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache),prevBlock:null===r?void 0:$_(r,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache),nextBlock:null===o?void 0:$_(o,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache),parentBlock:void 0===i?void 0:$_(i,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)}}(this)}setTextCursorPosition(e){!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",r=$D("string"==typeof t?t:t.id,e._tiptapEditor.state.doc),{blockContent:o}=gK(r),i=e.schema.blockSchema[o.node.type.name].content;if("none"!==i){if("inline"===i)"start"===n?e._tiptapEditor.commands.setTextSelection(o.beforePos+1):e._tiptapEditor.commands.setTextSelection(o.afterPos-1);else{if("table"!==i)throw new g6(i);"start"===n?e._tiptapEditor.commands.setTextSelection(o.beforePos+4):e._tiptapEditor.commands.setTextSelection(o.afterPos-4)}}else e._tiptapEditor.commands.setNodeSelection(o.beforePos)}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start")}getSelection(){if(this._tiptapEditor.state.selection.from===this._tiptapEditor.state.selection.to||"node"in this._tiptapEditor.state.selection)return;let e=[];return this._tiptapEditor.state.doc.descendants((t,n)=>"blockContent"!==t.type.spec.group||n+t.nodeSize-1<=this._tiptapEditor.state.selection.from||n+1>=this._tiptapEditor.state.selection.to||(e.push($_(this._tiptapEditor.state.doc.resolve(n).node(),this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.blockCache)),!1)),{blocks:e}}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw Error("no editor, but also not headless?");return!1}return void 0===this._tiptapEditor.isEditable||this._tiptapEditor.isEditable}set isEditable(e){if(this._tiptapEditor)this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e);else if(!this.headless)throw Error("no editor, but also not headless?")}insertBlocks(e,t){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"before",o="string"==typeof n?n:n.id,i=[];for(let l of t)i.push(gz(l,e.pmSchema,e.schema.styleSchema));let{node:s,posBeforeNode:a}=$D(o,e._tiptapEditor.state.doc);"before"===r&&e.dispatch(e._tiptapEditor.state.tr.insert(a,i)),"after"===r&&e.dispatch(e._tiptapEditor.state.tr.insert(a+s.nodeSize,i));let c=[];for(let d of i)c.push($_(d,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache));return c}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"before")}updateBlock(e,t){return function(e,t,n){let r=e._tiptapEditor,o="string"==typeof t?t:t.id,{posBeforeNode:i}=$D(o,r.state.doc);return r.commands.command(t=>{let{state:r,dispatch:o}=t;return $I(e,i,n)({state:r,dispatch:o}),!0}),$_(r.state.doc.resolve(i+1).node(),e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache)}(this,e,t)}removeBlocks(e){var t,n;return t=this,_k(t,n=e)}replaceBlocks(e,t){return function(e,t,n){let r=[];for(let o of n)r.push(gz(o,e.pmSchema,e.schema.styleSchema));let i="string"==typeof t[0]?t[0]:t[0].id,l=_k(e,t,(e,t,n,o)=>{if(e.attrs.id===i){let l=n.doc.nodeSize;return n.insert(t,r),o+l-n.doc.nodeSize}return o}),s=[];for(let a of r)s.push($_(a,e.schema.blockSchema,e.schema.inlineContentSchema,e.schema.styleSchema,e.blockCache));return{insertedBlocks:s,removedBlocks:l}}(this,e,t)}insertInlineContent(e){let t=gD(e,this.pmSchema,this.schema.styleSchema);!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{updateSelection:!0},o=n._tiptapEditor.state.tr,{from:i,to:l}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},s=!0,a=!0,c="";if(t.forEach(e=>{e.check(),s&&e.isText&&0===e.marks.length?c+=e.text:s=!1,a=!!a&&e.isBlock}),i===l&&a){let{parent:d}=o.doc.resolve(i);!d.isTextblock||d.type.spec.code||d.childCount||(i-=1,l+=1)}s?o.insertText(c,i,l):o.replaceWith(i,l,t),r.updateSelection&&oQ(o,o.steps.length-1,-1),n.dispatch(o)}({from:this._tiptapEditor.state.selection.from,to:this._tiptapEditor.state.selection.to},t,this)}getActiveStyles(){let e={},t=this._tiptapEditor.state.selection.$to.marks();for(let n of t){let r=this.schema.styleSchema[n.type.name];r?"boolean"===r.propSchema?e[r.type]=!0:e[r.type]=n.attrs.stringValue:"link"!==n.type.name&&console.warn("mark not found in styleschema",n.type.name)}return e}addStyles(e){for(let[t,n]of Object.entries(e)){let r=this.schema.styleSchema[t];if(!r)throw Error(`style ${t} not found in styleSchema`);if("boolean"===r.propSchema)this._tiptapEditor.commands.setMark(t);else{if("string"!==r.propSchema)throw new g6(r.propSchema);this._tiptapEditor.commands.setMark(t,{stringValue:n})}}}removeStyles(e){for(let t of Object.keys(e))this._tiptapEditor.commands.unsetMark(t)}toggleStyles(e){for(let[t,n]of Object.entries(e)){let r=this.schema.styleSchema[t];if(!r)throw Error(`style ${t} not found in styleSchema`);if("boolean"===r.propSchema)this._tiptapEditor.commands.toggleMark(t);else{if("string"!==r.propSchema)throw new g6(r.propSchema);this._tiptapEditor.commands.toggleMark(t,{stringValue:n})}}}getSelectedText(){return this._tiptapEditor.state.doc.textBetween(this._tiptapEditor.state.selection.from,this._tiptapEditor.state.selection.to)}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,t){if(""===e)return;let{from:n,to:r}=this._tiptapEditor.state.selection;t||(t=this._tiptapEditor.state.doc.textBetween(n,r));let o=this.pmSchema.mark("link",{href:e});this.dispatch(this._tiptapEditor.state.tr.insertText(t,n,r).addMark(n,n+t.length,o))}canNestBlock(){let{blockContainer:e}=gZ(this._tiptapEditor.state);return null!==this._tiptapEditor.state.doc.resolve(e.beforePos).nodeBefore}nestBlock(){this._tiptapEditor.commands.sinkListItem("blockContainer")}canUnnestBlock(){let{blockContainer:e}=gZ(this._tiptapEditor.state);return this._tiptapEditor.state.doc.resolve(e.beforePos).depth>1}unnestBlock(){this._tiptapEditor.commands.liftListItem("blockContainer")}moveBlockUp(){!function(e){let t=e.getSelection();if(t&&t.blocks.length>1)return;let{prevBlock:n,parentBlock:r}=e.getTextCursorPosition(),o,i;n?n.children.length>0?(o=n.children[n.children.length-1].id,i="after"):(o=n.id,i="before"):r&&(o=r.id,i="before"),o&&i&&_w(e,o,i)}(this)}moveBlockDown(){!function(e){let t=e.getSelection();if(t&&t.blocks.length>1)return;let{nextBlock:n,parentBlock:r}=e.getTextCursorPosition(),o,i;n?n.children.length>0?(o=n.children[0].id,i="before"):(o=n.id,i="after"):r&&(o=r.id,i="after"),o&&i&&_w(e,o,i)}(this)}async blocksToHTMLLossy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.document;return gF(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return((e,t)=>{let n=eo.fromSchema(e);return{serializeBlocks:(e,r)=>gW(t,e,n,r).outerHTML}})(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return _E(e,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.pmSchema)}async blocksToMarkdownLossy(){return async function(e,t,n,r){return await _x(),_1(gF(t,n).exportBlocks(e,r))}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.document,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return async function(e,t,n,r,o){let i=await _x();return _E(i.unified.unified().use(i.remarkParse.default).use(i.remarkGfm.default).use(i.remarkRehype.default,{handlers:{...i.remarkRehype.defaultHandlers,code:_4}}).use(i.rehypeStringify.default).processSync(e).value,t,n,r,o)}(e,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw Error("Cannot update collaboration user info when collaboration is disabled.");this._tiptapEditor.commands.updateUser(e)}onChange(e){if(this.headless)return;let t=()=>{e(this)};return this._tiptapEditor.on("update",t),()=>{this._tiptapEditor.off("update",t)}}onSelectionChange(e){if(this.headless)return;let t=()=>{e(this)};return this._tiptapEditor.on("selectionUpdate",t),()=>{this._tiptapEditor.off("selectionUpdate",t)}}openSuggestionMenu(e,t){let n=this.prosemirrorView.state.tr,r=t&&t.deleteTriggerCharacter?n.insertText(e):n;this.prosemirrorView.focus(),this.prosemirrorView.dispatch(r.scrollIntoView().setMeta(this.suggestionMenus.plugin,{triggerCharacter:e,deleteTriggerCharacter:(null==t?void 0:t.deleteTriggerCharacter)||!1,ignoreQueryLength:(null==t?void 0:t.ignoreQueryLength)||!1}))}}let b0,bx;async function bC(e,t){var r,o="text";if(!(o in(r=e).schema.inlineContentSchema)||r.schema.inlineContentSchema[o]!==_g[o])return[];if(!b0){b0=n.e(410).then(n.t.bind(n,410,17)),bx=await n.e(3412).then(n.bind(n,1031));let i=(await b0).default;await bx.init({data:i})}let l=(await b0).default;return(""===t.trim()?Object.values(l.emojis):await bx.SearchIndex.search(t)).map(t=>({id:t.skins[0].native,onItemClick:()=>e.insertInlineContent(t.skins[0].native+" ")}))}function bS(e,t){let n=e.getTextCursorPosition().block;if(void 0===n.content)throw Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(1===n.content.length&&gP(n.content[0])&&"text"===n.content[0].type&&"/"===n.content[0].text||0===n.content.length)?(r=e.updateBlock(n,t),t.content&&e.setTextCursorPosition(r)):(r=e.insertBlocks([t],n,"after")[0],e.setTextCursorPosition(e.getTextCursorPosition().nextBlock)),function(e){let t=e.getTextCursorPosition().block,n=e.schema.blockSchema[t.type].content;for(;"none"===n;)t=e.getTextCursorPosition().nextBlock,n=e.schema.blockSchema[t.type].content,e.setTextCursorPosition(t,"end")}(e),r}function b1(e,t){return e.filter(e=>{let{title:n,aliases:r}=e;return n.toLowerCase().includes(t.toLowerCase())||r&&0!==r.filter(e=>e.toLowerCase().includes(t.toLowerCase())).length})}var b2=n(579);function b3(){return"undefined"!=typeof window}function bE(e){return bT(e)?(e.nodeName||"").toLowerCase():"#document"}function b4(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function bM(e){var t;return null==(t=(bT(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function bT(e){return!!b3()&&(e instanceof Node||e instanceof b4(e).Node)}function b8(e){return!!b3()&&(e instanceof Element||e instanceof b4(e).Element)}function b6(e){return!!b3()&&(e instanceof HTMLElement||e instanceof b4(e).HTMLElement)}function bN(e){return!(!b3()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof b4(e).ShadowRoot)}function b5(e){let{overflow:t,overflowX:n,overflowY:r,display:o}=bO(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function b7(e){return["table","td","th"].includes(bE(e))}function bL(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(n){return!1}})}function bP(e){let t=bA(),n=b8(e)?bO(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function bA(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function bR(e){return["html","body","#document"].includes(bE(e))}function bO(e){return b4(e).getComputedStyle(e)}function bD(e){return b8(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bI(e){if("html"===bE(e))return e;let t=e.assignedSlot||e.parentNode||bN(e)&&e.host||bM(e);return bN(t)?t.host:t}function bH(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let o=function e(t){let n=bI(t);return bR(n)?t.ownerDocument?t.ownerDocument.body:t.body:b6(n)&&b5(n)?n:e(n)}(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),l=b4(o);if(i){let s=bz(l);return t.concat(l,l.visualViewport||[],b5(o)?o:[],s&&n?bH(s):[])}return t.concat(o,bH(o,[],n))}function bz(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function b9(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function bB(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&bN(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function bV(){let e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function bj(){let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}function bF(){return/apple/i.test(navigator.vendor)}function bU(){let e=/android/i;return e.test(bV())||e.test(bj())}function bW(e,t){let n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function bG(e){return(null==e?void 0:e.ownerDocument)||document}function bq(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);let n=e;return null!=n.target&&t.contains(n.target)}function bK(e){return"composedPath"in e?e.composedPath()[0]:e.target}var bJ='input:not([inert]),select:not([inert]),textarea:not([inert]),a[href]:not([inert]),button:not([inert]),[tabindex]:not(slot):not([inert]),audio[controls]:not([inert]),video[controls]:not([inert]),[contenteditable]:not([contenteditable="false"]):not([inert]),details>summary:first-of-type:not([inert]),details:not([inert])',bZ="undefined"==typeof Element,bX=bZ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,bQ=!bZ&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},bY=function e(t,n){void 0===n&&(n=!0);var r,o=null==t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===o||"true"===o||n&&t&&e(t.parentNode)},ye=function(e,t,n){if(bY(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(bJ));return t&&bX.call(e,bJ)&&r.unshift(e),r=r.filter(n)},yt=function e(t,n,r){for(var o=[],i=Array.from(t);i.length;){var l=i.shift();if(!bY(l,!1)){if("SLOT"===l.tagName){var s=l.assignedElements(),a=e(s.length?s:l.children,!0,r);r.flatten?o.push.apply(o,a):o.push({scopeParent:l,candidates:a})}else{bX.call(l,bJ)&&r.filter(l)&&(n||!t.includes(l))&&o.push(l);var c=l.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(l),d=!bY(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(c&&d){var u=e(!0===c?l.children:c.children,!0,r);r.flatten?o.push.apply(o,u):o.push({scopeParent:l,candidates:u})}else i.unshift.apply(i,l.children)}}}return o},yn=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},yr=function(e){var t,n,r;if(!e)throw Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||""===(r=null==(t=e)||null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"contenteditable"))||"true"===r)&&!yn(e)?0:e.tabIndex},yo=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},yi=function(e){return"INPUT"===e.tagName},yl=function(e){var t;return yi(t=e)&&"radio"===t.type&&!function(e){if(!e.name)return!0;var t,n=e.form||bQ(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!i||i===e}(e)},ys=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},ya=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=bX.call(e,"details>summary:first-of-type")?e.parentElement:e;if(bX.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return ys(e)}else{if("function"==typeof r){for(var i=e;e;){var l=e.parentElement,s=bQ(e);if(l&&!l.shadowRoot&&!0===r(l))return ys(e);e=e.assignedSlot?e.assignedSlot:l||s===e.ownerDocument?l:s.host}e=i}if(function(e){var t,n,r,o,i,l,s,a=e&&bQ(e),c=null===(o=a)||void 0===o?void 0:o.host,d=!1;if(a&&a!==e)for(d=!!(null!==(i=c)&&void 0!==i&&null!==(l=i.ownerDocument)&&void 0!==l&&l.contains(c)||null!=e&&null!==(s=e.ownerDocument)&&void 0!==s&&s.contains(e));!d&&c;)d=!(null===(n=c=null===(t=a=bQ(c))||void 0===t?void 0:t.host)||void 0===n||null===(r=n.ownerDocument)||void 0===r||!r.contains(c));return d}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},yc=function(e,t){var n,r;return!(t.disabled||bY(t)||yi(n=t)&&"hidden"===n.type||ya(t,e)||"DETAILS"===(r=t).tagName&&Array.prototype.slice.apply(r.children).some(function(e){return"SUMMARY"===e.tagName})||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!bX.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},yd=function(e,t){return!(yl(t)||0>yr(t)||!yc(e,t))},yu=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},yh=function e(t){var n=[],r=[];return t.forEach(function(t,o){var i,l,s,a=!!t.scopeParent,c=a?t.scopeParent:t,d=(i=c,l=a,(s=yr(i))<0&&l&&!yn(i)?0:s),u=a?e(t.candidates):c;0===d?a?n.push.apply(n,u):n.push(c):r.push({documentOrder:o,tabIndex:d,item:t,isScope:a,content:u})}),r.sort(yo).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},yp=function(e,t){var n;return n=(t=t||{}).getShadowRoot?yt([e],t.includeContainer,{filter:yd.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:yu}):ye(e,t.includeContainer,yd.bind(null,t)),yh(n)},yf=n(7950);let ym=Math.min,yg=Math.max,y$=Math.round,y_=Math.floor,yb=e=>({x:e,y:e}),yy={left:"right",right:"left",bottom:"top",top:"bottom"},yv={start:"end",end:"start"};function yw(e,t,n){return yg(e,ym(t,n))}function yk(e,t){return"function"==typeof e?e(t):e}function y0(e){return e.split("-")[0]}function yx(e){return e.split("-")[1]}function yC(e){return"x"===e?"y":"x"}function yS(e){return"y"===e?"height":"width"}function y1(e){return["top","bottom"].includes(y0(e))?"y":"x"}function y2(e){return yC(y1(e))}function y3(e){return e.replace(/start|end/g,e=>yv[e])}function yE(e){return e.replace(/left|right|bottom|top/g,e=>yy[e])}function y4(e){var t;return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...t=e}:{top:e,right:e,bottom:e,left:e}}function yM(e){let{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function yT(e,t,n){let{reference:r,floating:o}=e,i=y1(t),l=y2(t),s=yS(l),a=y0(t),c="y"===i,d=r.x+r.width/2-o.width/2,u=r.y+r.height/2-o.height/2,h=r[s]/2-o[s]/2,p;switch(a){case"top":p={x:d,y:r.y-o.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:u};break;case"left":p={x:r.x-o.width,y:u};break;default:p={x:r.x,y:r.y}}switch(yx(t)){case"start":p[l]-=h*(n&&c?-1:1);break;case"end":p[l]+=h*(n&&c?-1:1)}return p}async function y8(e,t){var n;void 0===t&&(t={});let{x:r,y:o,platform:i,rects:l,elements:s,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=yk(t,e),f=y4(p),m=s[h?"floating"===u?"reference":"floating":u],g=yM(await i.getClippingRect({element:null==(n=await (null==i.isElement?void 0:i.isElement(m)))||n?m:m.contextElement||await (null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:d,strategy:a})),$="floating"===u?{x:r,y:o,width:l.floating.width,height:l.floating.height}:l.reference,_=await (null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),b=await (null==i.isElement?void 0:i.isElement(_))&&await (null==i.getScale?void 0:i.getScale(_))||{x:1,y:1},y=yM(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:$,offsetParent:_,strategy:a}):$);return{top:(g.top-y.top+f.top)/b.y,bottom:(y.bottom-g.bottom+f.bottom)/b.y,left:(g.left-y.left+f.left)/b.x,right:(y.right-g.right+f.right)/b.x}}function y6(e){let t=ym(...e.map(e=>e.left)),n=ym(...e.map(e=>e.top));return{x:t,y:n,width:yg(...e.map(e=>e.right))-t,height:yg(...e.map(e=>e.bottom))-n}}function yN(e){let t=bO(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,o=b6(e),i=o?e.offsetWidth:n,l=o?e.offsetHeight:r,s=y$(n)!==i||y$(r)!==l;return s&&(n=i,r=l),{width:n,height:r,$:s}}function y5(e){return b8(e)?e:e.contextElement}function y7(e){let t=y5(e);if(!b6(t))return yb(1);let n=t.getBoundingClientRect(),{width:r,height:o,$:i}=yN(t),l=(i?y$(n.width):n.width)/r,s=(i?y$(n.height):n.height)/o;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}let yL=yb(0);function yP(e){let t=b4(e);return bA()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:yL}function yA(e,t,n,r){var o,i,l;void 0===t&&(t=!1),void 0===n&&(n=!1);let s=e.getBoundingClientRect(),a=y5(e),c=yb(1);t&&(r?b8(r)&&(c=y7(r)):c=y7(e));let d=(o=a,i=n,l=r,void 0===i&&(i=!1),!(!l||i&&l!==b4(o))&&i)?yP(a):yb(0),u=(s.left+d.x)/c.x,h=(s.top+d.y)/c.y,p=s.width/c.x,f=s.height/c.y;if(a){let m=b4(a),g=r&&b8(r)?b4(r):r,$=m,_=bz($);for(;_&&r&&g!==$;){let b=y7(_),y=_.getBoundingClientRect(),v=bO(_),w=y.left+(_.clientLeft+parseFloat(v.paddingLeft))*b.x,k=y.top+(_.clientTop+parseFloat(v.paddingTop))*b.y;u*=b.x,h*=b.y,p*=b.x,f*=b.y,u+=w,h+=k,$=b4(_),_=bz($)}}return yM({width:p,height:f,x:u,y:h})}function yR(e,t){let n=bD(e).scrollLeft;return t?t.left+n:yA(bM(e)).left+n}function yO(e,t,n){void 0===n&&(n=!1);let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:yR(e,r)),y:r.top+t.scrollTop}}function yD(e,t,n){let r;if("viewport"===t)r=function(e,t){let n=b4(e),r=bM(e),o=n.visualViewport,i=r.clientWidth,l=r.clientHeight,s=0,a=0;if(o){i=o.width,l=o.height;let c=bA();(!c||c&&"fixed"===t)&&(s=o.offsetLeft,a=o.offsetTop)}return{width:i,height:l,x:s,y:a}}(e,n);else if("document"===t)r=function(e){let t=bM(e),n=bD(e),r=e.ownerDocument.body,o=yg(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=yg(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),l=-n.scrollLeft+yR(e),s=-n.scrollTop;return"rtl"===bO(r).direction&&(l+=yg(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:l,y:s}}(bM(e));else if(b8(t))r=function(e,t){let n=yA(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=b6(e)?y7(e):yb(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{let o=yP(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return yM(r)}function yI(e,t){let n=bI(e);return!(n===t||!b8(n)||bR(n))&&("fixed"===bO(n).position||yI(n,t))}function yH(e){return"static"===bO(e).position}function yz(e,t){if(!b6(e)||"fixed"===bO(e).position)return null;if(t)return t(e);let n=e.offsetParent;return bM(e)===n&&(n=n.ownerDocument.body),n}function y9(e,t){let n=b4(e);if(bL(e))return n;if(!b6(e)){let r=bI(e);for(;r&&!bR(r);){if(b8(r)&&!yH(r))return r;r=bI(r)}return n}let o=yz(e,t);for(;o&&b7(o)&&yH(o);)o=yz(o,t);return o&&bR(o)&&yH(o)&&!bP(o)?n:o||function(e){let t=bI(e);for(;b6(t)&&!bR(t);){if(bP(t))return t;if(bL(t))break;t=bI(t)}return null}(e)||n}let yB={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e,i="fixed"===o,l=bM(r),s=!!t&&bL(t.floating);if(r===l||s&&i)return n;let a={scrollLeft:0,scrollTop:0},c=yb(1),d=yb(0),u=b6(r);if((u||!u&&!i)&&(("body"!==bE(r)||b5(l))&&(a=bD(r)),b6(r))){let h=yA(r);c=y7(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}let p=!l||u||i?yb(0):yO(l,a,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-a.scrollTop*c.y+d.y+p.y}},getDocumentElement:bM,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e,i="clippingAncestors"===n?bL(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=bH(e,[],!1).filter(e=>b8(e)&&"body"!==bE(e)),o=null,i="fixed"===bO(e).position,l=i?bI(e):e;for(;b8(l)&&!bR(l);){let s=bO(l),a=bP(l);a||"fixed"!==s.position||(o=null),(i?!a&&!o:!a&&"static"===s.position&&o&&["absolute","fixed"].includes(o.position)||b5(l)&&!a&&yI(e,l))?r=r.filter(e=>e!==l):o=s,l=bI(l)}return t.set(e,r),r}(t,this._c):[].concat(n),l=[...i,r],s=l[0],a=l.reduce((e,n)=>{let r=yD(t,n,o);return e.top=yg(r.top,e.top),e.right=ym(r.right,e.right),e.bottom=ym(r.bottom,e.bottom),e.left=yg(r.left,e.left),e},yD(t,s,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:y9,getElementRects:async function(e){let t=this.getOffsetParent||y9,n=this.getDimensions,r=await n(e.floating);return{reference:function e(t,n,r){let o=b6(n),i=bM(n),l="fixed"===r,s=yA(t,!0,l,n),a={scrollLeft:0,scrollTop:0},c=yb(0);if(o||!o&&!l){if(("body"!==bE(n)||b5(i))&&(a=bD(n)),o){let d=yA(n,!0,l,n);c.x=d.x+n.clientLeft,c.y=d.y+n.clientTop}else i&&(c.x=yR(i))}let u=!i||o||l?yb(0):yO(i,a);return{x:s.left+a.scrollLeft-c.x-u.x,y:s.top+a.scrollTop-c.y-u.y,width:s.width,height:s.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=yN(e);return{width:t,height:n}},getScale:y7,isElement:b8,isRTL:function(e){return"rtl"===bO(e).direction}},yV=e=>({name:"arrow",options:e,async fn(t){let{x:n,y:r,placement:o,rects:i,platform:l,elements:s,middlewareData:a}=t,{element:c,padding:d=0}=yk(e,t)||{};if(null==c)return{};let u=y4(d),h={x:n,y:r},p=y2(o),f=yS(p),m=await l.getDimensions(c),g="y"===p,$=g?"clientHeight":"clientWidth",_=i.reference[f]+i.reference[p]-h[p]-i.floating[f],b=h[p]-i.reference[p],y=await (null==l.getOffsetParent?void 0:l.getOffsetParent(c)),v=y?y[$]:0;v&&await (null==l.isElement?void 0:l.isElement(y))||(v=s.floating[$]||i.floating[f]);let w=v/2-m[f]/2-1,k=ym(u[g?"top":"left"],w),x=ym(u[g?"bottom":"right"],w),C=k,S=v-m[f]-x,E=v/2-m[f]/2+(_/2-b/2),M=yw(C,E,S),T=!a.arrow&&null!=yx(o)&&E!==M&&i.reference[f]/2-(E<C?k:x)-m[f]/2<0,N=T?E<C?E-C:E-S:0;return{[p]:h[p]+N,data:{[p]:M,centerOffset:E-M-N,...T&&{alignmentOffset:N}},reset:T}}}),yj=(e,t,n)=>{let r=new Map,o={platform:yB,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{let{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:l}=n,s=i.filter(Boolean),a=await (null==l.isRTL?void 0:l.isRTL(t)),c=await l.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:u}=yT(c,r,a),h=r,p={},f=0;for(let m=0;m<s.length;m++){let{name:g,fn:$}=s[m],{x:_,y:b,data:y,reset:v}=await $({x:d,y:u,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:l,elements:{reference:e,floating:t}});d=null!=_?_:d,u=null!=b?b:u,p={...p,[g]:{...p[g],...y}},v&&f<=50&&(f++,"object"==typeof v&&(v.placement&&(h=v.placement),v.rects&&(c=!0===v.rects?await l.getElementRects({reference:e,floating:t,strategy:o}):v.rects),{x:d,y:u}=yT(c,h,a)),m=-1)}return{x:d,y:u,placement:h,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var yF="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function yU(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!yU(e[r],t[r]))return!1;return!0}if((n=(o=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!({}).hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){let i=o[r];if(("_owner"!==i||!e.$$typeof)&&!yU(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}function yW(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yG(e,t){let n=yW(e);return Math.round(t*n)/n}function yq(e){let t=r.useRef(e);return yF(()=>{t.current=e}),t}let yK=e=>({name:"arrow",options:e,fn(t){var n;let{element:r,padding:o}="function"==typeof e?e(t):e;return r&&(n=r,({}).hasOwnProperty.call(n,"current"))?null!=r.current?yV({element:r.current,padding:o}).fn(t):{}:r?yV({element:r,padding:o}).fn(t):{}}}),yJ=(e,t)=>{var n;return{...(void 0===(n=e)&&(n=0),{name:"offset",options:n,async fn(e){var t,r;let{x:o,y:i,placement:l,middlewareData:s}=e,a=await async function(e,t){let{placement:n,platform:r,elements:o}=e,i=await (null==r.isRTL?void 0:r.isRTL(o.floating)),l=y0(n),s=yx(n),a="y"===y1(n),c=["left","top"].includes(l)?-1:1,d=i&&a?-1:1,u=yk(t,e),{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return s&&"number"==typeof f&&(p="end"===s?-1*f:f),a?{x:p*d,y:h*c}:{x:h*c,y:p*d}}(e,n);return l===(null==(t=s.offset)?void 0:t.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+a.x,y:i+a.y,data:{...a,placement:l}}}}),options:[e,t]}},yZ=(e,t)=>{var n;return{...(void 0===(n=e)&&(n={}),{name:"shift",options:n,async fn(e){let{x:t,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:s={fn(e){let{x:t,y:n}=e;return{x:t,y:n}}},...a}=yk(n,e),c={x:t,y:r},d=await y8(e,a),u=y1(y0(o)),h=yC(u),p=c[h],f=c[u];i&&(p=yw(p+d["y"===h?"top":"left"],p,p-d["y"===h?"bottom":"right"])),l&&(f=yw(f+d["y"===u?"top":"left"],f,f-d["y"===u?"bottom":"right"]));let m=s.fn({...e,[h]:p,[u]:f});return{...m,data:{x:m.x-t,y:m.y-r,enabled:{[h]:i,[u]:l}}}}}),options:[e,t]}},yX=(e,t)=>{var n;return{...(void 0===(n=e)&&(n={}),{options:n,fn(e){let{x:t,y:r,placement:o,rects:i,middlewareData:l}=e,{offset:s=0,mainAxis:a=!0,crossAxis:c=!0}=yk(n,e),d={x:t,y:r},u=y1(o),h=yC(u),p=d[h],f=d[u],m=yk(s,e),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(a){let $="y"===h?"height":"width",_=i.reference[h]-i.floating[$]+g.mainAxis,b=i.reference[h]+i.reference[$]-g.mainAxis;p<_?p=_:p>b&&(p=b)}if(c){var y,v;let w="y"===h?"width":"height",k=["top","left"].includes(y0(o)),x=i.reference[u]-i.floating[w]+(k&&(null==(y=l.offset)?void 0:y[u])||0)+(k?0:g.crossAxis),C=i.reference[u]+i.reference[w]+(k?0:(null==(v=l.offset)?void 0:v[u])||0)-(k?g.crossAxis:0);f<x?f=x:f>C&&(f=C)}return{[h]:p,[u]:f}}}),options:[e,t]}},yQ=(e,t)=>{var n;return{...(void 0===(n=e)&&(n={}),{name:"flip",options:n,async fn(e){var t,r,o,i,l;let{placement:s,middlewareData:a,rects:c,initialPlacement:d,platform:u,elements:h}=e,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:$="none",flipAlignment:_=!0,...b}=yk(n,e);if(null!=(t=a.arrow)&&t.alignmentOffset)return{};let y=y0(s),v=y1(d),w=y0(d)===d,k=await (null==u.isRTL?void 0:u.isRTL(h.floating)),x=m||(w||!_?[yE(d)]:function(e){let t=yE(e);return[y3(e),t,y3(t)]}(d)),C="none"!==$;!m&&C&&x.push(...function(e,t,n,r){let o=yx(e),i=function(e,t,n){let r=["left","right"],o=["right","left"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(y0(e),"start"===n,r);return o&&(i=i.map(e=>e+"-"+o),t&&(i=i.concat(i.map(y3)))),i}(d,_,$,k));let S=await y8(e,b),E=[],M=(null==(r=a.flip)?void 0:r.overflows)||[];if(p&&E.push(S[y]),f){let T=function(e,t,n){void 0===n&&(n=!1);let r=yx(e),o=y2(e),i=yS(o),l="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(l=yE(l)),[l,yE(l)]}(s,c,k);E.push(S[T[0]],S[T[1]])}if(M=[...M,{placement:s,overflows:E}],!E.every(e=>e<=0)){let N=((null==(o=a.flip)?void 0:o.index)||0)+1,L=[d,...x][N];if(L)return{data:{index:N,overflows:M},reset:{placement:L}};let P=null==(i=M.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!P)switch(g){case"bestFit":{let A=null==(l=M.filter(e=>{if(C){let t=y1(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:l[0];A&&(P=A);break}case"initialPlacement":P=d}if(s!==P)return{reset:{placement:P}}}return{}}}),options:[e,t]}},yY=(e,t)=>{var n;return{...(void 0===(n=e)&&(n={}),{name:"size",options:n,async fn(e){var t,r;let{placement:o,rects:i,platform:l,elements:s}=e,{apply:a=()=>{},...c}=yk(n,e),d=await y8(e,c),u=y0(o),h=yx(o),p="y"===y1(o),{width:f,height:m}=i.floating,g,$;"top"===u||"bottom"===u?(g=u,$=h===(await (null==l.isRTL?void 0:l.isRTL(s.floating))?"start":"end")?"left":"right"):($=u,g="end"===h?"top":"bottom");let _=m-d.top-d.bottom,b=f-d.left-d.right,y=ym(m-d[g],_),v=ym(f-d[$],b),w=!e.middlewareData.shift,k=y,x=v;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(x=b),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(k=_),w&&!h){let C=yg(d.left,0),S=yg(d.right,0),E=yg(d.top,0),M=yg(d.bottom,0);p?x=f-2*(0!==C||0!==S?C+S:yg(d.left,d.right)):k=m-2*(0!==E||0!==M?E+M:yg(d.top,d.bottom))}await a({...e,availableWidth:x,availableHeight:k});let T=await l.getDimensions(s.floating);return f!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}),options:[e,t]}},ve=(e,t)=>{var n;return{...(void 0===(n=e)&&(n={}),{name:"inline",options:n,async fn(e){let{placement:t,elements:r,rects:o,platform:i,strategy:l}=e,{padding:s=2,x:a,y:c}=yk(n,e),d=Array.from(await (null==i.getClientRects?void 0:i.getClientRects(r.reference))||[]),u=function(e){let t=e.slice().sort((e,t)=>e.y-t.y),n=[],r=null;for(let o=0;o<t.length;o++){let i=t[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(e=>yM(y6(e)))}(d),h=yM(y6(d)),p=y4(s),f=await i.getElementRects({reference:{getBoundingClientRect:function(){if(2===u.length&&u[0].left>u[1].right&&null!=a&&null!=c)return u.find(e=>a>e.left-p.left&&a<e.right+p.right&&c>e.top-p.top&&c<e.bottom+p.bottom)||h;if(u.length>=2){if("y"===y1(t)){let e=u[0],n=u[u.length-1],r="top"===y0(t),o=e.top,i=n.bottom,l=r?e.left:n.left,s=r?e.right:n.right;return{top:o,bottom:i,left:l,right:s,width:s-l,height:i-o,x:l,y:o}}let d="left"===y0(t),f=yg(...u.map(e=>e.right)),m=ym(...u.map(e=>e.left)),g=u.filter(e=>d?e.left===m:e.right===f),$=g[0].top,_=g[g.length-1].bottom;return{top:$,bottom:_,left:m,right:f,width:f-m,height:_-$,x:m,y:$}}return h}},floating:r.floating,strategy:l});return o.reference.x!==f.reference.x||o.reference.y!==f.reference.y||o.reference.width!==f.reference.width||o.reference.height!==f.reference.height?{reset:{rects:f}}:{}}}),options:[e,t]}},vt=(e,t)=>({...yK(e),options:[e,t]}),vn={...o},vr=vn.useInsertionEffect||(e=>e());function vo(e){let t=r.useRef(()=>{});return vr(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var vi="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function vl(){return(vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let vs=!1,va=0,vc=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+va++,vd=vn.useId||function(){let[e,t]=r.useState(()=>vs?vc():void 0);return vi(()=>{null==e&&t(vc())},[]),r.useEffect(()=>{vs=!0},[]),e},vu=r.createContext(null),vh=r.createContext(null),vp=()=>{var e;return(null==(e=r.useContext(vu))?void 0:e.id)||null},vf=()=>r.useContext(vh);function vm(e){return"data-floating-ui-"+e}function vg(e){let t=(0,r.useRef)(e);return vi(()=>{t.current=e}),t}let v$=vm("safe-polygon");function v_(e,t,n){return n&&!bW(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}let vb=()=>{},vy=r.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:vb,setState:vb,isInstantPhase:!1}),vv=()=>r.useContext(vy);function vw(e){let{children:t,delay:n,timeoutMs:o=0}=e,[i,l]=r.useReducer((e,t)=>({...e,...t}),{delay:n,timeoutMs:o,initialDelay:n,currentId:null,isInstantPhase:!1}),s=r.useRef(null),a=r.useCallback(e=>{l({currentId:e})},[]);return vi(()=>{i.currentId?null===s.current?s.current=i.currentId:i.isInstantPhase||l({isInstantPhase:!0}):(i.isInstantPhase&&l({isInstantPhase:!1}),s.current=null)},[i.currentId,i.isInstantPhase]),r.createElement(vy.Provider,{value:r.useMemo(()=>({...i,setState:l,setCurrentId:a}),[i,a])},t)}function vk(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let v0=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function vx(e,t){let n=yp(e,v0());"prev"===t&&n.reverse();let r=n.indexOf(b9(bG(e)));return n.slice(r+1)[0]}function vC(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!bB(n,r)}function vS(e){yp(e,v0()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function v1(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let v2={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function v3(e){"Tab"===e.key&&(e.target,clearTimeout(void 0))}let vE=r.forwardRef(function(e,t){let[n,o]=r.useState();vi(()=>(bF()&&o("button"),document.addEventListener("keydown",v3),()=>{document.removeEventListener("keydown",v3)}),[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[vm("focus-guard")]:"",style:v2};return r.createElement("span",vl({},e,i))}),v4=r.createContext(null),vM=vm("portal");function vT(e){let{children:t,id:n,root:o,preserveTabOrder:i=!0}=e,l=function(e){void 0===e&&(e={});let{id:t,root:n}=e,o=vd(),i=v8(),[l,s]=r.useState(null),a=r.useRef(null);return vi(()=>()=>{null==l||l.remove(),queueMicrotask(()=>{a.current=null})},[l]),vi(()=>{if(!o||a.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=o,n.setAttribute(vM,""),e.appendChild(n),a.current=n,s(n)},[t,o]),vi(()=>{if(null===n||!o||a.current)return;let e=n||(null==i?void 0:i.portalNode);e&&!b8(e)&&(e=e.current),e=e||document.body;let r=null;t&&((r=document.createElement("div")).id=t,e.appendChild(r));let l=document.createElement("div");l.id=o,l.setAttribute(vM,""),(e=r||e).appendChild(l),a.current=l,s(l)},[t,n,o,i]),l}({id:n,root:o}),[s,a]=r.useState(null),c=r.useRef(null),d=r.useRef(null),u=r.useRef(null),h=r.useRef(null),p=null==s?void 0:s.modal,f=null==s?void 0:s.open,m=!!s&&!s.modal&&s.open&&i&&!(!o&&!l);return r.useEffect(()=>{if(l&&i&&!p)return l.addEventListener("focusin",e,!0),l.addEventListener("focusout",e,!0),()=>{l.removeEventListener("focusin",e,!0),l.removeEventListener("focusout",e,!0)};function e(e){l&&vC(e)&&("focusin"===e.type?v1:vS)(l)}},[l,i,p]),r.useEffect(()=>{l&&(f||v1(l))},[f,l]),r.createElement(v4.Provider,{value:r.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:d,beforeInsideRef:u,afterInsideRef:h,portalNode:l,setFocusManagerState:a}),[i,l])},m&&l&&r.createElement(vE,{"data-type":"outside",ref:c,onFocus(e){if(vC(e,l)){var t;null==(t=u.current)||t.focus()}else{let n=vx(document.body,"prev")||(null==s?void 0:s.refs.domReference.current);null==n||n.focus()}}}),m&&l&&r.createElement("span",{"aria-owns":l.id,style:v2}),l&&yf.createPortal(t,l),m&&l&&r.createElement(vE,{"data-type":"outside",ref:d,onFocus(e){if(vC(e,l)){var t;null==(t=h.current)||t.focus()}else{let n=vx(document.body,"next")||(null==s?void 0:s.refs.domReference.current);null==n||n.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}let v8=()=>r.useContext(v4),v6={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},vN={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},v5=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function v7(e,t){void 0===t&&(t={});let{open:n,onOpenChange:o,elements:i,dataRef:l}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:d="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:f,capture:m}=t,g=vf(),$=vo("function"==typeof c?c:()=>!1),_="function"==typeof c?$:c,b=r.useRef(!1),y=r.useRef(!1),{escapeKey:v,outsidePress:w}=v5(f),{escapeKey:k,outsidePress:x}=v5(m),C=r.useRef(!1),S=vo(e=>{var t,r;if(!n||!s||!a||"Escape"!==e.key||C.current)return;let i=null==(t=l.current.floatingContext)?void 0:t.nodeId,c=g?vk(g.nodesRef.current,i):[];if(!v&&(e.stopPropagation(),c.length>0)){let d=!0;if(c.forEach(e=>{var t;null==(t=e.context)||!t.open||e.context.dataRef.current.__escapeKeyBubbles||(d=!1)}),!d)return}o(!1,"nativeEvent"in(r=e)?e.nativeEvent:e,"escape-key")}),E=vo(e=>{var t;let n=()=>{var t;S(e),null==(t=bK(e))||t.removeEventListener("keydown",n)};null==(t=bK(e))||t.addEventListener("keydown",n)}),M=vo(e=>{var t;let n=b.current;b.current=!1;let r=y.current;if(y.current=!1,"click"===d&&r||n||"function"==typeof _&&!_(e))return;let s=bK(e),a="["+vm("inert")+"]",c=bG(i.floating).querySelectorAll(a),u=b8(s)?s:null;for(;u&&!bR(u);){let h=bI(u);if(bR(h)||!b8(h))break;u=h}if(c.length&&b8(s)&&!s.matches("html,body")&&!bB(s,i.floating)&&Array.from(c).every(e=>!bB(u,e)))return;if(b6(s)&&L){let p=s.clientWidth>0&&s.scrollWidth>s.clientWidth,f=s.clientHeight>0&&s.scrollHeight>s.clientHeight,m=f&&e.offsetX>s.clientWidth;if(f&&"rtl"===bO(s).direction&&(m=e.offsetX<=s.offsetWidth-s.clientWidth),m||p&&e.offsetY>s.clientHeight)return}let $=null==(t=l.current.floatingContext)?void 0:t.nodeId,v=g&&vk(g.nodesRef.current,$).some(t=>{var n;return bq(e,null==(n=t.context)?void 0:n.elements.floating)});if(bq(e,i.floating)||bq(e,i.domReference)||v)return;let w=g?vk(g.nodesRef.current,$):[];if(w.length>0){let k=!0;if(w.forEach(e=>{var t;null==(t=e.context)||!t.open||e.context.dataRef.current.__outsidePressBubbles||(k=!1)}),!k)return}o(!1,e,"outside-press")}),T=vo(e=>{var t;let n=()=>{var t;M(e),null==(t=bK(e))||t.removeEventListener(d,n)};null==(t=bK(e))||t.addEventListener(d,n)});r.useEffect(()=>{if(!n||!s)return;l.current.__escapeKeyBubbles=v,l.current.__outsidePressBubbles=w;let e=-1;function t(e){o(!1,e,"ancestor-scroll")}function r(){window.clearTimeout(e),C.current=!0}function c(){e=window.setTimeout(()=>{C.current=!1},bA()?5:0)}let u=bG(i.floating);a&&(u.addEventListener("keydown",k?E:S,k),u.addEventListener("compositionstart",r),u.addEventListener("compositionend",c)),_&&u.addEventListener(d,x?T:M,x);let h=[];return p&&(b8(i.domReference)&&(h=bH(i.domReference)),b8(i.floating)&&(h=h.concat(bH(i.floating))),!b8(i.reference)&&i.reference&&i.reference.contextElement&&(h=h.concat(bH(i.reference.contextElement)))),(h=h.filter(e=>{var t;return e!==(null==(t=u.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{a&&(u.removeEventListener("keydown",k?E:S,k),u.removeEventListener("compositionstart",r),u.removeEventListener("compositionend",c)),_&&u.removeEventListener(d,x?T:M,x),h.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[l,i,a,_,d,n,o,p,s,v,w,S,k,E,M,x,T]),r.useEffect(()=>{b.current=!1},[_,d]);let N=r.useMemo(()=>({onKeyDown:S,[v6[h]](e){u&&o(!1,e.nativeEvent,"reference-press")}}),[S,o,u,h]),L=r.useMemo(()=>({onKeyDown:S,onMouseDown(){y.current=!0},onMouseUp(){y.current=!0},[vN[d]](){b.current=!0}}),[S,d]);return r.useMemo(()=>s?{reference:N,floating:L}:{},[s,N,L])}function vL(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:o}=e,i=vd(),l=r.useRef({}),[s]=r.useState(()=>(function e(){let t=new Map;return{emit(e,n){var r;null==(r=t.get(e))||r.forEach(e=>e(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,(null==(r=t.get(e))?void 0:r.filter(e=>e!==n))||[])}}})()),a=null!=vp(),[c,d]=r.useState(o.reference),u=vo((e,t,r)=>{l.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:a}),null==n||n(e,t,r)}),h=r.useMemo(()=>({setPositionReference:d}),[]),p=r.useMemo(()=>({reference:c||o.reference||null,floating:o.floating||null,domReference:o.reference}),[c,o.reference,o.floating]);return r.useMemo(()=>({dataRef:l,open:t,onOpenChange:u,elements:p,events:s,floatingId:i,refs:h}),[t,u,p,s,i,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,i=o.elements,[l,s]=r.useState(null),[a,c]=r.useState(null),d=(null==i?void 0:i.domReference)||l,u=r.useRef(null),h=vf();vi(()=>{d&&(u.current=d)},[d]);let p=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:i,elements:{reference:l,floating:s}={},transform:a=!0,whileElementsMounted:c,open:d}=e,[u,h]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=r.useState(o);yU(p,o)||f(o);let[m,g]=r.useState(null),[$,_]=r.useState(null),b=r.useCallback(e=>{e!==k.current&&(k.current=e,g(e))},[]),y=r.useCallback(e=>{e!==x.current&&(x.current=e,_(e))},[]),v=l||m,w=s||$,k=r.useRef(null),x=r.useRef(null),C=r.useRef(u),S=yq(c),E=yq(i),M=yq(d),T=r.useCallback(()=>{if(!k.current||!x.current)return;let e={placement:t,strategy:n,middleware:p};E.current&&(e.platform=E.current),yj(k.current,x.current,e).then(e=>{let t={...e,isPositioned:!1!==M.current};N.current&&!yU(C.current,t)&&(C.current=t,yf.flushSync(()=>{h(t)}))})},[p,t,n,E,M]);yF(()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[d]);let N=r.useRef(!1);yF(()=>(N.current=!0,()=>{N.current=!1}),[]),yF(()=>{if(v&&(k.current=v),w&&(x.current=w),v&&w){if(S.current)return S.current(v,w,T);T()}},[v,w,T,S,null!=c]);let L=r.useMemo(()=>({reference:k,floating:x,setReference:b,setFloating:y}),[b,y]),P=r.useMemo(()=>({reference:v,floating:w}),[v,w]),A=r.useMemo(()=>{let e={position:n,left:0,top:0};if(!P.floating)return e;let t=yG(P.floating,u.x),r=yG(P.floating,u.y);return a?{...e,transform:"translate("+t+"px, "+r+"px)",...yW(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,a,P.floating,u.x,u.y]);return r.useMemo(()=>({...u,update:T,refs:L,elements:P,floatingStyles:A}),[u,T,L,P,A])}({...e,elements:{...i,...a&&{reference:a}}}),f=r.useCallback(e=>{let t=b8(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;c(t),p.refs.setReference(t)},[p.refs]),m=r.useCallback(e=>{(b8(e)||null===e)&&(u.current=e,s(e)),(b8(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!b8(e))&&p.refs.setReference(e)},[p.refs]),g=r.useMemo(()=>({...p.refs,setReference:m,setPositionReference:f,domReference:u}),[p.refs,m,f]),$=r.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),_=r.useMemo(()=>({...p,...o,refs:g,elements:$,nodeId:t}),[p,g,$,t,o]);return vi(()=>{o.dataRef.current.floatingContext=_;let e=null==h?void 0:h.nodesRef.current.find(e=>e.id===t);e&&(e.context=_)}),r.useMemo(()=>({...p,context:_,refs:g,elements:$}),[p,g,$,_])}let vP="active",vA="selected";function vR(e,t,n){let r=new Map,o="item"===n,i=e;if(o&&e){let{[vP]:l,[vA]:s,...a}=e;i=a}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...i,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{var n;let[i,l]=t;o&&[vP,vA].includes(i)||(0===i.indexOf("on")?(r.has(i)||r.set(i,[]),"function"==typeof l&&(null==(n=r.get(i))||n.push(l),e[i]=function(){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return null==(e=r.get(i))?void 0:e.map(e=>e(...n)).find(e=>void 0!==e)})):e[i]=l)}),e),{})}}function vO(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),o=e.map(e=>null==e?void 0:e.item),i=r.useCallback(t=>vR(t,e,"reference"),t),l=r.useCallback(t=>vR(t,e,"floating"),n),s=r.useCallback(t=>vR(t,e,"item"),o);return r.useMemo(()=>({getReferenceProps:i,getFloatingProps:l,getItemProps:s}),[i,l,s])}let vD=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]),vI=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function vH(e,t){return"function"==typeof e?e(t):e}function vz(e,t){void 0===t&&(t={});let{initial:n={opacity:0},open:o,close:i,common:l,duration:s=250}=t,a=e.placement,c=a.split("-")[0],d=r.useMemo(()=>({side:c,placement:a}),[c,a]),u="number"==typeof s,h=(u?s:s.open)||0,p=(u?s:s.close)||0,[f,m]=r.useState(()=>({...vH(l,d),...vH(n,d)})),{isMounted:g,status:$}=function e(t,n){void 0===n&&(n={});let{open:o,elements:{floating:i}}=t,{duration:l=250}=n,s=("number"==typeof l?l:l.close)||0,[a,c]=r.useState("unmounted"),d=function(e,t){let[n,o]=r.useState(e);return e&&!n&&o(!0),r.useEffect(()=>{if(!e&&n){let r=setTimeout(()=>o(!1),t);return()=>clearTimeout(r)}},[e,n,t]),n}(o,s);return d||"close"!==a||c("unmounted"),vi(()=>{if(i){if(o){c("initial");let e=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(e)}}c("close")}},[o,i]),{isMounted:d,status:a}}(e,{duration:s}),_=vg(n),b=vg(o),y=vg(i),v=vg(l);return vi(()=>{let e=vH(_.current,d),t=vH(y.current,d),n=vH(v.current,d),r=vH(b.current,d)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===$&&m(t=>({transitionProperty:t.transitionProperty,...n,...e})),"open"===$&&m({transitionProperty:Object.keys(r).map(vI).join(","),transitionDuration:h+"ms",...n,...r}),"close"===$){let o=t||e;m({transitionProperty:Object.keys(o).map(vI).join(","),transitionDuration:p+"ms",...n,...o})}},[p,y,_,b,v,h,$,d]),{isMounted:g,styles:f}}var v9,vB,vV,vj,vF,vU={exports:{}},vW={};vU.exports=function(){if(vF)return vW;vF=1;var e=r,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,o=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(o){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=n({inst:{value:r,getSnapshot:t}}),c=a[0].inst,d=a[1];return i(function(){c.value=r,c.getSnapshot=t,s(c)&&d({inst:c})},[e,r,t]),o(function(){return s(c)&&d({inst:c}),e(function(){s(c)&&d({inst:c})})},[e]),l(r),r};return vW.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,vW}();var vG=vU.exports;let vq=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})}},vK=e=>{let{contentComponent:t}=e,n=vG.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return r.createElement(r.Fragment,null,Object.values(n))};class vJ extends r.Component{constructor(e){var t;super(e),this.editorContentRef=r.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(t=e.editor)||void 0===t?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:yf.createPortal(r.reactElement,r.element,n)},e.forEach(e=>e())},removeRenderer(n){let r={...t};delete r[n],t=r,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...n}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{ref:vq(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&r.createElement(vK,{contentComponent:e.contentComponent}))}}let vZ=(0,r.forwardRef)((e,t)=>{let n=r.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return r.createElement(vJ,{key:n,innerRef:t,...e})});r.memo(vZ);var vX,vQ={exports:{}},vY={};vQ.exports=function(){if(vX)return vY;vX=1;var e=r,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=vG.useSyncExternalStore,o=e.useRef,i=e.useEffect,l=e.useMemo,s=e.useDebugValue;return vY.useSyncExternalStoreWithSelector=function(e,r,a,c,d){var u=o(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=n(e,(u=l(function(){function e(e){if(!i){if(i=!0,n=e,e=c(e),void 0!==d&&h.hasValue){var r=h.value;if(d(r,e))return o=r}return o=e}if(r=o,t(n,e))return r;var l=c(e);return void 0!==d&&d(r,l)?r:(n=e,o=l)}var n,o,i=!1,l=void 0===a?null:a;return[function(){return e(r())},null===l?void 0:function(){return e(l())}]},[r,a,c,d]))[0],u[1]);return i(function(){h.hasValue=!0,h.value=p},[p]),s(p),p},vY}(),vQ.exports;let we="undefined"==typeof window;we||"undefined"!=typeof window&&window.next;let wt=(0,r.createContext)({editor:null});wt.Consumer;let wn=(0,r.createContext)({onDragStart:void 0}),wr=()=>(0,r.useContext)(wn),wo=r.forwardRef((e,t)=>{let{onDragStart:n}=wr(),o=e.as||"div";return r.createElement(o,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});class wi{constructor(e,t){let{editor:n,props:r={},as:o="div",className:i=""}=t;this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?(0,yf.flushSync)(()=>{this.render()}):this.render()}render(){var e,t,n,o;let i=this.component,l=this.props,s=this.editor;("function"==typeof(t=i)&&t.prototype&&t.prototype.isReactComponent||"object"==typeof(n=i)&&"Symbol(react.forward_ref)"===(null===(o=n.$$typeof)||void 0===o?void 0:o.toString()))&&(l.ref=e=>{this.ref=e}),this.reactElement=r.createElement(i,l),null===(e=null==s?void 0:s.contentComponent)||void 0===e||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...this.props,...e},this.render()}destroy(){var e;let t=this.editor;null===(e=null==t?void 0:t.contentComponent)||void 0===e||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class wl extends i6{mount(){var e,t=this;let n={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.updateAttributes(e)},deleteNode:()=>this.deleteNode()};!this.component.displayName&&(this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1));let o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}},i=this.component,l=r.memo(e=>r.createElement(wn.Provider,{value:o},r.createElement(i,e)));l.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);let{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new wi(l,{editor:this.editor,props:n,as:s,className:`node-${this.node.type.name} ${a}`.trim()}),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"==typeof n){if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}}update(e,t,n){let r=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let o=this.node,i=this.decorations,l=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:o,oldDecorations:i,newNode:e,newDecorations:t,oldInnerDecorations:l,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){let t=this.editor.extensionManager.attributes,n=o3(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}let ws=(0,r.createContext)(void 0);function wa(e){return(0,r.useContext)(ws)}function wc(e){let t=wa();if(null==t||!t.editor)throw Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return t.editor}function wd(e,t,n,o){let{refs:i,update:l,context:s,floatingStyles:a}=vL({open:e,...o}),{isMounted:c,styles:d}=vz(s),u=v7(s),{getReferenceProps:h,getFloatingProps:p}=vO([u]);return(0,r.useEffect)(()=>{l()},[t,l]),(0,r.useEffect)(()=>{null!==t&&i.setReference({getBoundingClientRect:()=>t})},[t,i]),(0,r.useMemo)(()=>({isMounted:c,ref:i.setFloating,style:{display:"flex",...d,...a,zIndex:n},getFloatingProps:p,getReferenceProps:h}),[a,c,i.setFloating,d,n,p,h])}function wu(e){let[t,n]=(0,r.useState)();return(0,r.useEffect)(()=>e(e=>{n({...e})}),[e]),t}let wh=(0,r.createContext)(void 0);function wp(){return(0,r.useContext)(wh)}function wf(){return wa().editor.dictionary}let wm=e=>{let t=wp(),n=wf(),{block:o}=e,i=wc(),[l,s]=(0,r.useState)(""),a=(0,r.useCallback)(e=>{s(e.currentTarget.value)},[]),c=(0,r.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),i.updateBlock(o,{props:{name:$i(l),url:l}}))},[i,o,l]),d=(0,r.useCallback)(()=>{i.updateBlock(o,{props:{name:$i(l),url:l}})},[i,o,l]);return(0,b2.jsxs)(t.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,b2.jsx)(t.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:l,onChange:a,onKeyDown:c,"data-test":"embed-input"}),(0,b2.jsx)(t.FilePanel.Button,{className:"bn-button",onClick:d,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[o.type]||n.file_panel.embed.embed_button.file})]})},wg=e=>{var t;let n=wp(),o=wf(),{block:i,setLoading:l}=e,s=wc(),[a,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a&&setTimeout(()=>{c(!1)},3e3)},[a]);let d=(0,r.useCallback)(e=>{null!==e&&async function(e){if(l(!0),void 0!==s.uploadFile)try{let t=await s.uploadFile(e);"string"==typeof t&&(t={props:{name:e.name,url:t}}),s.updateBlock(i,t)}catch{c(!0)}finally{l(!1)}}(e)},[i,s,l]),u=s.schema.blockSchema[i.type],h=u.isFileBlock&&null!=(t=u.fileBlockAccept)&&t.length?u.fileBlockAccept.join(","):"*/*";return(0,b2.jsxs)(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[(0,b2.jsx)(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:h,placeholder:o.file_panel.upload.file_placeholder[i.type]||o.file_panel.upload.file_placeholder.file,value:null,onChange:d}),a&&(0,b2.jsx)("div",{className:"bn-error-text",children:o.file_panel.upload.upload_error})]})},w$=e=>{let t=wp(),n=wf(),o=wc(),[i,l]=(0,r.useState)(!1),s=e.tabs??[...void 0!==o.uploadFile?[{name:n.file_panel.upload.title,tabPanel:(0,b2.jsx)(wg,{block:e.block,setLoading:l})}]:[],{name:n.file_panel.embed.title,tabPanel:(0,b2.jsx)(wm,{block:e.block})}],[a,c]=(0,r.useState)(e.defaultOpenTab||s[0].name);return(0,b2.jsx)(t.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:c,tabs:s,loading:i})},w_=e=>{let t=wc();if(!t.filePanel)throw Error("FileToolbarController can only be used when BlockNote editor schema contains file block");let n=wu(t.filePanel.onUpdate.bind(t.filePanel)),{isMounted:r,ref:o,style:i,getFloatingProps:l}=wd((null==n?void 0:n.show)||!1,(null==n?void 0:n.referencePos)||null,5e3,{placement:"bottom",middleware:[yJ(10),yQ()],onOpenChange(e){e||(t.filePanel.closeMenu(),t.focus())}});if(!r||!n)return null;let{show:s,referencePos:a,...c}=n,d=e.filePanel||w$;return(0,b2.jsx)("div",{ref:o,style:i,...l(),children:(0,b2.jsx)(d,{...c})})};function wb(e,t){let n=wa();t||(t=null==n?void 0:n.editor),(0,r.useEffect)(()=>{if(!t)throw Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onChange(e)},[e,t])}function wy(e,t){let n=wa();t||(t=null==n?void 0:n.editor),(0,r.useEffect)(()=>{if(!t)throw Error("'editor' is required, either from BlockNoteContext or as a function argument");return t.onSelectionChange(e)},[e,t])}function wv(e,t){wb(e,t),wy(e,t)}var ww={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wk=r.createContext&&r.createContext(ww),w0=["attr","size","title"];function wx(){return(wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(t){w1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w1(e,t,n){var r,o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r=t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w2(e){return t=>r.createElement(w3,wx({attr:wS({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,wS({key:n},t.attr),e(t.child)))}(e.child))}function w3(e){var t=t=>{var n,{attr:o,size:i,title:l}=e,s=function e(t,n){if(null==t)return{};var r,o,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)r=l[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(e,w0),a=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",wx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:n,style:wS(wS({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==wk?r.createElement(wk.Consumer,null,e=>t(e)):t(ww)}function wE(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(e)}function w4(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function wM(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(e)}function wT(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(e)}function w8(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(e)}function w6(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(e)}function wN(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(e)}function w5(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(e)}function w7(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(e)}function wL(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(e)}function wP(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(e)}function wA(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function wR(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(e)}function wO(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(e)}function wD(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(e)}function wI(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(e)}function wH(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(e)}function wz(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(e)}function w9(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(e)}function wB(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(e)}function wV(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function wj(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(e)}function wF(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(e)}function wU(e){let t=wa();if(e||(e=null==t?void 0:t.editor),!e)throw Error("'editor' is required, either from BlockNoteContext or as a function argument");let n=e,[o,i]=(0,r.useState)(()=>{var e;return(null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block]});return wv(()=>{var e;return i((null==(e=n.getSelection())?void 0:e.blocks)||[n.getTextCursorPosition().block])},n),o}let wW={bold:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(e)},italic:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(e)},underline:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(e)},strike:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(e)},code:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(e)}},wG=e=>{var t,n;let o=wf(),i=wp(),l=wc(),s=(t=e.basicTextStyle,n=l,t in n.schema.styleSchema&&n.schema.styleSchema[t].type===t&&"boolean"===n.schema.styleSchema[t].propSchema),a=wU(l),[c,d]=(0,r.useState)(e.basicTextStyle in l.getActiveStyles());if(wv(()=>{s&&d(e.basicTextStyle in l.getActiveStyles())},l),!(0,r.useMemo)(()=>!!s&&!!a.find(e=>void 0!==e.content),[s,a])||!l.isEditable)return null;let u=wW[e.basicTextStyle];return(0,b2.jsx)(i.FormattingToolbar.Button,{className:"bn-button","data-test":e.basicTextStyle,onClick:()=>(e=>{if(l.focus(),s){if("boolean"!==l.schema.styleSchema[e].propSchema)throw Error("can only toggle boolean styles");l.toggleStyles({[e]:!0})}})(e.basicTextStyle),isSelected:c,label:o.formatting_toolbar[e.basicTextStyle].tooltip,mainTooltip:o.formatting_toolbar[e.basicTextStyle].tooltip,secondaryTooltip:gX(o.formatting_toolbar[e.basicTextStyle].secondary_tooltip,o.generic.ctrl_shortcut),icon:(0,b2.jsx)(u,{})})},wq=e=>{let t=e.textColor||"default",n=e.backgroundColor||"default",o=e.size||16,i=(0,r.useMemo)(()=>({pointerEvents:"none",fontSize:(.75*o).toString()+"px",height:o.toString()+"px",lineHeight:o.toString()+"px",textAlign:"center",width:o.toString()+"px"}),[o]);return(0,b2.jsx)("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":t,style:i,children:"A"})},wK=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],wJ=e=>{let t=wp(),n=wf();return(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(()=>e.text?(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(t.Generic.Menu.Label,{children:n.color_picker.text_title}),wK.map(r=>(0,b2.jsx)(t.Generic.Menu.Item,{onClick(){e.onClick&&e.onClick(),e.text.setColor(r)},"data-test":"text-color-"+r,icon:(0,b2.jsx)(wq,{textColor:r,size:e.iconSize}),checked:e.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),(0,b2.jsx)(()=>e.background?(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(t.Generic.Menu.Label,{children:n.color_picker.background_title}),wK.map(r=>(0,b2.jsx)(t.Generic.Menu.Item,{onClick(){e.onClick&&e.onClick(),e.background.setColor(r)},"data-test":"background-color-"+r,icon:(0,b2.jsx)(wq,{backgroundColor:r,size:e.iconSize}),checked:e.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function wZ(e,t){return`${e}Color` in t.schema.styleSchema&&t.schema.styleSchema[`${e}Color`].type===`${e}Color`&&"string"===t.schema.styleSchema[`${e}Color`].propSchema}let wX=()=>{let e=wp(),t=wf(),n=wc(),o=wZ("text",n),i=wZ("background",n),l=wU(n),[s,a]=(0,r.useState)(o&&n.getActiveStyles().textColor||"default"),[c,d]=(0,r.useState)(i&&n.getActiveStyles().backgroundColor||"default");wv(()=>{o&&a(n.getActiveStyles().textColor||"default"),i&&d(n.getActiveStyles().backgroundColor||"default")},n);let u=(0,r.useCallback)(e=>{if(!o)throw Error("Tried to set text color, but style does not exist in editor schema.");"default"===e?n.removeStyles({textColor:e}):n.addStyles({textColor:e}),setTimeout(()=>{n.focus()})},[n,o]),h=(0,r.useCallback)(e=>{if(!i)throw Error("Tried to set background color, but style does not exist in editor schema.");"default"===e?n.removeStyles({backgroundColor:e}):n.addStyles({backgroundColor:e}),setTimeout(()=>{n.focus()})},[i,n]);return(0,r.useMemo)(()=>{if(!o&&!i)return!1;for(let e of l)if(void 0!==e.content)return!0;return!1},[i,l,o])&&n.isEditable?(0,b2.jsxs)(e.Generic.Menu.Root,{children:[(0,b2.jsx)(e.Generic.Menu.Trigger,{children:(0,b2.jsx)(e.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:t.formatting_toolbar.colors.tooltip,mainTooltip:t.formatting_toolbar.colors.tooltip,icon:(0,b2.jsx)(wq,{textColor:s,backgroundColor:c,size:20})})}),(0,b2.jsx)(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,b2.jsx)(wJ,{text:o?{color:s,setColor:u}:void 0,background:i?{color:c,setColor:h}:void 0})})]}):null},wQ=e=>{let t=wp(),n=wf(),{url:o,text:i,editLink:l}=e,[s,a]=(0,r.useState)(o),[c,d]=(0,r.useState)(i);(0,r.useEffect)(()=>{a(o),d(i)},[i,o]);let u=(0,r.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),l(s,c))},[l,s,c]),h=(0,r.useCallback)(e=>a(e.currentTarget.value),[]),p=(0,r.useCallback)(e=>d(e.currentTarget.value),[]),f=(0,r.useCallback)(()=>l(s,c),[l,s,c]);return(0,b2.jsxs)(t.Generic.Form.Root,{children:[(0,b2.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:(0,b2.jsx)(wL,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:s,onKeyDown:u,onChange:h,onSubmit:f}),(0,b2.jsx)(t.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:(0,b2.jsx)(wO,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:u,onChange:p,onSubmit:f})]})},wY=()=>{var e;let t=wc(),n=wp(),o=wf(),i="link"in(e=t).schema.inlineContentSchema&&"link"===e.schema.inlineContentSchema.link,l=wU(t),[s,a]=(0,r.useState)(t.getSelectedLinkUrl()||""),[c,d]=(0,r.useState)(t.getSelectedText());wv(()=>{d(t.getSelectedText()||""),a(t.getSelectedLinkUrl()||"")},t);let u=(0,r.useCallback)((e,n)=>{t.createLink(e,n),t.focus()},[t]);return(0,r.useMemo)(()=>{if(!i)return!1;for(let e of l)if(void 0===e.content)return!1;return!0},[i,l])&&"link"in t.schema.inlineContentSchema&&t.isEditable?(0,b2.jsxs)(n.Generic.Popover.Root,{children:[(0,b2.jsx)(n.Generic.Popover.Trigger,{children:(0,b2.jsx)(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:o.formatting_toolbar.link.tooltip,mainTooltip:o.formatting_toolbar.link.tooltip,secondaryTooltip:gX(o.formatting_toolbar.link.secondary_tooltip,o.generic.ctrl_shortcut),icon:(0,b2.jsx)(wL,{})})}),(0,b2.jsx)(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,b2.jsx)(wQ,{url:s,text:c,editLink:u})})]}):null},ke=()=>{let e=wf(),t=wp(),n=wc(),[o,i]=(0,r.useState)(),l=wU(n),s=(0,r.useMemo)(()=>{if(1!==l.length)return;let e=l[0];return __(e,n)?(i(e.props.caption),e):void 0},[n,l]),a=(0,r.useCallback)(e=>{s&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(s,{props:{caption:o}}))},[o,n,s]),c=(0,r.useCallback)(e=>i(e.currentTarget.value),[]);return s&&!_b(s,n)&&n.isEditable?(0,b2.jsxs)(t.Generic.Popover.Root,{children:[(0,b2.jsx)(t.Generic.Popover.Trigger,{children:(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_caption.tooltip,mainTooltip:e.formatting_toolbar.file_caption.tooltip,icon:(0,b2.jsx)(w5,{}),isSelected:""!==s.props.caption})}),(0,b2.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,b2.jsx)(t.Generic.Form.Root,{children:(0,b2.jsx)(t.Generic.Form.TextInput,{name:"file-caption",icon:(0,b2.jsx)(w5,{}),value:o||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:c})})})]}):null},kt=()=>{let e=wf(),t=wp(),n=wc(),o=wU(n),i=(0,r.useMemo)(()=>{if(1!==o.length)return;let e=o[0];return __(e,n)?e:void 0},[n,o]),l=(0,r.useCallback)(()=>{n.focus(),n.removeBlocks([i])},[n,i]);return i&&!_b(i,n)&&n.isEditable?(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,mainTooltip:e.formatting_toolbar.file_delete.tooltip[i.type]||e.formatting_toolbar.file_delete.tooltip.file,icon:(0,b2.jsx)(wV,{}),onClick:l}):null},kn=()=>{let e=wf(),t=wp(),n=wc(),[o,i]=(0,r.useState)(),l=wU(n),s=(0,r.useMemo)(()=>{if(1!==l.length)return;let e=l[0];return __(e,n)?(i(e.props.name),e):void 0},[n,l]),a=(0,r.useCallback)(e=>{s&&"Enter"===e.key&&(e.preventDefault(),n.updateBlock(s,{props:{name:o}}))},[o,n,s]),c=(0,r.useCallback)(e=>i(e.currentTarget.value),[]);return s&&!_b(s,n)&&n.isEditable?(0,b2.jsxs)(t.Generic.Popover.Root,{children:[(0,b2.jsx)(t.Generic.Popover.Trigger,{children:(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,mainTooltip:e.formatting_toolbar.file_rename.tooltip[s.type]||e.formatting_toolbar.file_rename.tooltip.file,icon:(0,b2.jsx)(w4,{})})}),(0,b2.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,b2.jsx)(t.Generic.Form.Root,{children:(0,b2.jsx)(t.Generic.Form.TextInput,{name:"file-name",icon:(0,b2.jsx)(w4,{}),value:o||"",autoFocus:!0,placeholder:e.formatting_toolbar.file_rename.input_placeholder[s.type]||e.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:c})})})]}):null},kr=()=>{let e=wf(),t=wp(),n=wc(),o=wU(n),[i,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l(!1)},[o]);let s=1===o.length?o[0]:void 0;return void 0!==s&&__(s,n)&&n.isEditable?(0,b2.jsxs)(t.Generic.Popover.Root,{opened:i,position:"bottom",children:[(0,b2.jsx)(t.Generic.Popover.Trigger,{children:(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button",onClick:()=>l(!i),isSelected:i,mainTooltip:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,label:e.formatting_toolbar.file_replace.tooltip[s.type]||e.formatting_toolbar.file_replace.tooltip.file,icon:(0,b2.jsx)(wH,{})})}),(0,b2.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:(0,b2.jsx)(w$,{block:s})})]}):null},ko=()=>{let e=wf(),t=wp(),n=wc(),o=wU(n),[i,l]=(0,r.useState)(()=>n.canNestBlock());wv(()=>{l(n.canNestBlock())},n);let s=(0,r.useCallback)(()=>{n.focus(),n.nestBlock()},[n]);return(0,r.useMemo)(()=>!o.find(e=>"inline"!==n.schema.blockSchema[e.type].content),[n.schema.blockSchema,o])&&n.isEditable?(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.nest.tooltip,mainTooltip:e.formatting_toolbar.nest.tooltip,secondaryTooltip:gX(e.formatting_toolbar.nest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,b2.jsx)(wN,{})}):null},ki=()=>{let e=wf(),t=wp(),n=wc(),o=wU(n),[i,l]=(0,r.useState)(()=>n.canUnnestBlock());wv(()=>{l(n.canUnnestBlock())},n);let s=(0,r.useCallback)(()=>{n.focus(),n.unnestBlock()},[n]);return(0,r.useMemo)(()=>!o.find(e=>"inline"!==n.schema.blockSchema[e.type].content),[n.schema.blockSchema,o])&&n.isEditable?(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!i,label:e.formatting_toolbar.unnest.tooltip,mainTooltip:e.formatting_toolbar.unnest.tooltip,secondaryTooltip:gX(e.formatting_toolbar.unnest.secondary_tooltip,e.generic.ctrl_shortcut),icon:(0,b2.jsx)(w6,{})}):null},kl=e=>{let t=wp(),n=wf(),o=wc(),i=wU(o),[l,s]=(0,r.useState)(o.getTextCursorPosition().block),a=(0,r.useMemo)(()=>{var t;return(e.items||[{name:(t=n).slash_menu.paragraph.title,type:"paragraph",icon:wO,isSelected:e=>"paragraph"===e.type},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:wM,isSelected:e=>"heading"===e.type&&"level"in e.props&&1===e.props.level},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:wT,isSelected:e=>"heading"===e.type&&"level"in e.props&&2===e.props.level},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:w8,isSelected:e=>"heading"===e.type&&"level"in e.props&&3===e.props.level},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:wR,isSelected:e=>"bulletListItem"===e.type},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:wA,isSelected:e=>"numberedListItem"===e.type},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:wP,isSelected:e=>"checkListItem"===e.type}]).filter(e=>e.type in o.schema.blockSchema)},[o,n,e.items]),c=(0,r.useMemo)(()=>void 0!==a.find(e=>e.type===l.type),[l.type,a]),d=(0,r.useMemo)(()=>a.map(e=>{let t=e.icon;return{text:e.name,icon:(0,b2.jsx)(t,{size:16}),onClick:()=>(e=>{for(let t of(o.focus(),i))o.updateBlock(t,{type:e.type,props:e.props})})(e),isSelected:e.isSelected(l)}}),[l,a,o,i]);return wv(()=>{s(o.getTextCursorPosition().block)},o),c&&o.isEditable?(0,b2.jsx)(t.FormattingToolbar.Select,{className:"bn-select",items:d}):null};function ks(e,t){try{let n=new URL(e,t);if("javascript:"!==n.protocol)return n.href}catch{}return"#"}let ka=()=>{let e=wf(),t=wp(),n=wc(),o=wU(n),i=(0,r.useMemo)(()=>{if(1!==o.length)return;let e=o[0];return __(e,n)?e:void 0},[n,o]),l=(0,r.useCallback)(()=>{i&&i.props.url&&(n.focus(),n.resolveFileUrl(i.props.url).then(e=>window.open(ks(e,window.location.href))))},[n,i]);return!i||_b(i,n)?null:(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,mainTooltip:e.formatting_toolbar.file_download.tooltip[i.type]||e.formatting_toolbar.file_download.tooltip.file,icon:(0,b2.jsx)(wj,{}),onClick:l})},kc=()=>{let e=wf(),t=wp(),n=wc(),o=wU(n),i=(0,r.useMemo)(()=>{var e,t;if(1!==o.length)return;let r=o[0];return(e=r,t=n,e.type in t.schema.blockSchema&&t.schema.blockSchema[e.type].isFileBlock&&"showPreview"in t.schema.blockSchema[e.type].propSchema)?r:void 0},[n,o]),l=(0,r.useCallback)(()=>{i&&n.updateBlock(i,{props:{showPreview:!i.props.showPreview}})},[n,i]);return i&&!_b(i,n)&&n.isEditable?(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:e.formatting_toolbar.file_preview_toggle.tooltip,icon:(0,b2.jsx)(wI,{}),isSelected:i.props.showPreview,onClick:l}):null},kd={left:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(e)},center:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(e)},right:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(e)},justify:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(e)}},ku=e=>{let t=wp(),n=wf(),o=wc(),i=wU(o),l=(0,r.useMemo)(()=>{let e=i[0];if(_v("textAlignment",e,o))return e.props.textAlignment},[o,i]),s=(0,r.useCallback)(e=>{for(let t of(o.focus(),i))_y("textAlignment",t.type,o)&&o.updateBlock(t,{props:{textAlignment:e}})},[o,i]);if(!(0,r.useMemo)(()=>!!i.find(e=>"textAlignment"in e.props),[i])||!o.isEditable)return null;let a=kd[e.textAlignment];return(0,b2.jsx)(t.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1)}`,onClick:()=>s(e.textAlignment),isSelected:l===e.textAlignment,label:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${e.textAlignment}`].tooltip,icon:(0,b2.jsx)(a,{})})},kh=e=>[(0,b2.jsx)(kl,{items:e},"blockTypeSelect"),(0,b2.jsx)(ke,{},"fileCaptionButton"),(0,b2.jsx)(kr,{},"replaceFileButton"),(0,b2.jsx)(kn,{},"fileRenameButton"),(0,b2.jsx)(kt,{},"fileDeleteButton"),(0,b2.jsx)(ka,{},"fileDownloadButton"),(0,b2.jsx)(kc,{},"filePreviewButton"),(0,b2.jsx)(wG,{basicTextStyle:"bold"},"boldStyleButton"),(0,b2.jsx)(wG,{basicTextStyle:"italic"},"italicStyleButton"),(0,b2.jsx)(wG,{basicTextStyle:"underline"},"underlineStyleButton"),(0,b2.jsx)(wG,{basicTextStyle:"strike"},"strikeStyleButton"),(0,b2.jsx)(ku,{textAlignment:"left"},"textAlignLeftButton"),(0,b2.jsx)(ku,{textAlignment:"center"},"textAlignCenterButton"),(0,b2.jsx)(ku,{textAlignment:"right"},"textAlignRightButton"),(0,b2.jsx)(wX,{},"colorStyleButton"),(0,b2.jsx)(ko,{},"nestBlockButton"),(0,b2.jsx)(ki,{},"unnestBlockButton"),(0,b2.jsx)(wY,{},"createLinkButton")],kp=e=>{let t=wp();return(0,b2.jsx)(t.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:e.children||kh(e.blockTypeSelectItems)})},kf=e=>{switch(e){case"left":default:return"top-start";case"center":return"top";case"right":return"top-end"}},km=e=>{let t=(0,r.useRef)(null),n=wc(),[o,i]=(0,r.useState)(()=>{let e=n.getTextCursorPosition().block;return"textAlignment"in e.props?kf(e.props.textAlignment):"top-start"});wv(()=>{let e=n.getTextCursorPosition().block;"textAlignment"in e.props?i(kf(e.props.textAlignment)):i("top-start")},n);let l=wu(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:c,getFloatingProps:d}=wd((null==l?void 0:l.show)||!1,(null==l?void 0:l.referencePos)||null,3e3,{placement:o,middleware:[yJ(10),yQ()],onOpenChange(e,t){e||(n.formattingToolbar.closeMenu(),n.focus())}}),u=(0,r.useMemo)(()=>{var e;return e=[t,a],t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}},[t,a]);if(!s||!l)return null;if(!l.show&&t.current)return(0,b2.jsx)("div",{ref:u,style:c,dangerouslySetInnerHTML:{__html:t.current.innerHTML}});let h=e.formattingToolbar||kp;return(0,b2.jsx)("div",{ref:u,style:c,...d(),children:(0,b2.jsx)(h,{})})},kg=e=>{let t=wp(),n=wf();return(0,b2.jsx)(t.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:e.deleteLink,icon:(0,b2.jsx)(w7,{})})},k$=e=>{let t=wp(),n=wf();return(0,b2.jsxs)(t.Generic.Popover.Root,{children:[(0,b2.jsx)(t.Generic.Popover.Trigger,{children:(0,b2.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),(0,b2.jsx)(t.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:(0,b2.jsx)(wQ,{...e})})]})},k_=e=>{let t=wp(),n=wf();return(0,b2.jsx)(t.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick(){window.open(ks(e.url,window.location.href),"_blank")},icon:(0,b2.jsx)(wF,{})})},kb=e=>{let t=wp();return e.children?(0,b2.jsx)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:e.children}):(0,b2.jsxs)(t.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[(0,b2.jsx)(k$,{url:e.url,text:e.text,editLink:e.editLink}),(0,b2.jsx)(k_,{url:e.url}),(0,b2.jsx)(kg,{deleteLink:e.deleteLink})]})},ky=e=>{let t=wc(),n={deleteLink:t.linkToolbar.deleteLink,editLink:t.linkToolbar.editLink,startHideTimer:t.linkToolbar.startHideTimer,stopHideTimer:t.linkToolbar.stopHideTimer},r=wu(t.linkToolbar.onUpdate.bind(t.linkToolbar)),{isMounted:o,ref:i,style:l,getFloatingProps:s}=wd((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,4e3,{placement:"top-start",middleware:[yJ(10),yQ()],onOpenChange(e){e||(t.linkToolbar.closeMenu(),t.focus())}});if(!o||!r)return null;let{show:a,referencePos:c,...d}=r,u=e.linkToolbar||kb;return(0,b2.jsx)("div",{ref:i,style:l,...s(),children:(0,b2.jsx)(u,{...d,...n})})};function kv(e){return w2({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(e)}let kw=e=>{let t=wp(),n=wf(),o=wc(),i=(0,r.useCallback)(()=>{let t=e.block.content;if(void 0!==t&&Array.isArray(t)&&0===t.length)o.setTextCursorPosition(e.block),o.openSuggestionMenu("/");else{let n=o.insertBlocks([{type:"paragraph"}],e.block,"after")[0];o.setTextCursorPosition(n),o.openSuggestionMenu("/")}},[o,e.block]);return(0,b2.jsx)(t.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:(0,b2.jsx)(kv,{size:24,onClick:i,"data-test":"dragHandleAdd"})})};function kk(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(e)}let k0=e=>{let t=wp(),n=wc();return _y("textColor",e.block.type,n)||_y("backgroundColor",e.block.type,n)?(0,b2.jsxs)(t.Generic.Menu.Root,{position:"right",sub:!0,children:[(0,b2.jsx)(t.Generic.Menu.Trigger,{sub:!0,children:(0,b2.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:e.children})}),(0,b2.jsx)(t.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:(0,b2.jsx)(wJ,{iconSize:18,text:_y("textColor",e.block.type,n)&&_v("textColor",e.block,n)?{color:e.block.props.textColor,setColor:t=>n.updateBlock(e.block,{type:e.block.type,props:{textColor:t}})}:void 0,background:_y("backgroundColor",e.block.type,n)&&_v("backgroundColor",e.block,n)?{color:e.block.props.backgroundColor,setColor:t=>n.updateBlock(e.block,{props:{backgroundColor:t}})}:void 0})})]}):null},kx=e=>{let t=wp(),n=wc();return(0,b2.jsx)(t.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([e.block]),children:e.children})},kC=e=>{let t=wp(),n=wf();return(0,b2.jsx)(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:e.children||(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(kx,{...e,children:n.drag_handle.delete_menuitem}),(0,b2.jsx)(k0,{...e,children:n.drag_handle.colors_menuitem})]})})},kS=e=>{let t=wp(),n=wf(),r=e.dragHandleMenu||kC;return(0,b2.jsxs)(t.Generic.Menu.Root,{onOpenChange(t){t?e.freezeMenu():e.unfreezeMenu()},position:"left",children:[(0,b2.jsx)(t.Generic.Menu.Trigger,{children:(0,b2.jsx)(t.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:e.blockDragStart,onDragEnd:e.blockDragEnd,className:"bn-button",icon:(0,b2.jsx)(kk,{size:24,"data-test":"dragHandle"})})}),(0,b2.jsx)(r,{block:e.block})]})},k1=e=>{let t=wp(),n=(0,r.useMemo)(()=>{let t={"data-block-type":e.block.type};return"heading"===e.block.type&&(t["data-level"]=e.block.props.level.toString()),e.editor.schema.blockSchema[e.block.type].isFileBlock&&(e.block.props.url?t["data-url"]="true":t["data-url"]="false"),t},[e.block,e.editor.schema.blockSchema]);return(0,b2.jsx)(t.SideMenu.Root,{className:"bn-side-menu",...n,children:e.children||(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(kw,{...e}),(0,b2.jsx)(kS,{...e})]})})},k2=e=>{let t=wc(),n={blockDragStart:t.sideMenu.blockDragStart,blockDragEnd:t.sideMenu.blockDragEnd,freezeMenu:t.sideMenu.freezeMenu,unfreezeMenu:t.sideMenu.unfreezeMenu},r=wu(t.sideMenu.onUpdate.bind(t.sideMenu)),{isMounted:o,ref:i,style:l,getFloatingProps:s}=wd((null==r?void 0:r.show)||!1,(null==r?void 0:r.referencePos)||null,1e3,{placement:"left-start"});if(!o||!r)return null;let{show:a,referencePos:c,...d}=r,u=e.sideMenu||k1;return(0,b2.jsx)("div",{ref:i,style:l,...s(),children:(0,b2.jsx)(u,{...d,...n,editor:t})})};function k3(e){let t=wp(),n=wf(),{items:o,loadingState:i,selectedIndex:l,onItemClick:s,columns:a}=e,c="loading-initial"===i||"loading"===i?(0,b2.jsx)(t.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a,children:n.suggestion_menu.loading}):null,d=(0,r.useMemo)(()=>{let e=[];for(let n=0;n<o.length;n++){let r=o[n];e.push((0,b2.jsx)(t.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:r,id:`bn-grid-suggestion-menu-item-${n}`,isSelected:n===l,onClick:()=>null==s?void 0:s(r)},r.id))}return e},[t,o,s,l]);return(0,b2.jsxs)(t.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[c,d,0===d.length&&"loaded"===e.loadingState&&(0,b2.jsx)(t.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function kE(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=(0,r.useRef)(0);(0,r.useEffect)(()=>{void 0!==t&&(e.length>0?i.current=t.length:t.length-i.current>o&&n())},[n,o,e.length,t])}function k4(e,t){let[n,o]=(0,r.useState)([]),[i,l]=(0,r.useState)(!1),s=(0,r.useRef)(),a=(0,r.useRef)();return(0,r.useEffect)(()=>{let n=e;s.current=e,l(!0),t(e).then(e=>{s.current===n&&(o(e),l(!1),a.current=n)})},[e,t]),{items:n||[],usedQuery:a.current,loadingState:void 0===a.current?"loading-initial":i?"loading":"loaded"}}function kM(e){let t=wa().setContentEditableProps,n=wc(),{getItems:o,gridSuggestionMenuComponent:i,query:l,clearQuery:s,closeMenu:a,onItemClick:c,columns:d}=e,u=(0,r.useCallback)(e=>{a(),s(),null==c||c(e)},[c,a,s]),{items:h,usedQuery:p,loadingState:f}=k4(l,o);kE(h,p,a);let{selectedIndex:m}=function(e,t,n,o,i){let[l,s]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let t=e=>("ArrowLeft"===e.key&&(e.preventDefault(),n.length&&s((l-1+n.length)%n.length)),"ArrowRight"===e.key&&(e.preventDefault(),n.length&&s((l+1+n.length)%n.length)),"ArrowUp"===e.key?(e.preventDefault(),n.length&&s((l-o+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&s((l+o)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.preventDefault(),n.length&&(null==i||i(n[l])),!0));return e.domElement.addEventListener("keydown",t,!0),()=>{e.domElement.removeEventListener("keydown",t,!0)}},[e.domElement,n,l,i,o,void 0!==o&&o>1]),(0,r.useEffect)(()=>{s(0)},[t]),{selectedIndex:0===n.length?void 0:l}}(n,l,h,d,u);return(0,r.useEffect)(()=>(t(e=>({...e,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(e=>({...e,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),(0,r.useEffect)(()=>(t(e=>({...e,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{t(e=>({...e,"aria-activedescendant":void 0}))}),[t,m]),(0,b2.jsx)(i,{items:h,onItemClick:u,loadingState:f,selectedIndex:m,columns:d})}function kT(e){let t=wc(),{triggerCharacter:n,gridSuggestionMenuComponent:o,columns:i,minQueryLength:l,onItemClick:s,getItems:a}=e,c=(0,r.useMemo)(()=>s||(e=>{e.onItemClick(t)}),[t,s]),d=(0,r.useMemo)(()=>a||(async e=>await async function(e,t){return(await bC(e,t)).map(e=>{let{id:t,onItemClick:n}=e;return{id:t,onItemClick:n,icon:t}})}(t,e)),[t,a]),u={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},h=(0,r.useCallback)(e=>t.suggestionMenus.onUpdate(n,e),[t.suggestionMenus,n]),p=wu(h),{isMounted:f,ref:m,style:g,getFloatingProps:$}=wd((null==p?void 0:p.show)||!1,(null==p?void 0:p.referencePos)||null,2e3,{placement:"bottom-start",middleware:[yJ(10),yQ(),yY({apply(e){let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:t-10+"px"})}})],onOpenChange(e){e||t.suggestionMenus.closeMenu()}});return f&&p&&(null!=p&&p.ignoreQueryLength||!l||!(p.query.startsWith(" ")||p.query.length<l))?(0,b2.jsx)("div",{ref:m,style:g,...$(),children:(0,b2.jsx)(kM,{query:p.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:d,columns:i,gridSuggestionMenuComponent:o||k3,onItemClick:c})}):null}function k8(e){let t=wp(),n=wf(),{items:o,loadingState:i,selectedIndex:l,onItemClick:s}=e,a="loading-initial"===i||"loading"===i?(0,b2.jsx)(t.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader",children:n.suggestion_menu.loading}):null,c=(0,r.useMemo)(()=>{let e,n=[];for(let r=0;r<o.length;r++){let i=o[r];i.group!==e&&(e=i.group,n.push((0,b2.jsx)(t.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:e},e))),n.push((0,b2.jsx)(t.SuggestionMenu.Item,{className:"bn-suggestion-menu-item",item:i,id:`bn-suggestion-menu-item-${r}`,isSelected:r===l,onClick:()=>null==s?void 0:s(i)},i.title))}return n},[t,o,s,l]);return(0,b2.jsxs)(t.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[c,0===c.length&&("loading"===e.loadingState||"loaded"===e.loadingState)&&(0,b2.jsx)(t.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function k6(e){let t=wa().setContentEditableProps,n=wc(),{getItems:o,suggestionMenuComponent:i,query:l,clearQuery:s,closeMenu:a,onItemClick:c}=e,d=(0,r.useCallback)(e=>{a(),s(),null==c||c(e)},[c,a,s]),{items:u,usedQuery:h,loadingState:p}=k4(l,o);kE(u,h,a);let{selectedIndex:f}=function(e,t,n,o){let[i,l]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let t=e=>"ArrowUp"===e.key?(e.preventDefault(),n.length&&l((i-1+n.length)%n.length),!0):"ArrowDown"===e.key?(e.preventDefault(),n.length&&l((i+1)%n.length),!0):"Enter"===e.key&&!e.isComposing&&(e.preventDefault(),n.length&&(null==o||o(n[i])),!0);return e.domElement.addEventListener("keydown",t,!0),()=>{e.domElement.removeEventListener("keydown",t,!0)}},[e.domElement,n,i,o]),(0,r.useEffect)(()=>{l(0)},[t]),{selectedIndex:0===n.length?void 0:i}}(n,l,u,d);return(0,r.useEffect)(()=>(t(e=>({...e,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{t(e=>({...e,"aria-expanded":!1,"aria-controls":void 0}))}),[t]),(0,r.useEffect)(()=>(t(e=>({...e,"aria-activedescendant":f?"bn-suggestion-menu-item-"+f:void 0})),()=>{t(e=>({...e,"aria-activedescendant":void 0}))}),[t,f]),(0,b2.jsx)(i,{items:u,onItemClick:d,loadingState:p,selectedIndex:f})}let kN={heading:wM,heading_2:wT,heading_3:w8,numbered_list:wA,bullet_list:wR,check_list:wP,paragraph:wO,table:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(e)},image:wD,video:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(e)},audio:w9,file:wE,emoji:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(e)},code_block:function(e){return w2({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(e)}};function k5(e){return(function(e){let t=[];return _$("heading",e)&&t.push({onItemClick(){bS(e,{type:"heading",props:{level:1}})},badge:gX("Mod-Alt-1"),key:"heading",...e.dictionary.slash_menu.heading},{onItemClick(){bS(e,{type:"heading",props:{level:2}})},badge:gX("Mod-Alt-2"),key:"heading_2",...e.dictionary.slash_menu.heading_2},{onItemClick(){bS(e,{type:"heading",props:{level:3}})},badge:gX("Mod-Alt-3"),key:"heading_3",...e.dictionary.slash_menu.heading_3}),_$("numberedListItem",e)&&t.push({onItemClick(){bS(e,{type:"numberedListItem"})},badge:gX("Mod-Shift-7"),key:"numbered_list",...e.dictionary.slash_menu.numbered_list}),_$("bulletListItem",e)&&t.push({onItemClick(){bS(e,{type:"bulletListItem"})},badge:gX("Mod-Shift-8"),key:"bullet_list",...e.dictionary.slash_menu.bullet_list}),_$("checkListItem",e)&&t.push({onItemClick(){bS(e,{type:"checkListItem"})},badge:gX("Mod-Shift-9"),key:"check_list",...e.dictionary.slash_menu.check_list}),_$("paragraph",e)&&t.push({onItemClick(){bS(e,{type:"paragraph"})},badge:gX("Mod-Alt-0"),key:"paragraph",...e.dictionary.slash_menu.paragraph}),_$("codeBlock",e)&&t.push({onItemClick(){let t=e._tiptapEditor.state.selection.from;bS(e,{type:"codeBlock"}),e._tiptapEditor.commands.setTextSelection(t)},badge:gX("Mod-Alt-c"),key:"code_block",...e.dictionary.slash_menu.code_block}),_$("table",e)&&t.push({onItemClick(){bS(e,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...e.dictionary.slash_menu.table}),_$("image",e)&&t.push({onItemClick(){let t=bS(e,{type:"image"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"image",...e.dictionary.slash_menu.image}),_$("video",e)&&t.push({onItemClick(){let t=bS(e,{type:"video"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"video",...e.dictionary.slash_menu.video}),_$("audio",e)&&t.push({onItemClick(){let t=bS(e,{type:"audio"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"audio",...e.dictionary.slash_menu.audio}),_$("file",e)&&t.push({onItemClick(){let t=bS(e,{type:"file"});e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))},key:"file",...e.dictionary.slash_menu.file}),t.push({onItemClick(){e.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...e.dictionary.slash_menu.emoji}),t})(e).map(e=>{let t=kN[e.key];return{...e,icon:(0,b2.jsx)(t,{size:18})}})}function k7(e){let t=wc(),{triggerCharacter:n,suggestionMenuComponent:o,minQueryLength:i,onItemClick:l,getItems:s}=e,a=(0,r.useMemo)(()=>l||(e=>{e.onItemClick(t)}),[t,l]),c=(0,r.useMemo)(()=>s||(async e=>b1(k5(t),e)),[t,s]),d={closeMenu:t.suggestionMenus.closeMenu,clearQuery:t.suggestionMenus.clearQuery},u=wu((0,r.useCallback)(e=>t.suggestionMenus.onUpdate(n,e),[t.suggestionMenus,n])),{isMounted:h,ref:p,style:f,getFloatingProps:m}=wd((null==u?void 0:u.show)||!1,(null==u?void 0:u.referencePos)||null,2e3,{placement:"bottom-start",middleware:[yJ(10),yQ({mainAxis:!0,crossAxis:!1}),yZ(),yY({apply(e){let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:t-10+"px"})}})],onOpenChange(e){e||t.suggestionMenus.closeMenu()}});return h&&u&&(null!=u&&u.ignoreQueryLength||!i||!(u.query.startsWith(" ")||u.query.length<i))?(0,b2.jsx)("div",{ref:p,style:f,...m(),children:(0,b2.jsx)(k6,{query:u.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:o||k8,onItemClick:a})}):null}let kL=(e,t,n)=>{let r={cells:Array(n).fill([])},o=[];for(let i=0;i<t;i++)o.push(r);return{type:"tableContent",columnWidths:e.columnWidths,rows:[...e.rows,...o]}},kP=(e,t)=>{let n=[],r=[];for(let o=0;o<t;o++)r.push(n);return{type:"tableContent",columnWidths:e.columnWidths?[...e.columnWidths,...r.map(()=>{})]:void 0,rows:e.rows.map(e=>({cells:[...e.cells,...r]}))}},kA=e=>{let t=wp(),n=(0,r.useRef)(!1),[o,i]=(0,r.useState)(),l=(0,r.useCallback)(t=>{e.onMouseDown(),i({originalContent:e.block.content,originalCroppedContent:function e(t,n){let r=0;if("columns"===n)for(let o=t.rows[0].cells.length-1;o>=0&&t.rows.every(e=>0===e.cells[o].length);o--)r++;let i=[];for(let l=t.rows.length-1;l>=0;l--)"rows"===n&&0===i.length&&t.rows[l].cells.every(e=>0===e.length)||i.unshift({cells:t.rows[l].cells.slice(0,t.rows[0].cells.length-r)});return{...t,rows:i}}(e.block.content,"addOrRemoveColumns"===e.orientation?"columns":"rows"),startPos:"addOrRemoveColumns"===e.orientation?t.clientX:t.clientY}),n.current=!1,t.preventDefault()},[e]),s=(0,r.useCallback)(()=>{n.current||e.editor.updateBlock(e.block,{type:"table",content:"addOrRemoveColumns"===e.orientation?kP(e.block.content,1):kL(e.block.content,1,e.block.content.rows[0].cells.length)})},[e.block,e.orientation,e.editor]);return(0,r.useEffect)(()=>{let t=t=>{var r,i;if(!o)throw Error("editingState is undefined");n.current=!0;let l=("addOrRemoveColumns"===e.orientation?t.clientX:t.clientY)-o.startPos,s="addOrRemoveColumns"===e.orientation?(null==(r=o.originalCroppedContent.rows[0])?void 0:r.cells.length)??0:o.originalCroppedContent.rows.length,a="addOrRemoveColumns"===e.orientation?(null==(i=o.originalContent.rows[0])?void 0:i.cells.length)??0:o.originalContent.rows.length,c="addOrRemoveColumns"===e.orientation?e.block.content.rows[0].cells.length:e.block.content.rows.length,d=a+function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=Math.floor(e)+t;return e>=n&&e<=Math.ceil(e)-t?Math.round(e):e<n?Math.floor(e):Math.ceil(e)}(l/("addOrRemoveColumns"===e.orientation?120:31),.3);d>=s&&d>0&&d!==c&&(e.editor.updateBlock(e.block,{type:"table",content:"addOrRemoveColumns"===e.orientation?kP(o.originalCroppedContent,d-s):kL(o.originalCroppedContent,d-s,o.originalContent.rows[0].cells.length)}),e.block.content&&e.editor.setTextCursorPosition(e.block))};return o&&window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t)}},[o,e.block,e.editor,e.orientation]),(0,r.useEffect)(()=>{let t=e.onMouseUp,n=()=>{i(void 0),t()};return o&&window.addEventListener("mouseup",n),()=>{window.removeEventListener("mouseup",n)}},[o,e.onMouseUp]),(0,b2.jsx)(t.TableHandle.ExtendButton,{className:gQ("bn-extend-button","addOrRemoveColumns"===e.orientation?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",null!==o?"bn-extend-button-editing":""),onClick:s,onMouseDown:l,children:e.children||(0,b2.jsx)(wB,{size:18,"data-test":"extendButton"})})},kR=e=>{let t=wp(),n=wf(),r=wc();return(0,b2.jsx)(t.Generic.Menu.Item,{onClick(){let t=e.block.content.rows[e.index].cells.map(()=>[]),n=[...e.block.content.rows];n.splice(e.index+("below"===e.side?1:0),0,{cells:t}),r.updateBlock(e.block,{type:"table",content:{type:"tableContent",columnWidths:e.block.content.columnWidths,rows:n}}),r.setTextCursorPosition(e.block)},children:n.table_handle[`add_${e.side}_menuitem`]})},kO=e=>{let t=wp(),n=wf(),r=wc();return(0,b2.jsx)(t.Generic.Menu.Item,{onClick(){let t=[...e.block.content.columnWidths];t.splice(e.index+("right"===e.side?1:0),0,void 0);let n={type:"tableContent",columnWidths:t,rows:e.block.content.rows.map(t=>{let n=[...t.cells];return n.splice(e.index+("right"===e.side?1:0),0,[]),{cells:n}})};r.updateBlock(e.block,{type:"table",content:n}),r.setTextCursorPosition(e.block)},children:n.table_handle[`add_${e.side}_menuitem`]})},kD=e=>"row"===e.orientation?(0,b2.jsx)(kR,{...e,side:e.side}):(0,b2.jsx)(kO,{...e,side:e.side}),kI=e=>{let t=wp(),n=wf(),r=wc();return(0,b2.jsx)(t.Generic.Menu.Item,{onClick(){let t={type:"tableContent",columnWidths:e.block.content.columnWidths,rows:e.block.content.rows.filter((t,n)=>n!==e.index)};r.updateBlock(e.block,{type:"table",content:t}),r.setTextCursorPosition(e.block)},children:n.table_handle.delete_row_menuitem})},kH=e=>{let t=wp(),n=wf(),r=wc();return(0,b2.jsx)(t.Generic.Menu.Item,{onClick(){let t={type:"tableContent",columnWidths:e.block.content.columnWidths.filter((t,n)=>n!==e.index),rows:e.block.content.rows.map(t=>({cells:t.cells.filter((t,n)=>n!==e.index)}))};r.updateBlock(e.block,{type:"table",content:t}),r.setTextCursorPosition(e.block)},children:n.table_handle.delete_column_menuitem})},kz=e=>"row"===e.orientation?(0,b2.jsx)(kI,{...e}):(0,b2.jsx)(kH,{...e}),k9=e=>{let t=wp();return(0,b2.jsx)(t.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:e.children||(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(kz,{orientation:e.orientation,block:e.block,index:e.index}),(0,b2.jsx)(kD,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"above":"left"}),(0,b2.jsx)(kD,{orientation:e.orientation,block:e.block,index:e.index,side:"row"===e.orientation?"below":"right"})]})})},kB=e=>{let t=wp(),[n,o]=(0,r.useState)(!1),i=e.tableHandleMenu||k9;return(0,b2.jsxs)(t.Generic.Menu.Root,{onOpenChange(t){t?(e.freezeHandles(),e.hideOtherSide()):(e.unfreezeHandles(),e.showOtherSide(),e.editor.focus())},position:"right",children:[(0,b2.jsx)(t.Generic.Menu.Trigger,{children:(0,b2.jsx)(t.TableHandle.Root,{className:gQ("bn-table-handle",n?"bn-table-handle-dragging":""),draggable:!0,onDragStart(t){o(!0),e.dragStart(t)},onDragEnd(){e.dragEnd(),o(!1)},style:"column"===e.orientation?{transform:"rotate(0.25turn)"}:void 0,children:e.children||(0,b2.jsx)(kk,{size:24,"data-test":"tableHandle"})})}),(0,yf.createPortal)((0,b2.jsx)(i,{orientation:e.orientation,block:e.block,index:e.index}),e.menuContainer)]})};function kV(e,t,n){let{refs:o,update:i,context:l,floatingStyles:s}=vL({open:t,placement:"addOrRemoveColumns"===e?"right":"bottom",middleware:[yY({apply(t){let{rects:n,elements:r}=t;Object.assign(r.floating.style,"addOrRemoveColumns"===e?{height:`${n.reference.height}px`}:{width:`${n.reference.width}px`})}})]}),{isMounted:a,styles:c}=vz(l);return(0,r.useEffect)(()=>{i()},[n,i]),(0,r.useEffect)(()=>{null!==n&&o.setReference({getBoundingClientRect:()=>n})},[e,n,o]),(0,r.useMemo)(()=>({isMounted:a,ref:o.setFloating,style:{display:"flex",...c,...s}}),[s,a,o.setFloating,c])}function kj(e,t,n){return n&&"row"===n.draggedCellOrientation?new DOMRect(t.x,n.mousePos,t.width,0):new DOMRect(t.x,e.y,t.width,e.height)}function kF(e,t,n){return n&&"col"===n.draggedCellOrientation?new DOMRect(n.mousePos,t.y,0,t.height):new DOMRect(e.x,t.y,e.width,t.height)}function kU(e,t,n,o,i){let{refs:l,update:s,context:a,floatingStyles:c}=vL({open:t,placement:"row"===e?"left":"top",middleware:[yJ("row"===e?-10:-12)]}),{isMounted:d,styles:u}=vz(a);return(0,r.useEffect)(()=>{s()},[n,o,s]),(0,r.useEffect)(()=>{null===n||null===o||l.setReference({getBoundingClientRect:()=>("row"===e?kj:kF)(n,o,i)})},[i,e,n,o,l]),(0,r.useMemo)(()=>({isMounted:d,ref:l.setFloating,style:{display:"flex",...u,...c}}),[c,d,l.setFloating,u])}let kW=e=>{var t,n;let o=wc(),[i,l]=(0,r.useState)(null);if(!o.tableHandles)throw Error("TableHandlesController can only be used when BlockNote editor schema contains table block");let s={rowDragStart:o.tableHandles.rowDragStart,colDragStart:o.tableHandles.colDragStart,dragEnd:o.tableHandles.dragEnd,freezeHandles:o.tableHandles.freezeHandles,unfreezeHandles:o.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:c}=s,d=(0,r.useCallback)(()=>{a(),v(!0),b(!0)},[a]),u=(0,r.useCallback)(()=>{c(),v(!1),b(!1)},[c]),h=wu(o.tableHandles.onUpdate.bind(o.tableHandles)),p=(0,r.useMemo)(()=>{var e,t;return null!=h&&h.draggingState?{draggedCellOrientation:null==(e=null==h?void 0:h.draggingState)?void 0:e.draggedCellOrientation,mousePos:null==(t=null==h?void 0:h.draggingState)?void 0:t.mousePos}:void 0},[null==h?void 0:h.draggingState,null==(t=null==h?void 0:h.draggingState)?void 0:t.draggedCellOrientation,null==(n=null==h?void 0:h.draggingState)?void 0:n.mousePos]),{rowHandle:f,colHandle:m}=function(e,t,n,o){let i=kU("row",e,t,n,o),l=kU("col",e,t,n,o);return(0,r.useMemo)(()=>({rowHandle:i,colHandle:l}),[l,i])}((null==h?void 0:h.show)||!1,(null==h?void 0:h.referencePosCell)||null,(null==h?void 0:h.referencePosTable)||null,p),{addOrRemoveColumnsButton:g,addOrRemoveRowsButton:$}=function(e,t,n){let o=kV("addOrRemoveRows",t,n),i=kV("addOrRemoveColumns",e,n);return(0,r.useMemo)(()=>({addOrRemoveRowsButton:o,addOrRemoveColumnsButton:i}),[i,o])}((null==h?void 0:h.showAddOrRemoveColumnsButton)||!1,(null==h?void 0:h.showAddOrRemoveRowsButton)||!1,(null==h?void 0:h.referencePosTable)||null),[_,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1);if(!h)return null;let w=e.tableHandle||kB,k=e.extendButton||kA;return(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)("div",{ref:l}),(0,b2.jsxs)(vT,{root:h.widgetContainer,children:[!_&&i&&f.isMounted&&void 0!==h.rowIndex&&(0,b2.jsx)("div",{ref:f.ref,style:f.style,children:(0,b2.jsx)(w,{editor:o,orientation:"row",showOtherSide:()=>v(!1),hideOtherSide:()=>v(!0),index:h.rowIndex,block:h.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),!y&&i&&m.isMounted&&void 0!==h.colIndex&&(0,b2.jsx)("div",{ref:m.ref,style:m.style,children:(0,b2.jsx)(w,{editor:o,orientation:"column",showOtherSide:()=>b(!1),hideOtherSide:()=>b(!0),index:h.colIndex,block:h.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:i})}),(0,b2.jsx)("div",{ref:$.ref,style:$.style,children:(0,b2.jsx)(k,{editor:o,orientation:"addOrRemoveRows",block:h.block,onMouseDown:d,onMouseUp:u})}),(0,b2.jsx)("div",{ref:g.ref,style:g.style,children:(0,b2.jsx)(k,{editor:o,orientation:"addOrRemoveColumns",block:h.block,onMouseDown:d,onMouseUp:u})})]})]})};function kG(e){let t=wc();if(!t)throw Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return(0,b2.jsxs)(b2.Fragment,{children:[!1!==e.formattingToolbar&&(0,b2.jsx)(km,{}),!1!==e.linkToolbar&&(0,b2.jsx)(ky,{}),!1!==e.slashMenu&&(0,b2.jsx)(k7,{triggerCharacter:"/"}),!1!==e.emojiPicker&&(0,b2.jsx)(kT,{triggerCharacter:":",columns:10,minQueryLength:2}),!1!==e.sideMenu&&(0,b2.jsx)(k2,{}),t.filePanel&&!1!==e.filePanel&&(0,b2.jsx)(w_,{}),t.tableHandles&&!1!==e.tableHandles&&(0,b2.jsx)(kW,{})]})}let kq=()=>{let e=(0,r.useMemo)(()=>{var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)")},[]),t=(0,r.useMemo)(()=>{var e;return null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: light)")},[]),n=null==e?void 0:e.matches,o=null==t?void 0:t.matches,[i,l]=(0,r.useState)(n?"dark":o?"light":"no-preference");return(0,r.useEffect)(()=>{l(n?"dark":o?"light":"no-preference")},[n,o]),(0,r.useEffect)(()=>{if("function"==typeof(null==e?void 0:e.addEventListener)){let n=e=>{let{matches:t}=e;return t&&l("dark")},r=e=>{let{matches:t}=e;return t&&l("light")};return null==e||e.addEventListener("change",n),null==t||t.addEventListener("change",r),()=>{null==e||e.removeEventListener("change",n),null==t||t.removeEventListener("change",r)}}{let o=()=>l(e.matches?"dark":t.matches?"light":"no-preference");return null==e||e.addEventListener("change",o),null==t||t.addEventListener("change",o),()=>{null==e||e.removeEventListener("change",o),null==t||t.removeEventListener("change",o)}}},[e,t]),window.matchMedia,i},kK=e=>{let{renderers:t}=e;return(0,b2.jsx)(b2.Fragment,{children:Object.entries(t).map(e=>{let[t,n]=e;return(0,yf.createPortal)(n.reactElement,n.element,t)})})};function kJ(e){let[t,n]=(0,r.useState)({});return(0,r.useEffect)(()=>(e.editor._tiptapEditor.contentComponent={setRenderer(e,t){n(n=>({...n,[e]:t}))},removeRenderer(e){n(t=>{let n={...t};return delete n[e],n})}},queueMicrotask(()=>{e.editor._tiptapEditor.createNodeViews()}),()=>{e.editor._tiptapEditor.contentComponent=null}),[e.editor._tiptapEditor]),(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(kK,{renderers:t}),e.children]})}let kZ=(0,r.forwardRef)((e,t)=>{let[n,o]=(0,r.useState)();return(0,r.useImperativeHandle)(t,()=>(e,t)=>{(0,yf.flushSync)(()=>{o({node:e,container:t})}),o(void 0)},[]),(0,b2.jsx)(b2.Fragment,{children:n&&(0,yf.createPortal)(n.node,n.container)})}),kX=()=>{},kQ=r.forwardRef(function(e,t){let{editor:n,className:o,theme:i,children:l,editable:s,onSelectionChange:a,onChange:c,formattingToolbar:d,linkToolbar:u,slashMenu:h,emojiPicker:p,sideMenu:f,filePanel:m,tableHandles:g,...$}=e,[_,b]=(0,r.useState)(),y=wa(),v=kq(),w=(null==y?void 0:y.colorSchemePreference)||v,k=i||("dark"===w?"dark":"light");wb(c||kX,n),wy(a||kX,n),(0,r.useEffect)(()=>{n.isEditable=!1!==s},[s,n]);let x=(0,r.useMemo)(()=>(0,b2.jsxs)(b2.Fragment,{children:[l,(0,b2.jsx)(kG,{formattingToolbar:d,linkToolbar:u,slashMenu:h,emojiPicker:p,sideMenu:f,filePanel:m,tableHandles:g})]}),[l,d,u,h,p,f,m,g]),C=(0,r.useMemo)(()=>({...y,editor:n,setContentEditableProps:b}),[y,n]),S=(0,r.useCallback)(e=>{n.elementRenderer=e},[n]);return(0,b2.jsxs)(ws.Provider,{value:C,children:[(0,b2.jsx)(kZ,{ref:S}),!n.headless&&(0,b2.jsx)(kJ,{editor:n,children:(0,b2.jsxs)("div",{className:gQ("bn-container",k||"",o||""),"data-color-scheme":k,...$,ref:t,children:[(0,b2.jsx)("div",{"aria-autocomplete":"list","aria-haspopup":"listbox",ref:n.mount,..._}),x]})})]})});var kY,xe=yf;function xt(e,t){let n,r=document.createElement("div"),o;if(null!=t&&t.elementRenderer?t.elementRenderer(e(e=>n=e||void 0),r):(o=kY(r),(0,yf.flushSync)(()=>{o.render(e(e=>n=e||void 0))})),!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};null==n||n.setAttribute("data-tmp-find","true");let i=r.cloneNode(!0),l=i.firstElementChild,s=i.querySelector("[data-tmp-find]");return null==s||s.removeAttribute("data-tmp-find"),null==o||o.unmount(),{dom:l,contentDOM:s||void 0}}function xn(e){var t;return(0,b2.jsx)(wo,{...Object.fromEntries(Object.entries(e.domAttributes||{}).filter(e=>{let[t]=e;return"class"!==t})),className:gQ("bn-block-content",(null==(t=e.domAttributes)?void 0:t.class)||""),"data-content-type":e.blockType,...Object.fromEntries(Object.entries(e.blockProps).filter(t=>{let[n,r]=t;return!$r.includes(n)&&r!==e.propSchema[n].default}).map(e=>{let[t,n]=e;return[$o(t),n]})),"data-file-block":!0===e.isFileBlock||void 0,children:e.children})}function xr(e,t){let n=$c({name:e.type,content:"inline"===e.content?"inline*":"",group:"blockContent",selectable:e.isSelectable??!0,addAttributes:()=>$l(e.propSchema),parseHTML:()=>$f(e,t.parse),renderHTML(t){let{HTMLAttributes:n}=t,r=document.createElement("div");return $a({dom:r,contentDOM:"inline"===e.content?r:void 0},e.type,{},e.propSchema,e.isFileBlock,n)},addNodeView(){return n=>{var o,i;let l=(o=n=>{var o;let i=this.options.editor,l=$s(n.getPos,i,this.editor,e.type),s=(null==(o=this.options.domAttributes)?void 0:o.blockContent)||{},a=(e=>{let t=e.as||"div",{nodeViewContentRef:n}=wr();return r.createElement(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style}})})({}).ref,c=t.render;return(0,b2.jsx)(xn,{blockType:l.type,blockProps:l.props,propSchema:e.propSchema,isFileBlock:e.isFileBlock,domAttributes:s,children:(0,b2.jsx)(c,{block:l,editor:i,contentRef:a})})},i={className:"bn-react-node-view-renderer"},e=>e.editor.contentComponent?new wl(o,e,i):{})(n);return!1===e.isSelectable&&$p(l,this.editor),l}}});return $d(e,{node:n,toInternalHTML(r,o){var i,l;let s=(null==(i=n.options.domAttributes)?void 0:i.blockContent)||{},a=t.render,c=xt(t=>(0,b2.jsx)(xn,{blockType:r.type,blockProps:r.props,propSchema:e.propSchema,domAttributes:s,children:(0,b2.jsx)(a,{block:r,editor:o,contentRef:t})}),o);return null==(l=c.contentDOM)||l.setAttribute("data-editable",""),c},toExternalHTML(r,o){var i,l;let s=(null==(i=n.options.domAttributes)?void 0:i.blockContent)||{},a=t.toExternalHTML||t.render,c=xt(t=>(0,b2.jsx)(xn,{blockType:r.type,blockProps:r.props,propSchema:e.propSchema,domAttributes:s,children:(0,b2.jsx)(a,{block:r,editor:o,contentRef:t})}),o);return null==(l=c.contentDOM)||l.setAttribute("data-editable",""),c}})}kY=xe.createRoot,xe.hydrateRoot;let xo=e=>!function e(t){let[n,o]=(0,r.useState)(!1);return function(e){let t=wc();(0,r.useEffect)(()=>t.onUploadStart(e),[e,t])}(e=>{e===t&&o(!0)}),function(e){let t=wc();(0,r.useEffect)(()=>t.onUploadEnd(e),[e,t])}(e=>{e===t&&o(!1)}),n}(e.block.id)?(0,b2.jsx)("div",{className:"bn-file-block-content-wrapper",children:""===e.block.props.url?(0,b2.jsx)(xs,{...e}):!1===e.block.props.showPreview?(0,b2.jsx)(xl,{block:e.block,editor:e.editor,children:(0,b2.jsx)(xi,{block:e.block,editor:e.editor})}):(0,b2.jsx)(xl,{block:e.block,editor:e.editor,children:e.children})}):(0,b2.jsx)("div",{className:"bn-file-loading-preview",children:"Loading..."}),xi=e=>(0,b2.jsxs)("div",{className:"bn-file-default-preview",contentEditable:!1,draggable:!1,children:[(0,b2.jsx)("div",{className:"bn-file-default-preview-icon",children:(0,b2.jsx)(wE,{size:24})}),(0,b2.jsx)("p",{className:"bn-file-default-preview-name",children:e.block.props.name})]}),xl=e=>(0,b2.jsxs)("div",{className:"bn-file-and-caption-wrapper",children:[e.children,e.block.props.caption&&(0,b2.jsx)("p",{className:"bn-file-caption",children:e.block.props.caption})]}),xs=e=>{let t=wf(),n=(0,r.useCallback)(e=>{e.preventDefault()},[]),o=(0,r.useCallback)(()=>{e.editor.dispatch(e.editor._tiptapEditor.state.tr.setMeta(e.editor.filePanel.plugin,{block:e.block}))},[e.block,e.editor]);return(0,b2.jsxs)("div",{className:"bn-add-file-button",onMouseDown:n,onClick:o,children:[(0,b2.jsx)("div",{className:"bn-add-file-button-icon",children:e.buttonIcon||(0,b2.jsx)(wE,{size:24})}),(0,b2.jsx)("div",{className:"bn-add-file-button-text",children:e.buttonText||t.file_blocks.file.add_button_text})]})},xa=e=>(0,b2.jsxs)("div",{children:[e.children,(0,b2.jsx)("p",{children:e.caption})]}),xc=e=>(0,b2.jsxs)("figure",{children:[e.children,(0,b2.jsx)("figcaption",{children:e.caption})]}),xd=e=>{let[t,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{let t=t=>{let n;(n="center"===e.block.props.textAlignment?"left"===o.handleUsed?o.initialWidth+2*(o.initialClientX-t.clientX):o.initialWidth+2*(t.clientX-o.initialClientX):"left"===o.handleUsed?o.initialWidth+o.initialClientX-t.clientX:o.initialWidth+t.clientX-o.initialClientX)<64?e.setWidth(64):n>e.editor.domElement.firstElementChild.clientWidth?e.setWidth(e.editor.domElement.firstElementChild.clientWidth):e.setWidth(n)},n=()=>{i(void 0),e.editor.updateBlock(e.block,{props:{previewWidth:e.width}})};return o&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)}},[e,o]);let l=(0,r.useCallback)(()=>{e.editor.isEditable&&n(!0)},[e.editor.isEditable]),s=(0,r.useCallback)(()=>{n(!1)},[]),a=(0,r.useCallback)(t=>{t.preventDefault(),i({handleUsed:"left",initialWidth:e.width,initialClientX:t.clientX})},[e.width]),c=(0,r.useCallback)(t=>{t.preventDefault(),i({handleUsed:"right",initialWidth:e.width,initialClientX:t.clientX})},[e.width]);return(0,b2.jsxs)("div",{className:"bn-visual-media-wrapper",onMouseEnter:l,onMouseLeave:s,children:[e.children,(t||o)&&(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)("div",{className:"bn-visual-media-resize-handle",style:{left:"4px"},onMouseDown:a}),(0,b2.jsx)("div",{className:"bn-visual-media-resize-handle",style:{right:"4px"},onMouseDown:c})]})]})};function xu(e){let t=wc(),[n,o]=(0,r.useState)("loading"),[i,l]=(0,r.useState)();if((0,r.useEffect)(()=>{let n=!0;return(async()=>{let r="";o("loading");try{r=await t.resolveFileUrl(e)}catch{return void o("error")}n&&(o("loaded"),l(r))})(),()=>{n=!1}},[t,e]),"loaded"!==n)return{loadingState:n};if(!i)throw Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:i}}let xh=e=>{let t=xu(e.block.props.url);return"loading"===t.loadingState?null:(0,b2.jsx)("audio",{className:"bn-audio",src:t.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},xp=(xr($4,{render:e=>(0,b2.jsx)(xo,{...e,buttonText:e.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:(0,b2.jsx)(w9,{size:24}),children:(0,b2.jsx)(xh,{block:e.block,editor:e.editor})}),parse:$M,toExternalHTML(e){if(!e.block.props.url)return(0,b2.jsx)("p",{children:"Add audio"});let t=e.block.props.showPreview?(0,b2.jsx)("audio",{src:e.block.props.url}):(0,b2.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,b2.jsx)(xc,{caption:e.block.props.caption,children:t}):(0,b2.jsx)(xa,{caption:e.block.props.caption,children:t}):t}}),xr($A,{render:e=>(0,b2.jsx)(xo,{...e,children:(0,b2.jsx)(xi,{block:e.block,editor:e.editor})}),parse:$R,toExternalHTML(e){if(!e.block.props.url)return(0,b2.jsx)("p",{children:"Add file"});let t=(0,b2.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?(0,b2.jsx)(xa,{caption:e.block.props.caption,children:t}):t}}),e=>{let[t,n]=(0,r.useState)(Math.min(e.block.props.previewWidth,e.editor.domElement.firstElementChild.clientWidth)),o=xu(e.block.props.url);return"loading"===o.loadingState?null:(0,b2.jsx)(xd,{...e,width:t,setWidth:n,children:(0,b2.jsx)("img",{className:"bn-visual-media",src:o.downloadUrl,alt:e.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1,width:t})})}),xf=(xr($V,{render:e=>(0,b2.jsx)(xo,{...e,buttonText:e.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:(0,b2.jsx)(wD,{size:24}),children:(0,b2.jsx)(xp,{block:e.block,editor:e.editor})}),parse:$j,toExternalHTML(e){if(!e.block.props.url)return(0,b2.jsx)("p",{children:"Add image"});let t=e.block.props.showPreview?(0,b2.jsx)("img",{src:e.block.props.url,alt:e.block.props.name||e.block.props.caption||"BlockNote image",width:e.block.props.previewWidth}):(0,b2.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,b2.jsx)(xc,{caption:e.block.props.caption,children:t}):(0,b2.jsx)(xa,{caption:e.block.props.caption,children:t}):t}}),e=>{let[t,n]=(0,r.useState)(Math.min(e.block.props.previewWidth,e.editor.domElement.firstElementChild.clientWidth)),o=xu(e.block.props.url);return"loading"===o.loadingState?null:(0,b2.jsx)(xd,{...e,width:t,setWidth:n,children:(0,b2.jsx)("video",{className:"bn-visual-media",src:o.downloadUrl,controls:!0,contentEditable:!1,draggable:!1,width:t})})});xr(_c,{render:e=>(0,b2.jsx)(xo,{...e,buttonText:e.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:(0,b2.jsx)(wz,{size:24}),children:(0,b2.jsx)(xf,{block:e.block,editor:e.editor})}),parse:_d,toExternalHTML(e){if(!e.block.props.url)return(0,b2.jsx)("p",{children:"Add video"});let t=e.block.props.showPreview?(0,b2.jsx)("video",{src:e.block.props.url}):(0,b2.jsx)("a",{href:e.block.props.url,children:e.block.props.name||e.block.props.url});return e.block.props.caption?e.block.props.showPreview?(0,b2.jsx)(xc,{caption:e.block.props.caption,children:t}):(0,b2.jsx)(xa,{caption:e.block.props.caption,children:t}):t}});let xm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,r.useMemo)(()=>{let t=bk.create(e);return window&&(window.ProseMirror=t._tiptapEditor),t},t)};function xg(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}function x$(e){return Object.keys(e).reduce((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t),{})}function x_(e){return"0rem"===e?"0rem":`calc(${e} * var(--mantine-scale))`}function xb(e){let{shouldScale:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function n(r){if(0===r||"0"===r)return`0${e}`;if("number"==typeof r){let o=`${r/16}${e}`;return t?x_(o):o}if("string"==typeof r){if(""===r||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(e=>n(e)).join(",");if(r.includes(" "))return r.split(" ").map(e=>n(e)).join(" ");if(r.includes(e))return t?x_(r):r;let i=r.replace("px","");if(!Number.isNaN(Number(i))){let l=`${Number(i)/16}${e}`;return t?x_(l):l}}return r}}let xy=xb("rem",{shouldScale:!0}),xv=xb("em");function xw(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)?function(e){let t=e.replace("#","");if(3===t.length){let n=t.split("");t=[n[0],n[0],n[1],n[1],n[2],n[2]].join("")}if(8===t.length){let r=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:r}}let o=parseInt(t,16);return{r:o>>16&255,g:o>>8&255,b:255&o,a:1}}(e):e.startsWith("rgb")?function(e){let[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o||1}}(e):e.startsWith("hsl")?function(e){let t=e.match(/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i);if(!t)return{r:0,g:0,b:0,a:1};let n=parseInt(t[1],10),r=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100,i=t[5]?parseFloat(t[5]):void 0,l=(1-Math.abs(2*o-1))*r,s=n/60,a=l*(1-Math.abs(s%2-1)),c=o-l/2,d,u,h;return s>=0&&s<1?(d=l,u=a,h=0):s>=1&&s<2?(d=a,u=l,h=0):s>=2&&s<3?(d=0,u=l,h=a):s>=3&&s<4?(d=0,u=a,h=l):s>=4&&s<5?(d=a,u=0,h=l):(d=l,u=0,h=a),{r:Math.round(255*(d+c)),g:Math.round(255*(u+c)),b:Math.round(255*(h+c)),a:i||1}}(e):{r:0,g:0,b:0,a:1}}function xk(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${100*t}%)`;let{r:n,g:r,b:o,a:i}=xw(e),l=1-t,s=e=>Math.round(e*l);return`rgba(${s(n)}, ${s(r)}, ${s(o)}, ${i})`}function x0(e,t){return"number"==typeof e.primaryShade?e.primaryShade:"dark"===t?e.primaryShade.dark:e.primaryShade.light}function xx(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function xC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.179;return!e.startsWith("var(")&&function e(t){if(t.startsWith("oklch("))return(function(e){let t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}(t)||0)/100;let{r:n,g:r,b:o}=xw(t);return .2126*xx(n/255)+.7152*xx(r/255)+.0722*xx(o/255)}(e)>t}function xS(e){let{color:t,theme:n,colorScheme:r}=e;if("string"!=typeof t)throw Error("[@mantine/core] Failed to parse color. Expected color to be a string, instead got "+typeof t);if("bright"===t)return{color:t,value:"dark"===r?n.white:n.black,shade:void 0,isThemeColor:!1,isLight:xC("dark"===r?n.white:n.black,n.luminanceThreshold),variable:"--mantine-color-bright"};if("dimmed"===t)return{color:t,value:"dark"===r?n.colors.dark[2]:n.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:xC("dark"===r?n.colors.dark[2]:n.colors.gray[6],n.luminanceThreshold),variable:"--mantine-color-dimmed"};if("white"===t||"black"===t)return{color:t,value:"white"===t?n.white:n.black,shade:void 0,isThemeColor:!1,isLight:xC("white"===t?n.white:n.black,n.luminanceThreshold),variable:`--mantine-color-${t}`};let[o,i]=t.split("."),l=i?Number(i):void 0,s=o in n.colors;if(s){let a=void 0!==l?n.colors[o][l]:n.colors[o][x0(n,r||"light")];return{color:o,value:a,shade:l,isThemeColor:s,isLight:xC(a,n.luminanceThreshold),variable:i?`--mantine-color-${o}-${l}`:`--mantine-color-${o}-filled`}}return{color:t,value:t,isThemeColor:s,isLight:xC(t,n.luminanceThreshold),shade:l,variable:void 0}}function x1(e,t){let n=xS({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function x2(e,t){let n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg||t.defaultGradient.deg||0},r=x1(n.from,t),o=x1(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function x3(e,t){if("string"!=typeof e||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var("))return`color-mix(in srgb, ${e}, transparent ${100*(1-t)}%)`;if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);let{r:n,g:r,b:o}=xw(e);return`rgba(${n}, ${r}, ${o}, ${t})`}let xE=x3,x4="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",xM={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:{dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver(e){let{color:t,theme:n,variant:r,gradient:o,autoContrast:i}=e,l=xS({color:t,theme:n}),s="boolean"==typeof i?i:n.autoContrast;if("filled"===r){let a=s&&l.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return l.isThemeColor?void 0===l.shade?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${xy(1)} solid transparent`}:{background:`var(--mantine-color-${l.color}-${l.shade})`,hover:`var(--mantine-color-${l.color}-${9===l.shade?8:l.shade+1})`,color:a,border:`${xy(1)} solid transparent`}:{background:t,hover:xk(t,.1),color:a,border:`${xy(1)} solid transparent`}}if("light"===r){if(l.isThemeColor){if(void 0===l.shade)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${xy(1)} solid transparent`};let c=n.colors[l.color][l.shade];return{background:x3(c,.1),hover:x3(c,.12),color:`var(--mantine-color-${l.color}-${Math.min(l.shade,6)})`,border:`${xy(1)} solid transparent`}}return{background:x3(t,.1),hover:x3(t,.12),color:t,border:`${xy(1)} solid transparent`}}if("outline"===r)return l.isThemeColor?void 0===l.shade?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${xy(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:x3(n.colors[l.color][l.shade],.05),color:`var(--mantine-color-${l.color}-${l.shade})`,border:`${xy(1)} solid var(--mantine-color-${l.color}-${l.shade})`}:{background:"transparent",hover:x3(t,.05),color:t,border:`${xy(1)} solid ${t}`};if("subtle"===r)return l.isThemeColor?void 0===l.shade?{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${xy(1)} solid transparent`}:{background:"transparent",hover:x3(n.colors[l.color][l.shade],.12),color:`var(--mantine-color-${l.color}-${Math.min(l.shade,6)})`,border:`${xy(1)} solid transparent`}:{background:"transparent",hover:x3(t,.12),color:t,border:`${xy(1)} solid transparent`};return"transparent"===r?l.isThemeColor?void 0===l.shade?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${xy(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${l.color}-${Math.min(l.shade,6)})`,border:`${xy(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${xy(1)} solid transparent`}:"white"===r?l.isThemeColor?void 0===l.shade?{background:"var(--mantine-color-white)",hover:xk(n.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${xy(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:xk(n.white,.01),color:`var(--mantine-color-${l.color}-${l.shade})`,border:`${xy(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:xk(n.white,.01),color:t,border:`${xy(1)} solid transparent`}:"gradient"===r?{background:x2(o,n),hover:x2(o,n),color:"var(--mantine-color-white)",border:"none"}:"default"===r?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${xy(1)} solid var(--mantine-color-default-border)`}:{}},autoContrast:!1,luminanceThreshold:.3,fontFamily:x4,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:x4,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:xy(34),lineHeight:"1.3"},h2:{fontSize:xy(26),lineHeight:"1.35"},h3:{fontSize:xy(22),lineHeight:"1.4"},h4:{fontSize:xy(18),lineHeight:"1.45"},h5:{fontSize:xy(16),lineHeight:"1.5"},h6:{fontSize:xy(14),lineHeight:"1.5"}}},fontSizes:{xs:xy(12),sm:xy(14),md:xy(16),lg:xy(18),xl:xy(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:xy(2),sm:xy(4),md:xy(8),lg:xy(16),xl:xy(32)},spacing:{xs:xy(10),sm:xy(12),md:xy(16),lg:xy(20),xl:xy(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${xy(1)} ${xy(3)} rgba(0, 0, 0, 0.05), 0 ${xy(1)} ${xy(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${xy(1)} ${xy(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xy(10)} ${xy(15)} ${xy(-5)}, rgba(0, 0, 0, 0.04) 0 ${xy(7)} ${xy(7)} ${xy(-5)}`,md:`0 ${xy(1)} ${xy(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xy(20)} ${xy(25)} ${xy(-5)}, rgba(0, 0, 0, 0.04) 0 ${xy(10)} ${xy(10)} ${xy(-5)}`,lg:`0 ${xy(1)} ${xy(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xy(28)} ${xy(23)} ${xy(-7)}, rgba(0, 0, 0, 0.04) 0 ${xy(12)} ${xy(12)} ${xy(-7)}`,xl:`0 ${xy(1)} ${xy(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xy(36)} ${xy(28)} ${xy(-7)}, rgba(0, 0, 0, 0.04) 0 ${xy(17)} ${xy(17)} ${xy(-7)}`},other:{},components:{}};function xT(e){return e&&"object"==typeof e&&!Array.isArray(e)}function x8(e,t){let n={...e},r=t;return xT(e)&&xT(t)&&Object.keys(t).forEach(t=>{xT(r[t])?n[t]=t in e?x8(n[t],r[t]):r[t]:n[t]=r[t]}),n}function x6(e){return!(e<0||e>9)&&parseInt(e.toString(),10)===e}function xN(e){if(!(e.primaryColor in e.colors))throw Error("[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color");if("object"==typeof e.primaryShade&&(!x6(e.primaryShade.dark)||!x6(e.primaryShade.light))||"number"==typeof e.primaryShade&&!x6(e.primaryShade))throw Error("[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }")}let x5=(0,r.createContext)(null);function x7(){let e=(0,r.useContext)(x5);if(!e)throw Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function xL(e){let{theme:t,children:n,inherit:o=!0}=e,i=(0,r.useContext)(x5)||xM,l=(0,r.useMemo)(()=>(function(e,t){if(!t)return xN(e),e;let n=x8(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),xN(n),n})(o?i:xM,t),[t,i,o]);return(0,b2.jsx)(x5.Provider,{value:l,children:n})}function xP(e,t,n){let r=x7(),o=r.components[e]?.defaultProps;return{...t,..."function"==typeof o?o(r):o,...x$(n)}}function xA(e){return e}function xR(e){let t=(0,r.forwardRef)(e);return t.extend=xA,t.withProps=e=>{let n=(0,r.forwardRef)((n,r)=>(0,b2.jsx)(t,{...e,...n,ref:r}));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t}function xO(e){let t=(0,r.forwardRef)(e);return t.withProps=e=>{let n=(0,r.forwardRef)((n,r)=>(0,b2.jsx)(t,{...e,...n,ref:r}));return n.extend=t.extend,n.displayName=`WithProps(${t.displayName})`,n},t.extend=xA,t}function xD(e){if("number"==typeof e)return!0;if("string"==typeof e){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&""!==e.trim())return!0;let t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(e=>t.test(e))}return!1}function xI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"size",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e)return xD(e)?n?xy(e):e:`var(--${t}-${e})`}function xH(e){return xI(e,"mantine-spacing")}function xz(e){return void 0===e?"var(--mantine-radius-default)":xI(e,"mantine-radius")}function x9(e){return xI(e,"mantine-font-size")}xL.displayName="@mantine/core/MantineThemeProvider";let xB=(0,r.createContext)(null);function xV(){let e=(0,r.useContext)(xB);if(!e)throw Error("[@mantine/core] MantineProvider was not found in tree");return e}function xj(){return xV().getStyleNonce}function xF(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e){if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=xF(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n)}return r}let xU=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=xF(e))&&(r&&(r+=" "),r+=t);return r},xW={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"},xG={};function xq(e){let{theme:t,classNames:n,props:r,stylesCtx:o}=e;return function(e){let t={};return e.forEach(e=>{Object.entries(e).forEach(e=>{let[n,r]=e;t[n]?t[n]=xU(t[n],r):t[n]=r})}),t}((Array.isArray(n)?n:[n]).map(e=>"function"==typeof e?e(t,r,o):e||xG))}function xK(e){let{selector:t,stylesCtx:n,theme:r,classNames:o,props:i}=e;return xq({theme:r,classNames:o,props:i,stylesCtx:n})[t]}function xJ(e){let{theme:t,styles:n,props:r,stylesCtx:o}=e;return(Array.isArray(n)?n:[n]).reduce((e,n)=>"function"==typeof n?{...e,...n(t,r,o)}:{...e,...n},{})}function xZ(e){let{style:t,theme:n}=e;return Array.isArray(t)?[...t].reduce((e,t)=>({...e,...xZ({style:t,theme:n})}),{}):"function"==typeof t?t(n):null==t?{}:t}function xX(e){let{name:t,classes:n,props:r,stylesCtx:o,className:i,style:l,rootSelector:s="root",unstyled:a,classNames:c,styles:d,vars:u,varsResolver:h}=e,p=x7(),f=xV().classNamesPrefix,m=xV().withStaticClasses,g=xV().headless,$=(Array.isArray(t)?t:[t]).filter(e=>e),{withStylesTransform:_,getTransformedStyles:b}=function e(t){let{props:n,stylesCtx:r,themeName:o}=t,i=x7(),l=xV().stylesTransform?.styles?.();return{getTransformedStyles(e){if(!l)return[];let t=e.map(e=>l(e,{props:n,theme:i,ctx:r}));return[...t,...o.map(e=>l(i.components[e]?.styles,{props:n,theme:i,ctx:r}))].filter(Boolean)},withStylesTransform:!!l}}({props:r,stylesCtx:o,themeName:$});return(e,t)=>({className:function e(t){let{theme:n,options:r,themeName:o,selector:i,classNamesPrefix:l,classNames:s,classes:a,unstyled:c,className:d,rootSelector:u,props:h,stylesCtx:p,withStaticClasses:f,headless:m,transformedStyles:g}=t;return xU(function(e){let{theme:t,options:n,unstyled:r}=e;return xU(n?.focusable&&!r&&(t.focusClassName||xW[t.focusRing]),n?.active&&!r&&t.activeClassName)}({theme:n,options:r,unstyled:c||m}),function(e){let{themeName:t,theme:n,selector:r,props:o,stylesCtx:i}=e;return t.map(e=>xq({theme:n,classNames:n.components[e]?.classNames,props:o,stylesCtx:i})?.[r])}({theme:n,themeName:o,selector:i,props:h,stylesCtx:p}),function(e){let{options:t,classes:n,selector:r,unstyled:o}=e;return t?.variant&&!o?n[`${r}--${t.variant}`]:void 0}({options:r,classes:a,selector:i,unstyled:c}),xK({selector:i,stylesCtx:p,theme:n,classNames:s,props:h}),xK({selector:i,stylesCtx:p,theme:n,classNames:g,props:h}),function(e){let{selector:t,stylesCtx:n,options:r,props:o,theme:i}=e;return xq({theme:i,classNames:r?.classNames,props:r?.props||o,stylesCtx:n})[t]}({selector:i,stylesCtx:p,options:r,props:h,theme:n}),function(e){let{rootSelector:t,selector:n,className:r}=e;return t===n?r:void 0}({rootSelector:u,selector:i,className:d}),function(e){let{selector:t,classes:n,unstyled:r}=e;return r?void 0:n[t]}({selector:i,classes:a,unstyled:c||m}),f&&!m&&function(e){let{themeName:t,classNamesPrefix:n,selector:r,withStaticClass:o}=e;return!1===o?[]:t.map(e=>`${n}-${e}-${r}`)}({themeName:o,classNamesPrefix:l,selector:i,withStaticClass:r?.withStaticClass}),r?.className)}({theme:p,options:t,themeName:$,selector:e,classNamesPrefix:f,classNames:c,classes:n,unstyled:a,className:i,rootSelector:s,props:r,stylesCtx:o,withStaticClasses:m,headless:g,transformedStyles:b([t?.styles,d])}),style:function e(t){let{theme:n,themeName:r,selector:o,options:i,props:l,stylesCtx:s,rootSelector:a,styles:c,style:d,vars:u,varsResolver:h,headless:p,withStylesTransform:f}=t;return{...!f&&function e(t){let{theme:n,themeName:r,props:o,stylesCtx:i,selector:l}=t;return r.map(e=>xJ({theme:n,styles:n.components[e]?.styles,props:o,stylesCtx:i})[l]).reduce((e,t)=>({...e,...t}),{})}({theme:n,themeName:r,props:l,stylesCtx:s,selector:o}),...!f&&xJ({theme:n,styles:c,props:l,stylesCtx:s})[o],...!f&&xJ({theme:n,styles:i?.styles,props:i?.props||l,stylesCtx:s})[o],...function e(t){var n;let{vars:r,varsResolver:o,theme:i,props:l,stylesCtx:s,selector:a,themeName:c,headless:d}=t;return(n=[d?{}:o?.(i,l,s),...c.map(e=>i.components?.[e]?.vars?.(i,l,s)),r?.(i,l,s)]).reduce((e,t)=>(t&&Object.keys(t).forEach(n=>{e[n]={...e[n],...x$(t[n])}}),e),{})?.[a]}({theme:n,props:l,stylesCtx:s,vars:u,varsResolver:h,selector:o,themeName:r,headless:p}),...a===o?xZ({style:d,theme:n}):null,...xZ({style:i?.style,theme:n})}}({theme:p,themeName:$,selector:e,options:t,props:r,stylesCtx:o,rootSelector:s,styles:d,style:l,vars:u,varsResolver:h,headless:g,withStylesTransform:_})})}function xQ(e){let{m:t,mx:n,my:r,mt:o,mb:i,ml:l,mr:s,me:a,ms:c,p:d,px:u,py:h,pt:p,pb:f,pl:m,pr:g,pe:$,ps:_,bd:b,bg:y,c:v,opacity:w,ff:k,fz:x,fw:C,lts:S,ta:E,lh:M,fs:T,tt:N,td:L,w:P,miw:A,maw:R,h:O,mih:D,mah:I,bgsz:H,bgp:z,bgr:B,bga:V,pos:j,top:F,left:U,bottom:W,right:G,inset:q,display:K,flex:J,hiddenFrom:Z,visibleFrom:X,lightHidden:Q,darkHidden:Y,sx:ee,...et}=e;return{styleProps:x$({m:t,mx:n,my:r,mt:o,mb:i,ml:l,mr:s,me:a,ms:c,p:d,px:u,py:h,pt:p,pb:f,pl:m,pr:g,pe:$,ps:_,bd:b,bg:y,c:v,opacity:w,ff:k,fz:x,fw:C,lts:S,ta:E,lh:M,fs:T,tt:N,td:L,w:P,miw:A,maw:R,h:O,mih:D,mah:I,bgsz:H,bgp:z,bgr:B,bga:V,pos:j,top:F,left:U,bottom:W,right:G,inset:q,display:K,flex:J,hiddenFrom:Z,visibleFrom:X,lightHidden:Q,darkHidden:Y,sx:ee}),rest:et}}function xY(e){return Object.keys(e)}function Ce(e){return xY(e).reduce((t,n)=>{var r;return void 0!==e[n]?`${t}${(r=n).replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}:${e[n]};`:t},"").trim()}function Ct(e){let t=xj();return(0,b2.jsx)("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:function e(t){let{selector:n,styles:r,media:o,container:i}=t,l=r?Ce(r):"",s=Array.isArray(o)?o.map(e=>`@media${e.query}{${n}{${Ce(e.styles)}}}`):[],a=Array.isArray(i)?i.map(e=>`@container ${e.query}{${n}{${Ce(e.styles)}}}`):[];return`${l?`${n}{${l}}`:""}${s.join("")}${a.join("")}`.trim()}(e)}})}function Cn(e){return e.startsWith("data-")?e:`data-${e}`}function Cr(e,t){return Array.isArray(e)?[...e].reduce((e,n)=>({...e,...Cr(n,t)}),{}):"function"==typeof e?e(t):null==e?{}:e}let Co={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Ci(e,t){let n=xS({color:e,theme:t});return"dimmed"===n.color?"var(--mantine-color-dimmed)":"bright"===n.color?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}let Cl={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"},Cs=["h1","h2","h3","h4","h5","h6"],Ca=["h1","h2","h3","h4","h5","h6"],Cc={color:Ci,textColor:function(e,t){let n=xS({color:e,theme:t});return n.isThemeColor&&void 0===n.shade?`var(--mantine-color-${n.color}-text)`:Ci(e,t)},fontSize:function(e,t){return"string"==typeof e&&e in t.fontSizes?`var(--mantine-font-size-${e})`:"string"==typeof e&&Cs.includes(e)?`var(--mantine-${e}-font-size)`:"number"==typeof e||"string"==typeof e?xy(e):e},spacing:function(e,t){if("number"==typeof e)return xy(e);if("string"==typeof e){let n=e.replace("-","");if(!(n in t.spacing))return xy(e);let r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e},identity:function(e){return e},size:function(e){return"number"==typeof e?xy(e):e},lineHeight:function(e,t){return"string"==typeof e&&e in t.lineHeights?`var(--mantine-line-height-${e})`:"string"==typeof e&&Ca.includes(e)?`var(--mantine-${e}-line-height)`:e},fontFamily:function(e){return"string"==typeof e&&e in Cl?Cl[e]:e},border:function(e,t){if("number"==typeof e)return xy(e);if("string"==typeof e){let[n,r,...o]=e.split(" ").filter(e=>""!==e.trim()),i=`${xy(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${Ci(o.join(" "),t)}`),i.trim()}return e}};function Cd(e){return e.replace("(min-width: ","").replace("em)","")}let Cu=(0,r.forwardRef)((e,t)=>{let{component:n,style:o,__vars:i,className:l,variant:s,mod:a,size:c,hiddenFrom:d,visibleFrom:u,lightHidden:h,darkHidden:p,renderRoot:f,__size:m,...g}=e,$=x7(),{styleProps:_,rest:b}=xQ(g),y=xV().stylesTransform?.sx,v=y?.()?.(_.sx),w=`__m__-${(0,r.useId)().replace(/:/g,"")}`,k=function e(t){let{styleProps:n,data:r,theme:o}=t;return function(e){let{media:t,...n}=e,r=Object.keys(t).sort((e,t)=>Number(Cd(e))-Number(Cd(t))).map(e=>({query:e,styles:t[e]}));return{...n,media:r}}(xY(n).reduce((e,t)=>{var i,l;if("hiddenFrom"===t||"visibleFrom"===t||"sx"===t)return e;let s=r[t],a=Array.isArray(s.property)?s.property:[s.property],c="object"==typeof(i=n[t])&&null!==i?"base"in i?i.base:void 0:i;if(!function(e){if("object"!=typeof e||null===e)return!1;let t=Object.keys(e);return 1!==t.length||"base"!==t[0]}(n[t]))return a.forEach(t=>{e.inlineStyles[t]=Cc[s.type](c,o)}),e;e.hasResponsiveStyles=!0;let d="object"==typeof(l=n[t])&&null!==l?xY(l).filter(e=>"base"!==e):[];return a.forEach(r=>{c&&(e.styles[r]=Cc[s.type](c,o)),d.forEach(i=>{var l,a;let c=`(min-width: ${o.breakpoints[i]})`;e.media[c]={...e.media[c],[r]:Cc[s.type]((l=n[t],a=i,"object"==typeof l&&null!==l&&a in l?l[a]:l),o)}})}),e},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}({styleProps:_,theme:$,data:Co}),x={ref:t,style:function e(t){let{theme:n,style:r,vars:o,styleProps:i}=t;return{...Cr(r,n),...Cr(o,n),...i}}({theme:$,style:o,vars:i,styleProps:k.inlineStyles}),className:xU(l,v,{[w]:k.hasResponsiveStyles,"mantine-light-hidden":h,"mantine-dark-hidden":p,[`mantine-hidden-from-${d}`]:d,[`mantine-visible-from-${u}`]:u}),"data-variant":s,"data-size":xD(c)?void 0:c||void 0,size:m,...function e(t){var n;return t?"string"==typeof t?{[Cn(t)]:!0}:Array.isArray(t)?[...t].reduce((t,n)=>({...t,...e(n)}),{}):Object.keys(n=t).reduce((e,t)=>{let r=n[t];return void 0===r||""===r||!1===r||null===r||(e[Cn(t)]=n[t]),e},{}):null}(a),...b};return(0,b2.jsxs)(b2.Fragment,{children:[k.hasResponsiveStyles&&(0,b2.jsx)(Ct,{selector:`.${w}`,styles:k.styles,media:k.media}),"function"==typeof f?f(x):(0,b2.jsx)(n||"div",{...x})]})});Cu.displayName="@mantine/core/Box";let Ch=Cu,[Cp,Cf]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,r.createContext)(e);return[e=>{let{children:n,value:r}=e;return(0,b2.jsx)(t.Provider,{value:r,children:n})},()=>(0,r.useContext)(t)]}({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Cm={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};let Cg={},C$=(e,t)=>{let{size:n}=t;return{description:{"--input-description-size":void 0===n?void 0:`calc(${x9(n)} - ${xy(2)})`}}},C_=xR((e,t)=>{let n=xP("InputDescription",Cg,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...p}=xP("InputDescription",Cg,n),f=Cf(),m=xX({name:["InputWrapper",d],props:n,classes:Cm,className:o,style:i,classNames:r,styles:l,unstyled:s,rootSelector:"description",vars:a,varsResolver:C$}),g=u&&f?.getStyles||m;return(0,b2.jsx)(Ch,{component:"p",ref:t,variant:h,size:c,...g("description",f?.getStyles?{className:o,style:i}:void 0),...p})});C_.classes=Cm,C_.displayName="@mantine/core/InputDescription";let Cb={},Cy=(e,t)=>{let{size:n}=t;return{error:{"--input-error-size":void 0===n?void 0:`calc(${x9(n)} - ${xy(2)})`}}},Cv=xR((e,t)=>{let n=xP("InputError",Cb,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,size:c,__staticSelector:d,__inheritStyles:u=!0,variant:h,...p}=n,f=xX({name:["InputWrapper",d],props:n,classes:Cm,className:o,style:i,classNames:r,styles:l,unstyled:s,rootSelector:"error",vars:a,varsResolver:Cy}),m=Cf(),g=u&&m?.getStyles||f;return(0,b2.jsx)(Ch,{component:"p",ref:t,variant:h,size:c,...g("error",m?.getStyles?{className:o,style:i}:void 0),...p})});Cv.classes=Cm,Cv.displayName="@mantine/core/InputError";let Cw={labelElement:"label"},Ck=(e,t)=>{let{size:n}=t;return{label:{"--input-label-size":x9(n),"--input-asterisk-color":void 0}}},C0=xR((e,t)=>{let n=xP("InputLabel",Cw,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,labelElement:c,size:d,required:u,htmlFor:h,onMouseDown:p,children:f,__staticSelector:m,variant:g,mod:$,..._}=xP("InputLabel",Cw,n),b=xX({name:["InputWrapper",m],props:n,classes:Cm,className:o,style:i,classNames:r,styles:l,unstyled:s,rootSelector:"label",vars:a,varsResolver:Ck}),y=Cf(),v=y?.getStyles||b;return(0,b2.jsxs)(Ch,{...v("label",y?.getStyles?{className:o,style:i}:void 0),component:c,variant:g,size:d,ref:t,htmlFor:"label"===c?h:void 0,mod:[{required:u},$],onMouseDown(e){p?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault()},..._,children:[f,u&&(0,b2.jsx)("span",{...v("required"),"aria-hidden":!0,children:" *"})]})});C0.classes=Cm,C0.displayName="@mantine/core/InputLabel";let Cx={},CC=xR((e,t)=>{let n=xP("InputPlaceholder",Cx,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,__staticSelector:c,variant:d,error:u,mod:h,...p}=xP("InputPlaceholder",Cx,n),f=xX({name:["InputPlaceholder",c],props:n,classes:Cm,className:o,style:i,classNames:r,styles:l,unstyled:s,rootSelector:"placeholder"});return(0,b2.jsx)(Ch,{...f("placeholder"),mod:[{error:!!u},h],component:"span",variant:d,ref:t,...p})});CC.classes=Cm,CC.displayName="@mantine/core/InputPlaceholder";let CS="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function C1(){return`mantine-${Math.random().toString(36).slice(2,11)}`}let C2=r["useId".toString()]||(()=>{});function C3(e){let t=function(){let e=C2();return e?`mantine-${e.replace(/:/g,"")}`:""}(),[n,o]=(0,r.useState)(t);return CS(()=>{o(C1())},[]),"string"==typeof e?e:"undefined"==typeof window?t:n}let CE={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},C4=(e,t)=>{let{size:n}=t;return{label:{"--input-label-size":x9(n),"--input-asterisk-color":void 0},error:{"--input-error-size":void 0===n?void 0:`calc(${x9(n)} - ${xy(2)})`},description:{"--input-description-size":void 0===n?void 0:`calc(${x9(n)} - ${xy(2)})`}}},CM=xR((e,t)=>{let n=xP("InputWrapper",CE,e),{classNames:o,className:i,style:l,styles:s,unstyled:a,vars:c,size:d,variant:u,__staticSelector:h,inputContainer:p,inputWrapperOrder:f,label:m,error:g,description:$,labelProps:_,descriptionProps:b,errorProps:y,labelElement:v,children:w,withAsterisk:k,id:x,required:C,__stylesApiProps:S,mod:E,...M}=n,T=xX({name:["InputWrapper",h],props:S||n,classes:Cm,className:i,style:l,classNames:o,styles:s,unstyled:a,vars:c,varsResolver:C4}),N={size:d,variant:u,__staticSelector:h},L=C3(x),P=y?.id||`${L}-error`,A=b?.id||`${L}-description`,R=L,O=!!g&&"boolean"!=typeof g,D=!!$,I=`${O?P:""} ${D?A:""}`,H=I.trim().length>0?I.trim():void 0,z=_?.id||`${L}-label`,B=m&&(0,b2.jsx)(C0,{labelElement:v,id:z,htmlFor:R,required:"boolean"==typeof k?k:C,...N,..._,children:m},"label"),V=D&&(0,b2.jsx)(C_,{...b,...N,size:b?.size||N.size,id:b?.id||A,children:$},"description"),j=(0,b2.jsx)(r.Fragment,{children:p(w)},"input"),F=O&&(0,r.createElement)(Cv,{...y,...N,size:y?.size||N.size,key:"error",id:y?.id||P},g),U=f.map(e=>{switch(e){case"label":return B;case"input":return j;case"description":return V;case"error":return F;default:return null}});return(0,b2.jsx)(Cp,{value:{getStyles:T,describedBy:H,inputId:R,labelId:z,...function e(t,n){let{hasDescription:r,hasError:o}=n,i=t.findIndex(e=>"input"===e),l=t.slice(0,i),s=t.slice(i+1),a=r&&l.includes("description")||o&&l.includes("error");return{offsetBottom:r&&s.includes("description")||o&&s.includes("error"),offsetTop:a}}(f,{hasDescription:D,hasError:O})},children:(0,b2.jsx)(Ch,{ref:t,variant:u,size:d,mod:[{error:!!g},E],...T("root"),...M,children:U})})});CM.classes=Cm,CM.displayName="@mantine/core/InputWrapper";let CT={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},C8=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":xI(t.size,"input-height"),"--input-fz":x9(t.size),"--input-radius":void 0===t.radius?void 0:xz(t.radius),"--input-left-section-width":void 0!==t.leftSectionWidth?xy(t.leftSectionWidth):void 0,"--input-right-section-width":void 0!==t.rightSectionWidth?xy(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?xI(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),C6=xO((e,t)=>{let n=xP("Input",CT,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,required:a,__staticSelector:c,__stylesApiProps:d,size:u,wrapperProps:h,error:p,disabled:f,leftSection:m,leftSectionProps:g,leftSectionWidth:$,rightSection:_,rightSectionProps:b,rightSectionWidth:y,rightSectionPointerEvents:v,leftSectionPointerEvents:w,variant:k,vars:x,pointer:C,multiline:S,radius:E,id:M,withAria:T,withErrorStyles:N,mod:L,inputSize:P,...A}=n,{styleProps:R,rest:O}=xQ(A),D=Cf(),I=xX({name:["Input",c],props:d||n,classes:Cm,className:o,style:i,classNames:r,styles:l,unstyled:s,stylesCtx:{offsetBottom:D?.offsetBottom,offsetTop:D?.offsetTop},rootSelector:"wrapper",vars:x,varsResolver:C8}),H=T?{required:a,disabled:f,"aria-invalid":!!p,"aria-describedby":D?.describedBy,id:D?.inputId||M}:{};return(0,b2.jsxs)(Ch,{...I("wrapper"),...R,...h,mod:[{error:!!p&&N,pointer:C,disabled:f,multiline:S,"data-with-right-section":!!_,"data-with-left-section":!!m},L],variant:k,size:u,children:[m&&(0,b2.jsx)("div",{...g,"data-position":"left",...I("section",{className:g?.className,style:g?.style}),children:m}),(0,b2.jsx)(Ch,{component:"input",...O,...H,ref:t,required:a,mod:{disabled:f,error:!!p&&N},variant:k,__size:P,...I("input")}),_&&(0,b2.jsx)("div",{...b,"data-position":"right",...I("section",{className:b?.className,style:b?.style}),children:_})]})});C6.classes=Cm,C6.Wrapper=CM,C6.Label=C0,C6.Error=Cv,C6.Description=C_,C6.Placeholder=CC,C6.displayName="@mantine/core/Input";let CN={__staticSelector:"InputBase",withAria:!0},C5=xO((e,t)=>{let{inputProps:n,wrapperProps:r,...o}=function(e,t,n){let r=xP(e,t,n),{label:o,description:i,error:l,required:s,classNames:a,styles:c,className:d,unstyled:u,__staticSelector:h,__stylesApiProps:p,errorProps:f,labelProps:m,descriptionProps:g,wrapperProps:$,id:_,size:b,style:y,inputContainer:v,inputWrapperOrder:w,withAsterisk:k,variant:x,vars:C,mod:S,...E}=r,{styleProps:M,rest:T}=xQ(E);return{...T,classNames:a,styles:c,unstyled:u,wrapperProps:{...{label:o,description:i,error:l,required:s,classNames:a,className:d,__staticSelector:h,__stylesApiProps:p||r,errorProps:f,labelProps:m,descriptionProps:g,unstyled:u,styles:c,size:b,style:y,inputContainer:v,inputWrapperOrder:w,withAsterisk:k,variant:x,id:_,mod:S,...$},...M},inputProps:{required:s,classNames:a,styles:c,unstyled:u,size:b,__staticSelector:h,__stylesApiProps:p||r,error:l,variant:x,id:_}}}("InputBase",CN,e);return(0,b2.jsx)(C6.Wrapper,{...r,children:(0,b2.jsx)(C6,{...n,...o,ref:t})})});C5.classes={...C6.classes,...C6.Wrapper.classes},C5.displayName="@mantine/core/InputBase";let C7={},CL=xR((e,t)=>{let n=xP("TextInput",C7,e);return(0,b2.jsx)(C5,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});function CP(e){let{value:t,defaultValue:n,finalValue:o,onChange:i=()=>{}}=e,[l,s]=(0,r.useState)(void 0!==n?n:o);return void 0!==t?[t,i,!0]:[l,function(e){s(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i?.(e,...n)},!1]}function CA(e,t){let n=(0,r.useRef)(!1);(0,r.useEffect)(()=>()=>{n.current=!1},[]),(0,r.useEffect)(()=>{if(n.current)return e();n.current=!0},t)}function CR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}CL.classes=C5.classes,CL.displayName="@mantine/core/TextInput";let CO=["mousedown","touchstart"],CD={app:100,modal:200,popover:300,overlay:400,max:9999};function CI(e){return CD[e]}let CH=(0,r.createContext)({dir:"ltr",toggleDirection(){},setDirection(){}});function Cz(){return(0,r.useContext)(CH)}function C9(e,t){if("rtl"===e&&(t.includes("right")||t.includes("left"))){let[n,r]=t.split("-"),o="right"===n?"left":"right";return void 0===r?o:`${o}-${r}`}return t}function CB(e){let t=(0,r.createContext)(null);return[e=>{let{children:n,value:r}=e;return(0,b2.jsx)(t.Provider,{value:r,children:n})},()=>{let n=(0,r.useContext)(t);if(null===n)throw Error(e);return n}]}let[CV,Cj]=CB("Popover component was not found in the tree");function CF(e,t){"function"==typeof e?e(t):"object"==typeof e&&null!==e&&"current"in e&&(e.current=t)}function CU(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>CF(t,e))}}function CW(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useCallback)(CU(...t),t)}let CG=()=>{};function Cq(e,t,n,r){return"center"===e||"center"===r?{top:t}:"end"===e?{bottom:n}:"start"===e?{top:n}:{}}function CK(e,t,n,r,o){return"center"===e||"center"===r?{left:t}:"end"===e?{["ltr"===o?"right":"left"]:n}:"start"===e?{["ltr"===o?"left":"right"]:n}:{}}let CJ={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"},CZ=(0,r.forwardRef)((e,t)=>{let{position:n,arrowSize:r,arrowOffset:o,arrowRadius:i,arrowPosition:l,visible:s,arrowX:a,arrowY:c,style:d,...u}=e,{dir:h}=Cz();return s?(0,b2.jsx)("div",{...u,ref:t,style:{...d,...function e(t){let{position:n,arrowSize:r,arrowOffset:o,arrowRadius:i,arrowPosition:l,arrowX:s,arrowY:a,dir:c}=t,[d,u="center"]=n.split("-"),h={width:r,height:r,transform:"rotate(45deg)",position:"absolute",[CJ[d]]:i},p=-r/2;return"left"===d?{...h,...Cq(u,a,o,l),right:p,borderLeftColor:"transparent",borderBottomColor:"transparent"}:"right"===d?{...h,...Cq(u,a,o,l),left:p,borderRightColor:"transparent",borderTopColor:"transparent"}:"top"===d?{...h,...CK(u,s,o,l,c),bottom:p,borderTopColor:"transparent",borderLeftColor:"transparent"}:"bottom"===d?{...h,...CK(u,s,o,l,c),top:p,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}({position:n,arrowSize:r,arrowOffset:o,arrowRadius:i,arrowPosition:l,dir:h,arrowX:a,arrowY:c})}}):null});CZ.displayName="@mantine/core/FloatingArrow";let CX=/input|select|textarea|button|object/,CQ="a, input, select, textarea, button, object, [tabindex]";function CY(e){return"none"===e.style.display}function Se(e){let t=e.getAttribute("tabindex");return null===t&&(t=void 0),parseInt(t,10)}function St(e){let t=e.nodeName.toLowerCase(),n=!Number.isNaN(Se(e));return(CX.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&function(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||"hidden"===e.getAttribute("type"))return!1;let t=e;for(;t&&t!==document.body&&11!==t.nodeType;){if(CY(t))return!1;t=t.parentNode}return!0}(e)}function Sn(e){let t=Se(e);return(Number.isNaN(t)||t>=0)&&St(e)}function Sr(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,r.useRef)(),n=(0,r.useRef)(null),o=e=>{let t=e.querySelector("[data-autofocus]");if(!t){let n=Array.from(e.querySelectorAll(CQ));!(t=n.find(Sn)||n.find(St)||null)&&St(e)&&(t=e)}t&&t.focus({preventScroll:!0})},i=(0,r.useCallback)(r=>{e&&(null!==r?(n.current=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body > :not(script)",n=C1(),r=Array.from(document.querySelectorAll(t)).map(t=>{if(t?.shadowRoot?.contains(e)||t.contains(e))return;let r=t.getAttribute("aria-hidden"),o=t.getAttribute("data-hidden"),i=t.getAttribute("data-focus-id");return t.setAttribute("data-focus-id",n),null===r||"false"===r?t.setAttribute("aria-hidden","true"):o||i||t.setAttribute("data-hidden",r),{node:t,ariaHidden:o||null}});return()=>{r.forEach(e=>{e&&n===e.node.getAttribute("data-focus-id")&&(null===e.ariaHidden?e.node.removeAttribute("aria-hidden"):e.node.setAttribute("aria-hidden",e.ariaHidden),e.node.removeAttribute("data-focus-id"),e.node.removeAttribute("data-hidden"))})}}(r),t.current!==r&&(r?(setTimeout(()=>{r.getRootNode()&&o(r)}),t.current=r):t.current=null)):n.current&&(n.current(),n.current=null))},[e]);return(0,r.useEffect)(()=>{if(!e)return;t.current&&setTimeout(()=>o(t.current));let r=e=>{"Tab"===e.key&&t.current&&function e(t,n){var r;let o=Array.from((r=t).querySelectorAll(CQ)).filter(Sn);if(!o.length)return void n.preventDefault();let i=o[n.shiftKey?0:o.length-1],l=t.getRootNode(),s=i===l.activeElement||t===l.activeElement,a=l.activeElement;if("INPUT"===a.tagName&&"radio"===a.getAttribute("type")){let c=o.filter(e=>"radio"===e.getAttribute("type")&&e.getAttribute("name")===a.getAttribute("name"));s=c.includes(i)}if(!s)return;n.preventDefault();let d=o[n.shiftKey?o.length-1:0];d&&d.focus()}(t.current,e)};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),n.current&&n.current()}},[e]),i}function So(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e&&e.type!==r.Fragment}var Si={root:"m_515a97f8"};let Sl={},Ss=xR((e,t)=>{let n=xP("VisuallyHidden",Sl,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,...c}=n,d=xX({name:"VisuallyHidden",classes:Si,props:n,className:o,style:i,classNames:r,styles:l,unstyled:s});return(0,b2.jsx)(Ch,{component:"span",ref:t,...d("root"),...c})});function Sa(e){let{children:t,active:n=!0,refProp:o="ref",innerRef:i}=e,l=CW(Sr(n),i);return So(t)?(0,r.cloneElement)(t,{[o]:l}):t}function Sc(e){return(0,b2.jsx)(Ss,{tabIndex:-1,"data-autofocus":!0,...e})}Ss.classes=Si,Ss.displayName="@mantine/core/VisuallyHidden",Sa.displayName="@mantine/core/FocusTrap",Sc.displayName="@mantine/core/FocusTrapInitialFocus",Sa.InitialFocus=Sc;let Sd={},Su=(0,r.forwardRef)((e,t)=>{let{children:n,target:o,...i}=xP("Portal",Sd,e),[l,s]=(0,r.useState)(!1),a=(0,r.useRef)(null);return CS(()=>(s(!0),a.current=o?"string"==typeof o?document.querySelector(o):o:function(e){let t=document.createElement("div");return t.setAttribute("data-portal","true"),"string"==typeof e.className&&t.classList.add(...e.className.split(" ").filter(Boolean)),"object"==typeof e.style&&Object.assign(t.style,e.style),"string"==typeof e.id&&t.setAttribute("id",e.id),t}(i),CF(t,a.current),!o&&a.current&&document.body.appendChild(a.current),()=>{!o&&a.current&&document.body.removeChild(a.current)}),[o]),l&&a.current?(0,yf.createPortal)((0,b2.jsx)(b2.Fragment,{children:n}),a.current):null});function Sh(e){let{withinPortal:t=!0,children:n,...r}=e;return t?(0,b2.jsx)(Su,{...r,children:n}):(0,b2.jsx)(b2.Fragment,{children:n})}Su.displayName="@mantine/core/Portal",Sh.displayName="@mantine/core/OptionalPortal";let Sp=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${xy("bottom"===e?10:-10)})`},transitionProperty:"transform, opacity"}),Sf={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xy(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xy(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xy(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xy(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xy(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xy(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xy(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xy(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Sp("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Sp("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Sp("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Sp("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Sp("top"),common:{transformOrigin:"top right"}}},Sm={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Sg(e){let{keepMounted:t,transition:n="fade",duration:o=250,exitDuration:i=o,mounted:l,children:s,timingFunction:a="ease",onExit:c,onEntered:d,onEnter:u,onExited:h,enterDelay:p,exitDelay:f}=e,{transitionDuration:m,transitionStatus:g,transitionTimingFunction:$}=function e(t){let{duration:n,exitDuration:o,timingFunction:i,mounted:l,onEnter:s,onExit:a,onEntered:c,onExited:d,enterDelay:u,exitDelay:h}=t,p=x7(),f=function e(t,n){var o,i;let{getInitialValueInEffect:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{getInitialValueInEffect:!0},[s,a]=(0,r.useState)(l?n:(o=t,"boolean"==typeof i?i:"undefined"!=typeof window&&"matchMedia"in window&&window.matchMedia(o).matches)),c=(0,r.useRef)();return(0,r.useEffect)(()=>{if("matchMedia"in window)return c.current=window.matchMedia(t),a(c.current.matches),function(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(n){return e.addListener(t),()=>e.removeListener(t)}}(c.current,e=>a(e.matches))},[t]),s}("(prefers-reduced-motion: reduce)",void 0,void 0),m=!!p.respectReducedMotion&&f,[g,$]=(0,r.useState)(m?0:n),[_,b]=(0,r.useState)(l?"entered":"exited"),y=(0,r.useRef)(-1),v=(0,r.useRef)(-1),w=(0,r.useRef)(-1),k=e=>{let t=e?s:a,r=e?c:d;window.clearTimeout(y.current);let i=m?0:e?n:o;$(i),0===i?("function"==typeof t&&t(),"function"==typeof r&&r(),b(e?"entered":"exited")):w.current=requestAnimationFrame(()=>{yf.flushSync(()=>{b(e?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{"function"==typeof t&&t(),b(e?"entering":"exiting"),y.current=window.setTimeout(()=>{"function"==typeof r&&r(),b(e?"entered":"exited")},i)})})};return CA(()=>{var e;e=l,window.clearTimeout(v.current),"number"==typeof(e?u:h)?v.current=window.setTimeout(()=>{k(e)},e?u:h):k(e)},[l]),(0,r.useEffect)(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:g,transitionStatus:_,transitionTimingFunction:i||"ease"}}({mounted:l,exitDuration:i,duration:o,timingFunction:a,onExit:c,onEntered:d,onEnter:u,onExited:h,enterDelay:p,exitDelay:f});return 0===m?l?(0,b2.jsx)(b2.Fragment,{children:s({})}):t?s({display:"none"}):null:"exited"===g?t?s({display:"none"}):null:(0,b2.jsx)(b2.Fragment,{children:s(function e(t){let{transition:n,state:r,duration:o,timingFunction:i}=t,l={transitionDuration:`${o}ms`,transitionTimingFunction:i};return"string"==typeof n?n in Sf?{transitionProperty:Sf[n].transitionProperty,...l,...Sf[n].common,...Sf[n][Sm[r]]}:{}:{transitionProperty:n.transitionProperty,...l,...n.common,...n[Sm[r]]}}({transition:n,duration:m,state:g,timingFunction:$}))})}Sg.displayName="@mantine/core/Transition";var S$={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};let S_={},Sb=xR((e,t)=>{let n=xP("PopoverDropdown",S_,e),{className:o,style:i,vars:l,children:s,onKeyDownCapture:a,variant:c,classNames:d,styles:u,...h}=n,p=Cj(),f=function(e){let{opened:t,shouldReturnFocus:n=!0}=e,o=(0,r.useRef)(),i=()=>{o.current&&"focus"in o.current&&"function"==typeof o.current.focus&&o.current?.focus({preventScroll:!0})};return CA(()=>{let e=-1,r=t=>{"Tab"===t.key&&window.clearTimeout(e)};return document.addEventListener("keydown",r),t?o.current=document.activeElement:n&&(e=window.setTimeout(i,10)),()=>{window.clearTimeout(e),document.removeEventListener("keydown",r)}},[t,n]),i}({opened:p.opened,shouldReturnFocus:p.returnFocus}),m=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=CW(t,p.floating);return p.disabled?null:(0,b2.jsx)(Sh,{...p.portalProps,withinPortal:p.withinPortal,children:(0,b2.jsx)(Sg,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:"number"==typeof p.transitionProps?.exitDuration?p.transitionProps.exitDuration:p.transitionProps?.duration,children:e=>(0,b2.jsx)(Sa,{active:p.trapFocus&&p.opened,innerRef:g,children:(0,b2.jsxs)(Ch,{...m,...h,variant:c,onKeyDownCapture:function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{active:!0};return"function"==typeof t&&n.active?e=>{"Escape"===e.key&&(t(e),n.onTrigger?.())}:n.onKeyDown||CG}(p.onClose,{active:p.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":p.placement,"data-fixed":"fixed"===p.floatingStrategy||void 0,...p.getStyles("dropdown",{className:o,props:n,classNames:d,styles:u,style:[{...e,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:"target"===p.width?void 0:xy(p.width)},i]}),children:[s,(0,b2.jsx)(CZ,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:d,styles:u})})]})})})})});Sb.classes=S$,Sb.displayName="@mantine/core/PopoverDropdown";let Sy={refProp:"ref",popupType:"dialog"},Sv=xR((e,t)=>{let{children:n,refProp:o,popupType:i,...l}=xP("PopoverTarget",Sy,e);if(!So(n))throw Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");let s=l,a=Cj(),c=CW(a.reference,n.ref,t),d=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return(0,r.cloneElement)(n,{...s,...d,...a.targetProps,className:xU(a.targetProps.className,s.className,n.props.className),[o]:c,...a.controlled?null:{onClick:a.onToggle}})});function Sw(e){let{opened:t,floating:n,position:o,positionDependencies:i}=e,[l,s]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(n.refs.reference.current&&n.refs.floating.current&&t)return function e(t,n,r,o){void 0===o&&(o={});let{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=o,d=y5(t),u=i||l?[...d?bH(d):[],...bH(n)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",r,{passive:!0}),l&&e.addEventListener("resize",r)});let h=d&&a?function(e,t){let n,r=null,o=bM(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function l(s,a){void 0===s&&(s=!1),void 0===a&&(a=1),i();let{left:c,top:d,width:u,height:h}=e.getBoundingClientRect();if(s||t(),!u||!h)return;let p={rootMargin:-y_(d)+"px "+-y_(o.clientWidth-(c+u))+"px "+-y_(o.clientHeight-(d+h))+"px "+-y_(c)+"px",threshold:yg(0,ym(1,a))||1},f=!0;function m(e){let t=e[0].intersectionRatio;if(t!==a){if(!f)return l();t?l(!1,t):n=setTimeout(()=>{l(!1,1e-7)},1e3)}f=!1}try{r=new IntersectionObserver(m,{...p,root:o.ownerDocument})}catch(g){r=new IntersectionObserver(m,p)}r.observe(e)}(!0),i}(d,r):null,p,f=-1,m=null;s&&(m=new ResizeObserver(e=>{let[t]=e;t&&t.target===d&&m&&(m.unobserve(n),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(n)})),r()}),d&&!c&&m.observe(d),m.observe(n));let g=c?yA(t):null;return c&&function e(){let n=yA(t);g&&(n.x!==g.x||n.y!==g.y||n.width!==g.width||n.height!==g.height)&&r(),g=n,p=requestAnimationFrame(e)}(),r(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",r),l&&e.removeEventListener("resize",r)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(p)}}(n.refs.reference.current,n.refs.floating.current,n.update)},[n.refs.reference.current,n.refs.floating.current,t,l,o]),CA(()=>{n.update()},i),CA(()=>{s(e=>e+1)},[t])}Sv.displayName="@mantine/core/PopoverTarget";let Sk={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:CD.popover,__staticSelector:"Popover",width:"max-content"},S0=(e,t)=>{let{radius:n,shadow:r}=t;return{dropdown:{"--popover-radius":void 0===n?void 0:xz(n),"--popover-shadow":function e(t){if(t)return xI(t,"mantine-shadow",!1)}(r)}}};function Sx(e){let t=xP("Popover",Sk,e),{children:n,position:o,offset:i,onPositionChange:l,positionDependencies:s,opened:a,transitionProps:c,width:d,middlewares:u,withArrow:h,arrowSize:p,arrowOffset:f,arrowRadius:m,arrowPosition:g,unstyled:$,classNames:_,styles:b,closeOnClickOutside:y,withinPortal:v,portalProps:w,closeOnEscape:k,clickOutsideEvents:x,trapFocus:C,onClose:S,onOpen:E,onChange:M,zIndex:T,radius:N,shadow:L,id:P,defaultOpened:A,__staticSelector:R,withRoles:O,disabled:D,returnFocus:I,variant:H,keepMounted:z,vars:B,floatingStrategy:V,...j}=t,F=xX({name:R,props:t,classes:S$,classNames:_,styles:b,unstyled:$,rootSelector:"dropdown",vars:B,varsResolver:S0}),U=(0,r.useRef)(null),[W,G]=(0,r.useState)(null),[q,K]=(0,r.useState)(null),{dir:J}=Cz(),Z=C3(P),X=function(e){let[t,n]=CP({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=vL({strategy:e.strategy,placement:e.position,middleware:function e(t,n){let r=function(e){if(void 0===e)return{shift:!0,flip:!0};let t={...e};return void 0===e.shift&&(t.shift=!0),void 0===e.flip&&(t.flip=!0),t}(t.middlewares),o=[yJ(t.offset)];return r.shift&&o.push(yZ("boolean"==typeof r.shift?{limiter:yX(),padding:5}:{limiter:yX(),padding:5,...r.shift})),r.flip&&o.push("boolean"==typeof r.flip?yQ():yQ(r.flip)),r.inline&&o.push("boolean"==typeof r.inline?ve():ve(r.inline)),o.push(vt({element:t.arrowRef,padding:t.arrowOffset})),(r.size||"target"===t.width)&&o.push(yY({..."boolean"==typeof r.size?{}:r.size,apply(e){let{rects:o,availableWidth:i,availableHeight:l,...s}=e,a=n(),c=a.refs.floating.current?.style??{};r.size&&("object"==typeof r.size&&r.size.apply?r.size.apply({rects:o,availableWidth:i,availableHeight:l,...s}):Object.assign(c,{maxWidth:`${i}px`,maxHeight:`${l}px`})),"target"===t.width&&Object.assign(c,{width:`${o.reference.width}px`})}})),o}(e,()=>r)});return Sw({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:r}),CA(()=>{e.onPositionChange?.(r.placement)},[r.placement]),CA(()=>{t?e.onOpen?.():e.onClose?.()},[t,e.onClose,e.onOpen]),{floating:r,controlled:"boolean"==typeof e.opened,opened:t,onClose(){t&&n(!1)},onToggle:()=>n(!t)}}({middlewares:u,width:d,position:C9(J,o),offset:"number"==typeof i?i+(h?p/2:0):i,arrowRef:U,arrowOffset:f,onPositionChange:l,positionDependencies:s,opened:a,defaultOpened:A,onChange:M,onOpen:E,onClose:S,strategy:V});!function(e,t,n){let o=(0,r.useRef)();(0,r.useEffect)(()=>{let r=t=>{let{target:r}=t??{};if(Array.isArray(n)){let i=r?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(r)&&"HTML"!==r.tagName;n.every(e=>!!e&&!t.composedPath().includes(e))&&!i&&e()}else o.current&&!o.current.contains(r)&&e()};return(t||CO).forEach(e=>document.addEventListener(e,r)),()=>{(t||CO).forEach(e=>document.removeEventListener(e,r))}},[o,e,n])}(()=>y&&X.onClose(),x,[W,q]);let Q=(0,r.useCallback)(e=>{G(e),X.floating.refs.setReference(e)},[X.floating.refs.setReference]),Y=(0,r.useCallback)(e=>{K(e),X.floating.refs.setFloating(e)},[X.floating.refs.setFloating]);return(0,b2.jsx)(CV,{value:{returnFocus:I,disabled:D,controlled:X.controlled,reference:Q,floating:Y,x:X.floating.x,y:X.floating.y,arrowX:X.floating?.middlewareData?.arrow?.x,arrowY:X.floating?.middlewareData?.arrow?.y,opened:X.opened,arrowRef:U,transitionProps:c,width:d,withArrow:h,arrowSize:p,arrowOffset:f,arrowRadius:m,arrowPosition:g,placement:X.floating.placement,trapFocus:C,withinPortal:v,portalProps:w,zIndex:T,radius:N,shadow:L,closeOnEscape:k,onClose:X.onClose,onToggle:X.onToggle,getTargetId:()=>`${Z}-target`,getDropdownId:()=>`${Z}-dropdown`,withRoles:O,targetProps:j,__staticSelector:R,classNames:_,styles:b,unstyled:$,variant:H,keepMounted:z,getStyles:F,floatingStrategy:V},children:n})}Sx.Target=Sv,Sx.Dropdown=Sb,Sx.displayName="@mantine/core/Popover",Sx.extend=e=>e;let[SC,SS]=CB("Menu component was not found in the tree");var S1={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};let S2={},S3=xR((e,t)=>{let{classNames:n,className:r,style:o,styles:i,vars:l,...s}=xP("MenuDivider",S2,e),a=SS();return(0,b2.jsx)(Ch,{ref:t,...a.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...s})});function SE(e,t){return n=>{e?.(n),t?.(n)}}S3.classes=S1,S3.displayName="@mantine/core/MenuDivider";let S4={},SM=xR((e,t)=>{let{classNames:n,className:o,style:i,styles:l,vars:s,onMouseEnter:a,onMouseLeave:c,onKeyDown:d,children:u,...h}=xP("MenuDropdown",S4,e),p=(0,r.useRef)(null),f=SS(),m=SE(d,e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),g=SE(a,()=>("hover"===f.trigger||"click-hover"===f.trigger)&&f.openDropdown()),$=SE(c,()=>("hover"===f.trigger||"click-hover"===f.trigger)&&f.closeDropdown());return(0,b2.jsxs)(Sx.Dropdown,{...h,onMouseEnter:g,onMouseLeave:$,role:"menu","aria-orientation":"vertical",ref:CW(t,p),...f.getStyles("dropdown",{className:o,style:i,styles:l,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[(0,b2.jsx)("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})});function ST(e){let{parentSelector:t,siblingSelector:n,onKeyDown:r,loop:o=!0,activateOnFocus:i=!1,dir:l="rtl",orientation:s}=e;return e=>{r?.(e);let a=Array.from(CR(e.currentTarget,t)?.querySelectorAll(n)||[]).filter(n=>{var r,o,i;return r=e.currentTarget,o=n,i=t,CR(r,i)===CR(o,i)}),c=a.findIndex(t=>e.currentTarget===t),d=function(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let o=0;o<t.length;o+=1)if(!t[o].disabled)return o}return e}(c,a,o),u=function(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let o=t.length-1;o>-1;o-=1)if(!t[o].disabled)return o}return e}(c,a,o),h="rtl"===l?u:d,p="rtl"===l?d:u;switch(e.key){case"ArrowRight":"horizontal"===s&&(e.stopPropagation(),e.preventDefault(),a[h].focus(),i&&a[h].click());break;case"ArrowLeft":"horizontal"===s&&(e.stopPropagation(),e.preventDefault(),a[p].focus(),i&&a[p].click());break;case"ArrowUp":"vertical"===s&&(e.stopPropagation(),e.preventDefault(),a[u].focus(),i&&a[u].click());break;case"ArrowDown":"vertical"===s&&(e.stopPropagation(),e.preventDefault(),a[d].focus(),i&&a[d].click());break;case"Home":e.stopPropagation(),e.preventDefault(),a[0].disabled||a[0].focus();break;case"End":{e.stopPropagation(),e.preventDefault();let f=a.length-1;a[f].disabled||a[f].focus()}}}}SM.classes=S1,SM.displayName="@mantine/core/MenuDropdown";var S8={root:"m_87cf2631"};let S6={__staticSelector:"UnstyledButton"},SN=xO((e,t)=>{let n=xP("UnstyledButton",S6,e),{className:r,component:o="button",__staticSelector:i,unstyled:l,classNames:s,styles:a,style:c,...d}=n,u=xX({name:i,props:n,classes:S8,className:r,style:c,classNames:s,styles:a,unstyled:l});return(0,b2.jsx)(Ch,{...u("root",{focusable:!0}),component:o,ref:t,type:"button"===o?"button":void 0,...d})});SN.classes=S8,SN.displayName="@mantine/core/UnstyledButton";let S5={},S7=xO((e,t)=>{let{classNames:n,className:o,style:i,styles:l,vars:s,color:a,closeMenuOnClick:c,leftSection:d,rightSection:u,children:h,disabled:p,...f}=xP("MenuItem",S5,e),m=SS(),g=x7(),{dir:$}=Cz(),_=(0,r.useRef)(),b=m.getItemIndex(_.current),y=f,v=SE(y.onMouseLeave,()=>m.setHovered(-1)),w=SE(y.onMouseEnter,()=>m.setHovered(m.getItemIndex(_.current))),k=SE(y.onClick,()=>{"boolean"==typeof c?c&&m.closeDropdownImmediately():m.closeOnItemClick&&m.closeDropdownImmediately()}),x=SE(y.onFocus,()=>m.setHovered(m.getItemIndex(_.current))),C=a?g.variantColorResolver({color:a,theme:g,variant:"light"}):void 0,S=a?xS({color:a,theme:g}):null;return(0,b2.jsxs)(SN,{...f,unstyled:m.unstyled,tabIndex:m.menuItemTabIndex,onFocus:x,...m.getStyles("item",{className:o,style:i,styles:l,classNames:n}),ref:CW(_,t),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||void 0,"data-hovered":m.hovered===b||void 0,"data-mantine-stop-propagation":!0,onMouseEnter:w,onMouseLeave:v,onClick:k,onKeyDown:ST({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:m.loop,dir:$,orientation:"vertical",onKeyDown:y.onKeyDown}),__vars:{"--menu-item-color":S?.isThemeColor&&void 0===S?.shade?`var(--mantine-color-${S.color}-6)`:C?.color,"--menu-item-hover":C?.hover},children:[d&&(0,b2.jsx)("div",{...m.getStyles("itemSection",{styles:l,classNames:n}),"data-position":"left",children:d}),h&&(0,b2.jsx)("div",{...m.getStyles("itemLabel",{styles:l,classNames:n}),children:h}),u&&(0,b2.jsx)("div",{...m.getStyles("itemSection",{styles:l,classNames:n}),"data-position":"right",children:u})]})});S7.classes=S1,S7.displayName="@mantine/core/MenuItem";let SL={},SP=xR((e,t)=>{let{classNames:n,className:r,style:o,styles:i,vars:l,...s}=xP("MenuLabel",SL,e),a=SS();return(0,b2.jsx)(Ch,{ref:t,...a.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...s})});SP.classes=S1,SP.displayName="@mantine/core/MenuLabel";let SA={refProp:"ref"},SR=(0,r.forwardRef)((e,t)=>{let{children:n,refProp:o,...i}=xP("MenuTarget",SA,e);if(!So(n))throw Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");let l=SS(),s=SE(n.props.onClick,()=>{"click"===l.trigger?l.toggleDropdown():"click-hover"===l.trigger&&(l.setOpenedViaClick(!0),l.opened||l.openDropdown())}),a=SE(n.props.onMouseEnter,()=>("hover"===l.trigger||"click-hover"===l.trigger)&&l.openDropdown()),c=SE(n.props.onMouseLeave,()=>{"hover"===l.trigger?l.closeDropdown():"click-hover"!==l.trigger||l.openedViaClick||l.closeDropdown()});return(0,b2.jsx)(Sx.Target,{refProp:o,popupType:"menu",ref:t,...i,children:(0,r.cloneElement)(n,{onClick:s,onMouseEnter:a,onMouseLeave:c,"data-expanded":!!l.opened||void 0})})});SR.displayName="@mantine/core/MenuTarget";let SO={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function SD(e){let t=xP("Menu",SO,e),{children:n,onOpen:o,onClose:i,opened:l,defaultOpened:s,trapFocus:a,onChange:c,closeOnItemClick:d,loop:u,closeOnEscape:h,trigger:p,openDelay:f,closeDelay:m,classNames:g,styles:$,unstyled:_,variant:b,vars:y,menuItemTabIndex:v,keepMounted:w,...k}=t,x=xX({name:"Menu",classes:S1,props:t,classNames:g,styles:$,unstyled:_}),[C,{setHovered:S,resetHovered:E}]=function(){let[e,t]=(0,r.useState)(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}(),[M,T]=CP({value:l,defaultValue:s,finalValue:!1,onChange:c}),[N,L]=(0,r.useState)(!1),P=()=>{T(!1),L(!1),M&&i?.()},A=()=>{T(!0),M||o?.()},R=()=>{M?P():A()},{openDropdown:O,closeDropdown:D}=function(e){let{open:t,close:n,openDelay:o,closeDelay:i}=e,l=(0,r.useRef)(-1),s=(0,r.useRef)(-1),a=()=>{window.clearTimeout(l.current),window.clearTimeout(s.current)};return(0,r.useEffect)(()=>a,[]),{openDropdown(){a(),0===o||void 0===o?t():l.current=window.setTimeout(t,o)},closeDropdown(){a(),0===i||void 0===i?n():s.current=window.setTimeout(n,i)}}}({open:A,close:P,closeDelay:m,openDelay:f}),{resolvedClassNames:I,resolvedStyles:H}=function(e){let{classNames:t,styles:n,props:r,stylesCtx:o}=e,i=x7();return{resolvedClassNames:xq({theme:i,classNames:t,props:r,stylesCtx:o||void 0}),resolvedStyles:xJ({theme:i,styles:n,props:r,stylesCtx:o||void 0})}}({classNames:g,styles:$,props:t});return CA(()=>{E()},[M]),(0,b2.jsx)(SC,{value:{getStyles:x,opened:M,toggleDropdown:R,getItemIndex(e){var t;return(t=e)?Array.from(CR(t,"[data-menu-dropdown]")?.querySelectorAll("[data-menu-item]")||[]).findIndex(e=>e===t):null},hovered:C,setHovered:S,openedViaClick:N,setOpenedViaClick:L,closeOnItemClick:d,closeDropdown:"click"===p?P:D,openDropdown:"click"===p?A:O,closeDropdownImmediately:P,loop:u,trigger:p,unstyled:_,menuItemTabIndex:v},children:(0,b2.jsx)(Sx,{...k,opened:M,onChange:R,defaultOpened:s,trapFocus:!w&&a,closeOnEscape:h,__staticSelector:"Menu",classNames:I,styles:H,unstyled:_,variant:b,keepMounted:w,children:n})})}function SI(e){let{size:t,style:n,...r}=e,o=void 0!==t?{width:xy(t),height:xy(t),...n}:n;return(0,b2.jsx)("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:o,"aria-hidden":!0,...r,children:(0,b2.jsx)("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}SD.extend=e=>e,SD.classes=S1,SD.displayName="@mantine/core/Menu",SD.Item=S7,SD.Label=SP,SD.Dropdown=SM,SD.Target=SR,SD.Divider=S3;var SH={root:"m_4081bf90"};let Sz={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},S9=(e,t,n)=>{let{grow:r,preventGrowOverflow:o,gap:i,align:l,justify:s,wrap:a}=t,{childWidth:c}=n;return{root:{"--group-child-width":r&&o?c:void 0,"--group-gap":xH(i),"--group-align":l,"--group-justify":s,"--group-wrap":a}}},SB=xR((e,t)=>{var n;let o=xP("Group",Sz,e),{classNames:i,className:l,style:s,styles:a,unstyled:c,children:d,gap:u,align:h,justify:p,wrap:f,grow:m,preventGrowOverflow:g,vars:$,variant:_,__size:b,mod:y,...v}=o,w=(n=d,r.Children.toArray(n).filter(Boolean)),k=w.length,x=xH(u??"md"),C=xX({name:"Group",props:o,stylesCtx:{childWidth:`calc(${100/k}% - (${x} - ${x} / ${k}))`},className:l,style:s,classes:SH,classNames:i,styles:a,unstyled:c,vars:$,varsResolver:S9});return(0,b2.jsx)(Ch,{...C("root"),ref:t,variant:_,mod:[{grow:m},y],size:b,...v,children:w})});function SV(e,t){return n=>{if("string"!=typeof n||0===n.trim().length)throw Error(t);return`${e}-${n}`}}function Sj(e){let{color:t,theme:n,autoContrast:r}=e;return("boolean"==typeof r?r:n.autoContrast)&&xS({color:t||n.primaryColor,theme:n}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function SF(e,t){return Sj({color:e.colors[e.primaryColor][x0(e,t)],theme:e,autoContrast:null})}SB.classes=SH,SB.displayName="@mantine/core/Group";let[SU,SW]=CB("Tabs component was not found in the tree");var SG={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};let Sq={},SK=xR((e,t)=>{let n=xP("TabsList",Sq,e),{children:r,className:o,grow:i,justify:l,classNames:s,styles:a,style:c,mod:d,...u}=n,h=SW();return(0,b2.jsx)(Ch,{...u,...h.getStyles("list",{className:o,style:c,classNames:s,styles:a,props:n,variant:h.variant}),ref:t,role:"tablist",variant:h.variant,mod:[{grow:i,orientation:h.orientation,placement:"vertical"===h.orientation&&h.placement,inverted:h.inverted},d],"aria-orientation":h.orientation,__vars:{"--tabs-justify":l},children:r})});SK.classes=SG,SK.displayName="@mantine/core/TabsList";let SJ={},SZ=xR((e,t)=>{let n=xP("TabsPanel",SJ,e),{children:r,className:o,value:i,classNames:l,styles:s,style:a,mod:c,keepMounted:d,...u}=n,h=SW(),p=h.value===i,f=h.keepMounted||d||p?r:null;return(0,b2.jsx)(Ch,{...u,...h.getStyles("panel",{className:o,classNames:l,styles:s,style:[a,p?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(i),"aria-labelledby":h.getTabId(i),children:f})});SZ.classes=SG,SZ.displayName="@mantine/core/TabsPanel";let SX={},SQ=xR((e,t)=>{let n=xP("TabsTab",SX,e),{className:r,children:o,rightSection:i,leftSection:l,value:s,onClick:a,onKeyDown:c,disabled:d,color:u,style:h,classNames:p,styles:f,vars:m,mod:g,...$}=n,_=x7(),{dir:b}=Cz(),y=SW(),v=s===y.value,w={classNames:p,styles:f,props:n};return(0,b2.jsxs)(SN,{...$,...y.getStyles("tab",{className:r,style:h,variant:y.variant,...w}),disabled:d,unstyled:y.unstyled,variant:y.variant,mod:[{active:v,disabled:d,orientation:y.orientation,inverted:y.inverted,placement:"vertical"===y.orientation&&y.placement},g],ref:t,role:"tab",id:y.getTabId(s),"aria-selected":v,tabIndex:v||null===y.value?0:-1,"aria-controls":y.getPanelId(s),onClick(e){y.onChange(y.allowTabDeactivation&&s===y.value?null:s),a?.(e)},__vars:{"--tabs-color":u?x1(u,_):void 0},onKeyDown:ST({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:y.activateTabWithKeyboard,loop:y.loop,orientation:y.orientation||"horizontal",dir:b,onKeyDown:c}),children:[l&&(0,b2.jsx)("span",{...y.getStyles("tabSection",w),"data-position":"left",children:l}),o&&(0,b2.jsx)("span",{...y.getStyles("tabLabel",w),children:o}),i&&(0,b2.jsx)("span",{...y.getStyles("tabSection",w),"data-position":"right",children:i})]})});SQ.classes=SG,SQ.displayName="@mantine/core/TabsTab";let SY="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Ee={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Et=(e,t)=>{var n,r;let{radius:o,color:i,autoContrast:l}=t;return{root:{"--tabs-radius":xz(o),"--tabs-color":x1(i,e),"--tabs-text-color":(n=l,r=e,"boolean"==typeof n?n:r.autoContrast)?Sj({color:i,theme:e,autoContrast:l}):void 0}}},En=xR((e,t)=>{let n=xP("Tabs",Ee,e),{defaultValue:r,value:o,onChange:i,orientation:l,children:s,loop:a,id:c,activateTabWithKeyboard:d,allowTabDeactivation:u,variant:h,color:p,radius:f,inverted:m,placement:g,keepMounted:$,classNames:_,styles:b,unstyled:y,className:v,style:w,vars:k,autoContrast:x,mod:C,...S}=n,E=C3(c),[M,T]=CP({value:o,defaultValue:r,finalValue:null,onChange:i}),N=xX({name:"Tabs",props:n,classes:SG,className:v,style:w,classNames:_,styles:b,unstyled:y,vars:k,varsResolver:Et});return(0,b2.jsx)(SU,{value:{placement:g,value:M,orientation:l,id:E,loop:a,activateTabWithKeyboard:d,getTabId:SV(`${E}-tab`,SY),getPanelId:SV(`${E}-panel`,SY),onChange:T,allowTabDeactivation:u,variant:h,color:p,radius:f,inverted:m,keepMounted:$,unstyled:y,getStyles:N},children:(0,b2.jsx)(Ch,{ref:t,id:E,variant:h,mod:[{orientation:l,inverted:"horizontal"===l&&m,placement:"vertical"===l&&g},C],...N("root"),...S,children:s})})});En.classes=SG,En.displayName="@mantine/core/Tabs",En.Tab=SQ,En.Panel=SZ,En.List=SK;var Er={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};let Eo=(0,r.forwardRef)((e,t)=>{let{className:n,...r}=e;return(0,b2.jsxs)(Ch,{component:"span",className:xU(Er.barsLoader,n),...r,ref:t,children:[(0,b2.jsx)("span",{className:Er.bar}),(0,b2.jsx)("span",{className:Er.bar}),(0,b2.jsx)("span",{className:Er.bar})]})});Eo.displayName="@mantine/core/Bars";let Ei=(0,r.forwardRef)((e,t)=>{let{className:n,...r}=e;return(0,b2.jsxs)(Ch,{component:"span",className:xU(Er.dotsLoader,n),...r,ref:t,children:[(0,b2.jsx)("span",{className:Er.dot}),(0,b2.jsx)("span",{className:Er.dot}),(0,b2.jsx)("span",{className:Er.dot})]})});Ei.displayName="@mantine/core/Dots";let El=(0,r.forwardRef)((e,t)=>{let{className:n,...r}=e;return(0,b2.jsx)(Ch,{component:"span",className:xU(Er.ovalLoader,n),...r,ref:t})});El.displayName="@mantine/core/Oval";let Es={bars:Eo,oval:El,dots:Ei},Ea={loaders:Es,type:"oval"},Ec=(e,t)=>{let{size:n,color:r}=t;return{root:{"--loader-size":xI(n,"loader-size"),"--loader-color":r?x1(r,e):void 0}}},Ed=xR((e,t)=>{let n=xP("Loader",Ea,e),{size:r,color:o,type:i,vars:l,className:s,style:a,classNames:c,styles:d,unstyled:u,loaders:h,variant:p,children:f,...m}=n,g=xX({name:"Loader",props:n,classes:Er,className:s,style:a,classNames:c,styles:d,unstyled:u,vars:l,varsResolver:Ec});return f?(0,b2.jsx)(Ch,{...g("root"),ref:t,...m,children:f}):(0,b2.jsx)(Ch,{...g("root"),ref:t,component:h[i],variant:p,size:r,...m})});Ed.defaultLoaders=Es,Ed.classes=Er,Ed.displayName="@mantine/core/Loader";var Eu={root:"m_9814e45f"};let Eh={zIndex:CD.modal},Ep=(e,t)=>{let{gradient:n,color:r,backgroundOpacity:o,blur:i,radius:l,zIndex:s}=t;return{root:{"--overlay-bg":n||(void 0!==r||void 0!==o)&&x3(r||"#000",o??.6)||void 0,"--overlay-filter":i?`blur(${xy(i)})`:void 0,"--overlay-radius":void 0===l?void 0:xz(l),"--overlay-z-index":s?.toString()}}},Ef=xO((e,t)=>{let n=xP("Overlay",Eh,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,fixed:c,center:d,children:u,radius:h,zIndex:p,gradient:f,blur:m,color:g,backgroundOpacity:$,mod:_,...b}=n,y=xX({name:"Overlay",props:n,classes:Eu,className:o,style:i,classNames:r,styles:l,unstyled:s,vars:a,varsResolver:Ep});return(0,b2.jsx)(Ch,{ref:t,...y("root"),mod:[{center:d,fixed:c},_],...b,children:u})});Ef.classes=Eu,Ef.displayName="@mantine/core/Overlay";var Em={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};let Eg={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:CD.overlay},E$=(e,t)=>{let{zIndex:n}=t;return{root:{"--lo-z-index":n?.toString()}}},E_=xR((e,t)=>{let n=xP("LoadingOverlay",Eg,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,transitionProps:c,loaderProps:d,overlayProps:u,visible:h,zIndex:p,...f}=n,m=x7(),g=xX({name:"LoadingOverlay",classes:Em,props:n,className:o,style:i,classNames:r,styles:l,unstyled:s,vars:a,varsResolver:E$}),$={...Eg.overlayProps,...u};return(0,b2.jsx)(Sg,{transition:"fade",...c,mounted:!!h,children:e=>(0,b2.jsxs)(Ch,{...g("root",{style:e}),ref:t,...f,children:[(0,b2.jsx)(Ed,{...g("loader"),unstyled:s,...d}),(0,b2.jsx)(Ef,{...$,...g("overlay"),darkHidden:!0,unstyled:s,color:u?.color||m.white}),(0,b2.jsx)(Ef,{...$,...g("overlay"),lightHidden:!0,unstyled:s,color:u?.color||m.colors.dark[5]})]})})});E_.classes=Em,E_.displayName="@mantine/core/LoadingOverlay";var Eb={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};let Ey={orientation:"horizontal"},Ev=(e,t)=>{let{borderWidth:n}=t;return{group:{"--button-border-width":xy(n)}}},Ew=xR((e,t)=>{let n=xP("ButtonGroup",Ey,e),{className:r,style:o,classNames:i,styles:l,unstyled:s,orientation:a,vars:c,borderWidth:d,variant:u,mod:h,...p}=xP("ButtonGroup",Ey,e),f=xX({name:"ButtonGroup",props:n,classes:Eb,className:r,style:o,classNames:i,styles:l,unstyled:s,vars:c,varsResolver:Ev,rootSelector:"group"});return(0,b2.jsx)(Ch,{...f("group"),ref:t,variant:u,mod:[{"data-orientation":a},h],role:"group",...p})});Ew.classes=Eb,Ew.displayName="@mantine/core/ButtonGroup";let Ek={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${xy(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},E0={},Ex=(e,t)=>{let{radius:n,color:r,gradient:o,variant:i,size:l,justify:s,autoContrast:a}=t,c=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:o,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":xI(l,"button-height"),"--button-padding-x":xI(l,"button-padding-x"),"--button-fz":l?.includes("compact")?x9(l.replace("compact-","")):x9(l),"--button-radius":void 0===n?void 0:xz(n),"--button-bg":r||i?c.background:void 0,"--button-hover":r||i?c.hover:void 0,"--button-color":c.color,"--button-bd":r||i?c.border:void 0,"--button-hover-color":r||i?c.hoverColor:void 0}}},EC=xO((e,t)=>{let n=xP("Button",E0,e),{style:r,vars:o,className:i,color:l,disabled:s,children:a,leftSection:c,rightSection:d,fullWidth:u,variant:h,radius:p,loading:f,loaderProps:m,gradient:g,classNames:$,styles:_,unstyled:b,"data-disabled":y,autoContrast:v,mod:w,...k}=n,x=xX({name:"Button",props:n,classes:Eb,className:i,style:r,classNames:$,styles:_,unstyled:b,vars:o,varsResolver:Ex});return(0,b2.jsxs)(SN,{ref:t,...x("root",{active:!s&&!f&&!y}),unstyled:b,variant:h,disabled:s||f,mod:[{disabled:s||y,loading:f,block:u,"with-left-section":!!c,"with-right-section":!!d},w],...k,children:[(0,b2.jsx)(Sg,{mounted:!!f,transition:Ek,duration:150,children:e=>(0,b2.jsx)(Ch,{component:"span",...x("loader",{style:e}),"aria-hidden":!0,children:(0,b2.jsx)(Ed,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),(0,b2.jsxs)("span",{...x("inner"),children:[c&&(0,b2.jsx)(Ch,{component:"span",...x("section"),mod:{position:"left"},children:c}),(0,b2.jsx)(Ch,{component:"span",mod:{loading:f},...x("label"),children:a}),d&&(0,b2.jsx)(Ch,{component:"span",...x("section"),mod:{position:"right"},children:d})]})]})});EC.classes=Eb,EC.displayName="@mantine/core/Button",EC.Group=Ew;let ES=(0,r.forwardRef)((e,t)=>{let{size:n="var(--cb-icon-size, 70%)",style:r,...o}=e;return(0,b2.jsx)("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...r,width:n,height:n},ref:t,...o,children:(0,b2.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});ES.displayName="@mantine/core/CloseIcon";var E1={root:"m_86a44da5","root--subtle":"m_220c80f2"};let E2={variant:"subtle"},E3=(e,t)=>{let{size:n,radius:r,iconSize:o}=t;return{root:{"--cb-size":xI(n,"cb-size"),"--cb-radius":void 0===r?void 0:xz(r),"--cb-icon-size":xy(o)}}},EE=xO((e,t)=>{let n=xP("CloseButton",E2,e),{iconSize:r,children:o,vars:i,radius:l,className:s,classNames:a,style:c,styles:d,unstyled:u,"data-disabled":h,disabled:p,variant:f,icon:m,mod:g,...$}=n,_=xX({name:"CloseButton",props:n,className:s,style:c,classes:E1,classNames:a,styles:d,unstyled:u,vars:i,varsResolver:E3});return(0,b2.jsxs)(SN,{ref:t,...$,unstyled:u,variant:f,disabled:p,mod:[{disabled:p||h},g],..._("root",{variant:f,active:!p&&!h}),children:[m||(0,b2.jsx)(ES,{}),o]})});EE.classes=E1,EE.displayName="@mantine/core/CloseButton";let E4={multiple:!1},EM=(0,r.forwardRef)((e,t)=>{let{onChange:n,children:o,multiple:i,accept:l,name:s,form:a,resetRef:c,disabled:d,capture:u,inputProps:h,...p}=xP("FileButton",E4,e),f=(0,r.useRef)();return CF(c,()=>{f.current.value=""}),(0,b2.jsxs)(b2.Fragment,{children:[o({onClick(){d||f.current?.click()},...p}),(0,b2.jsx)("input",{style:{display:"none"},type:"file",accept:l,multiple:i,onChange(e){n(i?Array.from(e.currentTarget.files):e.currentTarget.files[0]||null)},ref:CW(t,f),name:s,form:a,capture:u,...h})]})});EM.displayName="@mantine/core/FileButton";let ET={valueComponent(e){let{value:t}=e;return(0,b2.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t?.name})}},E8=xR((e,t)=>{let n=xP("FileInput",ET,e),{unstyled:o,vars:i,onChange:l,value:s,defaultValue:a,multiple:c,accept:d,name:u,form:h,valueComponent:p,clearable:f,clearButtonProps:m,readOnly:g,capture:$,fileInputProps:_,rightSection:b,size:y,placeholder:v,resetRef:w,...k}=n,x=(0,r.useRef)(null),[C,S]=CP({value:s,defaultValue:a,onChange:l,finalValue:c?[]:null}),E=Array.isArray(C)?0!==C.length:null!==C,M=b||(f&&E&&!g?(0,b2.jsx)(EE,{...m,variant:"subtle",onClick:()=>S(c?[]:null),size:y,unstyled:o}):null);(0,r.useEffect)(()=>{(Array.isArray(C)&&0===C.length||null===C)&&x.current?.()},[C]);let T=p;return(0,b2.jsx)(EM,{onChange:S,multiple:c,accept:d,name:u,form:h,resetRef:CW(x,w),disabled:g,capture:$,inputProps:_,children:e=>(0,b2.jsx)(C5,{component:"button",ref:t,rightSection:M,...e,...k,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:o,size:y,children:E?(0,b2.jsx)(T,{value:C}):(0,b2.jsx)(C6.Placeholder,{children:v})})})});E8.classes=C5.classes,E8.displayName="@mantine/core/FileInput";let E6=E8;var EN={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};let E5={orientation:"horizontal"},E7=(e,t)=>{let{borderWidth:n}=t;return{group:{"--ai-border-width":xy(n)}}},EL=xR((e,t)=>{let n=xP("ActionIconGroup",E5,e),{className:r,style:o,classNames:i,styles:l,unstyled:s,orientation:a,vars:c,borderWidth:d,variant:u,mod:h,...p}=xP("ActionIconGroup",E5,e),f=xX({name:"ActionIconGroup",props:n,classes:EN,className:r,style:o,classNames:i,styles:l,unstyled:s,vars:c,varsResolver:E7,rootSelector:"group"});return(0,b2.jsx)(Ch,{...f("group"),ref:t,variant:u,mod:[{"data-orientation":a},h],role:"group",...p})});EL.classes=EN,EL.displayName="@mantine/core/ActionIconGroup";let EP={},EA=(e,t)=>{let{size:n,radius:r,variant:o,gradient:i,color:l,autoContrast:s}=t,a=e.variantColorResolver({color:l||e.primaryColor,theme:e,gradient:i,variant:o||"filled",autoContrast:s});return{root:{"--ai-size":xI(n,"ai-size"),"--ai-radius":void 0===r?void 0:xz(r),"--ai-bg":l||o?a.background:void 0,"--ai-hover":l||o?a.hover:void 0,"--ai-hover-color":l||o?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":l||o?a.border:void 0}}},ER=xO((e,t)=>{let n=xP("ActionIcon",EP,e),{className:r,unstyled:o,variant:i,classNames:l,styles:s,style:a,loading:c,loaderProps:d,size:u,color:h,radius:p,__staticSelector:f,gradient:m,vars:g,children:$,disabled:_,"data-disabled":b,autoContrast:y,mod:v,...w}=n,k=xX({name:["ActionIcon",f],props:n,className:r,style:a,classes:EN,classNames:l,styles:s,unstyled:o,vars:g,varsResolver:EA});return(0,b2.jsxs)(SN,{...k("root",{active:!_&&!c&&!b}),...w,unstyled:o,variant:i,size:u,disabled:_||c,ref:t,mod:[{loading:c,disabled:_||b},v],children:[(0,b2.jsx)(Sg,{mounted:!!c,transition:"slide-down",duration:150,children:e=>(0,b2.jsx)(Ch,{component:"span",...k("loader",{style:e}),"aria-hidden":!0,children:(0,b2.jsx)(Ed,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),(0,b2.jsx)(Ch,{component:"span",mod:{loading:c},...k("icon"),children:$})]})});ER.classes=EN,ER.displayName="@mantine/core/ActionIcon",ER.Group=EL;var EO={root:"m_6d731127"};let ED={gap:"md",align:"stretch",justify:"flex-start"},EI=(e,t)=>{let{gap:n,align:r,justify:o}=t;return{root:{"--stack-gap":xH(n),"--stack-align":r,"--stack-justify":o}}},EH=xR((e,t)=>{let n=xP("Stack",ED,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,align:c,justify:d,gap:u,variant:h,...p}=n,f=xX({name:"Stack",props:n,classes:EO,className:o,style:i,classNames:r,styles:l,unstyled:s,vars:a,varsResolver:EI});return(0,b2.jsx)(Ch,{ref:t,...f("root"),variant:h,...p})});EH.classes=EO,EH.displayName="@mantine/core/Stack";var Ez={root:"m_b6d8b162"};let E9={inherit:!1},EB=(e,t)=>{var n;let{variant:r,lineClamp:o,gradient:i,size:l,color:s}=t;return{root:{"--text-fz":x9(l),"--text-lh":xI(n=l,"mantine-line-height",!1),"--text-gradient":"gradient"===r?x2(i,e):void 0,"--text-line-clamp":"number"==typeof o?o.toString():void 0,"--text-color":s?x1(s,e):void 0}}},EV=xO((e,t)=>{var n;let r=xP("Text",E9,e),{lineClamp:o,truncate:i,inline:l,inherit:s,gradient:a,span:c,__staticSelector:d,vars:u,className:h,style:p,classNames:f,styles:m,unstyled:g,variant:$,mod:_,size:b,...y}=r,v=xX({name:["Text",d],props:r,classes:Ez,className:h,style:p,classNames:f,styles:m,unstyled:g,vars:u,varsResolver:EB});return(0,b2.jsx)(Ch,{...v("root",{focusable:!0}),ref:t,component:c?"span":"p",variant:$,mod:[{"data-truncate":"start"===(n=i)?"start":"end"===n||n?"end":void 0,"data-line-clamp":"number"==typeof o,"data-inline":l,"data-inherit":s},_],size:b,...y})});EV.classes=Ez,EV.displayName="@mantine/core/Text";var Ej={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};let EF={},EU=(e,t)=>{let{radius:n,color:r,gradient:o,variant:i,size:l,autoContrast:s}=t,a=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:o,variant:i||"filled",autoContrast:s});return{root:{"--badge-height":xI(l,"badge-height"),"--badge-padding-x":xI(l,"badge-padding-x"),"--badge-fz":xI(l,"badge-fz"),"--badge-radius":void 0===n?void 0:xz(n),"--badge-bg":r||i?a.background:void 0,"--badge-color":r||i?a.color:void 0,"--badge-bd":r||i?a.border:void 0,"--badge-dot-color":"dot"===i?x1(r,e):void 0}}},EW=xO((e,t)=>{let n=xP("Badge",EF,e),{classNames:r,className:o,style:i,styles:l,unstyled:s,vars:a,radius:c,color:d,gradient:u,leftSection:h,rightSection:p,children:f,variant:m,fullWidth:g,autoContrast:$,circle:_,mod:b,...y}=n,v=xX({name:"Badge",props:n,classes:Ej,className:o,style:i,classNames:r,styles:l,unstyled:s,vars:a,varsResolver:EU});return(0,b2.jsxs)(Ch,{variant:m,mod:[{block:g,circle:_,"with-right-section":!!p,"with-left-section":!!h},b],...v("root",{variant:m}),ref:t,...y,children:[h&&(0,b2.jsx)("span",{...v("section"),"data-position":"left",children:h}),(0,b2.jsx)("span",{...v("label"),children:f}),p&&(0,b2.jsx)("span",{...v("section"),"data-position":"right",children:p})]})});EW.classes=Ej,EW.displayName="@mantine/core/Badge";let EG={duration:100,transition:"fade"};var Eq={tooltip:"m_1b3c8819",arrow:"m_f898399f"};let EK={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:CD.popover},EJ=(e,t)=>{let{radius:n,color:r}=t;return{tooltip:{"--tooltip-radius":void 0===n?void 0:xz(n),"--tooltip-bg":r?x1(r,e):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}},EZ=xR((e,t)=>{let n=xP("TooltipFloating",EK,e),{children:o,refProp:i,withinPortal:l,style:s,className:a,classNames:c,styles:d,unstyled:u,radius:h,color:p,label:f,offset:m,position:g,multiline:$,zIndex:_,disabled:b,defaultOpened:y,variant:v,vars:w,portalProps:k,...x}=n,C=x7(),S=xX({name:"TooltipFloating",props:n,classes:Eq,className:a,style:s,classNames:c,styles:d,unstyled:u,rootSelector:"tooltip",vars:w,varsResolver:EJ}),{handleMouseMove:E,x:M,y:T,opened:N,boundaryRef:L,floating:P,setOpened:A}=function(e){let{offset:t,position:n,defaultOpened:o}=e,[i,l]=(0,r.useState)(o),s=(0,r.useRef)(),{x:a,y:c,elements:d,refs:u,update:h,placement:p}=vL({placement:n,middleware:[yZ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=p.includes("right")?t:n.includes("left")?-1*t:0,m=p.includes("bottom")?t:n.includes("top")?-1*t:0,g=(0,r.useCallback)(e=>{let{clientX:t,clientY:n}=e;u.setPositionReference({getBoundingClientRect:()=>({width:0,height:0,x:t,y:n,left:t+f,top:n+m,right:t,bottom:n})})},[d.reference]);return(0,r.useEffect)(()=>{if(u.floating.current){let e=s.current;e.addEventListener("mousemove",g);let t=bH(u.floating.current);return t.forEach(e=>{e.addEventListener("scroll",h)}),()=>{e.removeEventListener("mousemove",g),t.forEach(e=>{e.removeEventListener("scroll",h)})}}},[d.reference,u.floating.current,h,g,i]),{handleMouseMove:g,x:a,y:c,opened:i,setOpened:l,boundaryRef:s,floating:u.setFloating}}({offset:m,position:g,defaultOpened:y});if(!So(o))throw Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");let R=CW(L,o.ref,t);return(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(Sh,{...k,withinPortal:l,children:(0,b2.jsx)(Ch,{...x,...S("tooltip",{style:{...function e(t,n){return Array.isArray(t)?[...t].reduce((t,r)=>({...t,...e(r,n)}),{}):"function"==typeof t?t(n):null==t?{}:t}(s,C),zIndex:_,display:!b&&N?"block":"none",top:(T&&Math.round(T))??"",left:(M&&Math.round(M))??""}}),variant:v,ref:P,mod:{multiline:$},children:f})}),(0,r.cloneElement)(o,{...o.props,[i]:R,onMouseEnter(e){o.props.onMouseEnter?.(e),E(e),A(!0)},onMouseLeave(e){o.props.onMouseLeave?.(e),A(!1)}})]})});EZ.classes=Eq,EZ.displayName="@mantine/core/TooltipFloating";let EX=(0,r.createContext)(!1),EQ=EX.Provider,EY={openDelay:0,closeDelay:0};function Me(e){let{openDelay:t,closeDelay:n,children:r}=xP("TooltipGroup",EY,e);return(0,b2.jsx)(EQ,{value:!0,children:(0,b2.jsx)(vw,{delay:{open:t,close:n},children:r})})}Me.displayName="@mantine/core/TooltipGroup",Me.extend=e=>e;let Mt={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:CD.popover,positionDependencies:[]},Mn=(e,t)=>{let{radius:n,color:r}=t;return{tooltip:{"--tooltip-radius":void 0===n?void 0:xz(n),"--tooltip-bg":r?x1(r,e):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}},Mr=xR((e,t)=>{var n,o;let i=xP("Tooltip",Mt,e),{children:l,position:s,refProp:a,label:c,openDelay:d,closeDelay:u,onPositionChange:h,opened:p,defaultOpened:f,withinPortal:m,radius:g,color:$,classNames:_,styles:b,unstyled:y,style:v,className:w,withArrow:k,arrowSize:x,arrowOffset:C,arrowRadius:S,arrowPosition:E,offset:M,transitionProps:T,multiline:N,events:L,zIndex:P,disabled:A,positionDependencies:R,onClick:O,onMouseEnter:D,onMouseLeave:I,inline:H,variant:z,keepMounted:B,vars:V,portalProps:j,mod:F,floatingStrategy:U,...W}=xP("Tooltip",Mt,i),{dir:G}=Cz(),q=(0,r.useRef)(null),K=function e(t){let[n,o]=(0,r.useState)(t.defaultOpened),i="boolean"==typeof t.opened?t.opened:n,l=(0,r.useContext)(EX),s=C3(),{delay:a,currentId:c,setCurrentId:d}=vv(),u=(0,r.useCallback)(e=>{o(e),e&&d(s)},[d,s]),{x:h,y:p,context:f,refs:m,update:g,placement:$,middlewareData:{arrow:{x:_,y:b}={}}}=vL({strategy:t.strategy,placement:t.position,open:i,onOpenChange:u,middleware:[yJ(t.offset),yZ({padding:8}),yQ(),vt({element:t.arrowRef,padding:t.arrowOffset}),...t.inline?[ve()]:[]]}),{getReferenceProps:y,getFloatingProps:v}=vO([function e(t,n){void 0===n&&(n={});let{open:o,onOpenChange:i,dataRef:l,events:s,elements:a}=t,{enabled:c=!0,delay:d=0,handleClose:u=null,mouseOnly:h=!1,restMs:p=0,move:f=!0}=n,m=vf(),g=vp(),$=vg(u),_=vg(d),b=vg(o),y=r.useRef(),v=r.useRef(-1),w=r.useRef(),k=r.useRef(-1),x=r.useRef(!0),C=r.useRef(!1),S=r.useRef(()=>{}),E=r.useRef(!1),M=r.useCallback(()=>{var e;let t=null==(e=l.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t},[l]);r.useEffect(()=>{if(c)return s.on("openchange",e),()=>{s.off("openchange",e)};function e(e){let{open:t}=e;t||(clearTimeout(v.current),clearTimeout(k.current),x.current=!0,E.current=!1)}},[c,s]),r.useEffect(()=>{if(!c||!$.current||!o)return;function e(e){M()&&i(!1,e,"hover")}let t=bG(a.floating).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}},[a.floating,o,i,c,$,M]);let T=r.useCallback(function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="hover");let r=v_(_.current,"close",y.current);r&&!w.current?(clearTimeout(v.current),v.current=window.setTimeout(()=>i(!1,e,n),r)):t&&(clearTimeout(v.current),i(!1,e,n))},[_,i]),N=vo(()=>{S.current(),w.current=void 0}),L=vo(()=>{if(C.current){let e=bG(a.floating).body;e.style.pointerEvents="",e.removeAttribute(v$),C.current=!1}});r.useEffect(()=>{if(c&&b8(a.domReference)){var e;let t=a.domReference;return o&&t.addEventListener("mouseleave",d),null==(e=a.floating)||e.addEventListener("mouseleave",d),f&&t.addEventListener("mousemove",r,{once:!0}),t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",s),()=>{var e;o&&t.removeEventListener("mouseleave",d),null==(e=a.floating)||e.removeEventListener("mouseleave",d),f&&t.removeEventListener("mousemove",r),t.removeEventListener("mouseenter",r),t.removeEventListener("mouseleave",s)}}function n(){return!!l.current.openEvent&&["click","mousedown"].includes(l.current.openEvent.type)}function r(e){if(clearTimeout(v.current),x.current=!1,h&&!bW(y.current)||p>0&&!v_(_.current,"open"))return;let t=v_(_.current,"open",y.current);t?v.current=window.setTimeout(()=>{b.current||i(!0,e,"hover")},t):i(!0,e,"hover")}function s(e){if(n())return;S.current();let t=bG(a.floating);if(clearTimeout(k.current),E.current=!1,$.current&&l.current.floatingContext){o||clearTimeout(v.current),w.current=$.current({...l.current.floatingContext,tree:m,x:e.clientX,y:e.clientY,onClose(){L(),N(),T(e,!0,"safe-polygon")}});let r=w.current;return t.addEventListener("mousemove",r),void(S.current=()=>{t.removeEventListener("mousemove",r)})}"touch"===y.current&&bB(a.floating,e.relatedTarget)||T(e)}function d(e){n()||l.current.floatingContext&&(null==$.current||$.current({...l.current.floatingContext,tree:m,x:e.clientX,y:e.clientY,onClose(){L(),N(),T(e)}})(e))}},[a,c,t,h,p,f,T,N,L,i,o,b,m,_,$,l]),vi(()=>{var e,t;if(c&&o&&null!=(e=$.current)&&e.__options.blockPointerEvents&&M()){C.current=!0;let n=a.floating;if(b8(a.domReference)&&n){let r=bG(a.floating).body;r.setAttribute(v$,"");let i=a.domReference,l=null==m||null==(t=m.nodesRef.current.find(e=>e.id===g))||null==(t=t.context)?void 0:t.elements.floating;return l&&(l.style.pointerEvents=""),r.style.pointerEvents="none",i.style.pointerEvents="auto",n.style.pointerEvents="auto",()=>{r.style.pointerEvents="",i.style.pointerEvents="",n.style.pointerEvents=""}}}},[c,o,g,a,m,$,M]),vi(()=>{o||(y.current=void 0,E.current=!1,N(),L())},[o,N,L]),r.useEffect(()=>()=>{N(),clearTimeout(v.current),clearTimeout(k.current),L()},[c,a.domReference,N,L]);let P=r.useMemo(()=>{function e(e){y.current=e.pointerType}return{onPointerDown:e,onPointerEnter:e,onMouseMove(e){let{nativeEvent:t}=e;function n(){x.current||b.current||i(!0,t,"hover")}h&&!bW(y.current)||o||0===p||E.current&&e.movementX**2+e.movementY**2<2||(clearTimeout(k.current),"touch"===y.current?n():(E.current=!0,k.current=window.setTimeout(n,p)))}}},[h,i,o,b,p]),A=r.useMemo(()=>({onMouseEnter(){clearTimeout(v.current)},onMouseLeave(e){T(e.nativeEvent,!1)}}),[T]);return r.useMemo(()=>c?{reference:P,floating:A}:{},[c,P,A])}(f,{enabled:t.events?.hover,delay:l?a:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),function e(t,n){void 0===n&&(n={});let{open:o,onOpenChange:i,events:l,dataRef:s,elements:a}=t,{enabled:c=!0,visibleOnly:d=!0}=n,u=r.useRef(!1),h=r.useRef(),p=r.useRef(!0);r.useEffect(()=>{if(!c)return;let e=b4(a.domReference);function t(){!o&&b6(a.domReference)&&a.domReference===b9(bG(a.domReference))&&(u.current=!0)}function n(){p.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",n,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",n,!0)}},[a.domReference,o,c]),r.useEffect(()=>{if(c)return l.on("openchange",e),()=>{l.off("openchange",e)};function e(e){let{reason:t}=e;"reference-press"!==t&&"escape-key"!==t||(u.current=!0)}},[l,c]),r.useEffect(()=>()=>{clearTimeout(h.current)},[]);let f=r.useMemo(()=>({onPointerDown(e){var t;t=e.nativeEvent,!bj().includes("jsdom/")&&(!bU()&&0===t.width&&0===t.height||bU()&&1===t.width&&1===t.height&&0===t.pressure&&0===t.detail&&"mouse"===t.pointerType||t.width<1&&t.height<1&&0===t.pressure&&0===t.detail&&"touch"===t.pointerType)||(p.current=!1)},onMouseLeave(){u.current=!1},onFocus(e){if(u.current)return;let t=bK(e.nativeEvent);if(d&&b8(t))try{if(bF()&&bV().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints)throw Error();if(!t.matches(":focus-visible"))return}catch(n){var r;if(!p.current&&(r=t,!(b6(r)&&r.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])"))))return}i(!0,e.nativeEvent,"focus")},onBlur(e){u.current=!1;let t=e.relatedTarget,n=e.nativeEvent,r=b8(t)&&t.hasAttribute(vm("focus-guard"))&&"outside"===t.getAttribute("data-type");h.current=window.setTimeout(()=>{var e;let o=b9(a.domReference?a.domReference.ownerDocument:document);(t||o!==a.domReference)&&(bB(null==(e=s.current.floatingContext)?void 0:e.refs.floating.current,o)||bB(a.domReference,o)||r||i(!1,n,"focus"))})}}),[s,a.domReference,i,d]);return r.useMemo(()=>c?{reference:f}:{},[c,f])}(f,{enabled:t.events?.focus,visibleOnly:!0}),function e(t,n){var o;void 0===n&&(n={});let{open:i,floatingId:l}=t,{enabled:s=!0,role:a="dialog"}=n,c=null!=(o=vD.get(a))?o:a,d=vd(),u=null!=vp(),h=r.useMemo(()=>"tooltip"===c||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:i?l:void 0}:{"aria-expanded":i?"true":"false","aria-haspopup":"alertdialog"===c?"dialog":c,"aria-controls":i?l:void 0,..."listbox"===c&&{role:"combobox"},..."menu"===c&&{id:d},..."menu"===c&&u&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}},[c,l,u,i,d,a]),p=r.useMemo(()=>{let e={id:l,...c&&{role:c}};return"tooltip"===c||"label"===a?e:{...e,..."menu"===c&&{"aria-labelledby":d}}},[c,l,d,a]),f=r.useCallback(e=>{let{active:t,selected:n}=e,r={role:"option",...t&&{id:l+"-option"}};switch(a){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}},[l,a]);return r.useMemo(()=>s?{reference:h,floating:p,item:f}:{},[s,h,p,f])}(f,{role:"tooltip"}),v7(f,{enabled:void 0===t.opened}),function e(t,n){void 0===n&&(n={});let{open:r,onOpenChange:o,floatingId:i}=t,{id:l,enabled:s=!0}=n,a=null!=l?l:i,c=vv(),{currentId:d,setCurrentId:u,initialDelay:h,setState:p,timeoutMs:f}=c;return vi(()=>{s&&d&&(p({delay:{open:1,close:v_(h,"close")}}),d!==a&&o(!1))},[s,a,o,p,d,h]),vi(()=>{function e(){o(!1),p({delay:h,currentId:null})}if(s&&d&&!r&&d===a){if(f){let t=window.setTimeout(e,f);return()=>{clearTimeout(t)}}e()}},[s,r,p,d,a,o,h,f]),vi(()=>{s&&u!==vb&&r&&u(a)},[s,r,u,a]),c}(f,{id:s})]);return Sw({opened:i,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:m,update:g}}),CA(()=>{t.onPositionChange?.($)},[$]),{x:h,y:p,arrowX:_,arrowY:b,reference:m.setReference,floating:m.setFloating,getFloatingProps:v,getReferenceProps:y,isGroupPhase:i&&c&&c!==s,opened:i,placement:$}}({position:C9(G,s),closeDelay:u,openDelay:d,onPositionChange:h,opened:p,defaultOpened:f,events:L,arrowRef:q,arrowOffset:C,offset:"number"==typeof M?M+(k?x/2:0):M,positionDependencies:[...R,l],inline:H,strategy:U}),J=xX({name:"Tooltip",props:i,classes:Eq,className:w,style:v,classNames:_,styles:b,unstyled:y,rootSelector:"tooltip",vars:V,varsResolver:Mn});if(!So(l))throw Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");let Z=CW(K.reference,l.ref,t),X=(n=T,o={duration:100,transition:"fade"},{...EG,...o,...n});return(0,b2.jsxs)(b2.Fragment,{children:[(0,b2.jsx)(Sh,{...j,withinPortal:m,children:(0,b2.jsx)(Sg,{...X,keepMounted:B,mounted:!A&&!!K.opened,duration:K.isGroupPhase?10:X.duration,children:e=>(0,b2.jsxs)(Ch,{...W,"data-fixed":"fixed"===U||void 0,variant:z,mod:[{multiline:N},F],...K.getFloatingProps({ref:K.floating,className:J("tooltip").className,style:{...J("tooltip").style,...e,zIndex:P,top:K.y??0,left:K.x??0}}),children:[c,(0,b2.jsx)(CZ,{ref:q,arrowX:K.arrowX,arrowY:K.arrowY,visible:k,position:K.placement,arrowSize:x,arrowOffset:C,arrowRadius:S,arrowPosition:E,...J("arrow")})]})})}),(0,r.cloneElement)(l,K.getReferenceProps({onClick:O,onMouseEnter:D,onMouseLeave:I,onMouseMove:i.onMouseMove,onPointerDown:i.onPointerDown,onPointerEnter:i.onPointerEnter,[a]:Z,className:xU(w,l.props.className),...l.props}))]})});function Mo(e){return"auto"===e||"dark"===e||"light"===e}function Mi(){let e=x7(),t=xj(),n=xY(e.breakpoints).reduce((t,n)=>{let r=e.breakpoints[n].includes("px"),o=function(e){var t;let n="string"==typeof(t=e)&&t.includes("var(--mantine-scale)")?t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim():t;return"number"==typeof n?n:"string"==typeof n?n.includes("calc")||n.includes("var")?n:n.includes("px")?Number(n.replace("px","")):n.includes("rem")?16*Number(n.replace("rem","")):n.includes("em")?16*Number(n.replace("em","")):Number(n):NaN}(e.breakpoints[n]);return`${t}@media (max-width: ${r?o-.1+"px":xv(o-.1)}) {.mantine-visible-from-${n} {display: none !important;}}@media (min-width: ${r?`${o}px`:xv(o)}) {.mantine-hidden-from-${n} {display: none !important;}}`},"");return(0,b2.jsx)("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function Ml(e){return Object.entries(e).map(e=>{let[t,n]=e;return`${t}: ${n};`}).join("")}function Ms(e,t){return(Array.isArray(e)?e:[e]).reduce((e,t)=>`${t}{${e}}`,t)}function Ma(e){let{theme:t,color:n,colorScheme:r,name:o=n,withColorValues:i=!0}=e;if(!t.colors[n])return{};if("light"===r){let l=x0(t,"light"),s={[`--mantine-color-${o}-text`]:`var(--mantine-color-${o}-filled)`,[`--mantine-color-${o}-filled`]:`var(--mantine-color-${o}-${l})`,[`--mantine-color-${o}-filled-hover`]:`var(--mantine-color-${o}-${9===l?8:l+1})`,[`--mantine-color-${o}-light`]:xE(t.colors[n][l],.1),[`--mantine-color-${o}-light-hover`]:xE(t.colors[n][l],.12),[`--mantine-color-${o}-light-color`]:`var(--mantine-color-${o}-${l})`,[`--mantine-color-${o}-outline`]:`var(--mantine-color-${o}-${l})`,[`--mantine-color-${o}-outline-hover`]:xE(t.colors[n][l],.05)};return i?{[`--mantine-color-${o}-0`]:t.colors[n][0],[`--mantine-color-${o}-1`]:t.colors[n][1],[`--mantine-color-${o}-2`]:t.colors[n][2],[`--mantine-color-${o}-3`]:t.colors[n][3],[`--mantine-color-${o}-4`]:t.colors[n][4],[`--mantine-color-${o}-5`]:t.colors[n][5],[`--mantine-color-${o}-6`]:t.colors[n][6],[`--mantine-color-${o}-7`]:t.colors[n][7],[`--mantine-color-${o}-8`]:t.colors[n][8],[`--mantine-color-${o}-9`]:t.colors[n][9],...s}:s}let a=x0(t,"dark"),c={[`--mantine-color-${o}-text`]:`var(--mantine-color-${o}-4)`,[`--mantine-color-${o}-filled`]:`var(--mantine-color-${o}-${a})`,[`--mantine-color-${o}-filled-hover`]:`var(--mantine-color-${o}-${9===a?8:a+1})`,[`--mantine-color-${o}-light`]:xE(t.colors[n][Math.max(0,a-2)],.15),[`--mantine-color-${o}-light-hover`]:xE(t.colors[n][Math.max(0,a-2)],.2),[`--mantine-color-${o}-light-color`]:`var(--mantine-color-${o}-${Math.max(a-5,0)})`,[`--mantine-color-${o}-outline`]:`var(--mantine-color-${o}-${Math.max(a-4,0)})`,[`--mantine-color-${o}-outline-hover`]:xE(t.colors[n][Math.max(a-4,0)],.05)};return i?{[`--mantine-color-${o}-0`]:t.colors[n][0],[`--mantine-color-${o}-1`]:t.colors[n][1],[`--mantine-color-${o}-2`]:t.colors[n][2],[`--mantine-color-${o}-3`]:t.colors[n][3],[`--mantine-color-${o}-4`]:t.colors[n][4],[`--mantine-color-${o}-5`]:t.colors[n][5],[`--mantine-color-${o}-6`]:t.colors[n][6],[`--mantine-color-${o}-7`]:t.colors[n][7],[`--mantine-color-${o}-8`]:t.colors[n][8],[`--mantine-color-${o}-9`]:t.colors[n][9],...c}:c}function Mc(e,t,n){xY(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}Mr.classes=Eq,Mr.displayName="@mantine/core/Tooltip",Mr.Floating=EZ,Mr.Group=Me;let Md=e=>{let t=x0(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:xy(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":SF(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":SF(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Mc(r.variables,e.breakpoints,"breakpoint"),Mc(r.variables,e.spacing,"spacing"),Mc(r.variables,e.fontSizes,"font-size"),Mc(r.variables,e.lineHeights,"line-height"),Mc(r.variables,e.shadows,"shadow"),Mc(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((t,n)=>{r.variables[`--mantine-primary-color-${n}`]=`var(--mantine-color-${e.primaryColor}-${n})`}),xY(e.colors).forEach(t=>{var n;let o=e.colors[t];if((n=o)&&"object"==typeof n&&"mantine-virtual-color"in n)return Object.assign(r.light,Ma({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),void Object.assign(r.dark,Ma({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));o.forEach((e,n)=>{r.variables[`--mantine-color-${t}-${n}`]=e}),Object.assign(r.light,Ma({theme:e,color:t,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Ma({theme:e,color:t,colorScheme:"dark",withColorValues:!1}))});let o=e.headings.sizes;return xY(o).forEach(t=>{r.variables[`--mantine-${t}-font-size`]=o[t].fontSize,r.variables[`--mantine-${t}-line-height`]=o[t].lineHeight,r.variables[`--mantine-${t}-font-weight`]=o[t].fontWeight||e.headings.fontWeight}),r},Mu=Md(xM);function Mh(e){var t;let{cssVariablesSelector:n,deduplicateCssVariables:r}=e,o=x7(),i=xj(),l=function(e){let{theme:t,generator:n}=e,r=Md(t),o=n?.(t);return o?x8(r,o):r}({theme:o,generator:xV().cssVariablesResolver}),s=":root"===n&&r,a=function(e,t){let n=Ml(e.variables),r=n?Ms(t,n):"",o=Ml(e.dark),i=Ml(e.light);return`${r}${o?Ms(":host"===t?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):""}${i?Ms(":host"===t?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,i):""}`}(s?function(e){let t={variables:{},light:{},dark:{}};return xY(e.variables).forEach(n=>{Mu.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),xY(e.light).forEach(n=>{Mu.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),xY(e.dark).forEach(n=>{Mu.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}(l):l,n);return a?(0,b2.jsx)("style",{"data-mantine-styles":!0,nonce:i?.(),dangerouslySetInnerHTML:{__html:`${a}${s?"":(t=n,`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`)}`}}):null}function Mp(e,t){let n="auto"!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",n)}function Mf(e){let{theme:t,children:n,getStyleNonce:o,withStaticClasses:i=!0,withGlobalClasses:l=!0,deduplicateCssVariables:s=!0,withCssVariables:a=!0,cssVariablesSelector:c=":root",classNamesPrefix:d="mantine",colorSchemeManager:u=function e(){let t,{key:n="mantine-color-scheme-value"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{get(e){if("undefined"==typeof window)return e;try{let t=window.localStorage.getItem(n);return Mo(t)?t:e}catch{return e}},set(e){try{window.localStorage.setItem(n,e)}catch(t){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",t)}},subscribe(e){t=t=>{t.storageArea===window.localStorage&&t.key===n&&Mo(t.newValue)&&e(t.newValue)},window.addEventListener("storage",t)},unsubscribe(){window.removeEventListener("storage",t)},clear(){window.localStorage.removeItem(n)}}}(),defaultColorScheme:h="light",getRootElement:p=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:m,stylesTransform:g}=e,{colorScheme:$,setColorScheme:_,clearColorScheme:b}=function(e){let{manager:t,defaultColorScheme:n,getRootElement:o,forceColorScheme:i}=e,l=(0,r.useRef)(),[s,a]=(0,r.useState)(()=>t.get(n)),c=i||s,d=(0,r.useCallback)(e=>{i||(Mp(e,o),a(e),t.set(e))},[t.set,c,i]),u=(0,r.useCallback)(()=>{a(n),Mp(n,o),t.clear()},[t.clear,n]);return(0,r.useEffect)(()=>(t.subscribe(d),t.unsubscribe),[t.subscribe,t.unsubscribe]),CS(()=>{Mp(t.get(n),o)},[]),(0,r.useEffect)(()=>{if(i)return Mp(i,o),()=>{};void 0===i&&Mp(s,o),l.current=window.matchMedia("(prefers-color-scheme: dark)");let e=e=>{"auto"===s&&Mp(e.matches?"dark":"light",o)};return l.current?.addEventListener("change",e),()=>l.current?.removeEventListener("change",e)},[s,i]),{colorScheme:c,setColorScheme:d,clearColorScheme:u}}({defaultColorScheme:h,forceColorScheme:m,manager:u,getRootElement:p});return function(e){let{respectReducedMotion:t,getRootElement:n}=e;CS(()=>{t&&n()?.setAttribute("data-respect-reduced-motion","true")},[t])}({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:p}),(0,b2.jsx)(xB.Provider,{value:{colorScheme:$,setColorScheme:_,clearColorScheme:b,getRootElement:p,classNamesPrefix:d,getStyleNonce:o,cssVariablesResolver:f,cssVariablesSelector:c,withStaticClasses:i,stylesTransform:g},children:(0,b2.jsxs)(xL,{theme:t,children:[a&&(0,b2.jsx)(Mh,{cssVariablesSelector:c,deduplicateCssVariables:s}),l&&(0,b2.jsx)(Mi,{}),n]})})}Mh.displayName="@mantine/CssVariables",function(){let e=console.error;console.error=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.length>1&&"string"==typeof n[0]&&n[0].toLowerCase().includes("extra attributes from the server")&&"string"==typeof n[1]&&n[1].toLowerCase().includes("data-mantine-color-scheme")||e(...n)}}(),Mf.displayName="@mantine/core/MantineProvider";let Mm=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function e(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"--bn";for(let i in r){let l=`${o}-${i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}`;"object"!=typeof r[i]?("number"==typeof r[i]&&(r[i]=`${r[i]}px`),n?t.style.removeProperty(l):t.style.setProperty(l,r[i].toString())):e(r[i],l)}}(e),[]},Mg=(e,t)=>Mm(e,t),M$={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},M_=(0,r.forwardRef)((e,t)=>{let{className:n,name:r,label:o,icon:i,value:l,autoFocus:s,placeholder:a,onKeyDown:c,onChange:d,onSubmit:u,...h}=e;return gN(h),(0,b2.jsx)(CL,{size:"xs",className:n,ref:t,name:r,label:o,leftSection:i,value:l,autoFocus:s,"data-autofocus":s?"true":void 0,placeholder:a,onKeyDown:c,onChange:d,onSubmit:u})});var Mb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},My=r.createContext&&r.createContext(Mb),Mv=["attr","size","title"];function Mw(){return(Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mk(Object(n),!0).forEach(function(t){Mx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mx(e,t,n){var r,o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r=t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MC(e){return t=>r.createElement(MS,Mw({attr:M0({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,M0({key:n},t.attr),e(t.child)))}(e.child))}function MS(e){var t=t=>{var n,{attr:o,size:i,title:l}=e,s=function e(t,n){if(null==t)return{};var r,o,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)r=l[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(e,Mv),a=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Mw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:n,style:M0(M0({color:e.color||t.color},t.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==My?r.createElement(My.Consumer,null,e=>t(e)):t(Mb)}function M1(e){return MC({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function M2(e){return MC({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(e)}let M3=(0,r.createContext)(void 0),ME=(0,r.forwardRef)((e,t)=>{let{children:n,onOpenChange:o,position:i,sub:l,...s}=e;gN(s);let[a,c]=(0,r.useState)(!1),d=(0,r.useRef)(null),u=(0,r.useRef)(),h=(0,r.useCallback)(()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1)},250)},[]),p=(0,r.useCallback)(()=>{u.current&&clearTimeout(u.current),c(!0)},[]);return(0,b2.jsx)(M3.Provider,{value:{onMenuMouseOver:p,onMenuMouseLeave:h},children:(0,b2.jsx)(SD.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:CU(t,d),onMouseOver:p,onMouseLeave:h,children:(0,b2.jsx)(SD,{portalProps:{target:d.current?d.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onClose:()=>null==o?void 0:o(!1),onOpen:()=>null==o?void 0:o(!0),position:i,children:n})})})}),M4=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,icon:o,checked:i,subTrigger:l,onClick:s,...a}=e;return gN(a,!1),l?(0,b2.jsxs)("div",{ref:t,...a,children:[r,(0,b2.jsx)(M2,{size:15})]}):(0,b2.jsx)(SD.Item,{className:n,ref:t,leftSection:o,rightSection:i?(0,b2.jsx)(SI,{size:10}):!1===i?(0,b2.jsx)("div",{className:"bn-tick-space"}):null,onClick:s,...a,children:r})}),MM=(0,r.forwardRef)((e,t)=>{let{className:n,children:o,sub:i,...l}=e;gN(l);let s=(0,r.useContext)(M3);return(0,b2.jsx)(SD.Dropdown,{className:n,ref:t,onMouseOver:null==s?void 0:s.onMenuMouseOver,onMouseLeave:null==s?void 0:s.onMenuMouseLeave,children:o})}),MT=(0,r.forwardRef)((e,t)=>{let{className:n,...r}=e;return gN(r),(0,b2.jsx)(SD.Divider,{className:n,ref:t})}),M8=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,...o}=e;return gN(o),(0,b2.jsx)(SD.Label,{className:n,ref:t,children:r})}),M6=(0,r.forwardRef)((e,t)=>{let{className:n,tabs:r,defaultOpenTab:o,openTab:i,setOpenTab:l,loading:s,...a}=e;return gN(a),(0,b2.jsx)(SB,{className:n,ref:t,children:(0,b2.jsxs)(En,{value:i,defaultValue:o,onChange:l,children:[s&&(0,b2.jsx)(E_,{visible:s}),(0,b2.jsx)(En.List,{children:r.map(e=>(0,b2.jsx)(En.Tab,{"data-test":`${e.name.toLowerCase()}-tab`,value:e.name,children:e.name},e.name))}),r.map(e=>(0,b2.jsx)(En.Panel,{value:e.name,children:e.tabPanel},e.name))]})})}),MN=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,onClick:o,label:i,...l}=e;return gN(l),(0,b2.jsx)(EC,{size:"xs","aria-label":i,className:n,ref:t,onClick:o,...l,children:r})}),M5=(0,r.forwardRef)((e,t)=>{let{className:n,accept:r,value:o,placeholder:i,onChange:l,...s}=e;return gN(s),(0,b2.jsx)(E6,{size:"xs",className:n,ref:t,accept:r,value:o,placeholder:i,onChange:l,...s})}),M7=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,...o}=e;return gN(o),(0,b2.jsx)("div",{className:n,ref:t,children:r})}),ML=(0,r.forwardRef)((e,t)=>{let{className:n,value:r,placeholder:o,onKeyDown:i,onChange:l,...s}=e;return gN(s),(0,b2.jsx)(CL,{size:"xs","data-test":"embed-input",className:n,ref:t,value:r,placeholder:o,onKeyDown:i,onChange:l})}),MP=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,variant:o,...i}=e;return gN(i),(0,b2.jsx)(Sb,{className:n,ref:t,children:r})}),MA=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,...o}=e;return gN(o,!1),(0,b2.jsx)(SB,{align:"center",gap:0,className:n,ref:t,...o,children:r})}),MR=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,icon:o,onClick:i,onDragEnd:l,onDragStart:s,draggable:a,label:c,...d}=e;return gN(d,!1),o?(0,b2.jsx)(ER,{size:24,className:n,ref:t,onClick:i,onDragEnd:l,onDragStart:s,draggable:a,"aria-label":c,...d,children:o}):(0,b2.jsx)(EC,{className:n,ref:t,onClick:i,onDragEnd:l,onDragStart:s,draggable:a,"aria-label":c,...d,children:r})}),MO=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,id:o,columns:i,...l}=e;return gN(l),(0,b2.jsx)("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:t,id:o,role:"grid",children:r})}),MD=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,columns:o,...i}=e;return gN(i),(0,b2.jsx)(SB,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:t,children:(0,b2.jsx)(SB,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),MI=(0,r.forwardRef)((e,t)=>{let{className:n,isSelected:o,onClick:i,item:l,id:s,...a}=e;gN(a);let c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!c.current||!o)return;let e=xg(c.current,document.querySelector(".bn-grid-suggestion-menu"));"top"===e?c.current.scrollIntoView(!0):"bottom"===e&&c.current.scrollIntoView(!1)},[o]),(0,b2.jsx)("div",{className:n,ref:CU(t,c),id:s,role:"option",onClick:i,"aria-selected":o||void 0,children:l.icon})}),MH=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,columns:o,...i}=e;return gN(i),(0,b2.jsx)(Ed,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:t})}),Mz=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,id:o,...i}=e;return gN(i),(0,b2.jsx)(EH,{gap:0,className:n,ref:t,id:o,role:"listbox",children:r})}),M9=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,...o}=e;return gN(o),(0,b2.jsx)(SB,{className:n,ref:t,children:(0,b2.jsx)(SB,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),MB=(0,r.forwardRef)((e,t)=>{let{className:n,isSelected:o,onClick:i,item:l,id:s,...a}=e;gN(a);let c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!c.current||!o)return;let e=xg(c.current,document.querySelector(".bn-suggestion-menu"));"top"===e?c.current.scrollIntoView(!0):"bottom"===e&&c.current.scrollIntoView(!1)},[o]),(0,b2.jsxs)(SB,{gap:0,className:n,ref:CU(t,c),id:s,role:"option",onClick:i,"aria-selected":o||void 0,children:[l.icon&&(0,b2.jsx)(SB,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:l.icon}),(0,b2.jsxs)(EH,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[(0,b2.jsx)(EV,{className:"bn-mt-suggestion-menu-item-title",children:l.title}),(0,b2.jsx)(EV,{className:"bn-mt-suggestion-menu-item-subtitle",children:l.subtext})]}),l.badge&&(0,b2.jsx)(SB,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:(0,b2.jsx)(EW,{size:"xs",children:l.badge})})]})}),MV=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,...o}=e;return gN(o),(0,b2.jsx)(SB,{className:n,ref:t,children:r})}),Mj=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,...o}=e;return gN(o),(0,b2.jsx)(Ed,{className:n,type:"dots",ref:t})}),MF=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,draggable:o,onDragStart:i,onDragEnd:l,style:s,label:a,...c}=e;return gN(c,!1),(0,b2.jsx)(EC,{className:n,ref:t,"aria-label":a,draggable:o,onDragStart:i,onDragEnd:l,style:s,...c,children:r})}),MU=(0,r.forwardRef)((e,t)=>{let{children:n,className:r,onMouseDown:o,onClick:i,...l}=e;return gN(l,!1),(0,b2.jsx)(EC,{className:r,ref:t,onMouseDown:o,onClick:i,...l,children:n})}),MW=(0,r.forwardRef)((e,t)=>{let{className:n,children:o,onMouseEnter:i,onMouseLeave:l,...s}=e;gN(s);let{ref:a,focused:c}=function e(){let{onBlur:t,onFocus:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,r.useRef)(),[i,l]=(0,r.useState)(!1),s=(0,r.useRef)(!1),a=e=>{l(e),s.current=e},c=e=>{s.current||(a(!0),n?.(e))},d=e=>{var n;!s.current||(n=e).currentTarget instanceof HTMLElement&&n.relatedTarget instanceof HTMLElement&&n.currentTarget.contains(n.relatedTarget)||(a(!1),t?.(e))};return(0,r.useEffect)(()=>{if(o.current)return o.current.addEventListener("focusin",c),o.current.addEventListener("focusout",d),()=>{o.current?.removeEventListener("focusin",c),o.current?.removeEventListener("focusout",d)}},[c,d]),{ref:o,focused:i}}(),d=CU(t,a,Sr(c));return(0,b2.jsx)(SB,{className:n,ref:d,role:"toolbar",onMouseEnter:i,onMouseLeave:l,children:o})}),MG=e=>(0,b2.jsxs)(EH,{gap:0,className:"bn-tooltip",children:[(0,b2.jsx)(EV,{size:"sm",children:e.mainTooltip}),e.secondaryTooltip&&(0,b2.jsx)(EV,{size:"xs",children:e.secondaryTooltip})]}),Mq=(0,r.forwardRef)((e,t)=>{let{className:n,children:r,mainTooltip:o,secondaryTooltip:i,icon:l,isSelected:s,isDisabled:a,onClick:c,label:d,...u}=e;return gN(u,!1),(0,b2.jsx)(Mr,{withinPortal:!1,label:(0,b2.jsx)(MG,{mainTooltip:o,secondaryTooltip:i}),children:r?(0,b2.jsx)(EC,{"aria-label":d,className:n,onMouseDown(e){gY()&&e.currentTarget.focus()},onClick:c,"aria-pressed":s,"data-selected":s||void 0,"data-test":o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1),size:"xs",disabled:a||!1,ref:t,...u,children:r}):(0,b2.jsx)(ER,{className:n,"aria-label":d,onMouseDown(e){gY()&&e.currentTarget.focus()},onClick:c,"aria-pressed":s,"data-selected":s||void 0,"data-test":o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1),size:30,disabled:a||!1,ref:t,...u,children:l})})}),MK=(0,r.forwardRef)((e,t)=>{let{className:n,items:r,isDisabled:o,...i}=e;gN(i);let l=r.filter(e=>e.isSelected)[0];return l?(0,b2.jsxs)(SD,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[(0,b2.jsx)(SD.Target,{children:(0,b2.jsx)(EC,{onMouseDown(e){gY()&&e.currentTarget.focus()},leftSection:l.icon,rightSection:(0,b2.jsx)(M1,{}),size:"xs",variant:"subtle",disabled:o,children:l.text})}),(0,b2.jsx)(SD.Dropdown,{className:n,ref:t,children:r.map(e=>(0,b2.jsx)(SD.Item,{onClick:e.onClick,leftSection:e.icon,rightSection:e.isSelected?(0,b2.jsx)(SI,{size:10,className:"bn-tick-icon"}):(0,b2.jsx)("div",{className:"bn-tick-space"}),disabled:e.isDisabled,children:e.text},e.text))})]}):null}),MJ={FormattingToolbar:{Root:MW,Button:Mq,Select:MK},FilePanel:{Root:M6,Button:MN,FileInput:M5,TabPanel:M7,TextInput:ML},GridSuggestionMenu:{Root:MO,Item:MI,EmptyItem:MD,Loader:MH},LinkToolbar:{Root:MW,Button:Mq},SideMenu:{Root:MA,Button:MR},SuggestionMenu:{Root:Mz,Item:MB,EmptyItem:M9,Label:MV,Loader:Mj},TableHandle:{Root:MF,ExtendButton:MU},Generic:{Form:{Root:e=>(0,b2.jsx)("div",{children:e.children}),TextInput:M_},Menu:{Root(e){let{children:t,onOpenChange:n,position:r,sub:o,...i}=e;return gN(i),o?(0,b2.jsx)(ME,{...e}):(0,b2.jsx)(SD,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onClose:()=>null==n?void 0:n(!1),onOpen:()=>null==n?void 0:n(!0),position:r,children:t})},Trigger(e){let{children:t,sub:n,...r}=e;return gN(r),(0,b2.jsx)(SD.Target,{children:t})},Dropdown:MM,Divider:MT,Label:M8,Item:M4},Popover:{Root(e){let{children:t,opened:n,position:r,...o}=e;return gN(o),(0,b2.jsx)(Sx,{withinPortal:!1,zIndex:1e4,opened:n,position:r,children:t})},Trigger(e){let{children:t,...n}=e;return gN(n),(0,b2.jsx)(Sv,{children:t})},Content:MP}}},MZ={activeClassName:""},MX=e=>{let{className:t,theme:n,...o}=e,i=wa(),l=kq(),s=(null==i?void 0:i.colorSchemePreference)||l,a=(0,r.useCallback)(e=>{var t;if(e&&(Mm(M$,e,!0),"object"==typeof n))return"light"in n&&"dark"in n?void Mg(n["dark"===s?"dark":"light"],e):void Mg(n,e)},[s,n]);return(0,b2.jsx)(wh.Provider,{value:MJ,children:(0,b2.jsx)(Mf,{theme:MZ,cssVariablesSelector:".bn-mantine",getRootElement(){},children:(0,b2.jsx)(kQ,{className:gQ("bn-mantine",t||""),theme:"object"==typeof n?void 0:n,...o,ref:a})})})};return{createRoot:i.createRoot,react:r,blockSpec:xr,textOption:$n,slashMenu:bS,jsx:b2.jsx,blcokSpecCreate:bf.create,defaultSpec:_h,schemaConfig:xm,blocknoteMain:MX,slashMenuChild:k7,slashMenuSetting:b1,defaultMenuItem:k5}}